<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta name="viewport" content="width=device-width, initial-scale=1">



  <title>
    A complete React with Apollo and GraphQL Tutorial - CPaul
  </title>

  <meta name="author" content="" />
  <meta name="description"
    content="This React with Apollo and GraphQL tutorial shows you how to use GraphQL in your React application by consuming GitHub&#39;s GraphQL API. You will use Apollo for your query and mutation implementations on the client-side of your React application. This Apollo in React tutorial attempts to teach you using Apollo in React from zero to one ...">


  <meta name="theme-color" content="#38bb6c" />

  <meta name="generator" content="Hugo 0.41" />
  <link href="https://cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
  <link href="../css/bootstrap.default.css" rel="stylesheet" id="theme-stylesheet">
  <link href="../css/customizations.css" rel="stylesheet">

  <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

  <link rel="shortcut icon" href="../img/favicon/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="../img/favicon/apple-touch-icon.png" />
  <link rel="manifest" href="../img/favicon/manifest.json">
  <link rel="mask-icon" href="../img/favicon/safari-pinned-tab.svg" color="#5bbad5">

  <link rel="alternate" href="../index.xml" type="application/rss+xml" title="CPaul">

  <meta itemprop="name" content="A complete React with Apollo and GraphQL Tutorial">
  <meta itemprop="description"
    content="This React with Apollo and GraphQL tutorial shows you how to use GraphQL in your React application by consuming GitHub&#39;s GraphQL API. You will use Apollo for your query and mutation implementations on the client-side of your React application. This Apollo in React tutorial attempts to teach you using Apollo in React from zero to one ...">
  <meta itemprop="image" content="https://chrispaul.dev/img/posts/react-graphql-apollo-tutorial/banner_640.jpg">
  <meta itemprop="keywords"
    content="angular,apollo,d3,graphql,growth,javascript,machine-learning,mobx,node,react,reason,redux,tooling,vue,web-development,angular,apollo,d3,graphql,growth,javascript,machine-learning,mobx,node,react,reason,redux,tooling,web-development," />


  <meta itemprop="wordCount" content="16764">

  <meta name="keywords"
    content="react graphql apollo tutorial, react with graphql apollo tutorial, react graphql apollo book, react apollo book, react apollo example, react apollo query, react apollo mutation, react apollo client, react apollo demo">

  <meta property="og:title" content="A complete React with Apollo and GraphQL Tutorial - CPaul">


  <meta property="og:description"
    content="This React with Apollo and GraphQL tutorial shows you how to use GraphQL in your React application by consuming GitHub&#39;s GraphQL API. You will use Apollo for your query and mutation implementations on the client-side of your React application. This Apollo in React tutorial attempts to teach you using Apollo in React from zero to one ..." />


  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://chrispaul.dev/react-graphql-apollo-tutorial/" />
  <meta property="og:image" content="https://chrispaul.dev/img/posts/react-graphql-apollo-tutorial/banner_640.jpg" />



  <meta name="news_keywords"
    content="react graphql apollo tutorial,react with graphql apollo tutorial,react graphql apollo book,react apollo book,react apollo example,react apollo query,react apollo mutation,react apollo client,react apollo demo" />



  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:image:src"
    content="https://chrispaul.dev/img/posts/react-graphql-apollo-tutorial/banner_640.jpg" />
  <meta name="twitter:title" content="A complete React with Apollo and GraphQL Tutorial" />
  <meta name="twitter:description"
    content="This React with Apollo and GraphQL tutorial shows you how to use GraphQL in your React application by consuming GitHub&#39;s GraphQL API. You will use Apollo for your query and mutation implementations on the client-side of your React application. This Apollo in React tutorial attempts to teach you using Apollo in React from zero to one ..." />
  <meta name="twitter:site" content="@rwieruch" />
  <meta name="twitter:domain" content="rwieruch" />



</head>


<body>

  <div id="all">

    <header>

      <div class="navbar-affixed-top" data-spy="affix" data-offset-top="200">

        <div class="navbar navbar-default yamm" role="navigation" id="navbar">

          <div class="container">
            <div class="navbar-header">
              <a class="navbar-brand home" href="../index.html">
                <img src="../img/page/logo.svg" alt="A complete React with Apollo and GraphQL Tutorial logo"
                  class="img-lazy">
                <span class="sr-only">A complete React with Apollo and GraphQL Tutorial - go to homepage</span>
              </a>

              <div class="navbar-buttons">
                <button type="button" class="navbar-toggle btn-template-main" data-toggle="collapse"
                  data-target="#navigation">
                  <span class="sr-only">Toggle navigation</span>
                  <i class="fa fa-align-justify"></i>
                </button>
              </div>
            </div>


            <div class="navbar-collapse collapse" id="navigation">
              <ul class="nav navbar-nav navbar-right">

                <li class="dropdown">

                  <a href="../index.html">Blog</a>

                </li>

                <li class="dropdown">

                  <a href="../work-with-me/index.html">Work with me</a>

                </li>

                <li class="dropdown">

                  <a href="../about/index.html">About</a>

                </li>

                <li class="dropdown">

                  <a style="color: #38bb6c" href="https://roadtoreact.com/">Books &amp; Courses</a>

                </li>

              </ul>
            </div>


            <div class="collapse clearfix" id="search">

              <form class="navbar-form" role="search">
                <div class="input-group">
                  <input type="text" class="form-control" placeholder="Search">
                  <span class="input-group-btn">

                    <button type="submit" class="btn btn-template-main"><i class="fa fa-search"></i></button>

                  </span>
                </div>
              </form>

            </div>


          </div>
        </div>


      </div>
    </header>

    

    



    <div class="hidden-xs">


      <section class="bar background-image-fixed-2 no-mb color-white text-center">
        <div class="dark-mask"></div>
        <div class="container">
          <div class="row">
            <div class="col-md-12">
              <h3 class="lead">Never miss an article about web development, JavaScript and self-growth.</h3>
              <h2 class="text-uppercase newsletter">Take Part</h2>
            </div>

            <div class="col-md-12">
              <p class="text-center">
                <div id="mc_embed_signup">
                  <form action="https://www.getrevue.co/profile/rwieruch/add_subscriber" method="post" id="revue-form"
                    name="revue-form" target="_blank">
                    <div id="mc_embed_signup_scroll">
                      <input class="email" placeholder="email address" type="email" name="member[email]"
                        id="member_email">
                      <div>
                        <button type="submit" value="Subscribe" name="member[subscribe]" id="member_submit"
                          class="btn btn-template-transparent-black btn-lg">
                          Subscribe
                        </button>
                      </div>
                    </div>
                  </form>
                </div>

              </p>
            </div>
          </div>
        </div>
      </section>
    </div>

    <div id="content">
      <div class="container">

        <div class="row">

          <article class="col-md-8 col-md-offset-2" id="blog-post" itemprop="blogPosts" itemscope
            itemtype="http://schema.org/BlogPosting">

            <div id="post-content" itemprop="articleBody">

              <header>
                <h1 itemprop="name headline">A complete React with Apollo and GraphQL Tutorial</h1>
              </header>

              

              <p class="text-muted text-uppercase mb-small text-center">
                <span itemprop="author publisher">

                </span>


                <time datetime="2018-05-01" itemprop="datePublished">
                  May 1, 2018
                </time>



                <span class="hidden-xs hidden-sm"> - <a target="_blank" rel="noopener noreferrer"
                    href="https://github.com/rwieruch/blog_chriswieruch_content/blob/master/react-graphql-apollo-tutorial.md">
                    Edit this Post on GitHub
                  </a>
                </span>

              </p>



              <div>


              </div>

              <div class="post-image-primary">
                <div class="pinterest-pinner-wrapper" itemscope itemtype="http://schema.org/ImageObject">
                  <div class="pinterest-pinner">
                    <a data-pin-do="buttonPin" data-pin-save="true" data-pin-tall="true"
                      href="https://www.pinterest.com/pin/create/button/?url=https%3a%2f%2fchrispaul.dev%2freact-graphql-apollo-tutorial%2f&amp;media=https://chrispaul.dev/img%2fposts%2freact-graphql-apollo-tutorial%2fbanner.jpg&amp;description=">
                    </a>
                  </div>

                  <img class="img-lazy img-responsive"
                    data-lazy-src="/src="/img/posts/react-graphql-apollo-tutorial/banner.jpg"
                    data-is-src-set="is-src-set" alt="react graphql apollo tutorial" itemprop="image" />
                </div>
              </div>


              <p>
                <em>
                  Interested in reading this tutorial as one of many chapters in my GraphQL book? Checkout the entire <a
                    href="https://roadtoreact.com">The Road to GraphQL</a> book that teaches you to become a fullstack
                  developer with JavaScript.
                </em>
              </p>

              <div class="read-before">
                <p>This tutorial is part 5 of 5 in this series.</p>
                <div>Part 1: <a href="../getting-started-github-graphql-api/index.html" itemprop="url">Getting Started
                    with GitHub&#39;s GraphQL API</a></div>
                <div>Part 2: <a href="../graphql-tutorial/index.html" itemprop="url">A GraphQL Tutorial for
                    Beginners</a></div>
                <div>Part 3: <a href="../react-with-graphql-tutorial/index.html" itemprop="url">A complete React with
                    GraphQL Tutorial</a></div>
                <div>Part 4: <a href="../graphql-apollo-client-tutorial/index.html" itemprop="url">A Apollo Client
                    Tutorial for Beginners</a></div>
              </div>

              <p>In this tutorial, you will learn how to combine React with GraphQL in your application using Apollo.
                The Apollo toolset can be used to create a GraphQL client, GraphQL server, and other complementary
                applications, but you will use the Apollo Client for your React client-side application. Along the way,
                you will build a simplified GitHub client that consumes <a target="_blank" rel="noopener noreferrer"
                  href="https://developer.github.com/v4/">GitHub&rsquo;s GraphQL API</a> using Apollo instead of plain
                HTTP requests like the previous application. Apollo Client can be used to perform queries and mutations,
                and to read and write data. By the end, you should be able to showcase a React application using GraphQL
                and Apollo that can be used by other developers as a learning tool. You can find the final project as a
                <a target="_blank" rel="noopener noreferrer"
                  href="https://github.com/rwieruch/react-graphql-github-apollo">repository on GitHub</a>.</p>

              <div class="box-inline col-md-12">
                <div class="col-md-12 text-center">
                  <h2 class="newsletter">The Road to learn React</h2>
                  <div class="col-md-4">
                    <img class="img-lazy img-responsive" data-lazy-src="//img/page/cover.png" alt="package">
                  </div>
                  <p class="lead">
                    Build a Hacker News App along the way. No setup configuration. No tooling. No Redux. Plain React in
                    200+ pages of learning material. Pay what you want like <strong>50.000+ readers</strong>.
                  </p>
                  <a class="btn btn-template-main" href="https://roadtoreact.com/" target="_blank"
                    rel="noopener noreferrer">
                    Get the Book <i class="fa fa-chevron-right"></i>
                  </a>
                </div>
              </div>


              <h2 class="chapter-header" id="toc">Table of Contents</h2>

              <ul>
                <li><a href="#react-graphql-apollo-client">Writing your first React application with GraphQL and Apollo
                    Client</a></li>
                <li><a href="#react-apollo-client-configuration">Configure Apollo Client for React and GitHub&rsquo;s
                    GraphQL API</a></li>
                <li><a href="#react-apollo-connecting-layers">Connect Data-Layer to View-Layer: Introducing React
                    Apollo</a></li>
                <li><a href="#react-apollo-client-query">GraphQL Query with Apollo Client in React</a></li>
                <li><a href="#react-apollo-client-error-handling">Apollo Client Error Handling in React</a></li>
                <li><a href="#react-apollo-client-mutations">GraphQL Mutation with Apollo Client in React</a></li>
                <li><a href="#react-apollo-client-query-mutation-higher-order-component">GraphQL Query/Mutation with
                    Higher-Order Components in React</a></li>
                <li><a href="#react-apollo-client-local-state-management">Local State Management with Apollo Client in
                    React</a></li>
                <li><a href="#react-apollo-client-optimistic-ui">Apollo Client Optimistic UI in React</a></li>
                <li><a href="#react-apollo-client-pagination">GraphQL Pagination with Apollo Client in React</a></li>
                <li><a href="#react-apollo-client-caching">GraphQL Caching of Queries with Apollo Client in React</a>
                </li>
                <li><a href="#react-apollo-client-feature-setup">Implementing the Issues Feature: Setup</a></li>
                <li><a href="#react-apollo-client-feature-client-filter">Implementing the Issues Feature: Client-Side
                    Filter</a></li>
                <li><a href="#react-apollo-client-feature-server-filter">Implementing the Issues Feature: Server-Side
                    Filter</a></li>
                <li><a href="#react-apollo-client-prefetching-data">Apollo Client Prefetching in React</a></li>
                <li><a href="#react-apollo-client-exercise">Exercise: Commenting Feature</a></li>
                <li><a href="#appendix-styling">Appendix: CSS Files and Styles</a></li>
              </ul>

              <h2 class="chapter-header" id="react-graphql-apollo-client">Writing your first React application with
                GraphQL and Apollo Client</h2>

              <p>Now we&rsquo;ll focus on using Apollo Client in React by building another client application.
                Basically, you will learn how to connect the data-layer to the view-layer. We&rsquo;ll cover how to send
                queries and mutations from the view-layer, and how to update the view-layer to reflect the result.
                Further, you will learn to use GraphQL features like pagination, optimistic UI, caching, local state
                management, and prefetching with Apollo Client in React.</p>

              <p>For this application, no elaborate React setup is needed. Simply use <a
                  href="https://github.com/facebook/create-react-app">create-react-app</a> to create your React
                application. If you want to have an elaborate React setup instead, see this <a
                  href="../minimal-react-webpack-babel-setup/index.html">setup guide for using Webpack with React</a>.
                To get started, the following steps have to be performed:</p>

              <ul>
                <li>Create a new React application with create-react-app</li>
                <li>Create a folder/file structure for your project (recommendation below)</li>
              </ul>

              <p>You can create your own folder and file structure for your components in the <em>src/</em> folder; the
                following top level structure is only a recommendation. If you adjust it to your own needs, keep in mind
                that the JavaScript import statements with their paths will need to be adjusted to match. If you
                don&rsquo;t want to create everything, you can clone this <a target="_blank" rel="noopener noreferrer"
                  href="https://github.com/the-road-to-graphql/react-graphql-github-apollo-starter-kit">GitHub
                  repository</a> instead and follow its installation instructions.</p>

              <ul>
                <li>App/

                  <ul>
                    <li>index.js</li>
                  </ul>
                </li>
                <li>Button/</li>
                <li>Error/</li>
                <li>FetchMore/</li>
                <li>Input/</li>
                <li>Issue/

                  <ul>
                    <li>IssueList/</li>
                    <li>IssueItem/</li>
                    <li>index.js</li>
                  </ul>
                </li>
                <li>Link/</li>
                <li>Loading/</li>
                <li>Organization/</li>
                <li>Profile/</li>
                <li>Repository/

                  <ul>
                    <li>RepositoryList/</li>
                    <li>RepositoryItem/</li>
                    <li>index.js</li>
                  </ul>
                </li>
                <li>TextArea/</li>
                <li>constants/

                  <ul>
                    <li>routes.js</li>
                  </ul>
                </li>
                <li>index.js</li>
                <li>serviceWorker.js</li>
                <li>style.css</li>
              </ul>

              <p>The folders primarily represent React components. Some components will be reusable UI components such
                as the Input and Link components, while other components like Repository and Profile components are
                domain specific for the GitHub client application. Only the top level folders are specified for now,
                though more can be introduced later if you choose. Moreover, the <em>constants</em> folder has only one
                file to specify the application&rsquo;s routes, which will be introduced later. You may want to navigate
                from a page that shows repositories of an organization (Organization component) to a page which shows
                repositories of yourself (Profile component).</p>

              <p>This application will use plain CSS classes and CSS files. By following the plain CSS classes, you can
                avoid difficulties that may occur with other tools. You will find all the CSS files and their content in
                the appendix section for this application. The components will use their class names without explaining
                them. The next sections should be purely dedicated to JavaScript, React, and GraphQL.</p>

              <h3 id="exercises">Exercises:</h3>

              <ul>
                <li>If you are not familiar with React, read up <em>The Road to learn React</em></li>
                <li>Set up the recommended folder/file structure (if you are not going with your own structure and
                  didn&rsquo;t clone the repository)

                  <ul>
                    <li>Create the CSS <em>style.css</em> files in their specified folders from the CSS appendix section
                    </li>
                    <li>Create the <em>index.js</em> files for the components</li>
                    <li>Create further folders on your own for non top level components (e.g. Navigation) when
                      conducting the following sections</li>
                  </ul>
                </li>
                <li>Run the application with <code>npm start</code>

                  <ul>
                    <li>Make sure there are no errors</li>
                    <li>Render only a basic App component with <em>src/App/index.js</em> in the <em>src/index.js</em>
                      file</li>
                  </ul>
                </li>
                <li>Invest 3 minutes of your time and take the <a target="_blank" rel="noopener noreferrer"
                    href="https://www.surveymonkey.com/r/5N9W2WR">quiz</a></li>
              </ul>

              <h2 class="chapter-header" id="react-apollo-client-configuration">Configure Apollo Client for React and
                GitHub&#39;s GraphQL API</h2>

              <p>In this section, you will set up an Apollo Client instance like we did previously. However, this time
                you will use Apollo Client directly without the zero-configuration package Apollo Boost, meaning
                you&rsquo;ll need to configure the Apollo Client yourself without sensible defaults. While it&rsquo;s
                best to use a tool with sensible defaults for learning, configuring Apollo yourself exposes the
                composable ecosystem of Apollo Client, how to use it for an initial setup, and how to advance this setup
                later.</p>

              <p>The Apollo Client setup can be completed in the top-level <em>src/index.js</em> file, where the React
                to HTML entry point exists as well. First, install the Apollo Client in your project folder using the
                command line:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #06b6ef">apollo</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">client</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span>
</code></pre>
              </div>


              <p>Two utility packages are required for two mandatory configurations used to create the Apollo Client.
                The <a target="_blank" rel="noopener noreferrer"
                  href="https://github.com/apollographql/apollo-client/tree/master/packages/apollo-cache-inmemory">apollo-cache-inmemory</a>
                is a recommended cache (read also as: store or state) for your Apollo Client to manage the data, while
                apollo-link-http is used to configure the URI and additional network information once for an Apollo
                Client instance.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #06b6ef">apollo</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">cache</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">inmemory</span> <span style="color: #06b6ef">apollo</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">link</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">http</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span>
</code></pre>
              </div>


              <p>As you can see, nothing has been mentioned about React, only the Apollo Client plus two packages for
                its configuration. There are two additional packages required for Apollo Client to work with GraphQL, to
                be used as internal dependencies by Apollo. The latter is also used to define queries and mutations.
                Previously, these utilities came directly from Apollo Boost.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #06b6ef">graphql</span> <span style="color: #06b6ef">graphql</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">tag</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span>
</code></pre>
              </div>


              <p>That&rsquo;s it for package installation, so now we enter the Apollo Client setup and configuration. In
                your top level <em>src/index.js</em> file, where all the Apollo Client setup will be done in this
                section, import the necessary classes for the Apollo Client setup from the previously installed
                packages.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">ReactDOM</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-dom&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">ApolloClient</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;apollo-client&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">HttpLink</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;apollo-link-http&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">InMemoryCache</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;apollo-cache-inmemory&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #815ba4">import</span> <span style="color: #48b685">&#39;./style.css&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">App</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./App&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #e7e9db">...</span>
</code></pre>
              </div>


              <p>The <code>ApolloClient</code> class is used to create the client instance, and the
                <code>HttpLink</code> and <code>InMemoryCache</code> are used for its mandatory configurations. First,
                you can create a configured <code>HttpLink</code> instance, which will be fed to the Apollo Client
                creation.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">GITHUB_BASE_URL</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">&#39;https://api.github.com/graphql&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">httpLink</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">new</span> <span style="color: #06b6ef">HttpLink</span><span style="color: #e7e9db">({</span>
  <span style="color: #06b6ef">uri</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">GITHUB_BASE_URL</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">headers</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">authorization</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">`Bearer </span><span style="color: #f99b15">${</span>
      <span style="color: #06b6ef">process</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">env</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">REACT_APP_GITHUB_PERSONAL_ACCESS_TOKEN</span>
    <span style="color: #f99b15">}</span><span style="color: #48b685">`</span><span style="color: #e7e9db">,</span>
  <span style="color: #e7e9db">},</span>
<span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>You may recall the mandatory configuration from previous applications. The <code>uri</code> is a
                mandatory value to define the only GraphQL API endpoint used by the Apollo Client. In this case,
                Github&rsquo;s GraphQL endpoint is passed as value. When consuming the GitHub GraphQL API, you have to
                authorize yourself with your personal access token. You should have already created the token in a
                previous section, which you can now define in a <em>.env</em> file in your project folder. Afterward, it
                should be accessible with <code>process.env</code>. Keep in mind that you have to use the
                <code>REACT_APP</code> prefix when using create-react-app, because that&rsquo;s how it is required by
                create-react-app. Otherwise, you would be free to choose your own naming for it.</p>

              <p>Second, create the cache as the place where the data is managed in Apollo Client. The cache normalizes
                your data, caches requests to avoid duplicates, and makes it possible to read and write data to the
                cache. You will use it multiple times while developing this application. The cache instantiation is
                straightforward, as it doesn&rsquo;t require you to pass any arguments to it. Check the API to explore
                further configurations.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">cache</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">new</span> <span style="color: #06b6ef">InMemoryCache</span><span style="color: #e7e9db">();</span>
</code></pre>
              </div>


              <p>Finally, you can use both instantiated configurations, the link and the cache, to create the instance
                of the Apollo Client in the <em>src/index.js</em> file.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">client</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">new</span> <span style="color: #06b6ef">ApolloClient</span><span style="color: #e7e9db">({</span>
  <span style="color: #06b6ef">link</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">httpLink</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">cache</span><span style="color: #e7e9db">,</span>
<span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>To initialize Apollo Client, you must specify link and cache properties on the config object. Once you
                start your application again, there should be no errors. If there are any, check whether you have
                implemented a basic App component in your <em>src/App/index.js</em> file because the ReactDOM API needs
                to hook this component into the HTML.</p>

              <h3 id="exercises-1">Exercises:</h3>

              <ul>
                <li>Confirm your <a href="http://bit.ly/2CYjRdg">source code for the last section</a>

                  <ul>
                    <li>Confirm the <a href="http://bit.ly/2VqgK4W">changes from the last section</a></li>
                  </ul>
                </li>
                <li>Read more about <a target="_blank" rel="noopener noreferrer"
                    href="https://www.apollographql.com/docs/react/advanced/network-layer.html">the network layer
                    configuration in Apollo Client</a></li>
                <li>Invest 3 minutes of your time and take the <a target="_blank" rel="noopener noreferrer"
                    href="https://www.surveymonkey.com/r/5FYZT8T">quiz</a></li>
              </ul>

              <h2 class="chapter-header" id="react-apollo-connecting-layers">Connect Data-Layer to View-Layer:
                Introducing React Apollo</h2>

              <p>All we&rsquo;ve done thus far has been the framework agnostic part of Apollo Client. However, without
                connecting React to it, you&rsquo;d have a hard time making effective use of GraphQL. That&rsquo;s why
                there is an official library to connect both worlds: <a target="_blank" rel="noopener noreferrer"
                  href="https://github.com/apollographql/react-apollo">react-apollo</a>. The great thing about those
                connecting libraries is that there are solutions for other view-layer solutions like Angular and Vue,
                too, so you can use the Apollo Client in a framework agnostic way. In the following, it needs two steps
                to connect the Apollo Client with React. First, install the library in the command line in your project
                folder:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #06b6ef">react</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">apollo</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span>
</code></pre>
              </div>


              <p>Second, import its ApolloProvider component, and use it as a composing component around your App
                component in the <em>src/index.js</em> file. Under the hood, it uses <a
                  href="../react-context-api/index.html">React&rsquo;s Context API</a> to pass the Apollo Client through
                your application.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">ReactDOM</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-dom&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">ApolloProvider</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-apollo&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">ApolloClient</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;apollo-client&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">HttpLink</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;apollo-link-http&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">InMemoryCache</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;apollo-cache-inmemory&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #e7e9db">...</span>

<span style="color: #06b6ef">ReactDOM</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">render</span><span style="color: #e7e9db">(</span>
<span style="background-color: #4f424c">  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ApolloProvider</span> <span style="color: #06b6ef">client</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">client</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
</span>    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">App</span> <span style="color: #5bc4bf">/&gt;</span>
<span style="background-color: #4f424c">  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ApolloProvider&gt;,</span>
</span>  <span style="color: #e7e9db">document.</span><span style="color: #06b6ef">getElementById</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;root&#39;</span><span style="color: #e7e9db">)</span>
<span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>Now you have implicit access to the Apollo Client in your React view-layer. It says implicit because
                most often you will not use the client explicitly. You will see in the next section what this means.</p>

              <h3 id="exercises-2">Exercises:</h3>

              <ul>
                <li>Confirm your <a href="http://bit.ly/2CZjMWO">source code for the last section</a>

                  <ul>
                    <li>Confirm the <a href="http://bit.ly/2VpXNPO">changes from the last section</a></li>
                  </ul>
                </li>
                <li>Read more about <a target="_blank" rel="noopener noreferrer"
                    href="https://www.apollographql.com/docs/react/essentials/get-started.html">configuring and
                    connecting Apollo Client to React</a></li>
                <li>Invest 3 minutes of your time and take the <a target="_blank" rel="noopener noreferrer"
                    href="https://www.surveymonkey.com/r/5FHMHW8">quiz</a></li>
              </ul>

              <h2 class="chapter-header" id="react-apollo-client-query">GraphQL Query with Apollo Client in React</h2>

              <p>In this section, you will implement your first GraphQL query using Apollo Client in React. You&rsquo;ve
                seen how different entities, such as the current user (viewer) or repositories, can be queried from
                GitHub&rsquo;s GraphQL API. This time you will do it in React. A Profile component might be the best
                place to render the current user and its associated repositories. Start by using the not-yet-implemented
                Profile component in your App component in the <em>src/App/index.js</em> file, which we&rsquo;ll take
                care of next. It makes sense to extract the Profile component now, because the App component will be the
                static frame around the application later. Components like Navigation and Footer are static, and
                components such as Profile and Organization are dynamically rendered based on routing (URLs).</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">Profile</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../Profile&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">    <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Profile</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">;</span>
</span>  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>In your <em>src/Profile/index.js</em> file, add a simple functional stateless component. In the next
                step you will extend it with a GraphQL query.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">Profile</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Profile</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Profile</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Now we&rsquo;ll learn to query data with GraphQL and Apollo Client. The Apollo Client was provided in a
                previous section with React&rsquo;s Context API in a top level component. You have implicit access to
                it, but never use it directly for standard queries and mutations. It says &ldquo;standard&rdquo; here,
                because there will be situations where you use the Apollo Client instance directly while implementing
                this application.</p>

              <p>The React Apollo package grants access to a Query component, which takes a query as prop and executes
                it when its rendered. That&rsquo;s the important part: it executes the query when it is rendered. It
                uses React&rsquo;s <a href="../react-render-props-pattern/index.html">render props</a> pattern, using a
                child as a function implementation where you can access the result of the query as an argument.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Query</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-apollo&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #815ba4">const</span> <span style="color: #06b6ef">Profile</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
<span style="background-color: #4f424c">  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Query</span> <span style="color: #06b6ef">query</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{}</span><span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">My</span> <span style="color: #06b6ef">Profile</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;}</span>
</span><span style="background-color: #4f424c">  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Query&gt;</span>
</span><span style="color: #e7e9db">);</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Profile</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>This is a function that returns only JSX, but you have access to additional information in the function
                arguments. First, define the GraphQL query to request your authorizations. You can use a previously
                installed utility package to define the query.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">gql</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;graphql-tag&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Query</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-apollo&#39;</span><span style="color: #e7e9db">;</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">GET_CURRENT_USER</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">gql</span><span style="color: #48b685">`</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">  {</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">    viewer {</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">      login</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">      name</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">    }</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">  }</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">`</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #815ba4">const</span> <span style="color: #06b6ef">Profile</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
<span style="background-color: #4f424c">  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Query</span> <span style="color: #06b6ef">query</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">GET_CURRENT_USER</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
</span>    <span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">My</span> <span style="color: #06b6ef">Profile</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Query&gt;</span>
<span style="color: #e7e9db">);</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Profile</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Use the children as a function pattern to retrieve the query result as a data object, and render the
                information in your JSX.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">gql</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;graphql-tag&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Query</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-apollo&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">GET_CURRENT_USER</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">gql</span><span style="color: #48b685">`</span>
<span style="color: #48b685">  {</span>
<span style="color: #48b685">    viewer {</span>
<span style="color: #48b685">      login</span>
<span style="color: #48b685">      name</span>
<span style="color: #48b685">    }</span>
<span style="color: #48b685">  }</span>
<span style="color: #48b685">`</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">Profile</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Query</span> <span style="color: #06b6ef">query</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">GET_CURRENT_USER</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
<span style="background-color: #4f424c">    <span style="color: #e7e9db">{({</span> <span style="color: #06b6ef">data</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">      <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">viewer</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">      <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">          <span style="color: #e7e9db">{</span><span style="color: #06b6ef">viewer</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">name</span><span style="color: #e7e9db">}</span> <span style="color: #e7e9db">{</span><span style="color: #06b6ef">viewer</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">login</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">}}</span>
</span>  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Query&gt;</span>
<span style="color: #e7e9db">);</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Profile</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Make sure to give some type of visual feedback until your view-layer can be rendered with actual data:
              </p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">Profile</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Query</span> <span style="color: #06b6ef">query</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">GET_CURRENT_USER</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">{({</span> <span style="color: #06b6ef">data</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
      <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">viewer</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">;</span>

<span style="background-color: #4f424c">      <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #5bc4bf">!</span><span style="color: #06b6ef">viewer</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">        <span style="color: #815ba4">return</span> <span style="color: #815ba4">null</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">}</span>
</span>
      <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #e7e9db">{</span><span style="color: #06b6ef">viewer</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">name</span><span style="color: #e7e9db">}</span> <span style="color: #e7e9db">{</span><span style="color: #06b6ef">viewer</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">login</span><span style="color: #e7e9db">}</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
      <span style="color: #e7e9db">);</span>
    <span style="color: #e7e9db">}}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Query&gt;</span>
<span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>That&rsquo;s how you define a GraphQL query in a declarative way in React. Once the Query component
                renders, the request is executed. The Apollo Client is used, provided in a top level component, to
                perform the query. The render props pattern makes it possible to access the result of the query in the
                child function. You can try it in your browser to verify that it actually works for you.</p>

              <p>There is more information found in the render prop function. Check the official React Apollo API for
                additional information beyond the examples in this application. Next, let&rsquo;s show a loading
                indicator when a query is pending:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">Profile</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Query</span> <span style="color: #06b6ef">query</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">GET_CURRENT_USER</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
<span style="background-color: #4f424c">    <span style="color: #e7e9db">{({</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">loading</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span>      <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">viewer</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">;</span>

<span style="background-color: #4f424c">      <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">loading</span> <span style="color: #5bc4bf">||</span> <span style="color: #5bc4bf">!</span><span style="color: #06b6ef">viewer</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">        <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Loading</span> <span style="color: #e7e9db">...</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;;</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">}</span>
</span>
      <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #e7e9db">{</span><span style="color: #06b6ef">viewer</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">name</span><span style="color: #e7e9db">}</span> <span style="color: #e7e9db">{</span><span style="color: #06b6ef">viewer</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">login</span><span style="color: #e7e9db">}</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
      <span style="color: #e7e9db">);</span>
    <span style="color: #e7e9db">}}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Query&gt;</span>
<span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>The application now shows a loading indicator when there is no <code>viewer</code> object or the
                <code>loading</code> boolean is set to true. As you can assume that the request will be pending when
                there is no <code>viewer</code>, you can show the loading indicator from the beginning. At this point,
                it&rsquo;s best to extract the loading indicator as its own component because you will have to reuse it
                later for other queries. You created a Loading folder for it before, which will house the
                <em>src/Loading/index.js</em> file. Then, use it in your Profile component.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">Loading</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Loading</span> <span style="color: #e7e9db">...</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Loading</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Next, extend the query with a nested list field for querying your own GitHub repositories. You have
                done it a few times before, so the query structure shouldn&rsquo;t be any different now. The following
                query requests a lot of information you will use in this application:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">GET_REPOSITORIES_OF_CURRENT_USER</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">gql</span><span style="color: #48b685">`</span>
</span><span style="color: #48b685">  {</span>
<span style="color: #48b685">    viewer {</span>
<span style="background-color: #4f424c"><span style="color: #48b685">      repositories(</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">        first: 5</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">        orderBy: { direction: DESC, field: STARGAZERS }</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">      ) {</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">        edges {</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">          node {</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">            id</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">            name</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">            url</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">            descriptionHTML</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">            primaryLanguage {</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">              name</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">            }</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">            owner {</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">              login</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">              url</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">            }</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">            stargazers {</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">              totalCount</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">            }</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">            viewerHasStarred</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">            watchers {</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">              totalCount</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">            }</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">            viewerSubscription</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">          }</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">        }</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">      }</span>
</span><span style="color: #48b685">    }</span>
<span style="color: #48b685">  }</span>
<span style="color: #48b685">`</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Use this extended and renamed query in your Query component to request additional information about
                repositories. Pass these repositories from the query result to a new RepositoryList component which
                should do all the rendering for you. It&rsquo;s not the responsibility of the Profile component, and you
                may want to render a list of repositories somewhere else.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">RepositoryList</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../Repository&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">Loading</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../Loading&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #e7e9db">...</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">Profile</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
<span style="background-color: #4f424c">  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Query</span> <span style="color: #06b6ef">query</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">GET_REPOSITORIES_OF_CURRENT_USER</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
</span>    <span style="color: #e7e9db">{({</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">loading</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
      <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">viewer</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">;</span>

      <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">loading</span> <span style="color: #5bc4bf">||</span> <span style="color: #5bc4bf">!</span><span style="color: #06b6ef">viewer</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
        <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Loading</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">;</span>
      <span style="color: #e7e9db">}</span>

<span style="background-color: #4f424c">      <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">RepositoryList</span> <span style="color: #06b6ef">repositories</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">viewer</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">;</span>
</span>    <span style="color: #e7e9db">}}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Query&gt;</span>
<span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>In your <em>src/Repository/index.js</em> file, create your first import/export statements for the
                RepositoryList component from a dedicated file in this folder. The <em>index.js</em> file is used as
                your entry point to this Repository module. Everything used from this module should be accessible by
                importing it from this <em>index.js</em> file.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">RepositoryList</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./RepositoryList&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">RepositoryList</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Next, define the RepositoryList component in your <em>src/Repository/RepositoryList/index.js</em> file.
                The component only takes the array of repositories as props, which will be retrieved by the GraphQL
                query to render a list of RepositoryItem components. The identifier of each repository can be passed as
                key attribute to the rendered list. Otherwise, all props from one repository node are passed to the
                RepositoryItem using the JavaScript spread operator.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">import</span> <span style="color: #06b6ef">RepositoryItem</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../RepositoryItem&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">import</span> <span style="color: #48b685">&#39;../style.css&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">RepositoryList</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">repositories</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span>
  <span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">edges</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(({</span> <span style="color: #06b6ef">node</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">node</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;RepositoryItem&quot;</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">RepositoryItem</span> <span style="color: #e7e9db">{...</span><span style="color: #06b6ef">node</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
  <span style="color: #e7e9db">));</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">RepositoryList</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Finally, define the RepositoryItem component in the <em>src/Repository/RepositoryItem/index.js</em>
                file to render all the queried information about each repository. The file already uses a couple of
                stylings which you may have defined in a CSS file as suggested before. Otherwise, the component renders
                only static information for now.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">import</span> <span style="color: #06b6ef">Link</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../../Link&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">import</span> <span style="color: #48b685">&#39;../style.css&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">RepositoryItem</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span>
  <span style="color: #06b6ef">name</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">url</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">descriptionHTML</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">primaryLanguage</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">owner</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">stargazers</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">watchers</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">viewerSubscription</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">viewerHasStarred</span><span style="color: #e7e9db">,</span>
<span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;RepositoryItem-title&quot;</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">h2</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Link</span> <span style="color: #06b6ef">href</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">url</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">name</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Link&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/h2&gt;</span>

      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;RepositoryItem-title-action&quot;</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #e7e9db">{</span><span style="color: #06b6ef">stargazers</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">totalCount</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">Stars</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>

    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;RepositoryItem-description&quot;</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span>
        <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;RepositoryItem-description-info&quot;</span>
        <span style="color: #06b6ef">dangerouslySetInnerHTML</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{{</span> <span style="color: #06b6ef">__html</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">descriptionHTML</span> <span style="color: #e7e9db">}}</span>
      <span style="color: #5bc4bf">/&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;RepositoryItem-description-details&quot;</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #e7e9db">{</span><span style="color: #06b6ef">primaryLanguage</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #e7e9db">(</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">span</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Language</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span><span style="color: #06b6ef">primaryLanguage</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">name</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/span&gt;</span>
          <span style="color: #e7e9db">)}</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #e7e9db">{</span><span style="color: #06b6ef">owner</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #e7e9db">(</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">span</span><span style="color: #5bc4bf">&gt;</span>
              <span style="color: #06b6ef">Owner</span><span style="color: #5bc4bf">:</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">a</span> <span style="color: #06b6ef">href</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">owner</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">url</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">owner</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">login</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/a&gt;</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/span&gt;</span>
          <span style="color: #e7e9db">)}</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
<span style="color: #e7e9db">);</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">RepositoryItem</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>The anchor element to link to the repository is already extracted as a Link component. The Link
                component in the <em>src/Link/index.js</em> file could look like the following, to make it possible to
                open those URLs in an extra browser tab:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">Link</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">children</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">...</span><span style="color: #06b6ef">props</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">a</span> <span style="color: #e7e9db">{...</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">target</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;_blank&quot;</span> <span style="color: #06b6ef">rel</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;noopener noreferrer&quot;</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">children</span><span style="color: #e7e9db">}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/a&gt;</span>
<span style="color: #e7e9db">);</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Link</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Once you restart your application, you should see a styled list of repositories with a name, url,
                description, star count, owner, and the project&rsquo;s implementation language. If you can&rsquo;t see
                any repositories, check to see if your GitHub account has any public repositories. If it doesn&rsquo;t,
                then it&rsquo;s normal that nothing showed up. I recommend you make yourself comfortable with GitHub by
                creating a couple of repositories, both for the sake of learning about GitHub and to use this data to
                practice with this tutorial. Another way to create repositories for your own account is forking
                repositories from other people.</p>

              <p>What you have done in the last steps of this section were pure React implementation, but this is only
                one opinionated way on how to structure components. The most important part from this section though
                happens in the Profile component. There, you introduced a Query component that takes a query as prop.
                Once the Query component renders, it executes the GraphQL query. The result of the query is made
                accessible as an argument within React&rsquo;s render props pattern.</p>

              <h3 id="exercises-3">Exercises:</h3>

              <ul>
                <li>Confirm your <a href="http://bit.ly/2CZbwpU">source code for the last section</a>

                  <ul>
                    <li>Confirm the <a href="http://bit.ly/2VnYJV7">changes from the last section</a></li>
                  </ul>
                </li>
                <li>Read more about <a target="_blank" rel="noopener noreferrer"
                    href="https://www.apollographql.com/docs/react/essentials/queries.html">queries with Apollo Client
                    in React</a></li>
                <li>Invest 3 minutes of your time and take the <a target="_blank" rel="noopener noreferrer"
                    href="https://www.surveymonkey.com/r/53Q6K3V">quiz</a></li>
              </ul>

              <h2 class="chapter-header" id="react-apollo-client-error-handling">Apollo Client Error Handling in React
              </h2>

              <p>Before diving into GraphQL mutations in React with Apollo Client, this section should clarify error
                handling with Apollo in React. The error handling happens on two levels: the application level and the
                query/mutation level. Both can be implemented with the two cases that follow. On a query level, in your
                Profile component, you have access to the query <code>data</code> and <code>loading</code> properties.
                Apart from these, you can also access the <code>error</code> object, which can be used to show a
                conditional error message.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #815ba4">import</span> <span style="color: #06b6ef">RepositoryList</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../Repository&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">Loading</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../Loading&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">ErrorMessage</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../Error&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #e7e9db">...</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">Profile</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Query</span> <span style="color: #06b6ef">query</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">GET_REPOSITORIES_OF_CURRENT_USER</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
<span style="background-color: #4f424c">    <span style="color: #e7e9db">{({</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">loading</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">error</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">      <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">error</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">        <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ErrorMessage</span> <span style="color: #06b6ef">error</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">error</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">}</span>
</span>
      <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">viewer</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">;</span>

      <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">loading</span> <span style="color: #5bc4bf">||</span> <span style="color: #5bc4bf">!</span><span style="color: #06b6ef">viewer</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
        <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Loading</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">;</span>
      <span style="color: #e7e9db">}</span>

      <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">RepositoryList</span> <span style="color: #06b6ef">repositories</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">viewer</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">;</span>
    <span style="color: #e7e9db">}}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Query&gt;</span>
<span style="color: #e7e9db">);</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Profile</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Whereas the ErrorMessage component from the <em>src/Error/index.js</em> could look like the following:
              </p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">import</span> <span style="color: #48b685">&#39;./style.css&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">ErrorMessage</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">error</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;ErrorMessage&quot;</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">small</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">error</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">toString</span><span style="color: #e7e9db">()}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/small&gt;</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
<span style="color: #e7e9db">);</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">ErrorMessage</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Try to change the name of a field in your query to something not offered by GitHub&rsquo;s GraphQL API,
                and observe what&rsquo;s rendered in the browser. You should see something like this: <em>Error: GraphQL
                  error: Field &lsquo;viewers&rsquo; doesn&rsquo;t exist on type &lsquo;Query&rsquo;</em>. Or, if you
                simulate offline functionality, you&rsquo;ll see: <em>Error: Network error: Failed to fetch</em>.
                That&rsquo;s how errors can be separated into GraphQL errors and network errors. You can handle errors
                on a component or query level, but it will also help with mutations later. To implement error handling
                on an application level, install another Apollo package:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #06b6ef">apollo</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">link</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">error</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span>
</code></pre>
              </div>


              <p>You can import it in your <em>src/index.js</em> file and create such an error link:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">ReactDOM</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-dom&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">ApolloProvider</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-apollo&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">ApolloClient</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;apollo-client&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">HttpLink</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;apollo-link-http&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">onError</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;apollo-link-error&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">InMemoryCache</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;apollo-cache-inmemory&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #e7e9db">...</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">errorLink</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">onError</span><span style="color: #e7e9db">(({</span> <span style="color: #06b6ef">graphQLErrors</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">networkError</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">graphQLErrors</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #776e71">// do something with graphql error</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">networkError</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #776e71">// do something with network error</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">});</span>
</span></code></pre>
              </div>


              <p>You could differentiate the error handling at the application level into development and production
                mode. During development, it might be sufficient to console log the errors to a developer console in the
                browser. In production mode, you can setup an error tracking service like <a target="_blank"
                  rel="noopener noreferrer" href="https://sentry.io">Sentry</a>. It will teach you to identify bugs in a
                web dashboard more efficiently.</p>

              <p>Now you have two links in your application: <code>httpLink</code> and <code>errorLink</code>. To
                combine them for use with the Apollo Client instance, we&rsquo;ll download yet another useful package in
                the Apollo ecosystem that makes link compositions possible in the command line:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #06b6ef">apollo</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">link</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span>
</code></pre>
              </div>


              <p>And second, use it to combine your two links in the <em>src/index.js</em> file:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">ApolloClient</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;apollo-client&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">ApolloLink</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;apollo-link&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">HttpLink</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;apollo-link-http&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">onError</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;apollo-link-error&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">InMemoryCache</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;apollo-cache-inmemory&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #e7e9db">...</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">httpLink</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">...</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">errorLink</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">...</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">link</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">ApolloLink</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">from</span><span style="color: #e7e9db">([</span><span style="color: #06b6ef">errorLink</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">httpLink</span><span style="color: #e7e9db">]);</span>
</span>
<span style="color: #815ba4">const</span> <span style="color: #06b6ef">cache</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">new</span> <span style="color: #06b6ef">InMemoryCache</span><span style="color: #e7e9db">();</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">client</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">new</span> <span style="color: #06b6ef">ApolloClient</span><span style="color: #e7e9db">({</span>
<span style="background-color: #4f424c">  <span style="color: #06b6ef">link</span><span style="color: #e7e9db">,</span>
</span>  <span style="color: #06b6ef">cache</span><span style="color: #e7e9db">,</span>
<span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>That&rsquo;s how two or multiple links can be composed for creating an Apollo Client instance. There
                are several links developed by the community and Apollo maintainers that extend the Apollo Client with
                advanced functionality. Remember, it&rsquo;s important to understand that links can be used to access
                and modify the GraphQL control flow. When doing so, be careful to chain the control flow in the correct
                order. The <code>apollo-link-http</code> is called a <strong>terminating link</strong> because it turns
                an operation into a result that usually occurs from a network request. On the other side, the
                <code>apollo-link-error</code> is a <strong>non-terminating link</strong>. It only enhances your
                terminating link with features, since a terminating link has to be the last entity in the control flow
                chain.</p>

              <h3 id="exercises-4">Exercises:</h3>

              <ul>
                <li>Confirm your <a href="http://bit.ly/2CWx5aA">source code for the last section</a>

                  <ul>
                    <li>Confirm the <a href="http://bit.ly/2Vo7n63">changes from the last section</a></li>
                  </ul>
                </li>
                <li>Read more about <a target="_blank" rel="noopener noreferrer"
                    href="https://www.apollographql.com/docs/react/features/error-handling.html">different Apollo Error
                    types and error policies</a></li>
                <li>Read more about <a target="_blank" rel="noopener noreferrer"
                    href="https://www.apollographql.com/docs/link/">Apollo Links</a></li>
                <li>Read more about <a target="_blank" rel="noopener noreferrer"
                    href="https://www.apollographql.com/docs/link/composition.html">composable Apollo Links</a></li>
                <li>Implement the <a target="_blank" rel="noopener noreferrer"
                    href="https://www.apollographql.com/docs/link/links/retry.html">apollo-link-retry</a> in case a
                  network request fails</li>
                <li>Invest 3 minutes of your time and take the <a target="_blank" rel="noopener noreferrer"
                    href="https://www.surveymonkey.com/r/53HLLFX">quiz</a></li>
              </ul>

              <h2 class="chapter-header" id="react-apollo-client-mutations">GraphQL Mutation with Apollo Client in React
              </h2>

              <p>The previous sections have taught you how to query data with React Apollo and the Apollo Client. In
                this section, you will learn about mutations. As in other applications before, you will implement
                starring a repository with GitHub&rsquo;s exposed <code>addStar</code> mutation.</p>

              <p>The mutation starts out with a variable to identify the repository to be starred. We haven&rsquo;t used
                a variable in Query component yet, but the following mutation works the same way, which can be defined
                in the <em>src/Repository/RepositoryItem/index.js</em> file.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">gql</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;graphql-tag&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #e7e9db">...</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">STAR_REPOSITORY</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">gql</span><span style="color: #48b685">`</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">  mutation($id: ID!) {</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">    addStar(input: { starrableId: $id }) {</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">      starrable {</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">        id</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">        viewerHasStarred</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">      }</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">    }</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">  }</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">`</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #e7e9db">...</span>
</code></pre>
              </div>


              <p>The mutation definition takes the <code>id</code> variable as input for the <code>addStar</code>
                mutation. As before, you can decide what should be returned in case of a successful mutation. Now, you
                can use a Mutation component that represents the previously used Query component, but this time for
                mutations. You have to pass the mutation prop, but also a variable prop for passing the identifier for
                the repository.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">gql</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;graphql-tag&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Mutation</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-apollo&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #e7e9db">...</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">RepositoryItem</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span>
<span style="background-color: #4f424c">  <span style="color: #06b6ef">id</span><span style="color: #e7e9db">,</span>
</span>  <span style="color: #06b6ef">name</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">url</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">descriptionHTML</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">primaryLanguage</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">owner</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">stargazers</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">watchers</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">viewerSubscription</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">viewerHasStarred</span><span style="color: #e7e9db">,</span>
<span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;RepositoryItem-title&quot;</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">h2</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #e7e9db">...</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/h2&gt;</span>

      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
<span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Mutation</span> <span style="color: #06b6ef">mutation</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">STAR_REPOSITORY</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">variables</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{{</span> <span style="color: #06b6ef">id</span> <span style="color: #e7e9db">}}</span><span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">          <span style="color: #e7e9db">{</span><span style="color: #06b6ef">addStar</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">stargazers</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">totalCount</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">Star</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;}</span>
</span><span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Mutation&gt;</span>
</span>      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>

    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;RepositoryItem-description&quot;</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #e7e9db">...</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
<span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>Note: The div element surrounding the Mutation component is there for other mutations you will
                implement in this section.</p>

              <p>The <code>id</code> for each repository should be available due to previous query result. It has to be
                used as a variable for the mutation to identify the repository. The Mutation component is used like the
                Query component, because it implements the render prop pattern as well. The first argument is different,
                though, as it is the mutation itself instead of the mutation result. Use this function to trigger the
                mutation before expecting a result. Later, you will see how to retrieve the mutation result; for now,
                the mutating function can be used in a button element. In this case, it is already in a Button
                component:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #815ba4">import</span> <span style="color: #06b6ef">Link</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../../Link&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">Button</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../../Button&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #e7e9db">...</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">RepositoryItem</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #e7e9db">...</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;RepositoryItem-title&quot;</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #e7e9db">...</span>

      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Mutation</span> <span style="color: #06b6ef">mutation</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">STAR_REPOSITORY</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">variables</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{{</span> <span style="color: #06b6ef">id</span> <span style="color: #e7e9db">}}</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #e7e9db">{(</span><span style="color: #06b6ef">addStar</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
<span style="background-color: #4f424c">            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Button</span>
</span><span style="background-color: #4f424c">              <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #48b685">&#39;RepositoryItem-title-action&#39;</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">              <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">addStar</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">            <span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">              <span style="color: #e7e9db">{</span><span style="color: #06b6ef">stargazers</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">totalCount</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">Star</span>
</span><span style="background-color: #4f424c">            <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Button&gt;</span>
</span>          <span style="color: #e7e9db">)}</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Mutation&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>

    <span style="color: #e7e9db">...</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
<span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>The styled Button component could be implemented in the <em>src/Button/index.js</em> file. It&rsquo;s
                already extracted, because you will use it in this application later.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">import</span> <span style="color: #48b685">&#39;./style.css&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">Button</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span>
  <span style="color: #06b6ef">children</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">className</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">color</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">&#39;black&#39;</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">type</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">&#39;button&#39;</span><span style="color: #e7e9db">,</span>
  <span style="color: #e7e9db">...</span><span style="color: #06b6ef">props</span>
<span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span>
    <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #48b685">`</span><span style="color: #f99b15">${</span><span style="color: #06b6ef">className</span><span style="color: #f99b15">}</span><span style="color: #48b685"> Button Button_</span><span style="color: #f99b15">${</span><span style="color: #06b6ef">color</span><span style="color: #f99b15">}</span><span style="color: #48b685">`</span><span style="color: #e7e9db">}</span>
    <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">type</span><span style="color: #e7e9db">}</span>
    <span style="color: #e7e9db">{...</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">}</span>
  <span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">children</span><span style="color: #e7e9db">}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
<span style="color: #e7e9db">);</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Button</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Let&rsquo;s get to the mutation result which was left out before. Access it as a second argument in
                your child function of the render prop.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">RepositoryItem</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #e7e9db">...</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;RepositoryItem-title&quot;</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #e7e9db">...</span>

      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Mutation</span> <span style="color: #06b6ef">mutation</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">STAR_REPOSITORY</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">variables</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{{</span> <span style="color: #06b6ef">id</span> <span style="color: #e7e9db">}}</span><span style="color: #5bc4bf">&gt;</span>
<span style="background-color: #4f424c">          <span style="color: #e7e9db">{(</span><span style="color: #06b6ef">addStar</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">loading</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">error</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
</span>            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Button</span>
              <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #48b685">&#39;RepositoryItem-title-action&#39;</span><span style="color: #e7e9db">}</span>
              <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">addStar</span><span style="color: #e7e9db">}</span>
            <span style="color: #5bc4bf">&gt;</span>
              <span style="color: #e7e9db">{</span><span style="color: #06b6ef">stargazers</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">totalCount</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">Star</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Button&gt;</span>
          <span style="color: #e7e9db">)}</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Mutation&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>

    <span style="color: #e7e9db">...</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
<span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>A mutation works like a query when using React Apollo. It uses the render prop pattern to access the
                mutation and the result of the mutation. The mutation can be used as a function in the UI. It has access
                to the variables that are passed in the Mutation component, but it can also override the variables when
                you pass them in a configuration object to the function (e.g.
                <code>addStar({ variables: { id } })</code>). That&rsquo;s a general pattern in React Apollo: You can
                specify information like variables in the Mutation component, or when you call the mutating function to
                override it.</p>

              <p>Note that if you use the <code>viewerHasStarred</code> boolean from the query result to show either a
                &ldquo;Star&rdquo; or &ldquo;Unstar&rdquo; button, you can do it with a conditional rendering:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">RepositoryItem</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #e7e9db">...</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;RepositoryItem-title&quot;</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #e7e9db">...</span>

      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
<span style="background-color: #4f424c">        <span style="color: #e7e9db">{</span><span style="color: #5bc4bf">!</span><span style="color: #06b6ef">viewerHasStarred</span> <span style="color: #5bc4bf">?</span> <span style="color: #e7e9db">(</span>
</span>          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Mutation</span> <span style="color: #06b6ef">mutation</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">STAR_REPOSITORY</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">variables</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{{</span> <span style="color: #06b6ef">id</span> <span style="color: #e7e9db">}}</span><span style="color: #5bc4bf">&gt;</span>
            <span style="color: #e7e9db">{(</span><span style="color: #06b6ef">addStar</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">loading</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">error</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
              <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Button</span>
                <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #48b685">&#39;RepositoryItem-title-action&#39;</span><span style="color: #e7e9db">}</span>
                <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">addStar</span><span style="color: #e7e9db">}</span>
              <span style="color: #5bc4bf">&gt;</span>
                <span style="color: #e7e9db">{</span><span style="color: #06b6ef">stargazers</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">totalCount</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">Star</span>
              <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Button&gt;</span>
            <span style="color: #e7e9db">)}</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Mutation&gt;</span>
<span style="background-color: #4f424c">        <span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">span</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #776e71">/* Here comes your removeStar mutation */</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/span&gt;</span>
</span><span style="background-color: #4f424c">        <span style="color: #e7e9db">)}</span>
</span>
<span style="background-color: #4f424c">      <span style="color: #e7e9db">{</span><span style="color: #776e71">/* Here comes your updateSubscription mutation */</span><span style="color: #e7e9db">}</span>
</span>      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>

    <span style="color: #e7e9db">...</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
<span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>When you star a repository as above, the &ldquo;Star&rdquo; button disappears. This is what we want,
                because it means the <code>viewerHasStarred</code> boolean has been updated in Apollo Client&rsquo;s
                cache for the identified repository. Apollo Client was able to match the mutation result with the
                repository identifier to the repository entity in Apollo Client&rsquo;s cache, the props were updated,
                and the UI re-rendered. Yet, on the other side, the count of stargazers who have starred the repository
                isn&rsquo;t updated because it cannot be retrieved from GitHub&rsquo;s API. The count must be updated in
                Apollo Client&rsquo;s cache. You will find out more about this topic in one of the following sections.
              </p>

              <h3 id="exercises-5">Exercises:</h3>

              <ul>
                <li>Confirm your <a href="http://bit.ly/2CYyXiN">source code for the last section</a>

                  <ul>
                    <li>Confirm the <a href="http://bit.ly/2Vpdg2L">changes from the last section</a></li>
                  </ul>
                </li>
                <li>Read more about <a target="_blank" rel="noopener noreferrer"
                    href="https://www.apollographql.com/docs/react/essentials/mutations.html">mutations with Apollo
                    Client in React</a></li>
                <li>Implement other mutations in the RepositoryItem component

                  <ul>
                    <li>Implement the <code>removeStar</code> mutation when the <code>viewerHasStarred</code> boolean is
                      true</li>
                    <li>Show a button with the watchers count which should be used to watch/unwatch a repository</li>
                    <li>Implement the <code>updateSubscription</code> mutation from GitHub&rsquo;s GraphQL API to
                      watch/unwatch a repository based on the <code>viewerSubscription</code> status</li>
                  </ul>
                </li>
                <li>Invest three minutes of your time and take the <a target="_blank" rel="noopener noreferrer"
                    href="https://www.surveymonkey.com/r/5GJQWXC">quiz</a></li>
              </ul>

              <h2 class="chapter-header" id="react-apollo-client-query-mutation-higher-order-component">GraphQL
                Query/Mutation with Higher-Order Components in React</h2>

              <p>We&rsquo;ve done Query and Mutation components from React Apollo to connect a data-layer (Apollo
                Client) with a view-layer (React). The Query component executes the query when it is rendered, whereas
                the Mutation component gives access to a function that triggers the mutation. Both components use the
                render props pattern to make the results accessible in their child functions.</p>

              <p><a href="../gentle-introduction-higher-order-components/index.html">Higher-Order Components (HOC)</a>
                is a widely accepted alternative to React&rsquo;s render prop pattern. The React Apollo package
                implements a Higher-Order Component for queries and mutations as well, though the team behind Apollo
                doesn&rsquo;t advertise it, and even spoke in favor of render props as their first choice. Nonetheless,
                this section shows you the alternative, using a Higher-Order Component instead of a Render Prop, though
                this application will continue to use the render prop pattern afterward. If you already have access to
                the query result in the Profile component&rsquo;s arguments, there is no Query component needed in the
                component itself:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">Profile</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">loading</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">error</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">error</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ErrorMessage</span> <span style="color: #06b6ef">error</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">error</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">viewer</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">;</span>

  <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">loading</span> <span style="color: #5bc4bf">||</span> <span style="color: #5bc4bf">!</span><span style="color: #06b6ef">viewer</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Loading</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">RepositoryList</span> <span style="color: #06b6ef">repositories</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">viewer</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">};</span>
</code></pre>
              </div>


              <p>There is no GraphQL involved here, because all you see is the pure view-layer. Instead, the data-layer
                logic is extracted into a Higher-Order Component. We import the <code>graphql</code> HOC from the React
                Apollo package in order to apply it on the Profile component, which takes the query definition as
                argument.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">gql</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;graphql-tag&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">graphql</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-apollo&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #e7e9db">...</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">GET_REPOSITORIES_OF_CURRENT_USER</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">gql</span><span style="color: #48b685">`</span>
<span style="color: #48b685">  {</span>
<span style="color: #48b685">    viewer {</span>
<span style="color: #48b685">      ...</span>
<span style="color: #48b685">    }</span>
<span style="color: #48b685">  }</span>
<span style="color: #48b685">`</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">Profile</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">loading</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">error</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">...</span>
<span style="color: #e7e9db">};</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">graphql</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">GET_REPOSITORIES_OF_CURRENT_USER</span><span style="color: #e7e9db">)(</span><span style="color: #06b6ef">Profile</span><span style="color: #e7e9db">);</span>
</span></code></pre>
              </div>


              <p>I find the HOC approach cleaner than the render props, because it co-locates both the data-layer and
                view-layer instead of inserting the one into the other. However, the team behind Apollo made the
                decision to favor render props instead. While I find the HOC approach more concise, the render prop
                pattern comes with its own advantages for mutating and querying data. For instance, imagine a query
                depends on a prop used as variable. It would be cumbersome to access the incoming prop in a
                statically-defined Higher-Order Component, but it can be dynamically used in a render prop because it is
                used within the Profile component where the props are naturally accessible. Another advantage is the
                power of composition for render props, which is useful when one query depends on the result of another.
                It can be achieved with HOCs as well, but again, it is more cumbersome. It boils down to seemingly never
                ending &ldquo;Higher-Order Components vs Render Props&rdquo; discussions.</p>

              <h3 id="exercises-6">Exercises:</h3>

              <ul>
                <li>Confirm your <a href="http://bit.ly/2VkX3LU">source code for the last section</a>

                  <ul>
                    <li>Confirm the <a href="http://bit.ly/2Vpdjvt">changes from the last section</a></li>
                  </ul>
                </li>
                <li>Come up with your own opinion about the advantages and disadvantages of using a Higher-Order
                  Component or Render Prop</li>
                <li>Try to implement one of your mutations with a Higher-Order Component</li>
                <li>Invest 3 minutes of your time and take the <a target="_blank" rel="noopener noreferrer"
                    href="https://www.surveymonkey.com/r/5G6QPLY">quiz</a></li>
              </ul>

              <h2 class="chapter-header" id="react-apollo-client-local-state-management">Local State Management with
                Apollo Client in React</h2>

              <p>Let&rsquo;s get back to the Repository component. You have experienced that the
                <code>viewerHasStarred</code> boolean updates in the Apollo Client&rsquo;s cache after a mutation was
                successful. That&rsquo;s great, because Apollo Client handles this for you, based on the mutation
                result. If you have followed the exercises of the mutation section, you should probably see something
                like a toggling &ldquo;Star&rdquo; and &ldquo;Unstar&rdquo; label for the button. All of this happens
                because you returned the <code>viewerHasStarred</code> boolean in your mutation result. Apollo Client is
                clever enough to update the repository entity, which is normalized and accessible in the cache.
                That&rsquo;s powerful default behavior, isn&rsquo;t it? You don&rsquo;t need to handle the local state
                management yourself, since Apollo Client figures it out for you as long as you provide useful
                information in the mutation&rsquo;s result.</p>

              <p>Apollo Client doesn&rsquo;t update the count of stars after the mutation, though. Normally, it is
                assumed that the count of stars increments by one when it is starred, with the opposite for unstarring.
                Since we don&rsquo;t return a count of stargazers in the mutation result, you have to handle the update
                in Apollo Client&rsquo;s cache yourself. Using Apollo Client&rsquo;s <code>refetchQueries</code> option
                is the naive approach for a mutation call, or a Mutation component to trigger a refetch for all queries,
                where the query result might be affected by the mutation. But that&rsquo;s not the best way to deal with
                this problem. It costs another query request to keep the data consistent after a mutation. In a growing
                application, this approach will eventually become problematic. Fortunately, the Apollo Client offers
                other functionalities to read/write manually from/to the cache locally without more network requests.
                The Mutation component offers a prop where you can insert update functionality that has access to the
                Apollo Client instance for the update mechanism.</p>

              <p>Before implementing the update functionality for the local state management, let&rsquo;s refactor
                another piece of code that will be useful for a local state update mechanism. The query definition next
                to your Profile component has grown to several fields with multiple object nestings. Previously, you
                learned about GraphQL fragments, and how they can be used to split parts of a query to reuse later.
                Next, we will split all the field information you used for the repository&rsquo;s node. You can define
                this fragment in the <em>src/Repository/fragments.js</em> file to keep it reusable for other components.
              </p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">gql</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;graphql-tag&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">REPOSITORY_FRAGMENT</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">gql</span><span style="color: #48b685">`</span>
<span style="color: #48b685">  fragment repository on Repository {</span>
<span style="color: #48b685">    id</span>
<span style="color: #48b685">    name</span>
<span style="color: #48b685">    url</span>
<span style="color: #48b685">    descriptionHTML</span>
<span style="color: #48b685">    primaryLanguage {</span>
<span style="color: #48b685">      name</span>
<span style="color: #48b685">    }</span>
<span style="color: #48b685">    owner {</span>
<span style="color: #48b685">      login</span>
<span style="color: #48b685">      url</span>
<span style="color: #48b685">    }</span>
<span style="color: #48b685">    stargazers {</span>
<span style="color: #48b685">      totalCount</span>
<span style="color: #48b685">    }</span>
<span style="color: #48b685">    viewerHasStarred</span>
<span style="color: #48b685">    watchers {</span>
<span style="color: #48b685">      totalCount</span>
<span style="color: #48b685">    }</span>
<span style="color: #48b685">    viewerSubscription</span>
<span style="color: #48b685">  }</span>
<span style="color: #48b685">`</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">REPOSITORY_FRAGMENT</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>You split this partial query (fragment), because it is used more often in this application in the next
                sections for a local state update mechanism, hence the previous refactoring.</p>

              <p>The fragment shouldn&rsquo;t be imported directly from the <em>src/Repository/fragments.js</em> path to
                your Profile component, because the <em>src/Repository/index.js</em> file is the preferred entry point
                to this module.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">RepositoryList</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./RepositoryList&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">REPOSITORY_FRAGMENT</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./fragments&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">export</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">REPOSITORY_FRAGMENT</span> <span style="color: #e7e9db">};</span>
</span>
<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">RepositoryList</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Finally, import the fragment in the Profile component&rsquo;s file to use it again.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">RepositoryList</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">REPOSITORY_FRAGMENT</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../Repository&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">Loading</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../Loading&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">ErrorMessage</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../Error&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">GET_REPOSITORIES_OF_CURRENT_USER</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">gql</span><span style="color: #48b685">`</span>
<span style="color: #48b685">  {</span>
<span style="color: #48b685">    viewer {</span>
<span style="color: #48b685">      repositories(</span>
<span style="color: #48b685">        first: 5</span>
<span style="color: #48b685">        orderBy: { direction: DESC, field: STARGAZERS }</span>
<span style="color: #48b685">      ) {</span>
<span style="color: #48b685">        edges {</span>
<span style="color: #48b685">          node {</span>
<span style="background-color: #4f424c"><span style="color: #48b685">            ...repository</span>
</span><span style="color: #48b685">          }</span>
<span style="color: #48b685">        }</span>
<span style="color: #48b685">      }</span>
<span style="color: #48b685">    }</span>
<span style="color: #48b685">  }</span>

<span style="background-color: #4f424c"><span style="color: #48b685">  </span><span style="color: #f99b15">${</span><span style="color: #06b6ef">REPOSITORY_FRAGMENT</span><span style="color: #f99b15">}</span><span style="color: #48b685"></span>
</span><span style="color: #48b685">`</span><span style="color: #e7e9db">;</span>

<span style="color: #e7e9db">...</span>
</code></pre>
              </div>


              <p>The refactoring is done. Your query is now more concise, and the fragment in its natural repository
                module can be reused for other places and functionalities. Next, use Mutation component&rsquo;s
                <code>update</code> prop to pass a function which will update the local cache eventually.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">updateAddStar</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">client</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">mutationResult</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">...</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">};</span>
</span>
<span style="color: #815ba4">const</span> <span style="color: #06b6ef">RepositoryItem</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #e7e9db">...</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;RepositoryItem-title&quot;</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #e7e9db">...</span>

      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #e7e9db">{</span><span style="color: #06b6ef">viewerHasStarred</span> <span style="color: #5bc4bf">?</span> <span style="color: #e7e9db">(</span>
          <span style="color: #e7e9db">...</span>
        <span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">(</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Mutation</span>
            <span style="color: #06b6ef">mutation</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">STAR_REPOSITORY</span><span style="color: #e7e9db">}</span>
            <span style="color: #06b6ef">variables</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{{</span> <span style="color: #06b6ef">id</span> <span style="color: #e7e9db">}}</span>
<span style="background-color: #4f424c">            <span style="color: #06b6ef">update</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">updateAddStar</span><span style="color: #e7e9db">}</span>
</span>          <span style="color: #5bc4bf">&gt;</span>
            <span style="color: #e7e9db">...</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Mutation&gt;</span>
        <span style="color: #e7e9db">)}</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>

    <span style="color: #e7e9db">...</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
<span style="color: #e7e9db">);</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">RepositoryItem</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>The function is extracted as its own JavaScript variable, otherwise ends up too verbose in the
                RepositoryItem component when keeping it inlined in the Mutation component. The function has access to
                the Apollo Client and the mutation result in its argument, and you need both to update data so you can
                destructure the mutation result in the function signature. If you don&rsquo;t know how the mutation
                result looks like, check the <code>STAR_REPOSITORY</code> mutation definition again, where you defined
                all fields that should appear in the mutation result. For now, the <code>id</code> of the repository to
                be updated is the important part.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">updateAddStar</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">(</span>
<span style="background-color: #4f424c">  <span style="color: #06b6ef">client</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">data</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">addStar</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">starrable</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">id</span> <span style="color: #e7e9db">}</span> <span style="color: #e7e9db">}</span> <span style="color: #e7e9db">}</span> <span style="color: #e7e9db">},</span>
</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">...</span>
<span style="color: #e7e9db">};</span>
</code></pre>
              </div>


              <p>You could have passed the <code>id</code> of the repository to the <code>updateAddStar()</code>
                function, which was a higher-order function in the Mutation component&rsquo;s render prop child
                function. You already have access to the repository&rsquo;s identifier in the Repository component.</p>

              <p>Now comes the most exciting part of this section. You can use the Apollo Client to read data from the
                cache, but also to write data to it. The goal is to read the starred repository from the cache, which is
                why we need the <code>id</code> to increment its stargazers count by one and write the updated
                repository back to the cache. You got the repository by its <code>id</code> from the cache by extracting
                the repository fragment. You can use it along with the repository identifier to retrieve the actual
                repository from Apollo Client&rsquo;s cache without querying all the data with a naive query
                implementation.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">REPOSITORY_FRAGMENT</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../fragments&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">Link</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../../Link&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">Button</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../../Button&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #e7e9db">...</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">updateAddStar</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">(</span>
  <span style="color: #06b6ef">client</span><span style="color: #e7e9db">,</span>
  <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">data</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">addStar</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">starrable</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">id</span> <span style="color: #e7e9db">}</span> <span style="color: #e7e9db">}</span> <span style="color: #e7e9db">}</span> <span style="color: #e7e9db">},</span>
<span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">repository</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">client</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">readFragment</span><span style="color: #e7e9db">({</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">`Repository:</span><span style="color: #f99b15">${</span><span style="color: #06b6ef">id</span><span style="color: #f99b15">}</span><span style="color: #48b685">`</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">fragment</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">REPOSITORY_FRAGMENT</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">});</span>
</span>
  <span style="color: #776e71">// update count of stargazers of repository</span>

  <span style="color: #776e71">// write repository back to cache</span>
<span style="color: #e7e9db">};</span>
</code></pre>
              </div>


              <p>The Apollo Client&rsquo;s cache that you set up to initialize the Apollo Client normalizes and stores
                queried data. Otherwise, the repository would be a deeply nested entity in a list of repositories for
                the query structure used in the Profile component. Normalization of a data structure makes it possible
                to retrieve entities by their identifier and their GraphQL <code>__typename</code> meta field. The
                combination of both is the default key, which is called a <a target="_blank" rel="noopener noreferrer"
                  href="https://en.wikipedia.org/wiki/Compound_key">composite key</a>, to read or write an entity from
                or to the cache. You may find out more about changing this default composite key in the exercises of
                this section.</p>

              <p>Furthermore, the resulting entity has all properties specified in the fragment. If there is a field in
                the fragment not found on the entity in the cache, you may see the following error message:
                <em>Can&rsquo;t find field __typename on object &hellip;</em>. That&rsquo;s why we use the identical
                fragment to read from the local cache to query the GraphQL API.</p>

              <p>After you have retrieved the repository entity with a fragment and its composite key, you can update
                the count of stargazers and write back the data to your cache. In this case, increment the number of
                stargazers.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">updateAddStar</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">(</span>
  <span style="color: #06b6ef">client</span><span style="color: #e7e9db">,</span>
  <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">data</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">addStar</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">starrable</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">id</span> <span style="color: #e7e9db">}</span> <span style="color: #e7e9db">}</span> <span style="color: #e7e9db">}</span> <span style="color: #e7e9db">},</span>
<span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">repository</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">client</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">readFragment</span><span style="color: #e7e9db">({</span>
    <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">`Repository:</span><span style="color: #f99b15">${</span><span style="color: #06b6ef">id</span><span style="color: #f99b15">}</span><span style="color: #48b685">`</span><span style="color: #e7e9db">,</span>
    <span style="color: #06b6ef">fragment</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">REPOSITORY_FRAGMENT</span><span style="color: #e7e9db">,</span>
  <span style="color: #e7e9db">});</span>

<span style="background-color: #4f424c">  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">totalCount</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">repository</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">stargazers</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">totalCount</span> <span style="color: #5bc4bf">+</span> <span style="color: #f99b15">1</span><span style="color: #e7e9db">;</span>
</span>
<span style="background-color: #4f424c">  <span style="color: #06b6ef">client</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">writeFragment</span><span style="color: #e7e9db">({</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">`Repository:</span><span style="color: #f99b15">${</span><span style="color: #06b6ef">id</span><span style="color: #f99b15">}</span><span style="color: #48b685">`</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">fragment</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">REPOSITORY_FRAGMENT</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">data</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">...</span><span style="color: #06b6ef">repository</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">stargazers</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">        <span style="color: #e7e9db">...</span><span style="color: #06b6ef">repository</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">stargazers</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">        <span style="color: #06b6ef">totalCount</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">},</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">},</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">});</span>
</span><span style="color: #e7e9db">};</span>
</code></pre>
              </div>


              <p>Let&rsquo;s recap all three steps here. First, you have retrieved (read) the repository entity from the
                Apollo Client using an identifier and the fragment; second, you updated the information of the entity;
                and third, you wrote back the data with updated information, but kept all remaining information intact
                using the JavaScript spread operator. This is a manual update mechanism that can be used when a mutation
                is missing data.</p>

              <p>It is a good practice to use an identical fragment for all three parts: the initial query, the
                <code>readFragment()</code>, and <code>writeFragment()</code> cache method. Your data structure for the
                entity stays consistent in your cache. For instance, if you forget to include a property defined by the
                fragment&rsquo;s fields in data object of the <code>writeFragment()</code> method, you get a warning:
                <em>Missing field __typename in &hellip;</em>.</p>

              <p>On an implementation level, you learned about extracting fragments from a query or mutation. Fragments
                allow you to define your shared entities by GraphQL types. You can reuse those in your queries,
                mutations or local state management methods to update the cache. On a higher level, you learned that
                Apollo Client&rsquo;s cache normalizes your data, so you can retrieve entities that were fetched with a
                deeply nested query using their type and identifier as composite key. Without it, you&rsquo;d have to
                perform normalizations for all the fetched data before putting it in your store/state.</p>

              <h3 id="exercises-7">Exercises:</h3>

              <ul>
                <li>Confirm your <a href="http://bit.ly/2VoiWKr">source code for the last section</a>

                  <ul>
                    <li>Confirm the <a href="http://bit.ly/2Vp8D8V">changes from the last section</a></li>
                  </ul>
                </li>
                <li>Read more about <a target="_blank" rel="noopener noreferrer"
                    href="https://www.apollographql.com/docs/react/essentials/local-state.html">Local State Management
                    in Apollo Client</a></li>
                <li>Read more about <a target="_blank" rel="noopener noreferrer"
                    href="https://www.apollographql.com/docs/react/advanced/fragments.html">Fragments in Apollo
                    Client</a></li>
                <li>Implement local cache updates for all the other mutations from the previous exercises

                  <ul>
                    <li>Implement the identical local cache update, but with decreasing the count of stargazers, for
                      your <code>removeStar</code> mutation</li>
                    <li>Implement the local cache update for the <code>updateSubscription</code> mutation</li>
                    <li>You will see in the next section a working solution for it</li>
                  </ul>
                </li>
                <li>Read more about <a target="_blank" rel="noopener noreferrer"
                    href="https://www.apollographql.com/docs/react/advanced/caching.html">Caching in Apollo Client and
                    the composite key to identify entities</a></li>
                <li>Invest 3 minutes of your time and take the <a target="_blank" rel="noopener noreferrer"
                    href="https://www.surveymonkey.com/r/5BSDXF7">quiz</a></li>
              </ul>

              <h2 class="chapter-header" id="react-apollo-client-optimistic-ui">Apollo Client Optimistic UI in React
              </h2>

              <p>We&rsquo;ve covered the basics, so now it&rsquo;s time for the advanced topics. One of those topics is
                the optimistic UI with React Apollo, which makes everything onscreen more synchronous. For instance,
                when liking a post on Twitter, the like appears immediately. As developers, we know there is a request
                that sends the information for the like to the Twitter backend. This request is asynchronous and
                doesn&rsquo;t resolve immediately with a result. The optimistic UI immediately assumes a successful
                request and mimics the result of such request for the frontend so it can update its UI immediately,
                before the real response arrives later. With a failed request, the optimistic UI performs a rollback and
                updates itself accordingly. Optimistic UI improves the user experience by omitting inconvenient feedback
                (e.g. loading indicators) for the user. The good thing is that React Apollo comes with this feature out
                of the box.</p>

              <p>In this section, you will implement an optimistic UI for when a user clicks the watch/unwatch mutation
                you implemented in a previous exercise. If you haven&rsquo;t, it&rsquo;s time to implement it now, or
                you can substitute it with the star or unstar mutation. Either way, completing the optimistic UI
                behavior for all three mutations is the next exercise. For completeness, this is a possible
                implementation of the watch mutation as a button next to the &ldquo;Star&rdquo;/&ldquo;Unstar&rdquo;
                buttons. First, the mutation:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">WATCH_REPOSITORY</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">gql</span><span style="color: #48b685">`</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">  mutation ($id: ID!, $viewerSubscription: SubscriptionState!) {</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">    updateSubscription(</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">      input: { state: $viewerSubscription, subscribableId: $id }</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">    ) {</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">      subscribable {</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">        id</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">        viewerSubscription</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">      }</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">    }</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">  }</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">`</span><span style="color: #e7e9db">;</span>
</span></code></pre>
              </div>


              <p>Second, the usage of the mutation with a Mutation render prop component:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">VIEWER_SUBSCRIPTIONS</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">SUBSCRIBED</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;SUBSCRIBED&#39;</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">UNSUBSCRIBED</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;UNSUBSCRIBED&#39;</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">};</span>
</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">isWatch</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">viewerSubscription</span> <span style="color: #5bc4bf">=&gt;</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">viewerSubscription</span> <span style="color: #5bc4bf">===</span> <span style="color: #06b6ef">VIEWER_SUBSCRIPTIONS</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">SUBSCRIBED</span><span style="color: #e7e9db">;</span>
</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">updateWatch</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">...</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">};</span>
</span>
<span style="color: #815ba4">const</span> <span style="color: #06b6ef">RepositoryItem</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #e7e9db">...</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;RepositoryItem-title&quot;</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #e7e9db">...</span>

      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #e7e9db">...</span>

<span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Mutation</span>
</span><span style="background-color: #4f424c">          <span style="color: #06b6ef">mutation</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">WATCH_REPOSITORY</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">          <span style="color: #06b6ef">variables</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{{</span>
</span><span style="background-color: #4f424c">            <span style="color: #06b6ef">id</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">            <span style="color: #06b6ef">viewerSubscription</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">isWatch</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">viewerSubscription</span><span style="color: #e7e9db">)</span>
</span><span style="background-color: #4f424c">              <span style="color: #5bc4bf">?</span> <span style="color: #06b6ef">VIEWER_SUBSCRIPTIONS</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">UNSUBSCRIBED</span>
</span><span style="background-color: #4f424c">              <span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">VIEWER_SUBSCRIPTIONS</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">SUBSCRIBED</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">          <span style="color: #e7e9db">}}</span>
</span><span style="background-color: #4f424c">          <span style="color: #06b6ef">update</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">updateWatch</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">        <span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">          <span style="color: #e7e9db">{(</span><span style="color: #06b6ef">updateSubscription</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">loading</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">error</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Button</span>
</span><span style="background-color: #4f424c">              <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;RepositoryItem-title-action&quot;</span>
</span><span style="background-color: #4f424c">              <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">updateSubscription</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">            <span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">              <span style="color: #e7e9db">{</span><span style="color: #06b6ef">watchers</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">totalCount</span><span style="color: #e7e9db">}{</span><span style="color: #48b685">&#39; &#39;</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">              <span style="color: #e7e9db">{</span><span style="color: #06b6ef">isWatch</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">viewerSubscription</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">?</span> <span style="color: #48b685">&#39;Unwatch&#39;</span> <span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;Watch&#39;</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">            <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Button&gt;</span>
</span><span style="background-color: #4f424c">          <span style="color: #e7e9db">)}</span>
</span><span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Mutation&gt;</span>
</span>
        <span style="color: #e7e9db">...</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>

    <span style="color: #e7e9db">...</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
<span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>And third, the missing update function that is passed to the Mutation component:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">updateWatch</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">client</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">data</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">updateSubscription</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">        <span style="color: #06b6ef">subscribable</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">id</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">viewerSubscription</span> <span style="color: #e7e9db">},</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">},</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">},</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">},</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">repository</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">client</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">readFragment</span><span style="color: #e7e9db">({</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">`Repository:</span><span style="color: #f99b15">${</span><span style="color: #06b6ef">id</span><span style="color: #f99b15">}</span><span style="color: #48b685">`</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">fragment</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">REPOSITORY_FRAGMENT</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">});</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">let</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">totalCount</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">repository</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">watchers</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">totalCount</span> <span style="color: #5bc4bf">=</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">viewerSubscription</span> <span style="color: #5bc4bf">===</span> <span style="color: #06b6ef">VIEWER_SUBSCRIPTIONS</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">SUBSCRIBED</span>
</span><span style="background-color: #4f424c">      <span style="color: #5bc4bf">?</span> <span style="color: #06b6ef">totalCount</span> <span style="color: #5bc4bf">+</span> <span style="color: #f99b15">1</span>
</span><span style="background-color: #4f424c">      <span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">totalCount</span> <span style="color: #5bc4bf">-</span> <span style="color: #f99b15">1</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">client</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">writeFragment</span><span style="color: #e7e9db">({</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">`Repository:</span><span style="color: #f99b15">${</span><span style="color: #06b6ef">id</span><span style="color: #f99b15">}</span><span style="color: #48b685">`</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">fragment</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">REPOSITORY_FRAGMENT</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">data</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">...</span><span style="color: #06b6ef">repository</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">watchers</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">        <span style="color: #e7e9db">...</span><span style="color: #06b6ef">repository</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">watchers</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">        <span style="color: #06b6ef">totalCount</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">},</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">},</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">});</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">};</span>
</span></code></pre>
              </div>


              <p>Now let&rsquo;s get to the optimistic UI feature. Fortunately, the Mutation component offers a prop for
                the optimistic UI strategy called <code>optimisticResponse</code>. It returns the same result, which is
                accessed as argument in the function passed to the <code>update</code> prop of the Mutation component.
                With a watch mutation, only the <code>viewerSubscription</code> status changes to subscribed or
                unsubscribed. This is an optimistic UI.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">RepositoryItem</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #e7e9db">...</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;RepositoryItem-title&quot;</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #e7e9db">...</span>

      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #e7e9db">...</span>

        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Mutation</span>
          <span style="color: #06b6ef">mutation</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">WATCH_REPOSITORY</span><span style="color: #e7e9db">}</span>
          <span style="color: #06b6ef">variables</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{{</span>
            <span style="color: #06b6ef">id</span><span style="color: #e7e9db">,</span>
            <span style="color: #06b6ef">viewerSubscription</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">isWatch</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">viewerSubscription</span><span style="color: #e7e9db">)</span>
              <span style="color: #5bc4bf">?</span> <span style="color: #06b6ef">VIEWER_SUBSCRIPTIONS</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">UNSUBSCRIBED</span>
              <span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">VIEWER_SUBSCRIPTIONS</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">SUBSCRIBED</span><span style="color: #e7e9db">,</span>
          <span style="color: #e7e9db">}}</span>
<span style="background-color: #4f424c">          <span style="color: #06b6ef">optimisticResponse</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{{</span>
</span><span style="background-color: #4f424c">            <span style="color: #06b6ef">updateSubscription</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">              <span style="color: #06b6ef">__typename</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;Mutation&#39;</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">              <span style="color: #06b6ef">subscribable</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">                <span style="color: #06b6ef">__typename</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;Repository&#39;</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">                <span style="color: #06b6ef">id</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">                <span style="color: #06b6ef">viewerSubscription</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">isWatch</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">viewerSubscription</span><span style="color: #e7e9db">)</span>
</span><span style="background-color: #4f424c">                  <span style="color: #5bc4bf">?</span> <span style="color: #06b6ef">VIEWER_SUBSCRIPTIONS</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">UNSUBSCRIBED</span>
</span><span style="background-color: #4f424c">                  <span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">VIEWER_SUBSCRIPTIONS</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">SUBSCRIBED</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">              <span style="color: #e7e9db">},</span>
</span><span style="background-color: #4f424c">            <span style="color: #e7e9db">},</span>
</span><span style="background-color: #4f424c">          <span style="color: #e7e9db">}}</span>
</span>          <span style="color: #06b6ef">update</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">updateWatch</span><span style="color: #e7e9db">}</span>
        <span style="color: #5bc4bf">&gt;</span>
          <span style="color: #e7e9db">...</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Mutation&gt;</span>

        <span style="color: #e7e9db">...</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>

    <span style="color: #e7e9db">...</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
<span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>When you start your application and watch a repository, the &ldquo;Watch&rdquo; and
                &ldquo;Unwatch&rdquo; label of the button changes immediately after clicking it. This is because the
                optimistic response arrives synchronously, while the real response is pending and resolves later. Since
                the <code>__typename</code> meta field comes with every Apollo request, include those as well.</p>

              <p>An additional benefit of the optimistic response is that it makes the count of watchers updates
                optimistic, too. The function used in the <code>update</code> prop is called twice now, the first time
                with the optimistic response, and the second with a response from GitHub&rsquo;s GraphQL API. It makes
                sense to capture identical information in the optimistic response expected as a mutation result in the
                function passed to the <code>update</code> prop of the Mutation component. For instance, if you
                don&rsquo;t pass the <code>id</code> property in the <code>optimisticResponse</code> object, the
                function passed to the <code>update</code> prop throws an error, because it can&rsquo;t retrieve the
                repository from the cache without an identifier.</p>

              <p>At this point, it becomes debatable whether or not the Mutation component becomes too verbose. Using
                the Render Props pattern co-locates the data layer even more to the view-layer than Higher-Order
                Components. One could argue it doesn&rsquo;t co-locate the data-layer, but inserts it into the
                view-layer. When optimizations like the <code>update</code> and <code>optimisticResponse</code> props
                are put into the Render Prop Component, it can become too verbose for a scaling application. I advise
                using techniques you&rsquo;ve learned as well as your own strategies to keep your source code concise. I
                see four different ways to solve this issue:</p>

              <ul>
                <li>Keep the declarations inlined (see: <code>optimisticUpdate</code>)</li>
                <li>Extracting the inlined declarations as variable (see: <code>update</code>).</li>
                <li>Perform a combination of 1 and 2 whereas only the most verbose parts are extracted</li>
                <li>Use Higher-Order Components instead of Render Props to co-locate data-layer, instead of inserting it
                  in the view-layer</li>
              </ul>

              <p>The first three are about <strong>inserting</strong> a data-layer into the view-layer, while the last
                is about <strong>co-locating</strong> it. Each comes with drawbacks. Following the second way, you might
                yourself declaring functions instead of objects, or higher-order functions instead of functions because
                you need to pass arguments to them. With the fourth, you could encounter the same challenge in keeping
                HOCs concise. There, you could use the other three ways too, but this time in a HOC rather than a Render
                Prop.</p>

              <h3 id="exercises-8">Exercises:</h3>

              <ul>
                <li>Confirm your <a href="http://bit.ly/2VuZZpz">source code for the last section</a>

                  <ul>
                    <li>Confirm the <a href="http://bit.ly/2VrjEGS">changes from the last section</a></li>
                  </ul>
                </li>
                <li>Throttle your internet connection (often browsers offers such functionality) and experience how the
                  <code>optimisticResponse</code> takes the <code>update</code> function into account even though the
                  request is slow</li>
                <li>Try different ways of co-locating or inserting your data-layer with render props and higher-order
                  components</li>
                <li>Implement the optimistic UIs for the star and unstar mutations</li>
                <li>Read more about <a target="_blank" rel="noopener noreferrer"
                    href="https://www.apollographql.com/docs/react/features/optimistic-ui.html">Apollo Optimistic UI in
                    React with GraphQL</a></li>
                <li>Invest 3 minutes of your time and take the <a target="_blank" rel="noopener noreferrer"
                    href="https://www.surveymonkey.com/r/5B6D8BX">quiz</a></li>
              </ul>

              <h2 class="chapter-header" id="react-apollo-client-pagination">GraphQL Pagination with Apollo Client in
                React</h2>

              <p>Finally, you are going to implement another advanced feature when using a GraphQL API called
                <strong>pagination</strong>. In this section, you implement a button that allows successive pages of
                repositories to be queries, a simple &ldquo;More&rdquo; button rendered below the list of repositories
                in the RepositoryList component. When is clicked, another page of repositories is fetched and merged
                with the previous list as one state into Apollo Client&rsquo;s cache.</p>

              <p>First, extend the query next for your Profile component with the necessary information to allow
                pagination for the list of repositories:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">GET_REPOSITORIES_OF_CURRENT_USER</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">gql</span><span style="color: #48b685">`</span>
<span style="background-color: #4f424c"><span style="color: #48b685">  query($cursor: String) {</span>
</span><span style="color: #48b685">    viewer {</span>
<span style="color: #48b685">      repositories(</span>
<span style="color: #48b685">        first: 5</span>
<span style="color: #48b685">        orderBy: { direction: DESC, field: STARGAZERS }</span>
<span style="background-color: #4f424c"><span style="color: #48b685">        after: $cursor</span>
</span><span style="color: #48b685">      ) {</span>
<span style="color: #48b685">        edges {</span>
<span style="color: #48b685">          node {</span>
<span style="color: #48b685">            ...repository</span>
<span style="color: #48b685">          }</span>
<span style="color: #48b685">        }</span>
<span style="background-color: #4f424c"><span style="color: #48b685">        pageInfo {</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">          endCursor</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">          hasNextPage</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">        }</span>
</span><span style="color: #48b685">      }</span>
<span style="color: #48b685">    }</span>
<span style="color: #48b685">  }</span>
<span style="color: #48b685">  </span><span style="color: #f99b15">${</span><span style="color: #06b6ef">REPOSITORY_FRAGMENT</span><span style="color: #f99b15">}</span><span style="color: #48b685"></span>
<span style="color: #48b685">`</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>The <code>endCursor</code> can be used as <code>$cursor</code> variable when fetching the next page of
                repositories, but the <code>hasNextPage</code> can disable the functionality (e.g. not showing the
                &ldquo;More&rdquo; button) to fetch another page. The initial request to fetch the first page of
                repositories will have a <code>$cursor</code> variable of <code>undefined</code>, though. GitHub&rsquo;s
                GraphQL API will handle this case gracefully and return the first items from the list of repositories
                without considering the <code>after</code> argument. Every other request to fetch more items from the
                list will send a defined <code>after</code> argument with the cursor, which is the
                <code>endCursor</code> from the query.</p>

              <p>Now we have all information to fetch more pages of repositories from GitHub&rsquo;s GraphQL API. The
                Query component exposes a function to retrieve them in its child function. Since the button to fetch
                more repositories fits best in the the RepositoryList component, you can pass this function as prop to
                it.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">Profile</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Query</span> <span style="color: #06b6ef">query</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">GET_REPOSITORIES_OF_CURRENT_USER</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
<span style="background-color: #4f424c">    <span style="color: #e7e9db">{({</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">loading</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">error</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">fetchMore</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span>      <span style="color: #e7e9db">...</span>

      <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">RepositoryList</span>
          <span style="color: #06b6ef">repositories</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">viewer</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">}</span>
<span style="background-color: #4f424c">          <span style="color: #06b6ef">fetchMore</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">fetchMore</span><span style="color: #e7e9db">}</span>
</span>        <span style="color: #5bc4bf">/&gt;</span>
      <span style="color: #e7e9db">);</span>
    <span style="color: #e7e9db">}}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Query&gt;</span>
<span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>Next, use the function in the RepositoryList component, and add a button to fetch successive pages of
                repositories that appears when another page is available.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Fragment</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #e7e9db">...</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">RepositoryList</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">fetchMore</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Fragment</span><span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">edges</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(({</span> <span style="color: #06b6ef">node</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
</span>      <span style="color: #e7e9db">...</span>
<span style="background-color: #4f424c">    <span style="color: #e7e9db">))}</span>
</span>
<span style="background-color: #4f424c">    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">pageInfo</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">hasNextPage</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span>
</span><span style="background-color: #4f424c">        <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span>
</span><span style="background-color: #4f424c">        <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span>
</span><span style="background-color: #4f424c">          <span style="color: #06b6ef">fetchMore</span><span style="color: #e7e9db">({</span>
</span><span style="background-color: #4f424c">            <span style="color: #776e71">/* configuration object */</span>
</span><span style="background-color: #4f424c">          <span style="color: #e7e9db">})</span>
</span><span style="background-color: #4f424c">        <span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">      <span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">        <span style="color: #06b6ef">More</span> <span style="color: #06b6ef">Repositories</span>
</span><span style="background-color: #4f424c">      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">)}</span>
</span><span style="background-color: #4f424c">  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Fragment&gt;</span>
</span><span style="color: #e7e9db">);</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">RepositoryList</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>The <code>fetchMore()</code> function performs the query from the initial request, and takes a
                configuration object, which can be used to override variables. With pagination, this means you pass the
                <code>endCursor</code> of the previous query result to use it for the query as <code>after</code>
                argument. Otherwise, you would perform the initial request again because no variables are specified.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">RepositoryList</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">fetchMore</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Fragment</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">...</span>

    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">pageInfo</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">hasNextPage</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span>
        <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span>
        <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span>
          <span style="color: #06b6ef">fetchMore</span><span style="color: #e7e9db">({</span>
<span style="background-color: #4f424c">            <span style="color: #06b6ef">variables</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">              <span style="color: #06b6ef">cursor</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">pageInfo</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">endCursor</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">            <span style="color: #e7e9db">},</span>
</span>          <span style="color: #e7e9db">})</span>
        <span style="color: #e7e9db">}</span>
      <span style="color: #5bc4bf">&gt;</span>
        <span style="color: #06b6ef">More</span> <span style="color: #06b6ef">Repositories</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
    <span style="color: #e7e9db">)}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Fragment&gt;</span>
<span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>If you attempt to click the button, you should get the following error message: <em>Error: updateQuery
                  option is required.</em>. The <code>updateQuery</code> function is needed to tell Apollo Client how to
                merge the previous result with a new one. Define the function outside of the button, because it would
                become too verbose otherwise.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">updateQuery</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">previousResult</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">fetchMoreResult</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">...</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">};</span>
</span>
<span style="color: #815ba4">const</span> <span style="color: #06b6ef">RepositoryList</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">fetchMore</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Fragment</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">...</span>

    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">pageInfo</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">hasNextPage</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span>
        <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span>
        <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span>
          <span style="color: #06b6ef">fetchMore</span><span style="color: #e7e9db">({</span>
            <span style="color: #06b6ef">variables</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
              <span style="color: #06b6ef">cursor</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">pageInfo</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">endCursor</span><span style="color: #e7e9db">,</span>
            <span style="color: #e7e9db">},</span>
<span style="background-color: #4f424c">            <span style="color: #06b6ef">updateQuery</span><span style="color: #e7e9db">,</span>
</span>          <span style="color: #e7e9db">})</span>
        <span style="color: #e7e9db">}</span>
      <span style="color: #5bc4bf">&gt;</span>
        <span style="color: #06b6ef">More</span> <span style="color: #06b6ef">Repositories</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
    <span style="color: #e7e9db">)}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Fragment&gt;</span>
<span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>The function has access to the previous query result, and to the next result that resolves after the
                button click:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">updateQuery</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">previousResult</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">fetchMoreResult</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">  <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #5bc4bf">!</span><span style="color: #06b6ef">fetchMoreResult</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">return</span> <span style="color: #06b6ef">previousResult</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">...</span><span style="color: #06b6ef">previousResult</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">viewer</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">...</span><span style="color: #06b6ef">previousResult</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">viewer</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">repositories</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">        <span style="color: #e7e9db">...</span><span style="color: #06b6ef">previousResult</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">viewer</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">        <span style="color: #e7e9db">...</span><span style="color: #06b6ef">fetchMoreResult</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">viewer</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">        <span style="color: #06b6ef">edges</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">[</span>
</span><span style="background-color: #4f424c">          <span style="color: #e7e9db">...</span><span style="color: #06b6ef">previousResult</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">viewer</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">edges</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">          <span style="color: #e7e9db">...</span><span style="color: #06b6ef">fetchMoreResult</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">viewer</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">edges</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">        <span style="color: #e7e9db">],</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">},</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">},</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">};</span>
</span><span style="color: #e7e9db">};</span>
</code></pre>
              </div>


              <p>In this function, you can merge both results with the JavaScript spread operator. If there is no new
                result, return the previous result. The important part is merging the <code>edges</code> of both
                repositories objects to have a merge list of items. The <code>fetchMoreResult</code> takes precedence
                over the <code>previousResult</code> in the <code>repositories</code> object because it contains the new
                <code>pageInfo</code>, with its <code>endCursor</code> and <code>hasNextPage</code> properties from the
                last paginated result. You need to have those when clicking the button another time to have the correct
                cursor as an argument. If you want to checkout an alternative to the verbose JavaScript spread operator
                when dealing with deeply nested data, checkout the changes in <a target="_blank"
                  rel="noopener noreferrer"
                  href="https://github.com/the-road-to-graphql/react-graphql-github-apollo/pull/14">this GitHub Pull
                  Request</a> that uses Lenses from Ramda.js.</p>

              <p>To add one more small improvement for user friendliness, add a loading indicator when more pages are
                fetched. So far, the <code>loading</code> boolean in the Query component of the Profile component is
                only true for the initial request, but not for the following requests. Change this behavior with a prop
                that is passed to the Query component, and the loading boolean will be updated accordingly.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">Profile</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Query</span>
    <span style="color: #06b6ef">query</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">GET_REPOSITORIES_OF_CURRENT_USER</span><span style="color: #e7e9db">}</span>
<span style="background-color: #4f424c">    <span style="color: #06b6ef">notifyOnNetworkStatusChange</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #815ba4">true</span><span style="color: #e7e9db">}</span>
</span>  <span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">{({</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">loading</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">error</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">fetchMore</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
      <span style="color: #e7e9db">...</span>
    <span style="color: #e7e9db">}}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Query&gt;</span>
<span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>When you run your application again and try the &ldquo;More&rdquo; button, you should see odd behavior.
                Every time you load another page of repositories, the loading indicator is shown, but the list of
                repositories disappears entirely, and the merged list is rendered as assumed. Since the
                <code>loading</code> boolean becomes true with the initial and successive requests, the conditional
                rendering in the Profile component will always show the loading indicator. It returns from the Profile
                function early, never reaching the code to render the RepositoryList. A quick change from
                <code>||</code> to <code>&amp;&amp;</code> of the condition will allow it to show the loading indicator
                for the initial request only. Every request after that, where the <code>viewer</code> object is
                available, is beyond this condition, so it renders the RepositoryList component.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">Profile</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Query</span>
    <span style="color: #06b6ef">query</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">GET_REPOSITORIES_OF_CURRENT_USER</span><span style="color: #e7e9db">}</span>
    <span style="color: #06b6ef">notifyOnNetworkStatusChange</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #815ba4">true</span><span style="color: #e7e9db">}</span>
  <span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">{({</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">loading</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">error</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">fetchMore</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
      <span style="color: #e7e9db">...</span>

      <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">viewer</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">;</span>

<span style="background-color: #4f424c">      <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">loading</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #5bc4bf">!</span><span style="color: #06b6ef">viewer</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span>        <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Loading</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">;</span>
      <span style="color: #e7e9db">}</span>

      <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">RepositoryList</span>
<span style="background-color: #4f424c">          <span style="color: #06b6ef">loading</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">loading</span><span style="color: #e7e9db">}</span>
</span>          <span style="color: #06b6ef">repositories</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">viewer</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">}</span>
          <span style="color: #06b6ef">fetchMore</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">fetchMore</span><span style="color: #e7e9db">}</span>
        <span style="color: #5bc4bf">/&gt;</span>
      <span style="color: #e7e9db">);</span>
    <span style="color: #e7e9db">}}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Query&gt;</span>
<span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>The boolean can be passed down to the RepositoryList component. There it can be used to show a loading
                indicator instead of the &ldquo;More&rdquo; button. Since the boolean never reaches the RepositoryList
                component for the initial request, you can be sure that the &ldquo;More&rdquo; button only changes to
                the loading indicator when there is a successive request pending.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Fragment</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">Loading</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../../Loading&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">RepositoryItem</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../RepositoryItem&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #e7e9db">...</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">RepositoryList</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">loading</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">fetchMore</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
</span>  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Fragment</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">...</span>

<span style="background-color: #4f424c">    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">loading</span> <span style="color: #5bc4bf">?</span> <span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Loading</span> <span style="color: #5bc4bf">/&gt;</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">(</span>
</span>      <span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">pageInfo</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">hasNextPage</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #e7e9db">(</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span>
          <span style="color: #e7e9db">...</span>
        <span style="color: #5bc4bf">&gt;</span>
          <span style="color: #06b6ef">More</span> <span style="color: #06b6ef">Repositories</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
<span style="background-color: #4f424c">      <span style="color: #e7e9db">)</span>
</span>    <span style="color: #e7e9db">)}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Fragment&gt;</span>
<span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>The pagination feature is complete now, and you are fetching successive pages of an initial page, then
                merging the results in Apollo Client&rsquo;s cache. In addition, you show your user feedback about
                pending requests for either the initial request or further page requests.</p>

              <p>Now we&rsquo;ll take it a step further, making the button used to fetch more repositories reusable. Let
                me explain why this would be a neat abstraction. In an upcoming section, you have another list field
                that could potentially implement the pagination feature. There, you have to introduce the
                <code>More</code> button, which could be nearly identical to the <code>More</code> button you have in
                the RepositoryList component. Having only one button in a UI would be a satisfying abstraction, but this
                abstraction wouldn&rsquo;t work in a real-world coding scenario. You would have to introduce a second
                list field first, implement the pagination feature for it, and then consider an abstraction for the
                <code>More</code> button. For the sake of the tutorial, we implement this abstraction for the pagination
                feature only in this section, though you should be aware this is a premature optimization put in place
                for you to learn it.</p>

              <p>For another way, imagine you wanted to extract the functionality of the <code>More</code> button into a
                FetchMore component. The most important thing you would need is the <code>fetchMore()</code> function
                from the query result. The <code>fetchMore()</code> function takes an object to pass in the necessary
                <code>variables</code> and <code>updateQuery</code> information as a configuration. While the former is
                used to define the next page by its cursor, the latter is used to define how the results should be
                merged in the local state. These are the three essential parts: fetchMore, variables, and updateQuery.
                You may also want to shield away the conditional renderings in the FetchMore component, which happens
                because of the <code>loading</code> or <code>hasNextPage</code> booleans. Et voil! That&rsquo;s how you
                get the interface to your FetchMore abstraction component.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Fragment</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">FetchMore</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../../FetchMore&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">RepositoryItem</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../RepositoryItem&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #e7e9db">...</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">RepositoryList</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">loading</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">fetchMore</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Fragment</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">edges</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(({</span> <span style="color: #06b6ef">node</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">node</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;RepositoryItem&quot;</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">RepositoryItem</span> <span style="color: #e7e9db">{...</span><span style="color: #06b6ef">node</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
    <span style="color: #e7e9db">))}</span>

<span style="background-color: #4f424c">    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">FetchMore</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">loading</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">loading</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">hasNextPage</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">pageInfo</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">hasNextPage</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">variables</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{{</span>
</span><span style="background-color: #4f424c">        <span style="color: #06b6ef">cursor</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">pageInfo</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">endCursor</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">}}</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">updateQuery</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">updateQuery</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">fetchMore</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">fetchMore</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">    <span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">Repositories</span>
</span><span style="background-color: #4f424c">    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/FetchMore&gt;</span>
</span>  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Fragment&gt;</span>
<span style="color: #e7e9db">);</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">RepositoryList</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Now this FetchMore component can be used by other paginated lists as well, because every part that can
                be dynamic is passed as props to it. Implementing a FetchMore component in the
                <em>src/FetchMore/index.js</em> is the next step. First, the main part of the component:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">import</span> <span style="color: #48b685">&#39;./style.css&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">FetchMore</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span>
  <span style="color: #06b6ef">variables</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">updateQuery</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">fetchMore</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">children</span><span style="color: #e7e9db">,</span>
<span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;FetchMore&quot;</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span>
      <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span>
      <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;FetchMore-button&quot;</span>
      <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">fetchMore</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">variables</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">updateQuery</span> <span style="color: #e7e9db">})}</span>
    <span style="color: #5bc4bf">&gt;</span>
      <span style="color: #06b6ef">More</span> <span style="color: #e7e9db">{</span><span style="color: #06b6ef">children</span><span style="color: #e7e9db">}</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
<span style="color: #e7e9db">);</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">FetchMore</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Here, you can see how the <code>variables</code> and <code>updateQuery</code> are taken as
                configuration object for the <code>fetchMore()</code> function when it&rsquo;s invoked. The button can
                be made cleaner using the Button component you defined in a previous section. To add a different style,
                let&rsquo;s define a specialized ButtonUnobtrusive component next to the Button component in the
                <em>src/Button/index.js</em> file:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">import</span> <span style="color: #48b685">&#39;./style.css&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">Button</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #e7e9db">...</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">...</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">ButtonUnobtrusive</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">children</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">className</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">type</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">&#39;button&#39;</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">...</span><span style="color: #06b6ef">props</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #48b685">`</span><span style="color: #f99b15">${</span><span style="color: #06b6ef">className</span><span style="color: #f99b15">}</span><span style="color: #48b685"> Button_unobtrusive`</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">type</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">{...</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">  <span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">children</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">);</span>
</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">export</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">ButtonUnobtrusive</span> <span style="color: #e7e9db">};</span>
</span>
<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Button</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Now the ButtonUnobtrusive component is used as button instead of the button element in the FetchMore
                component. In addition, the two booleans <code>loading</code> and <code>hasNextPage</code> can be used
                for the conditional rendering, to show the Loading component or nothing, because there is no next page
                which can be fetched.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">Loading</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../Loading&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">ButtonUnobtrusive</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../Button&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #815ba4">import</span> <span style="color: #48b685">&#39;./style.css&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">FetchMore</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span>
<span style="background-color: #4f424c">  <span style="color: #06b6ef">loading</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">hasNextPage</span><span style="color: #e7e9db">,</span>
</span>  <span style="color: #06b6ef">variables</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">updateQuery</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">fetchMore</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">children</span><span style="color: #e7e9db">,</span>
<span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;FetchMore&quot;</span><span style="color: #5bc4bf">&gt;</span>
<span style="background-color: #4f424c">    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">loading</span> <span style="color: #5bc4bf">?</span> <span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Loading</span> <span style="color: #5bc4bf">/&gt;</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">hasNextPage</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ButtonUnobtrusive</span>
</span>          <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;FetchMore-button&quot;</span>
          <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">fetchMore</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">variables</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">updateQuery</span> <span style="color: #e7e9db">})}</span>
        <span style="color: #5bc4bf">&gt;</span>
          <span style="color: #06b6ef">More</span> <span style="color: #e7e9db">{</span><span style="color: #06b6ef">children</span><span style="color: #e7e9db">}</span>
<span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ButtonUnobtrusive&gt;</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">)</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">)}</span>
</span>  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
<span style="color: #e7e9db">);</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">FetchMore</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>That&rsquo;s it for the abstraction of the FetchMore button for paginated lists with Apollo Client.
                Basically, you pass in everything needed by the <code>fetchMore()</code> function, including the
                function itself. You can also pass all booleans used for conditional renderings. You end up with a
                reusable FetchMore button that can be used for every paginated list.</p>

              <h3 id="exercises-9">Exercises:</h3>

              <ul>
                <li>Confirm your <a href="http://bit.ly/2VnG7EE">source code for the last section</a>

                  <ul>
                    <li>Confirm the <a href="http://bit.ly/2VqPWSb">changes from the last section</a></li>
                  </ul>
                </li>
                <li>Read more about <a target="_blank" rel="noopener noreferrer"
                    href="https://www.apollographql.com/docs/react/features/pagination.html">pagination with Apollo
                    Client in React</a></li>
                <li>Invest 3 minutes of your time and take the <a target="_blank" rel="noopener noreferrer"
                    href="https://www.surveymonkey.com/r/5HYMGN7">quiz</a></li>
              </ul>

              <h2 class="chapter-header" id="react-apollo-client-caching">GraphQL Caching of Queries with Apollo Client
                in React</h2>

              <p>In this section, you introduce <a target="_blank" rel="noopener noreferrer"
                  href="https://github.com/ReactTraining/react-router">React Router</a> to show two separate pages for
                your application. At the moment, you are only showing one page with a Profile component that displays
                all your repositories. We want to add another Organization component that shows repositories by an
                organization, and there could be a search field as well, to lookup individual organizations with their
                repositories on that page. Let&rsquo;s do this by introducing React Router to your application. If you
                haven&rsquo;t used React Router before, make sure to conduct the exercises of this section to learn more
                about it.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #06b6ef">react</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">router</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">dom</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span>
</code></pre>
              </div>


              <p>In your <em>src/constants/routes.js</em> file, you can specify both routes you want to make accessible
                by React Router. The <code>ORGANIZATION</code> route points to the base URL, while the
                <code>PROFILE</code> route points to a more specific URL.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">export</span> <span style="color: #815ba4">const</span> <span style="color: #06b6ef">ORGANIZATION</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">&#39;/&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">export</span> <span style="color: #815ba4">const</span> <span style="color: #06b6ef">PROFILE</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">&#39;/profile&#39;</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Next, map both routes to their components. The App component is the perfect place to do it because the
                two routes will exchange the Organization and Profile components based on the URL there.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">BrowserRouter</span> <span style="color: #06b6ef">as</span> <span style="color: #06b6ef">Router</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">Route</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-router-dom&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">import</span> <span style="color: #06b6ef">Profile</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../Profile&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">Organization</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../Organization&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">import</span> <span style="color: #5bc4bf">*</span> <span style="color: #06b6ef">as</span> <span style="color: #06b6ef">routes</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../constants/routes&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">import</span> <span style="color: #48b685">&#39;./style.css&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Router</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;App&quot;</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;App-main&quot;</span><span style="color: #5bc4bf">&gt;</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Route</span>
              <span style="color: #06b6ef">exact</span>
              <span style="color: #06b6ef">path</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">routes</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">ORGANIZATION</span><span style="color: #e7e9db">}</span>
              <span style="color: #06b6ef">component</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
                <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;App-content_large-header&quot;</span><span style="color: #5bc4bf">&gt;</span>
                  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Organization</span> <span style="color: #5bc4bf">/&gt;</span>
                <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
              <span style="color: #e7e9db">)}</span>
            <span style="color: #5bc4bf">/&gt;</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Route</span>
              <span style="color: #06b6ef">exact</span>
              <span style="color: #06b6ef">path</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">routes</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">PROFILE</span><span style="color: #e7e9db">}</span>
              <span style="color: #06b6ef">component</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
                <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;App-content_small-header&quot;</span><span style="color: #5bc4bf">&gt;</span>
                  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Profile</span> <span style="color: #5bc4bf">/&gt;</span>
                <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
              <span style="color: #e7e9db">)}</span>
            <span style="color: #5bc4bf">/&gt;</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Router&gt;</span>
    <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>The Organization component wasn&rsquo;t implemented yet, but you can start with a functional stateless
                component in the <em>src/Organization/index.js</em> file, that acts as a placeholder to keep the
                application working for now.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">Organization</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Organization</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;;</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Organization</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Since you mapped both routes to their respective components, so you want to implement navigation from
                one route to another. For this, introduce a <strong>Navigation</strong> component in the App component.
              </p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">Navigation</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./Navigation&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">Profile</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../Profile&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">Organization</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../Organization&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #e7e9db">...</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Router</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;App&quot;</span><span style="color: #5bc4bf">&gt;</span>
<span style="background-color: #4f424c">          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Navigation</span> <span style="color: #5bc4bf">/&gt;</span>
</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;App-main&quot;</span><span style="color: #5bc4bf">&gt;</span>
            <span style="color: #e7e9db">...</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Router&gt;</span>
    <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Next, we&rsquo;ll implement the Navigation component, which is responsible for displaying the two links
                to navigate between your routes using React Router&rsquo;s Link component.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Link</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-router-dom&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">import</span> <span style="color: #5bc4bf">*</span> <span style="color: #06b6ef">as</span> <span style="color: #06b6ef">routes</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../../constants/routes&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">import</span> <span style="color: #48b685">&#39;./style.css&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">Navigation</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">header</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;Navigation&quot;</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;Navigation-link&quot;</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Link</span> <span style="color: #06b6ef">to</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">routes</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">PROFILE</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Profile</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Link&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;Navigation-link&quot;</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Link</span> <span style="color: #06b6ef">to</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">routes</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">ORGANIZATION</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Organization</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Link&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/header&gt;</span>
<span style="color: #e7e9db">);</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Navigation</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>The Profile page works as before, but the Organization page is empty. In the last step, you defined the
                two routes as constants, used them in the App component to map to their respective components, and
                introduced Link components to navigate to them in the Navigation component.</p>

              <p>Another great feature of the Apollo Client is that it caches query requests. When navigating from the
                Profile page to the Organization page and back to the Profile page, the results appear immediately
                because the Apollo Client checks its cache before making the query to the remote GraphQL API. It&rsquo;s
                a pretty powerful tool.</p>

              <p>The next part of this section is the Organization component. It is the same as the Profile component,
                except the query differs because it takes a variable for the organization name to identify the
                organization&rsquo;s repositories.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">gql</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;graphql-tag&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Query</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-apollo&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">REPOSITORY_FRAGMENT</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../Repository&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">GET_REPOSITORIES_OF_ORGANIZATION</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">gql</span><span style="color: #48b685">`</span>
<span style="color: #48b685">  query($organizationName: String!) {</span>
<span style="color: #48b685">    organization(login: $organizationName) {</span>
<span style="color: #48b685">      repositories(first: 5) {</span>
<span style="color: #48b685">        edges {</span>
<span style="color: #48b685">          node {</span>
<span style="color: #48b685">            ...repository</span>
<span style="color: #48b685">          }</span>
<span style="color: #48b685">        }</span>
<span style="color: #48b685">      }</span>
<span style="color: #48b685">    }</span>
<span style="color: #48b685">  }</span>
<span style="color: #48b685">  </span><span style="color: #f99b15">${</span><span style="color: #06b6ef">REPOSITORY_FRAGMENT</span><span style="color: #f99b15">}</span><span style="color: #48b685"></span>
<span style="color: #48b685">`</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">Organization</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">organizationName</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Query</span>
    <span style="color: #06b6ef">query</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">GET_REPOSITORIES_OF_ORGANIZATION</span><span style="color: #e7e9db">}</span>
    <span style="color: #06b6ef">variables</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{{</span>
      <span style="color: #06b6ef">organizationName</span><span style="color: #e7e9db">,</span>
    <span style="color: #e7e9db">}}</span>
    <span style="color: #06b6ef">skip</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">organizationName</span> <span style="color: #5bc4bf">===</span> <span style="color: #48b685">&#39;&#39;</span><span style="color: #e7e9db">}</span>
  <span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">{({</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">loading</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">error</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
      <span style="color: #e7e9db">...</span>
    <span style="color: #e7e9db">}}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Query&gt;</span>
<span style="color: #e7e9db">);</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Organization</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>The Query component in the Organization component takes a query tailored to the organization being the
                top level field of the query. It takes a variable to identify the organization, and it uses the newly
                introduced <code>skip</code> prop to skip executing the query if no organization identifier is provided.
                Later, you will pass an organization identifier from the App component. You may have noticed that the
                repository fragment you introduced earlier to update the local state in the cache can be reused here. It
                saves lines of code, and more importantly, ensures the returned list of repositories have identical
                structures to the list of repositories in the Profile component.</p>

              <p>Next, extend the query to fit the requirements of the pagination feature. It requires the
                <code>cursor</code> argument to identify the next page of repositories. The
                <code>notifyOnNetworkStatusChange</code> prop is used to update the <code>loading</code> boolean for
                paginated requests as well.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">GET_REPOSITORIES_OF_ORGANIZATION</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">gql</span><span style="color: #48b685">`</span>
<span style="background-color: #4f424c"><span style="color: #48b685">  query($organizationName: String!, $cursor: String) {</span>
</span><span style="color: #48b685">    organization(login: $organizationName) {</span>
<span style="background-color: #4f424c"><span style="color: #48b685">      repositories(first: 5, after: $cursor) {</span>
</span><span style="color: #48b685">        edges {</span>
<span style="color: #48b685">          node {</span>
<span style="color: #48b685">            ...repository</span>
<span style="color: #48b685">          }</span>
<span style="color: #48b685">        }</span>
<span style="background-color: #4f424c"><span style="color: #48b685">        pageInfo {</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">          endCursor</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">          hasNextPage</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">        }</span>
</span><span style="color: #48b685">      }</span>
<span style="color: #48b685">    }</span>
<span style="color: #48b685">  }</span>
<span style="color: #48b685">  </span><span style="color: #f99b15">${</span><span style="color: #06b6ef">REPOSITORY_FRAGMENT</span><span style="color: #f99b15">}</span><span style="color: #48b685"></span>
<span style="color: #48b685">`</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">Organization</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">organizationName</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Query</span>
    <span style="color: #06b6ef">query</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">GET_REPOSITORIES_OF_ORGANIZATION</span><span style="color: #e7e9db">}</span>
    <span style="color: #06b6ef">variables</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{{</span>
      <span style="color: #06b6ef">organizationName</span><span style="color: #e7e9db">,</span>
    <span style="color: #e7e9db">}}</span>
    <span style="color: #06b6ef">skip</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">organizationName</span> <span style="color: #5bc4bf">===</span> <span style="color: #48b685">&#39;&#39;</span><span style="color: #e7e9db">}</span>
<span style="background-color: #4f424c">    <span style="color: #06b6ef">notifyOnNetworkStatusChange</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #815ba4">true</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">  <span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">{({</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">loading</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">error</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">fetchMore</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span>      <span style="color: #e7e9db">...</span>
    <span style="color: #e7e9db">}}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Query&gt;</span>
<span style="color: #e7e9db">);</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Organization</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Lastly, the render prop child function needs to be implemented. It doesn&rsquo;t differ much from the
                Query&rsquo;s content in the Profile component. Its purpose is to handle edge cases like loading and
                &lsquo;no data&rsquo; errors, and eventually, to show a list of repositories. Because the RepositoryList
                component handles the pagination feature, this improvement is included in the newly implemented
                Organization component.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">RepositoryList</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">REPOSITORY_FRAGMENT</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../Repository&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">Loading</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../Loading&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">ErrorMessage</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../Error&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #e7e9db">...</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">Organization</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">organizationName</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Query</span> <span style="color: #e7e9db">...</span> <span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">{({</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">loading</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">error</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">fetchMore</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">      <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">error</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">        <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ErrorMessage</span> <span style="color: #06b6ef">error</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">error</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">      <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">organization</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">      <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">loading</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #5bc4bf">!</span><span style="color: #06b6ef">organization</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">        <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Loading</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">      <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">RepositoryList</span>
</span><span style="background-color: #4f424c">          <span style="color: #06b6ef">loading</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">loading</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">          <span style="color: #06b6ef">repositories</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">organization</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">          <span style="color: #06b6ef">fetchMore</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">fetchMore</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">        <span style="color: #5bc4bf">/&gt;</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">}}</span>
</span>  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Query&gt;</span>
<span style="color: #e7e9db">);</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Organization</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Provide a <code>organizationName</code> as prop when using the Organization in the App component, and
                leave it inlined for now. Later, you will make it dynamic with a search field.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Router</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;App&quot;</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Navigation</span> <span style="color: #5bc4bf">/&gt;</span>

          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;App-main&quot;</span><span style="color: #5bc4bf">&gt;</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Route</span>
              <span style="color: #06b6ef">exact</span>
              <span style="color: #06b6ef">path</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">routes</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">ORGANIZATION</span><span style="color: #e7e9db">}</span>
              <span style="color: #06b6ef">component</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
                <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;App-content_large-header&quot;</span><span style="color: #5bc4bf">&gt;</span>
                  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Organization</span>
<span style="background-color: #4f424c">                    <span style="color: #06b6ef">organizationName</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #48b685">&#39;the-road-to-learn-react&#39;</span><span style="color: #e7e9db">}</span>
</span>                  <span style="color: #5bc4bf">/&gt;</span>
                <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
              <span style="color: #e7e9db">)}</span>
            <span style="color: #5bc4bf">/&gt;</span>
            <span style="color: #e7e9db">...</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Router&gt;</span>
    <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>
</code></pre>
              </div>


              <p>The Organization component should almost work now, as the <code>More</code> button is the only
                incomplete part. The remaining issue is the resolving block for the pagination feature in the
                <code>updateQuery</code> function. It assumes that the nested data structure always starts with a
                <code>viewer</code> object. It does for the Profile page, but not for the Organization page. There the
                top level object is the <code>organization</code> followed by the list of <code>repositories</code>.
                Only the top level object changes from page to page, where the underlying structure stays identical.</p>

              <p>When the top level object changes from page to page, the ideal next step is to tell the RepositoryList
                component its top level object from the outside. With the Organization component, its the top-level
                object <code>organization</code>, which could be passed as a string and reused as a dynamic key later:
              </p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">Organization</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">organizationName</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Query</span> <span style="color: #e7e9db">...</span> <span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">{({</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">loading</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">error</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">fetchMore</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
      <span style="color: #e7e9db">...</span>

      <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">RepositoryList</span>
          <span style="color: #06b6ef">loading</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">loading</span><span style="color: #e7e9db">}</span>
          <span style="color: #06b6ef">repositories</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">organization</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">}</span>
          <span style="color: #06b6ef">fetchMore</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">fetchMore</span><span style="color: #e7e9db">}</span>
<span style="background-color: #4f424c">          <span style="color: #06b6ef">entry</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #48b685">&#39;organization&#39;</span><span style="color: #e7e9db">}</span>
</span>        <span style="color: #5bc4bf">/&gt;</span>
      <span style="color: #e7e9db">);</span>
    <span style="color: #e7e9db">}}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Query&gt;</span>
<span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>With the Profile component, the <code>viewer</code> would be the top level object:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">Profile</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Query</span> <span style="color: #e7e9db">...</span> <span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">{({</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">loading</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">error</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">fetchMore</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
      <span style="color: #e7e9db">...</span>

      <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">RepositoryList</span>
          <span style="color: #06b6ef">loading</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">loading</span><span style="color: #e7e9db">}</span>
          <span style="color: #06b6ef">repositories</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">viewer</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">}</span>
          <span style="color: #06b6ef">fetchMore</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">fetchMore</span><span style="color: #e7e9db">}</span>
<span style="background-color: #4f424c">          <span style="color: #06b6ef">entry</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #48b685">&#39;viewer&#39;</span><span style="color: #e7e9db">}</span>
</span>        <span style="color: #5bc4bf">/&gt;</span>
      <span style="color: #e7e9db">);</span>
    <span style="color: #e7e9db">}}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Query&gt;</span>
<span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>Now you can handle the new case in the RepositoryList component by passing the entry as <a
                  target="_blank" rel="noopener noreferrer"
                  href="https://developer.mozilla.org/my/docs/Web/JavaScript/Reference/Operators/Object_initializer#Computed_property_names">computed
                  property name</a> to the <code>updateQuery</code> function. Instead of passing the
                <code>updateQuery</code> function directly to the FetchMore component, it can be derived from a
                higher-order function needed to pass the new <code>entry</code> property.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">RepositoryList</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span>
  <span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">loading</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">fetchMore</span><span style="color: #e7e9db">,</span>
<span style="background-color: #4f424c">  <span style="color: #06b6ef">entry</span><span style="color: #e7e9db">,</span>
</span><span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Fragment</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">...</span>

    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">FetchMore</span>
      <span style="color: #06b6ef">loading</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">loading</span><span style="color: #e7e9db">}</span>
      <span style="color: #06b6ef">hasNextPage</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">pageInfo</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">hasNextPage</span><span style="color: #e7e9db">}</span>
      <span style="color: #06b6ef">variables</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{{</span>
        <span style="color: #06b6ef">cursor</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">pageInfo</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">endCursor</span><span style="color: #e7e9db">,</span>
      <span style="color: #e7e9db">}}</span>
<span style="background-color: #4f424c">      <span style="color: #06b6ef">updateQuery</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">getUpdateQuery</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">entry</span><span style="color: #e7e9db">)}</span>
</span>      <span style="color: #06b6ef">fetchMore</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">fetchMore</span><span style="color: #e7e9db">}</span>
    <span style="color: #5bc4bf">&gt;</span>
      <span style="color: #06b6ef">Repositories</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/FetchMore&gt;</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Fragment&gt;</span>
<span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>The higher-order function next to the RepositoryList component is completed as such:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">getUpdateQuery</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">entry</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
</span>  <span style="color: #06b6ef">previousResult</span><span style="color: #e7e9db">,</span>
  <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">fetchMoreResult</span> <span style="color: #e7e9db">},</span>
<span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #5bc4bf">!</span><span style="color: #06b6ef">fetchMoreResult</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">return</span> <span style="color: #06b6ef">previousResult</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">...</span><span style="color: #06b6ef">previousResult</span><span style="color: #e7e9db">,</span>
<span style="background-color: #4f424c">    <span style="color: #e7e9db">[</span><span style="color: #06b6ef">entry</span><span style="color: #e7e9db">]</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">...</span><span style="color: #06b6ef">previousResult</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">entry</span><span style="color: #e7e9db">],</span>
</span>      <span style="color: #06b6ef">repositories</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">        <span style="color: #e7e9db">...</span><span style="color: #06b6ef">previousResult</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">entry</span><span style="color: #e7e9db">].</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">        <span style="color: #e7e9db">...</span><span style="color: #06b6ef">fetchMoreResult</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">entry</span><span style="color: #e7e9db">].</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">,</span>
</span>        <span style="color: #06b6ef">edges</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">[</span>
<span style="background-color: #4f424c">          <span style="color: #e7e9db">...</span><span style="color: #06b6ef">previousResult</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">entry</span><span style="color: #e7e9db">].</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">edges</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">          <span style="color: #e7e9db">...</span><span style="color: #06b6ef">fetchMoreResult</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">entry</span><span style="color: #e7e9db">].</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">edges</span><span style="color: #e7e9db">,</span>
</span>        <span style="color: #e7e9db">],</span>
      <span style="color: #e7e9db">},</span>
    <span style="color: #e7e9db">},</span>
  <span style="color: #e7e9db">};</span>
<span style="color: #e7e9db">};</span>
</code></pre>
              </div>


              <p>That&rsquo;s how a deeply-nested object is updated with the <code>fetchMoreResult</code>, even though
                the top level component from the query result is not static. The pagination feature should work on both
                pages now. Take a moment to recap the last implementations again and why these were necessary.</p>

              <p>Next, we&rsquo;ll implement the search function I mentioned earlier. The best place to add the search
                field would be the Navigation component, but only when the Organization page is active. React Router
                comes with a useful higher-order component to access to the current URL, which can be used to show a
                search field.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Link</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">withRouter</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-router-dom&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #815ba4">import</span> <span style="color: #5bc4bf">*</span> <span style="color: #06b6ef">as</span> <span style="color: #06b6ef">routes</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../../constants/routes&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">import</span> <span style="color: #48b685">&#39;./style.css&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">Navigation</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span>
<span style="background-color: #4f424c">  <span style="color: #06b6ef">location</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">pathname</span> <span style="color: #e7e9db">},</span>
</span><span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">header</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;Navigation&quot;</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;Navigation-link&quot;</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Link</span> <span style="color: #06b6ef">to</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">routes</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">PROFILE</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Profile</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Link&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;Navigation-link&quot;</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Link</span> <span style="color: #06b6ef">to</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">routes</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">ORGANIZATION</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Organization</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Link&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>

<span style="background-color: #4f424c">    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">pathname</span> <span style="color: #5bc4bf">===</span> <span style="color: #06b6ef">routes</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">ORGANIZATION</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">OrganizationSearch</span> <span style="color: #5bc4bf">/&gt;</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">)}</span>
</span>  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/header&gt;</span>
<span style="color: #e7e9db">);</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">withRouter</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">Navigation</span><span style="color: #e7e9db">);</span>
</span></code></pre>
              </div>


              <p>The OrganizationSearch component is implemented next to the Navigation component in the next steps.
                Before that can work, there needs to be some kind of initial state for the OrganizationSearch, as well
                as a callback function to update the initial state in the Navigation component. To accommodate this, the
                Navigation component becomes a class component.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">class</span> <span style="color: #06b6ef">Navigation</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">organizationName</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;the-road-to-learn-react&#39;</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">};</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">onOrganizationSearch</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">value</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">organizationName</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">value</span> <span style="color: #e7e9db">});</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">};</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">location</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">pathname</span> <span style="color: #e7e9db">}</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
</span>      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">header</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;Navigation&quot;</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;Navigation-link&quot;</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Link</span> <span style="color: #06b6ef">to</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">routes</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">PROFILE</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Profile</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Link&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;Navigation-link&quot;</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Link</span> <span style="color: #06b6ef">to</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">routes</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">ORGANIZATION</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Organization</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Link&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>

        <span style="color: #e7e9db">{</span><span style="color: #06b6ef">pathname</span> <span style="color: #5bc4bf">===</span> <span style="color: #06b6ef">routes</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">ORGANIZATION</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #e7e9db">(</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">OrganizationSearch</span>
<span style="background-color: #4f424c">            <span style="color: #06b6ef">organizationName</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">organizationName</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">            <span style="color: #06b6ef">onOrganizationSearch</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">onOrganizationSearch</span><span style="color: #e7e9db">}</span>
</span>          <span style="color: #5bc4bf">/&gt;</span>
        <span style="color: #e7e9db">)}</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/header&gt;</span>
<span style="background-color: #4f424c">    <span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">}</span>
</span>
<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">withRouter</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">Navigation</span><span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>The OrganizationSearch component implemented in the same file would also work with the following
                implementation. It handles its own local state, the value that shows up in the input field, but uses it
                as an initial value from the parent component. It also receives a callback handler, which can be used in
                the <code>onSubmit()</code> class method to propagate the search fields value on a submit interaction up
                the component tree.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">Button</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../../Button&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">Input</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../../Input&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #815ba4">import</span> <span style="color: #48b685">&#39;./style.css&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">Navigation</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #e7e9db">...</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">...</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">class</span> <span style="color: #06b6ef">OrganizationSearch</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">value</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">organizationName</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">};</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">onChange</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">event</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">value</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">event</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">target</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">value</span> <span style="color: #e7e9db">});</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">};</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">onSubmit</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">event</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">onOrganizationSearch</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">value</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">event</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">preventDefault</span><span style="color: #e7e9db">();</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">};</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">value</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;Navigation-search&quot;</span><span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">form</span> <span style="color: #06b6ef">onSubmit</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">onSubmit</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Input</span>
</span><span style="background-color: #4f424c">            <span style="color: #06b6ef">color</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #48b685">&#39;white&#39;</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">            <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;text&quot;</span>
</span><span style="background-color: #4f424c">            <span style="color: #06b6ef">value</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">value</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">            <span style="color: #06b6ef">onChange</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">onChange</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">          <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">{</span><span style="color: #48b685">&#39; &#39;</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Button</span> <span style="color: #06b6ef">color</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #48b685">&#39;white&#39;</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;submit&quot;</span><span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">            <span style="color: #06b6ef">Search</span>
</span><span style="background-color: #4f424c">          <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Button&gt;</span>
</span><span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/form&gt;</span>
</span><span style="background-color: #4f424c">      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">}</span>
</span>
<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">withRouter</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">Navigation</span><span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>The Input component is a slightly styled input element that is defined in <em>src/Input/index.js</em>
                as its own component.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">import</span> <span style="color: #48b685">&#39;./style.css&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">Input</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">children</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">color</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">&#39;black&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">...</span><span style="color: #06b6ef">props</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">input</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #48b685">`Input Input_</span><span style="color: #f99b15">${</span><span style="color: #06b6ef">color</span><span style="color: #f99b15">}</span><span style="color: #48b685">`</span><span style="color: #e7e9db">}</span> <span style="color: #e7e9db">{...</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">children</span><span style="color: #e7e9db">}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/input&gt;</span>
<span style="color: #e7e9db">);</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Input</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>While the search field works in the Navigation component, it doesn&rsquo;t help the rest of the
                application. It only updates the state in the Navigation component when a search request is submitted.
                However, the value of the search request is needed in the Organization component as a GraphQL variable
                for the query, so the local state needs to be lifted up from the Navigation component to the App
                component. The Navigation component becomes a stateless functional component again.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">Navigation</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">location</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">pathname</span> <span style="color: #e7e9db">},</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">organizationName</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">onOrganizationSearch</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
</span>  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">header</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;Navigation&quot;</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;Navigation-link&quot;</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Link</span> <span style="color: #06b6ef">to</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">routes</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">PROFILE</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Profile</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Link&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;Navigation-link&quot;</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Link</span> <span style="color: #06b6ef">to</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">routes</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">ORGANIZATION</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Organization</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Link&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>

    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">pathname</span> <span style="color: #5bc4bf">===</span> <span style="color: #06b6ef">routes</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">ORGANIZATION</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">OrganizationSearch</span>
<span style="background-color: #4f424c">        <span style="color: #06b6ef">organizationName</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">organizationName</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">        <span style="color: #06b6ef">onOrganizationSearch</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">onOrganizationSearch</span><span style="color: #e7e9db">}</span>
</span>      <span style="color: #5bc4bf">/&gt;</span>
    <span style="color: #e7e9db">)}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/header&gt;</span>
<span style="background-color: #4f424c"><span style="color: #e7e9db">);</span>
</span></code></pre>
              </div>


              <p>The App component takes over the responsibility from the Navigation component, managing the local
                state, passing the initial state and a callback function to update the state to the Navigation
                component, and passing the state itself to the Organization component to perform the query:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">  <span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">organizationName</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;the-road-to-learn-react&#39;</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">};</span>
</span>
<span style="background-color: #4f424c">  <span style="color: #06b6ef">onOrganizationSearch</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">value</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">organizationName</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">value</span> <span style="color: #e7e9db">});</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">};</span>
</span>
  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">    <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">organizationName</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">;</span>
</span>
    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Router</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;App&quot;</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Navigation</span>
<span style="background-color: #4f424c">            <span style="color: #06b6ef">organizationName</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">organizationName</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">            <span style="color: #06b6ef">onOrganizationSearch</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">onOrganizationSearch</span><span style="color: #e7e9db">}</span>
</span>          <span style="color: #5bc4bf">/&gt;</span>

          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;App-main&quot;</span><span style="color: #5bc4bf">&gt;</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Route</span>
              <span style="color: #06b6ef">exact</span>
              <span style="color: #06b6ef">path</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">routes</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">ORGANIZATION</span><span style="color: #e7e9db">}</span>
              <span style="color: #06b6ef">component</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
                <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;App-content_large-header&quot;</span><span style="color: #5bc4bf">&gt;</span>
<span style="background-color: #4f424c">                  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Organization</span> <span style="color: #06b6ef">organizationName</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">organizationName</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span>
</span>                <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
              <span style="color: #e7e9db">)}</span>
            <span style="color: #5bc4bf">/&gt;</span>
            <span style="color: #e7e9db">...</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Router&gt;</span>
    <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>You have implemented a dynamic GraphQL query with a search field. Once a new
                <code>organizationName</code> is passed to the Organization component from a local state change, the
                Query component triggers another request due to a re-render. The request is not always made to the
                remote GraphQL API, though. The Apollo Client cache is used when an organization is searched twice.
                Also, you have used the well-known technique called lifting state in React to share the state across
                components.</p>

              <h3 id="exercises-10">Exercises:</h3>

              <ul>
                <li>Confirm your <a href="http://bit.ly/2VojIXR">source code for the last section</a>

                  <ul>
                    <li>Confirm the <a href="http://bit.ly/2VkYSse">changes from the last section</a></li>
                  </ul>
                </li>
                <li>If you are not familiar with React Router, try it out in <a target="_blank"
                    rel="noopener noreferrer" href="../complete-firebase-authentication-react-tutorial/index.html">this
                    pragmatic tutorial</a></li>
                <li>Invest 3 minutes of your time and take the <a target="_blank" rel="noopener noreferrer"
                    href="https://www.surveymonkey.com/r/5HFQ3TD">quiz</a></li>
              </ul>

              <h2 class="chapter-header" id="react-apollo-client-feature-setup">Implementing the Issues Feature: Setup
              </h2>

              <p>In the previous sections you have implemented most of the common Apollo Client features in your React
                application. Now you can start implementing extensions for the application on your own. This section
                showcases how a full-fledged feature can be implemented with Apollo Client in React.</p>

              <p>So far, you have dealt with GitHub repositories from organizations and your account. This will take
                that one step further, fetching GitHub issues that are made available using a list field associated to a
                repository in a GraphQL query. However, this section doesn&rsquo;t only show you how to render a nested
                list field in your React application.</p>

              <p>The foundation will be rendering the list of issues. You will implement client-side filtering with
                plain React to show opened, closed, or no issue. Finally, you will refactor the filtering to a
                server-side filtering using GraphQL queries. We will only fetch the issues by their state from the
                server rather than filtering the issue&rsquo;s state on the client-side. Implementing pagination for the
                issues will be your exercise.</p>

              <p>First, render a new component called &lsquo;Issues&rsquo; in your RepositoryList component. This
                component takes two props that are used later in a GraphQL query to identify the repository from which
                you want to fetch the issues.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #815ba4">import</span> <span style="color: #06b6ef">FetchMore</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../../FetchMore&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">RepositoryItem</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../RepositoryItem&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">Issues</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../../Issue&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #e7e9db">...</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">RepositoryList</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span>
  <span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">loading</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">fetchMore</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">entry</span><span style="color: #e7e9db">,</span>
<span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Fragment</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">edges</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(({</span> <span style="color: #06b6ef">node</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">node</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;RepositoryItem&quot;</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">RepositoryItem</span> <span style="color: #e7e9db">{...</span><span style="color: #06b6ef">node</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span>

<span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Issues</span>
</span><span style="background-color: #4f424c">          <span style="color: #06b6ef">repositoryName</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">node</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">name</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">          <span style="color: #06b6ef">repositoryOwner</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">node</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">owner</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">login</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">        <span style="color: #5bc4bf">/&gt;</span>
</span>      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
    <span style="color: #e7e9db">))}</span>

    <span style="color: #e7e9db">...</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Fragment&gt;</span>
<span style="color: #e7e9db">);</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">RepositoryList</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>In the <em>src/Issue/index.js</em> file, import and export the Issues component. Since the issue
                feature can be kept in a module on its own, it has this <em>index.js</em> file again. That&rsquo;s how
                you can tell other developers to access only this feature module, using the <em>index.js</em> file as
                its interface. Everything else is kept private.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">Issues</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./IssueList&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Issues</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Note how the component is named Issues, not IssueList. The naming convention is used to break down the
                rendering of a list of items: Issues, IssueList and IssueItem. Issues is the container component, where
                you query the data and filter the issues, and the IssueList and IssueItem are only there as
                presentational components for rendering. In contrast, the Repository feature module hasn&rsquo;t a
                Repositories component, because there was no need for it. The list of repositories already came from the
                Organization and Profile components and the Repository module&rsquo;s components are mainly only there
                for the rendering. This is only one opinionated approach of naming the components, however.</p>

              <p>Let&rsquo;s start implementing Issues and IssueList components in the
                <em>src/Issue/IssueList/index.js</em> file. You could argue to split both components up into their own
                files, but for the sake of this tutorial, they are kept together in one file.</p>

              <p>First, there needs to be a new query for the issues. You might wonder: Why do we need a new query here?
                It would be simpler to include the issues list field in the query at the top next to the Organization
                and Profile components. That&rsquo;s true, but it comes with a cost. Adding more nested (list) fields to
                a query often results into performance issues on the server-side. There you may have to make multiple
                roundtrips to retrieve all the entities from the database.</p>

              <ul>
                <li>Roundtrip 1: get organization by name</li>
                <li>Roundtrip 2: get repositories of organization by organization identifier</li>
                <li>Roundtrip 3: get issues of repository by repository identifier</li>
              </ul>

              <p>It is simple to conclude that nesting queries in a naive way solves all of our problems. Whereas it
                solves the problem of only requesting the data once and not with multiple network request (similar
                roundtrips as shown for the database), GraphQL doesn&rsquo;t solve the problem of retrieving all the
                data from the database for you. That&rsquo;s not the responsibility of GraphQL after all. So by having a
                dedicated query in the Issues component, you can decide <strong>when</strong> to trigger this query. In
                the next steps, you will just trigger it on render because the Query component is used. But when adding
                the client-side filter later on, it will only be triggered when the &ldquo;Filter&rdquo; button is
                toggled. Otherwise the issues should be hidden. Finally, that&rsquo;s how all the initial data loading
                can be delayed to a point when the user actually wants to see the data.</p>

              <p>First, define the Issues component which has access to the props which were passed in the
                RepositoryList component. It doesn&rsquo;t render much yet.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">import</span> <span style="color: #48b685">&#39;./style.css&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">Issues</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">repositoryOwner</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">repositoryName</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;Issues&quot;</span><span style="color: #5bc4bf">&gt;</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Issues</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Second, define the query in the <em>src/Issue/IssueList/index.js</em> file to retrieve issues of a
                repository. The repository is identified by its owner and name. Also, add the <code>state</code> field
                as one of the fields for the query result. This is used for client-side filtering, for showing issues
                with an open or closed state.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">gql</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;graphql-tag&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #815ba4">import</span> <span style="color: #48b685">&#39;./style.css&#39;</span><span style="color: #e7e9db">;</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">GET_ISSUES_OF_REPOSITORY</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">gql</span><span style="color: #48b685">`</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">  query($repositoryOwner: String!, $repositoryName: String!) {</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">    repository(name: $repositoryName, owner: $repositoryOwner) {</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">      issues(first: 5) {</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">        edges {</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">          node {</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">            id</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">            number</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">            state</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">            title</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">            url</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">            bodyHTML</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">          }</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">        }</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">      }</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">    }</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">  }</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">`</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #e7e9db">...</span>
</code></pre>
              </div>


              <p>Third, introduce the Query component and pass it the previously defined query and the necessary
                variables. Use its render prop child function to access the data, to cover all edge cases and to render
                a IssueList component eventually.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Query</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-apollo&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">gql</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;graphql-tag&#39;</span><span style="color: #e7e9db">;</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">IssueItem</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../IssueItem&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">Loading</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../../Loading&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">ErrorMessage</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../../Error&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #815ba4">import</span> <span style="color: #48b685">&#39;./style.css&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">Issues</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">repositoryOwner</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">repositoryName</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;Issues&quot;</span><span style="color: #5bc4bf">&gt;</span>
<span style="background-color: #4f424c">    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Query</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">query</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">GET_ISSUES_OF_REPOSITORY</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">variables</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{{</span>
</span><span style="background-color: #4f424c">        <span style="color: #06b6ef">repositoryOwner</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">        <span style="color: #06b6ef">repositoryName</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">}}</span>
</span><span style="background-color: #4f424c">    <span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">{({</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">loading</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">error</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">        <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">error</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">          <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ErrorMessage</span> <span style="color: #06b6ef">error</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">error</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c">        <span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">        <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">repository</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">        <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">loading</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #5bc4bf">!</span><span style="color: #06b6ef">repository</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">          <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Loading</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c">        <span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">        <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #5bc4bf">!</span><span style="color: #06b6ef">repository</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">issues</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">edges</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">length</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">          <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;IssueList&quot;</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">No</span> <span style="color: #06b6ef">issues</span> <span style="color: #e7e9db">...</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;;</span>
</span><span style="background-color: #4f424c">        <span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">        <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">IssueList</span> <span style="color: #06b6ef">issues</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">repository</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">issues</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">}}</span>
</span><span style="background-color: #4f424c">    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Query&gt;</span>
</span>  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
<span style="color: #e7e9db">);</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">IssueList</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">issues</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;IssueList&quot;</span><span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">issues</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">edges</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(({</span> <span style="color: #06b6ef">node</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">IssueItem</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">node</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">issue</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">node</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">))}</span>
</span><span style="background-color: #4f424c">  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">);</span>
</span>
<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Issues</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Finally, implement a basic IssueItem component in the <em>src/Issue/IssueItem/index.js</em> file. The
                snippet below shows a placeholder where you can implement the Commenting feature, which we&rsquo;ll
                cover later.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">import</span> <span style="color: #06b6ef">Link</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../../Link&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">import</span> <span style="color: #48b685">&#39;./style.css&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">IssueItem</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">issue</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;IssueItem&quot;</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">{</span><span style="color: #776e71">/* placeholder to add a show/hide comment button later */</span><span style="color: #e7e9db">}</span>

    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;IssueItem-content&quot;</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">h3</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Link</span> <span style="color: #06b6ef">href</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">issue</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">url</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">issue</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">title</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Link&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/h3&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">dangerouslySetInnerHTML</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{{</span> <span style="color: #06b6ef">__html</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">issue</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">bodyHTML</span> <span style="color: #e7e9db">}}</span> <span style="color: #5bc4bf">/&gt;</span>

      <span style="color: #e7e9db">{</span><span style="color: #776e71">/* placeholder to render a list of comments later */</span><span style="color: #e7e9db">}</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
<span style="color: #e7e9db">);</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">IssueItem</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Once you start your application again, you should see the initial page of paginated issues rendered
                below each repository. That&rsquo;s a performance bottleneck. Worse, the GraphQL requests are not
                bundled in one request, as with the issues list field in the Organization and Profile components. In the
                next steps you are implementing client-side filtering. The default is to show no issues, but it can
                toggle between states of showing none, open issues, and closed issues using a button, so the issues will
                not be queried before toggling one of the issue states.</p>

              <h3 id="exercises-11">Exercises:</h3>

              <ul>
                <li>Confirm your <a href="http://bit.ly/2VseREY">source code for the last section</a>

                  <ul>
                    <li>Confirm the <a href="http://bit.ly/2VqLeUn">changes from the last section</a></li>
                  </ul>
                </li>
                <li>Read more about <a target="_blank" rel="noopener noreferrer"
                    href="https://developer.github.com/v4/guides/resource-limitations/">the rate limit when using a (or
                    in this case GitHub&rsquo;s) GraphQL API</a></li>
              </ul>

              <h2 class="chapter-header" id="react-apollo-client-feature-client-filter">Implementing the Issues Feature:
                Client-Side Filter</h2>

              <p>In this section, we enhance the Issue feature with client-side filtering. It prevents the initial issue
                querying because it happens with a button, and it lets the user filter between closed and open issues.
              </p>

              <p>First, let&rsquo;s introduce our three states as enumeration next to the Issues component. The
                <code>NONE</code> state is used to show no issues; otherwise, the other states are used to show open or
                closed issues.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">ISSUE_STATES</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">NONE</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;NONE&#39;</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">OPEN</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;OPEN&#39;</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">CLOSED</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;CLOSED&#39;</span><span style="color: #e7e9db">,</span>
<span style="color: #e7e9db">};</span>
</code></pre>
              </div>


              <p>Second, let&rsquo;s implement a short function that decides whether it is a state to show the issues or
                not. This function can be defined in the same file.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">isShow</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">issueState</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">issueState</span> <span style="color: #5bc4bf">!==</span> <span style="color: #06b6ef">ISSUE_STATES</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">NONE</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Third, the function can be used for conditional rendering, to either query the issues and show the
                IssueList, or to do nothing. It&rsquo;s not clear yet where the <code>issueState</code> property comes
                from.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">Issues</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">repositoryOwner</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">repositoryName</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;Issues&quot;</span><span style="color: #5bc4bf">&gt;</span>
<span style="background-color: #4f424c">    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">isShow</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #e7e9db">(</span>
</span>      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Query</span> <span style="color: #e7e9db">...</span> <span style="color: #5bc4bf">&gt;</span>
        <span style="color: #e7e9db">...</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Query&gt;</span>
    <span style="color: #e7e9db">)}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
<span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>The <code>issueState</code> property must come from the local state to toggle it via a button in the
                component, so the Issues component must be refactored to a class component to manage this state.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="background-color: #4f424c"><span style="color: #815ba4">class</span> <span style="color: #06b6ef">Issues</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">issueState</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">ISSUE_STATES</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">NONE</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">};</span>
</span>
<span style="background-color: #4f424c">  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">issueState</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">repositoryOwner</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">repositoryName</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">;</span>
</span>
<span style="background-color: #4f424c">    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
</span>      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;Issues&quot;</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #e7e9db">{</span><span style="color: #06b6ef">isShow</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #e7e9db">(</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Query</span> <span style="color: #e7e9db">...</span> <span style="color: #5bc4bf">&gt;</span>
            <span style="color: #e7e9db">...</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Query&gt;</span>
        <span style="color: #e7e9db">)}</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
<span style="background-color: #4f424c">    <span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">}</span>
</span></code></pre>
              </div>


              <p>The application should be error-free now, because the initial state is set to <code>NONE</code> and the
                conditional rendering prevents the query and the rendering of a result. However, the client-side
                filtering is not done yet, as you still need to toggle the <code>issueState</code> property with
                React&rsquo;s local state. The ButtonUnobtrusive component has the appropriate style, so we can reuse it
                to implement this toggling behavior to transition between the three available states.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #815ba4">import</span> <span style="color: #06b6ef">IssueItem</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../IssueItem&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">Loading</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../../Loading&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">ErrorMessage</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../../Error&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">ButtonUnobtrusive</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../../Button&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #815ba4">class</span> <span style="color: #06b6ef">Issues</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">issueState</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">ISSUE_STATES</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">NONE</span><span style="color: #e7e9db">,</span>
  <span style="color: #e7e9db">};</span>

<span style="background-color: #4f424c">  <span style="color: #06b6ef">onChangeIssueState</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">nextIssueState</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">issueState</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">nextIssueState</span> <span style="color: #e7e9db">});</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">};</span>
</span>
  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">issueState</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">;</span>
    <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">repositoryOwner</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">repositoryName</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">;</span>

    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;Issues&quot;</span><span style="color: #5bc4bf">&gt;</span>
<span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ButtonUnobtrusive</span>
</span><span style="background-color: #4f424c">          <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span>
</span><span style="background-color: #4f424c">            <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">onChangeIssueState</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">TRANSITION_STATE</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">])</span>
</span><span style="background-color: #4f424c">          <span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">        <span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">          <span style="color: #e7e9db">{</span><span style="color: #06b6ef">TRANSITION_LABELS</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">]}</span>
</span><span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ButtonUnobtrusive&gt;</span>
</span>
        <span style="color: #e7e9db">{</span><span style="color: #06b6ef">isShow</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #e7e9db">(</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Query</span> <span style="color: #e7e9db">...</span> <span style="color: #5bc4bf">&gt;</span>
            <span style="color: #e7e9db">...</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Query&gt;</span>
        <span style="color: #e7e9db">)}</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
    <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>
</code></pre>
              </div>


              <p>In the last step, you introduced the button to toggle between the three states. You used two
                enumerations, <code>TRANSITION_LABELS</code> and <code>TRANSITION_STATE</code>, to show an appropriate
                button label and to define the next state after a state transition. These enumerations can be defined
                next to the <code>ISSUE_STATES</code> enumeration.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">TRANSITION_LABELS</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">[</span><span style="color: #06b6ef">ISSUE_STATES</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">NONE</span><span style="color: #e7e9db">]</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;Show Open Issues&#39;</span><span style="color: #e7e9db">,</span>
  <span style="color: #e7e9db">[</span><span style="color: #06b6ef">ISSUE_STATES</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">OPEN</span><span style="color: #e7e9db">]</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;Show Closed Issues&#39;</span><span style="color: #e7e9db">,</span>
  <span style="color: #e7e9db">[</span><span style="color: #06b6ef">ISSUE_STATES</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">CLOSED</span><span style="color: #e7e9db">]</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;Hide Issues&#39;</span><span style="color: #e7e9db">,</span>
<span style="color: #e7e9db">};</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">TRANSITION_STATE</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">[</span><span style="color: #06b6ef">ISSUE_STATES</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">NONE</span><span style="color: #e7e9db">]</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">ISSUE_STATES</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">OPEN</span><span style="color: #e7e9db">,</span>
  <span style="color: #e7e9db">[</span><span style="color: #06b6ef">ISSUE_STATES</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">OPEN</span><span style="color: #e7e9db">]</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">ISSUE_STATES</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">CLOSED</span><span style="color: #e7e9db">,</span>
  <span style="color: #e7e9db">[</span><span style="color: #06b6ef">ISSUE_STATES</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">CLOSED</span><span style="color: #e7e9db">]</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">ISSUE_STATES</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">NONE</span><span style="color: #e7e9db">,</span>
<span style="color: #e7e9db">};</span>
</code></pre>
              </div>


              <p>As you can see, whereas the former enumeration only matches a label to a given state, the latter
                enumeration matches the next state to a given state. That&rsquo;s how the toggling to a next state can
                be made simple. Last but not least, the <code>issueState</code> from the local state has to be used to
                filter the list of issues after they have been queried and should be rendered.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">class</span> <span style="color: #06b6ef">Issues</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">...</span>

  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">...</span>

    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;Issues&quot;</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #e7e9db">...</span>

        <span style="color: #e7e9db">{</span><span style="color: #06b6ef">isShow</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #e7e9db">(</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Query</span> <span style="color: #e7e9db">...</span> <span style="color: #5bc4bf">&gt;</span>
            <span style="color: #e7e9db">{({</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">loading</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">error</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
              <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">error</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
                <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ErrorMessage</span> <span style="color: #06b6ef">error</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">error</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">;</span>
              <span style="color: #e7e9db">}</span>

              <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">repository</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">;</span>

              <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">loading</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #5bc4bf">!</span><span style="color: #06b6ef">repository</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
                <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Loading</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">;</span>
              <span style="color: #e7e9db">}</span>

<span style="background-color: #4f424c">              <span style="color: #815ba4">const</span> <span style="color: #06b6ef">filteredRepository</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">                <span style="color: #06b6ef">issues</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">                  <span style="color: #06b6ef">edges</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">repository</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">issues</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">edges</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">filter</span><span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">                    <span style="color: #06b6ef">issue</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">issue</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">node</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">===</span> <span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">                  <span style="color: #e7e9db">),</span>
</span><span style="background-color: #4f424c">                <span style="color: #e7e9db">},</span>
</span><span style="background-color: #4f424c">              <span style="color: #e7e9db">};</span>
</span>
<span style="background-color: #4f424c">              <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #5bc4bf">!</span><span style="color: #06b6ef">filteredRepository</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">issues</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">edges</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">length</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span>                <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;IssueList&quot;</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">No</span> <span style="color: #06b6ef">issues</span> <span style="color: #e7e9db">...</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;;</span>
              <span style="color: #e7e9db">}</span>

              <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
<span style="background-color: #4f424c">                <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">IssueList</span> <span style="color: #06b6ef">issues</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">filteredRepository</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">issues</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span>
</span>              <span style="color: #e7e9db">);</span>
            <span style="color: #e7e9db">}}</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Query&gt;</span>
        <span style="color: #e7e9db">)}</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
    <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>
</code></pre>
              </div>


              <p>You have implemented client-side filtering. The button is used to toggle between the three states
                managed in the local state of the component. The issues are only queried in filtered and rendered
                states. In the next step, the existing client-side filtering should be advanced to a server-side
                filtering, which means the filtered issues are already requested from the server and not filtered
                afterward on the client.</p>

              <h3 id="exercises-12">Exercises:</h3>

              <ul>
                <li>Confirm your <a href="http://bit.ly/2VsfwpW">source code for the last section</a>

                  <ul>
                    <li>Confirm the <a href="http://bit.ly/2Vtl4Re">changes from the last section</a></li>
                  </ul>
                </li>
                <li>Install the <a target="_blank" rel="noopener noreferrer"
                    href="https://github.com/acdlite/recompose">recompose</a> library which implements many higher-order
                  components</li>
                <li>Refactor the Issues component from class component to functional stateless component</li>
                <li>Use the <code>withState</code> HOC for the Issues component to manage the <code>issueState</code>
                </li>
              </ul>

              <h2 class="chapter-header" id="react-apollo-client-feature-server-filter">Implementing the Issues Feature:
                Server-Side Filter</h2>

              <p>Before starting with the server-side filtering, let&rsquo;s recap the last exercise in case you had
                difficulties with it. Basically you can perform the refactoring in three steps. First, install recompose
                as package for your application on the command line:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #06b6ef">recompose</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span>
</code></pre>
              </div>


              <p>Second, import the <code>withState</code> higher-order component in the
                <em>src/Issue/IssueList/index.js</em> file and use it to wrap your exported Issues component, where the
                first argument is the property name in the local state, the second argument is the handler to change the
                property in the local state, and the third argument is the initial state for that property.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Query</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-apollo&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">gql</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;graphql-tag&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">withState</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;recompose&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #e7e9db">...</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">withState</span><span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">  <span style="color: #48b685">&#39;issueState&#39;</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #48b685">&#39;onChangeIssueState&#39;</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">ISSUE_STATES</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">NONE</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">)(</span><span style="color: #06b6ef">Issues</span><span style="color: #e7e9db">);</span>
</span></code></pre>
              </div>


              <p>Finally, refactor the Issues component from a class component to a functional stateless component. It
                accesses the <code>issueState</code> and <code>onChangeIssueState()</code> function in its props now.
                Remember to change the usage of the <code>onChangeIssueState</code> prop to being a function and not a
                class method anymore.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">Issues</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">repositoryOwner</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">repositoryName</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">onChangeIssueState</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
</span>  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;Issues&quot;</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ButtonUnobtrusive</span>
<span style="background-color: #4f424c">      <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">onChangeIssueState</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">TRANSITION_STATE</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">])}</span>
</span>    <span style="color: #5bc4bf">&gt;</span>
      <span style="color: #e7e9db">{</span><span style="color: #06b6ef">TRANSITION_LABELS</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">]}</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ButtonUnobtrusive&gt;</span>

    <span style="color: #e7e9db">...</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
<span style="background-color: #4f424c"><span style="color: #e7e9db">);</span>
</span>
<span style="color: #e7e9db">...</span>
</code></pre>
              </div>


              <p>The previous section makes writing stateful components, where the state is much more convenient. Next,
                advance the filtering from client-side to server-side. We use the defined GraphQL query and its
                arguments to make a more exact query by requesting only open or closed issues. In the
                <em>src/Issue/IssueList/index.js</em> file, extend the query with a variable to specify the issue state:
              </p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">GET_ISSUES_OF_REPOSITORY</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">gql</span><span style="color: #48b685">`</span>
<span style="color: #48b685">  query(</span>
<span style="color: #48b685">    $repositoryOwner: String!</span>
<span style="color: #48b685">    $repositoryName: String!</span>
<span style="background-color: #4f424c"><span style="color: #48b685">    $issueState: IssueState!</span>
</span><span style="color: #48b685">  ) {</span>
<span style="color: #48b685">    repository(name: $repositoryName, owner: $repositoryOwner) {</span>
<span style="background-color: #4f424c"><span style="color: #48b685">      issues(first: 5, states: [$issueState]) {</span>
</span><span style="color: #48b685">        edges {</span>
<span style="color: #48b685">          node {</span>
<span style="color: #48b685">            id</span>
<span style="color: #48b685">            number</span>
<span style="color: #48b685">            state</span>
<span style="color: #48b685">            title</span>
<span style="color: #48b685">            url</span>
<span style="color: #48b685">            bodyHTML</span>
<span style="color: #48b685">          }</span>
<span style="color: #48b685">        }</span>
<span style="color: #48b685">      }</span>
<span style="color: #48b685">    }</span>
<span style="color: #48b685">  }</span>
<span style="color: #48b685">`</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Next, you can use the <code>issueState</code> property as variable for your Query component. In
                addition, remove the client-side filter logic from the Query component&rsquo;s render prop function.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">Issues</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span>
  <span style="color: #06b6ef">repositoryOwner</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">repositoryName</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">onChangeIssueState</span><span style="color: #e7e9db">,</span>
<span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;Issues&quot;</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">...</span>

    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">isShow</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Query</span>
        <span style="color: #06b6ef">query</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">GET_ISSUES_OF_REPOSITORY</span><span style="color: #e7e9db">}</span>
        <span style="color: #06b6ef">variables</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{{</span>
          <span style="color: #06b6ef">repositoryOwner</span><span style="color: #e7e9db">,</span>
          <span style="color: #06b6ef">repositoryName</span><span style="color: #e7e9db">,</span>
<span style="background-color: #4f424c">          <span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">,</span>
</span>        <span style="color: #e7e9db">}}</span>
      <span style="color: #5bc4bf">&gt;</span>
        <span style="color: #e7e9db">{({</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">loading</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">error</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
          <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">error</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
            <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ErrorMessage</span> <span style="color: #06b6ef">error</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">error</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">;</span>
          <span style="color: #e7e9db">}</span>

          <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">repository</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">;</span>

          <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">loading</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #5bc4bf">!</span><span style="color: #06b6ef">repository</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
            <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Loading</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">;</span>
          <span style="color: #e7e9db">}</span>

          <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">IssueList</span> <span style="color: #06b6ef">issues</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">repository</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">issues</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">;</span>
        <span style="color: #e7e9db">}}</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Query&gt;</span>
    <span style="color: #e7e9db">)}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
<span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>You are only querying open or closed issues. Your query became more exact, and the filtering is no
                longer handled by the client.</p>

              <h3 id="exercises-13">Exercises:</h3>

              <ul>
                <li>Confirm your <a href="http://bit.ly/2VkQ064">source code for the last section</a>

                  <ul>
                    <li>Confirm the <a href="http://bit.ly/2VnWyAF">changes from the last section</a></li>
                  </ul>
                </li>
                <li>Implement the pagination feature for the Issue feature

                  <ul>
                    <li>Add the pageInfo information to the query</li>
                    <li>Add the additional cursor variable and argument to the query</li>
                    <li>Add the FetchMore component to the IssueList component</li>
                  </ul>
                </li>
              </ul>

              <h2 class="chapter-header" id="react-apollo-client-prefetching-data">Apollo Client Prefetching in React
              </h2>

              <p>This section is all about prefetching data, though the user doesn&rsquo;t need it immediately. It is
                another UX technique that can be deployed to the optimistic UI technique you used earlier. You will
                implement the prefetching data feature for the list of issues, but feel free to implement it for other
                data fetching later as your exercise.</p>

              <p>When your application renders for the first time, there no issues fetched, so no issues are rendered.
                The user has to toggle the filter button to fetch open issues, and do it again to fetch closed issues.
                The third click will hide the list of issues again. The goal of this section is to prefetch the next
                bulk of issues when the user hovers the filter button. For instance, when the issues are still hidden
                and the user hovers the filter button, the issues with the open state are prefetched in the background.
                When the user clicks the button, there is no waiting time, because the issues with the open state are
                already there. The same scenario applies for the transition from open to closed issues. To prepare this
                behavior, split out the filter button as its own component in the <em>src/Issue/IssueList/index.js</em>
                file:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">Issues</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span>
  <span style="color: #06b6ef">repositoryOwner</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">repositoryName</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">onChangeIssueState</span><span style="color: #e7e9db">,</span>
<span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;Issues&quot;</span><span style="color: #5bc4bf">&gt;</span>
<span style="background-color: #4f424c">    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">IssueFilter</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">issueState</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">onChangeIssueState</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">onChangeIssueState</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">    <span style="color: #5bc4bf">/&gt;</span>
</span>
    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">isShow</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #e7e9db">(</span>
      <span style="color: #e7e9db">...</span>
    <span style="color: #e7e9db">)}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
<span style="color: #e7e9db">);</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">IssueFilter</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">onChangeIssueState</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ButtonUnobtrusive</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">onChangeIssueState</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">TRANSITION_STATE</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">])}</span>
</span><span style="background-color: #4f424c">  <span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">TRANSITION_LABELS</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">]}</span>
</span><span style="background-color: #4f424c">  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ButtonUnobtrusive&gt;</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">);</span>
</span></code></pre>
              </div>


              <p>Now it is easier to focus on the IssueFilter component where most of the logic for data prefetching is
                implemented. Like before, the prefetching should happen when the user hovers over the button. There
                needs to be a prop for it, and a callback function which is executed when the user hovers over it. There
                is such a prop (attribute) for a button (element). We are dealing with HTML elements here.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">prefetchIssues</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{};</span>
</span>
<span style="color: #e7e9db">...</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">IssueFilter</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">onChangeIssueState</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ButtonUnobtrusive</span>
    <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">onChangeIssueState</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">TRANSITION_STATE</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">])}</span>
<span style="background-color: #4f424c">    <span style="color: #06b6ef">onMouseOver</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">prefetchIssues</span><span style="color: #e7e9db">}</span>
</span>  <span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">TRANSITION_LABELS</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">]}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ButtonUnobtrusive&gt;</span>
<span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>The <code>prefetchIssue()</code> function has to execute the identical GraphQL query executed by the
                Query component in the Issues component, but this time it is done in an imperative way instead of
                declarative. Rather than using the Query component for it, use the the Apollo Client instance directly
                to execute a query. Remember, the Apollo Client instance is hidden in the component tree, because you
                used React&rsquo;s Context API to provide the Apollo Client instance the component tree&rsquo;s top
                level. The Query and Mutation components have access to the Apollo Client, even though you have never
                used it yourself directly. However, this time you use it to query the prefetched data. Use the
                ApolloConsumer component from the React Apollo package to expose the Apollo Client instance in your
                component tree. You have used the ApolloProvider somewhere to provide the client instance, and you can
                use the ApolloConsumer to retrieve it now. In the <em>src/Issue/IssueList/index.js</em> file, import the
                ApolloConsumer component and use it in the IssueFilter component. It gives you access to the Apollo
                Client instance via its render props child function.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Query</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">ApolloConsumer</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-apollo&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">gql</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;graphql-tag&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">withState</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;recompose&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #e7e9db">...</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">IssueFilter</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">onChangeIssueState</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
<span style="background-color: #4f424c">  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ApolloConsumer</span><span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">client</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
</span>      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ButtonUnobtrusive</span>
        <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span>
          <span style="color: #06b6ef">onChangeIssueState</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">TRANSITION_STATE</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">])</span>
        <span style="color: #e7e9db">}</span>
<span style="background-color: #4f424c">        <span style="color: #06b6ef">onMouseOver</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">prefetchIssues</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">client</span><span style="color: #e7e9db">)}</span>
</span>      <span style="color: #5bc4bf">&gt;</span>
        <span style="color: #e7e9db">{</span><span style="color: #06b6ef">TRANSITION_LABELS</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">]}</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ButtonUnobtrusive&gt;</span>
<span style="background-color: #4f424c">    <span style="color: #e7e9db">)}</span>
</span><span style="background-color: #4f424c">  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ApolloConsumer&gt;</span>
</span><span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>Now you have access to the Apollo Client instance to perform queries and mutations, which will enable
                you to query GitHub&rsquo;s GraphQL API imperatively. The variables needed to perform the prefetching of
                issues are the same ones used in the Query component. You need to pass those to the IssueFilter
                component, and then to the <code>prefetchIssues()</code> function.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">Issues</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span>
  <span style="color: #06b6ef">repositoryOwner</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">repositoryName</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">onChangeIssueState</span><span style="color: #e7e9db">,</span>
<span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;Issues&quot;</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">IssueFilter</span>
<span style="background-color: #4f424c">      <span style="color: #06b6ef">repositoryOwner</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">repositoryOwner</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">repositoryName</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">repositoryName</span><span style="color: #e7e9db">}</span>
</span>      <span style="color: #06b6ef">issueState</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">}</span>
      <span style="color: #06b6ef">onChangeIssueState</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">onChangeIssueState</span><span style="color: #e7e9db">}</span>
    <span style="color: #5bc4bf">/&gt;</span>

    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">isShow</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #e7e9db">(</span>
      <span style="color: #e7e9db">...</span>
    <span style="color: #e7e9db">)}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
<span style="color: #e7e9db">);</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">IssueFilter</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span>
<span style="background-color: #4f424c">  <span style="color: #06b6ef">repositoryOwner</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">repositoryName</span><span style="color: #e7e9db">,</span>
</span>  <span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">onChangeIssueState</span><span style="color: #e7e9db">,</span>
<span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ApolloConsumer</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">client</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ButtonUnobtrusive</span>
        <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span>
          <span style="color: #06b6ef">onChangeIssueState</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">TRANSITION_STATE</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">])</span>
        <span style="color: #e7e9db">}</span>
        <span style="color: #06b6ef">onMouseOver</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span>
          <span style="color: #06b6ef">prefetchIssues</span><span style="color: #e7e9db">(</span>
            <span style="color: #06b6ef">client</span><span style="color: #e7e9db">,</span>
<span style="background-color: #4f424c">            <span style="color: #06b6ef">repositoryOwner</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">            <span style="color: #06b6ef">repositoryName</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">            <span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">,</span>
</span>          <span style="color: #e7e9db">)</span>
        <span style="color: #e7e9db">}</span>
      <span style="color: #5bc4bf">&gt;</span>
        <span style="color: #e7e9db">{</span><span style="color: #06b6ef">TRANSITION_LABELS</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">]}</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ButtonUnobtrusive&gt;</span>
    <span style="color: #e7e9db">)}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ApolloConsumer&gt;</span>
<span style="color: #e7e9db">);</span>

<span style="color: #e7e9db">...</span>
</code></pre>
              </div>


              <p>Use this information to perform the prefetching data query. The Apollo Client instance exposes a
                <code>query()</code> method for this. Make sure to retrieve the next <code>issueState</code>, because
                when prefetching open issues, the current <code>issueState</code> should be <code>NONE</code>.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">prefetchIssues</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">(</span>
<span style="background-color: #4f424c">  <span style="color: #06b6ef">client</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">repositoryOwner</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">repositoryName</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">,</span>
</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">nextIssueState</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">TRANSITION_STATE</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">issueState</span><span style="color: #e7e9db">];</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">isShow</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">nextIssueState</span><span style="color: #e7e9db">))</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">client</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">query</span><span style="color: #e7e9db">({</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">query</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">GET_ISSUES_OF_REPOSITORY</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">variables</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">        <span style="color: #06b6ef">repositoryOwner</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">        <span style="color: #06b6ef">repositoryName</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">        <span style="color: #06b6ef">issueState</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">nextIssueState</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">},</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">});</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">}</span>
</span><span style="color: #e7e9db">};</span>
</code></pre>
              </div>


              <p>That&rsquo;s it. Once the button is hovered, it should prefetch the issues for the next
                <code>issueState</code>. The Apollo Client makes sure that the new data is updated in the cache like it
                would do for the Query component. There shouldn&rsquo;t be any visible loading indicator in between
                except when the network request takes too long and you click the button right after hovering it. You can
                verify that the request is happening in your network tab in the developer development tools of your
                browser. In the end, you have learned about two UX improvements that can be achieved with ease when
                using Apollo Client: optimistic UI and prefetching data.</p>

              <h3 id="exercises-14">Exercises:</h3>

              <ul>
                <li>Confirm your <a href="http://bit.ly/2Vma9IF">source code for the last section</a>

                  <ul>
                    <li>Confirm the <a href="http://bit.ly/2VqhIy6">changes from the last section</a></li>
                  </ul>
                </li>
                <li>Read more about <a target="_blank" rel="noopener noreferrer"
                    href="https://www.apollographql.com/docs/react/recipes/performance.html">Apollo Prefetching and
                    Query Splitting in React</a></li>
                <li>Invest 3 minutes of your time and take the <a target="_blank" rel="noopener noreferrer"
                    href="https://www.surveymonkey.com/r/5PLMBR3">quiz</a></li>
              </ul>

              <h2 class="chapter-header" id="react-apollo-client-exercise">Exercise: Commenting Feature</h2>

              <p>This last section is for hands-on experience with the application and implementing features yourself. I
                encourage you to continue implementing features for the application and improving it. There are a couple
                of guiding points to help you implementing the Commenting feature. In the end it should be possible to
                show a list of paginated comments per issue on demand. Finally, a user should be able to leave a
                comment. The source code of the implemented feature can be found <a target="_blank"
                  rel="noopener noreferrer"
                  href="https://github.com/the-road-to-graphql/react-graphql-github-apollo/tree/c689a90d43272bbcb64c05f85fbc84ad4fe4308d">here</a>.
              </p>

              <ul>
                <li>
                  <p>Introduce components for fetching a list of comments (e.g. Comments), rendering a list of comments
                    (e.g. CommentList), and rendering a single comment (e.g. CommentItem). They can render sample data
                    for now.</p>
                </li>

                <li>
                  <p>Use the top level comments component (e.g. Comments), which will be your container component that
                    is responsible to query the list of comments, in the <em>src/Issue/IssueItem/index.js</em> file. In
                    addition, add a toggle to either show or hide comments. The IssueItem component has to become a
                    class component or needs to make use of the <code>withState</code> HOC from the recompose library.
                  </p>
                </li>

                <li>
                  <p>Use the Query component from React Apollo in your container Comments component to fetch a list of
                    comments. It should be similar to the query that fetches the list of issues. You only need to
                    identify the issue for which the comments should be fetched.</p>
                </li>

                <li>
                  <p>Handle all edge cases in the Comments to show loading indicator, no data, or error messages. Render
                    the list of comments in the CommentList component and a single comment in the CommentItem component.
                  </p>
                </li>

                <li>
                  <p>Implement the pagination feature for comments. Add the necessary fields in the query, the
                    additional props and variables to the Query component, and the reusable FetchMore component. Handle
                    the merging of the state in the <code>updateQuery</code> prop.</p>
                </li>

                <li>
                  <p>Enable prefetching of the comments when hovering the &ldquo;Show/Hide Comments&rdquo; button.</p>
                </li>

                <li>
                  <p>Implement an AddComment component that shows a <code>textarea</code> and a <code>submit</code>
                    button to enable user comments. Use the <code>addComment</code> mutation from GitHub&rsquo;s GraphQL
                    API and the Mutation component from React Apollo to execute the mutation with the submit button.</p>
                </li>

                <li>
                  <p>Improve the AddComment component with the optimistic UI feature (perhaps read again the <a
                      target="_blank" rel="noopener noreferrer"
                      href="https://www.apollographql.com/docs/react/features/optimistic-ui.html">Apollo documentation
                      about the optimistic UI with a list of items</a>). A comment should show up in the list of
                    comments, even if the request is pending.</p>
                </li>
              </ul>

              <p>I hope this section, building your own feature in the application with all the learned tools and
                techniques, matched your skills and challenged you to implement React applications with Apollo and
                GraphQL. I would recommend working to improve and extend the existing application. If you haven&rsquo;t
                implemented a GraphQL server yet, find other third-party APIs that offer a GraphQL API and build your
                own React with Apollo application by consuming it. Keep yourself challenged to grow your skills as a
                developer.</p>

              <h2 class="chapter-header" id="appendix-styling">Appendix: CSS Files and Styles</h2>

              <p>This section has all the CSS files as well as their content and locations, to give your React with
                GraphQL and Apollo Client application a nice touch. It even makes it responsive for mobile and tablet
                devices. These are only recommendations, though; you can experiment with them, or come up with your own
                styles.</p>

              <p><em>src/style.css</em></p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-css" data-lang="css"><span></span><span style="color: #fec418">#root</span><span style="color: #5bc4bf">,</span>
<span style="color: #5bc4bf">html,</span>
<span style="color: #5bc4bf">body</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">height</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">100%</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #5bc4bf">body</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">margin</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">0</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">padding</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">0</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">font-family</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;Source Sans Pro&#39;</span><span style="color: #5bc4bf">,</span> <span style="color: #e7e9db">sans-serif;</span>
  <span style="color: #e7e9db">font-weight</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">200</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">text</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">rendering</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">optimizeLegibility;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #5bc4bf">h2</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">font-size</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">24px</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">font-weight</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">600</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">line-height</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">34px</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">margin</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">5px</span> <span style="color: #f99b15">0</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #5bc4bf">h3</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">font-size</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">20px</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">font-weight</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">400</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">line-height</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">27px</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">margin</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">5px</span> <span style="color: #f99b15">0</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #5bc4bf">ul,</span>
<span style="color: #5bc4bf">li</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">list-style</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">none;</span>
  <span style="color: #e7e9db">padding-left</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">0</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #5bc4bf">a</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">text-decoration</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">none;</span>
  <span style="color: #e7e9db">color</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">#000</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">opacity</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">1</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">transition</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">opacity</span> <span style="color: #f99b15">0.25s</span> <span style="color: #e7e9db">ease</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">in</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">out;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #5bc4bf">a:hover</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">opacity</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">0</span><span style="color: #5bc4bf">.</span><span style="color: #f99b15">35</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">text-decoration</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">none;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #5bc4bf">a:active</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">text-decoration</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">none;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #5bc4bf">pre</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">white-space</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">pre</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">wrap;</span>
<span style="color: #e7e9db">}</span>
</code></pre>
              </div>


              <p><em>src/App/style.css</em></p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-css" data-lang="css"><span></span><span style="color: #fec418">.App</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">min-height</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">100%</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">display</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">flex;</span>
  <span style="color: #e7e9db">flex</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">direction</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">column;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #fec418">.App-main</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">flex</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">1</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #fec418">.App-content_large-header</span><span style="color: #5bc4bf">,</span>
<span style="color: #fec418">.App-content_small-header</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">margin-top</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">54px</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">@media</span> <span style="color: #5bc4bf">only</span> <span style="color: #5bc4bf">screen</span> <span style="color: #5bc4bf">and</span> <span style="color: #5bc4bf">(max-device-width:</span> <span style="color: #5bc4bf">480px)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #fec418">.App-content_large-header</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">margin-top</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">123px</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #fec418">.App-content_small-header</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">margin-top</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">68px</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>
</code></pre>
              </div>


              <p><em>src/App/Navigation/style.css</em></p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-css" data-lang="css"><span></span><span style="color: #fec418">.Navigation</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">overflow</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">hidden;</span>
  <span style="color: #e7e9db">position</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">fixed;</span>
  <span style="color: #e7e9db">top</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">0</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">width</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">100%</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">z-index</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">1</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">background-color</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">#24292e</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">display</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">flex;</span>
  <span style="color: #e7e9db">align</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">items</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">baseline;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">@media</span> <span style="color: #5bc4bf">only</span> <span style="color: #5bc4bf">screen</span> <span style="color: #5bc4bf">and</span> <span style="color: #5bc4bf">(max-device-width:</span> <span style="color: #5bc4bf">480px)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #fec418">.Navigation</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">flex</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">direction</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">column;</span>
    <span style="color: #e7e9db">justify</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">content</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">center;</span>
    <span style="color: #e7e9db">align</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">items</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">center;</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>

<span style="color: #fec418">.Navigation-link</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">font-size</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">12px</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">letter-spacing</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">3.5px</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">font-weight</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">500</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">text-transform</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">uppercase;</span>
  <span style="color: #e7e9db">padding</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">20px</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">text-decoration</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">none;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #fec418">.Navigation-link</span> <span style="color: #5bc4bf">a</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">color</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">#ffffff</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #fec418">.Navigation-search</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">padding</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">0</span> <span style="color: #f99b15">10px</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">@media</span> <span style="color: #5bc4bf">only</span> <span style="color: #5bc4bf">screen</span> <span style="color: #5bc4bf">and</span> <span style="color: #5bc4bf">(max-device-width:</span> <span style="color: #5bc4bf">480px)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #fec418">.Navigation-link</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">padding</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">10px</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #fec418">.Navigation-search</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">padding</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">10px</span> <span style="color: #f99b15">10px</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>
</code></pre>
              </div>


              <p><em>src/Button/style.css</em></p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-css" data-lang="css"><span></span><span style="color: #fec418">.Button</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">padding</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">10px</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">background</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">none;</span>
  <span style="color: #e7e9db">cursor</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">pointer;</span>
  <span style="color: #e7e9db">transition</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">color</span> <span style="color: #f99b15">0.25s</span> <span style="color: #e7e9db">ease</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">in</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">out;</span>
  <span style="color: #e7e9db">transition</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">background</span> <span style="color: #f99b15">0.25s</span> <span style="color: #e7e9db">ease</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">in</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">out;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #fec418">.Button_white</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">border</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">1px</span> <span style="color: #e7e9db">solid</span> <span style="color: #f99b15">#fff</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">color</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">#fff</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #fec418">.Button_white</span><span style="color: #5bc4bf">:hover</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">color</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">#000</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">background</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">#fff</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #fec418">.Button_black</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">border</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">1px</span> <span style="color: #e7e9db">solid</span> <span style="color: #f99b15">#000</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">color</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">#000</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #fec418">.Button_black</span><span style="color: #5bc4bf">:hover</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">color</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">#fff</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">background</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">#000</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #fec418">.Button_unobtrusive</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">padding</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">0</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">color</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">#000</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">background</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">none;</span>
  <span style="color: #e7e9db">border</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">none;</span>
  <span style="color: #e7e9db">cursor</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">pointer;</span>
  <span style="color: #e7e9db">opacity</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">1</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">transition</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">opacity</span> <span style="color: #f99b15">0.25s</span> <span style="color: #e7e9db">ease</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">in</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">out;</span>
  <span style="color: #e7e9db">outline</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">none;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #fec418">.Button_unobtrusive</span><span style="color: #5bc4bf">:hover</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">opacity</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">0</span><span style="color: #5bc4bf">.</span><span style="color: #f99b15">35</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #fec418">.Button_unobtrusive</span><span style="color: #5bc4bf">:focus</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">outline</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">none;</span>
<span style="color: #e7e9db">}</span>
</code></pre>
              </div>


              <p><em>src/Error/style.css</em></p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-css" data-lang="css"><span></span><span style="color: #fec418">.ErrorMessage</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">margin</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">20px</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">display</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">flex;</span>
  <span style="color: #e7e9db">justify</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">content</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">center;</span>
<span style="color: #e7e9db">}</span>
</code></pre>
              </div>


              <p><em>src/FetchMore/style.css</em></p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-css" data-lang="css"><span></span><span style="color: #fec418">.FetchMore</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">display</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">flex;</span>
  <span style="color: #e7e9db">flex</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">direction</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">column;</span>
  <span style="color: #e7e9db">align</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">items</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">center;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #fec418">.FetchMore-button</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">margin</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">20px</span> <span style="color: #f99b15">0</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>
</code></pre>
              </div>


              <p><em>src/Input/style.css</em></p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-css" data-lang="css"><span></span><span style="color: #fec418">.Input</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">border</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">none;</span>
  <span style="color: #e7e9db">padding</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">10px</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">background</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">none;</span>
  <span style="color: #e7e9db">outline</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">none;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #fec418">.Input</span><span style="color: #5bc4bf">:focus</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">outline</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">none;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #fec418">.Input_white</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">border-bottom</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">1px</span> <span style="color: #e7e9db">solid</span> <span style="color: #f99b15">#fff</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">color</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">#fff</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #fec418">.Input_black</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">border-bottom</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">1px</span> <span style="color: #e7e9db">solid</span> <span style="color: #f99b15">#000</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">color</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">#000</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>
</code></pre>
              </div>


              <p><em>src/Issue/IssueItem/style.css</em></p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-css" data-lang="css"><span></span><span style="color: #fec418">.IssueItem</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">margin-bottom</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">10px</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">display</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">flex;</span>
  <span style="color: #e7e9db">align</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">items</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">baseline;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #fec418">.IssueItem-content</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">margin-left</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">10px</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">padding-left</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">10px</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">border-left</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">1px</span> <span style="color: #e7e9db">solid</span> <span style="color: #f99b15">#000</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>
</code></pre>
              </div>


              <p><em>src/Issue/IssueList/style.css</em></p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-css" data-lang="css"><span></span><span style="color: #fec418">.Issues</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">display</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">flex;</span>
  <span style="color: #e7e9db">flex</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">direction</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">column;</span>
  <span style="color: #e7e9db">align</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">items</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">center;</span>
  <span style="color: #e7e9db">margin</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">0</span> <span style="color: #f99b15">20px</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #fec418">.Issues-content</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">margin-top</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">20px</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">display</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">flex;</span>
  <span style="color: #e7e9db">flex</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">direction</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">column;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #fec418">.IssueList</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">margin</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">20px</span> <span style="color: #f99b15">0</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">@media</span> <span style="color: #5bc4bf">only</span> <span style="color: #5bc4bf">screen</span> <span style="color: #5bc4bf">and</span> <span style="color: #5bc4bf">(max-device-width:</span> <span style="color: #5bc4bf">480px)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #fec418">.Issues-content</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">align</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">items</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">center;</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>
</code></pre>
              </div>


              <p><em>src/Loading/style.css</em></p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-css" data-lang="css"><span></span><span style="color: #fec418">.LoadingIndicator</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">display</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">flex;</span>
  <span style="color: #e7e9db">flex</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">direction</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">column;</span>
  <span style="color: #e7e9db">align</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">items</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">center;</span>
  <span style="color: #e7e9db">margin</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">20px</span> <span style="color: #f99b15">0</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #fec418">.LoadingIndicator_center</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">margin-top</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">30%</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>
</code></pre>
              </div>


              <p><em>src/Repository/style.css</em></p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-css" data-lang="css"><span></span><span style="color: #fec418">.RepositoryItem</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">padding</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">20px</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">border-bottom</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">1px</span> <span style="color: #e7e9db">solid</span> <span style="color: #f99b15">#000</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #fec418">.RepositoryItem-title</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">display</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">flex;</span>
  <span style="color: #e7e9db">justify</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">content</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">space</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">between;</span>
  <span style="color: #e7e9db">align</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">items</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">baseline;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">@media</span> <span style="color: #5bc4bf">only</span> <span style="color: #5bc4bf">screen</span> <span style="color: #5bc4bf">and</span> <span style="color: #5bc4bf">(max-device-width:</span> <span style="color: #5bc4bf">480px)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #fec418">.RepositoryItem-title</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">flex</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">direction</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">column;</span>
    <span style="color: #e7e9db">align</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">items</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">center;</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>

<span style="color: #fec418">.RepositoryItem-title-action</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">margin-left</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">10px</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #fec418">.RepositoryItem-description</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">margin</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">10px</span> <span style="color: #f99b15">0</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">display</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">flex;</span>
  <span style="color: #e7e9db">justify</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">content</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">space</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">between;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">@media</span> <span style="color: #5bc4bf">only</span> <span style="color: #5bc4bf">screen</span> <span style="color: #5bc4bf">and</span> <span style="color: #5bc4bf">(max-device-width:</span> <span style="color: #5bc4bf">480px)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #fec418">.RepositoryItem-description</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">flex</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">direction</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">column;</span>
    <span style="color: #e7e9db">align</span><span style="color: #5bc4bf">-</span><span style="color: #e7e9db">items</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">center;</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>

<span style="color: #fec418">.RepositoryItem-description-info</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">margin-right</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">20px</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">@media</span> <span style="color: #5bc4bf">only</span> <span style="color: #5bc4bf">screen</span> <span style="color: #5bc4bf">and</span> <span style="color: #5bc4bf">(max-device-width:</span> <span style="color: #5bc4bf">480px)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #fec418">.RepositoryItem-description-info</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">text-align</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">center;</span>
    <span style="color: #e7e9db">margin</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">20px</span> <span style="color: #f99b15">0</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>

<span style="color: #fec418">.RepositoryItem-description-details</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">text-align</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">right;</span>
  <span style="color: #e7e9db">white-space</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">nowrap;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">@media</span> <span style="color: #5bc4bf">only</span> <span style="color: #5bc4bf">screen</span> <span style="color: #5bc4bf">and</span> <span style="color: #5bc4bf">(max-device-width:</span> <span style="color: #5bc4bf">480px)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #fec418">.RepositoryItem-description-details</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">text-align</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">center;</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>
</code></pre>
              </div>


              <hr class="section-divider">

              <p>You can find the final <a target="_blank" rel="noopener noreferrer"
                  href="https://github.com/rwieruch/react-graphql-github-apollo">repository on GitHub</a> that showcases
                most of the exercise tasks. The application is not feature-complete and it doesn&rsquo;t cover all edge
                cases, but it should give insight into using GraphQL with Apollo in React applications. If you want to
                dive more deeply into different topics like testing and state management with GraphQL on the
                client-side, you can start here: <a href="../react-apollo-client-example/index.html">A minimal Apollo
                  Client in React Example</a>. Try to apply what you&rsquo;ve learned in this application (e.g. testing,
                state management). Otherwise, I encourage you to try to build your own GraphQL client library, which
                helps you understand more of the GraphQL internals: <a
                  href="../react-graphql-client-library/index.html">How to build a GraphQL client library for React</a>.
                Whichever you decide, keep tinkering on this application, or start with another GraphQL client
                application to fortify your skill set. You have finished all the GraphQL client chapters now.</p>

              <div class="read-before">
                Read more: <a href="../graphql-apollo-server-tutorial/index.html" itemprop="url">GraphQL Server Tutorial
                  with Apollo Server and Express</a>
              </div>



              



              <div class="box-inline col-md-12">
                <div class="col-md-12 text-center">
                  <h2 class="newsletter">The Road to learn React</h2>

                  <div class="col-md-4">
                    <img class="img-lazy img-responsive" data-lazy-src="//img/page/cover.png">
                  </div>

                  <p class="lead">
                    Build a Hacker News App along the way. No setup configuration. No tooling. No Redux. Plain React in
                    200+ pages of learning material. Learn React like <strong>50.000+ readers</strong>.
                  </p>
                  <a class="btn btn-template-main" href="https://roadtoreact.com" target="_blank"
                    rel="noopener noreferrer">
                    Get the Book for free <i class="fa fa-chevron-right"></i>
                  </a>

                  <div>
                    <a href="https://amzn.to/2QY2ONp" target="_blank" rel="noopener noreferrer">
                      Get it from Amazon
                    </a>
                  </div>

                </div>
              </div>

            </div>



            


          </article>


        </div>


      </div>

    </div>




    <section class="bar background-image-fixed-2 no-mb color-white text-center">
      <div class="dark-mask"></div>
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <h3 class="lead">Never miss an article about web development, JavaScript and self-growth.</h3>
            <h2 class="text-uppercase">Take Part</h2>
          </div>

          <div class="col-md-12 text-center">

            <h3 class="lead"><i class="fa fa-check"></i> Join 30.000&#43; Developers</h3>

            <h3 class="lead"><i class="fa fa-check"></i> Learn Web Development with JavaScript</h3>

            <h3 class="lead"><i class="fa fa-check"></i> Tips and Tricks</h3>

            <h3 class="lead"><i class="fa fa-check"></i> Access Tutorials, eBooks and Courses</h3>

            <h3 class="lead"><i class="fa fa-check"></i> Personal Development as a Software Engineer</h3>

          </div>
          <div class="col-md-12">
            <p class="text-center">
              <div id="mc_embed_signup">
                <form action="https://www.getrevue.co/profile/rwieruch/add_subscriber" method="post" id="revue-form"
                  name="revue-form" target="_blank">
                  <div id="mc_embed_signup_scroll">
                    <input class="email" placeholder="email address" type="email" name="member[email]"
                      id="member_email">
                    <div>
                      <button type="submit" value="Subscribe" name="member[subscribe]" id="member_submit"
                        class="btn btn-template-transparent-black btn-lg">
                        Subscribe
                      </button>
                    </div>
                  </div>
                </form>
              </div>

            </p>
          </div>
        </div>
      </div>
    </section>
    <footer id="subfooter">
      <div class="container">

        <div class="col-md-5 col-sm-6">

          <h4>Recent posts</h4>

          <div class="blog-entries">

            <div class="item same-height-row clearfix">
              <div class="article same-height-always">
                <a href="../redux-vs-usereducer/index.html">

                  <img data-lazy-src="//img/posts/redux-vs-usereducer/banner.jpg" data-is-thumb="is-thumb"
                    class="img-lazy img-responsive" alt="React&#39;s useReducer vs Redux">

                </a>
              </div>
              <div class="name same-height-always">
                <h5><a href="../redux-vs-usereducer/index.html">React&#39;s useReducer vs Redux</a></h5>
              </div>
            </div>

            <div class="item same-height-row clearfix">
              <div class="article same-height-always">
                <a href="../publish-npm-package-node/index.html">

                  <img data-lazy-src="//img/posts/publish-npm-package-node/banner.jpg" data-is-thumb="is-thumb"
                    class="img-lazy img-responsive" alt="How to publish a npm package?">

                </a>
              </div>
              <div class="name same-height-always">
                <h5><a href="../publish-npm-package-node/index.html">How to publish a npm package?</a></h5>
              </div>
            </div>

            <div class="item same-height-row clearfix">
              <div class="article same-height-always">
                <a href="../react-scroll-to-item/index.html">

                  <img data-lazy-src="//img/posts/react-scroll-to-item/banner.jpg" data-is-thumb="is-thumb"
                    class="img-lazy img-responsive" alt="How to Scroll to Item in React?">

                </a>
              </div>
              <div class="name same-height-always">
                <h5><a href="../react-scroll-to-item/index.html">How to Scroll to Item in React?</a></h5>
              </div>
            </div>

          </div>

          <hr class="hidden-md hidden-lg hidden-sm">

        </div>



        <div class="col-md-5 col-md-offset-2 col-sm-6">

          <h4>About Me</h4>

          <div class="blog-entries">
            <div class="item same-height-row clearfix">
              <div class="profile same-height-always">
                <img class="img-lazy img-responsive" data-lazy-src="//img/page/profile.jpg" alt="profile">
              </div>
              <div class="name same-height-always">
                <p>
                  Hi, I'm Chris - a Midvale, Utah-based consulting software developer. Find out more <a
                    href="../about/index.html">about me</a>, <a href="../work-with-me/index.html">work with me</a>, or
                  have a look at my social media profiles below.
                </p>
              </div>
            </div>
          </div>

        </div>



      </div>

    </footer>


    <footer id="copyright">
      <div class="container">
        <div class="row">
          <div class="col-md-4">
            <ul class="info list-inline quicklinks pull-left">

              <li> Chris Paul</li>

            </ul>
          </div>
          <div class="col-md-4">
            
          </div>
          <div class="col-md-4">
            <ul class="info list-inline quicklinks pull-right">

              <li><a aria-label="quicklinks" href="../legal/index.html">Legal Notice</a></li>

            </ul>
          </div>
        </div>
      </div>
    </footer>


  </div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>

  <script src="../js/script.js"></script>
</body>

</html>