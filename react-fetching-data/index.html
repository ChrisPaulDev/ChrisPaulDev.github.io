<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta name="viewport" content="width=device-width, initial-scale=1">



  <title>
    How to fetch data in React - CPaul
  </title>

  <meta name="author" content="" />
  <meta name="description"
    content="Do you want to go beyond a static React application? Then it&#39;s about time to fetch data from a third party API. This guide explains you all the basics and tricks to request data in React.js. You will reuse functionalities in higher-order components and implement error handling for a more robust application ...">


  <meta name="theme-color" content="#38bb6c" />

  <meta name="generator" content="Hugo 0.41" />
  <link href="https://cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
  <link href="../css/bootstrap.default.css" rel="stylesheet" id="theme-stylesheet">
  <link href="../css/customizations.css" rel="stylesheet">

  <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

  <link rel="shortcut icon" href="../img/favicon/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="../img/favicon/apple-touch-icon.png" />
  <link rel="manifest" href="../img/favicon/manifest.json">
  <link rel="mask-icon" href="../img/favicon/safari-pinned-tab.svg" color="#5bbad5">

  <link rel="alternate" href="../index.xml" type="application/rss+xml" title="CPaul">

  <meta itemprop="name" content="How to fetch data in React">
  <meta itemprop="description"
    content="Do you want to go beyond a static React application? Then it&#39;s about time to fetch data from a third party API. This guide explains you all the basics and tricks to request data in React.js. You will reuse functionalities in higher-order components and implement error handling for a more robust application ...">
  <meta itemprop="image" content="https://chrispaul.dev/img/posts/react-fetching-data/banner_640.jpg">
  <meta itemprop="keywords"
    content="angular,apollo,d3,graphql,growth,javascript,machine-learning,mobx,node,react,reason,redux,tooling,vue,web-development,angular,apollo,d3,graphql,growth,javascript,machine-learning,mobx,node,react,reason,redux,tooling,web-development," />


  <meta itemprop="wordCount" content="4000">

  <meta name="keywords" content="react fetching data, react fetch API">

  <meta property="og:title" content="How to fetch data in React - CPaul">


  <meta property="og:description"
    content="Do you want to go beyond a static React application? Then it&#39;s about time to fetch data from a third party API. This guide explains you all the basics and tricks to request data in React.js. You will reuse functionalities in higher-order components and implement error handling for a more robust application ..." />


  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://chrispaul.dev/react-fetching-data/" />
  <meta property="og:image" content="https://chrispaul.dev/img/posts/react-fetching-data/banner_640.jpg" />



  <meta name="news_keywords" content="react fetching data" />



  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:image:src" content="https://chrispaul.dev/img/posts/react-fetching-data/banner_640.jpg" />
  <meta name="twitter:title" content="How to fetch data in React" />
  <meta name="twitter:description"
    content="Do you want to go beyond a static React application? Then it&#39;s about time to fetch data from a third party API. This guide explains you all the basics and tricks to request data in React.js. You will reuse functionalities in higher-order components and implement error handling for a more robust application ..." />
  <meta name="twitter:site" content="@rwieruch" />
  <meta name="twitter:domain" content="rwieruch" />



</head>


<body>

  <div id="all">

    <header>

      <div class="navbar-affixed-top" data-spy="affix" data-offset-top="200">

        <div class="navbar navbar-default yamm" role="navigation" id="navbar">

          <div class="container">
            <div class="navbar-header">
              

              <div class="navbar-buttons">
                <button type="button" class="navbar-toggle btn-template-main" data-toggle="collapse"
                  data-target="#navigation">
                  <span class="sr-only">Toggle navigation</span>
                  <i class="fa fa-align-justify"></i>
                </button>
              </div>
            </div>


            <div class="navbar-collapse collapse" id="navigation">
              <ul class="nav navbar-nav navbar-right">

                <li class="dropdown">

                  <a href="../index.html">Blog</a>

                </li>

                <li class="dropdown">

                  <a href="../work-with-me/index.html">Work with me</a>

                </li>

                <li class="dropdown">

                  <a href="../about/index.html">About</a>

                </li>

                <li class="dropdown">

                  <a style="color: #38bb6c" href="https://roadtoreact.com/">Books &amp; Courses</a>

                </li>

              </ul>
            </div>


            <div class="collapse clearfix" id="search">

              <form class="navbar-form" role="search">
                <div class="input-group">
                  <input type="text" class="form-control" placeholder="Search">
                  <span class="input-group-btn">

                    <button type="submit" class="btn btn-template-main"><i class="fa fa-search"></i></button>

                  </span>
                </div>
              </form>

            </div>


          </div>
        </div>


      </div>
    </header>

    

    



    <div class="hidden-xs">


      <section class="bar background-image-fixed-2 no-mb color-white text-center">
        <div class="dark-mask"></div>
        <div class="container">
          <div class="row">
            <div class="col-md-12">
              <h3 class="lead">Never miss an article about web development, JavaScript and self-growth.</h3>
              <h2 class="text-uppercase newsletter">Take Part</h2>
            </div>

            <div class="col-md-12">
              <p class="text-center">
                <div id="mc_embed_signup">
                  <form action="https://www.getrevue.co/profile/rwieruch/add_subscriber" method="post" id="revue-form"
                    name="revue-form" target="_blank">
                    <div id="mc_embed_signup_scroll">
                      <input class="email" placeholder="email address" type="email" name="member[email]"
                        id="member_email">
                      <div>
                        <button type="submit" value="Subscribe" name="member[subscribe]" id="member_submit"
                          class="btn btn-template-transparent-black btn-lg">
                          Subscribe
                        </button>
                      </div>
                    </div>
                  </form>
                </div>

              </p>
            </div>
          </div>
        </div>
      </section>
    </div>

    <div id="content">
      <div class="container">

        <div class="row">

          <article class="col-md-8 col-md-offset-2" id="blog-post" itemprop="blogPosts" itemscope
            itemtype="http://schema.org/BlogPosting">

            <div id="post-content" itemprop="articleBody">

              <header>
                <h1 itemprop="name headline">How to fetch data in React</h1>
              </header>

              

              <p class="text-muted text-uppercase mb-small text-center">
                <span itemprop="author publisher">

                </span>


                <time datetime="2018-07-06" itemprop="datePublished">
                  July 6, 2018
                </time>


              </p>

              <div>


              </div>

              <div class="post-image-primary">
                <div class="pinterest-pinner-wrapper" itemscope itemtype="http://schema.org/ImageObject">
                  <div class="pinterest-pinner">
                    <a data-pin-do="buttonPin" data-pin-save="true" data-pin-tall="true"
                      href="https://www.pinterest.com/pin/create/button/?url=https%3a%2f%2fchrispaul.dev%2freact-fetching-data%2f&amp;media=https://chrispaul.dev/img%2fposts%2freact-fetching-data%2fbanner.jpg&amp;description=">
                    </a>
                  </div>

                  <img class="img-lazy img-responsive" data-lazy-src="/src="/img/posts/react-fetching-data/banner.jpg"
                    data-is-src-set="is-src-set" alt="react fetching data" itemprop="image" />
                </div>
              </div>


              <p>Newcomers to React often start with applications that don&rsquo;t need data fetching at all. Usually
                they are confronted with Counter, Todo or TicTacToe applications. That&rsquo;s good, because data
                fetching adds another layer of complexity to your application while taking the first steps in React.</p>

              <p>However, at some point you want to request real world data from an own or a third-party <a
                  href="../what-is-an-api-javascript/index.html">API</a>. The article gives you a walkthrough on how to
                fetch data in React. There is no external state management solution, such as <a
                  href="../redux-mobx-confusion/index.html">Redux or MobX</a>, involved to store your fetched data.
                Instead you will use React&rsquo;s local state management.</p>

              <h2 class="chapter-header" id="toc">Table of Contents</h2>

              <ul>
                <li><a href="#react-where-fetch-data">Where to fetch in React&rsquo;s component tree?</a></li>
                <li><a href="#react-how-fetch-data">How to fetch data in React?</a></li>
                <li><a href="#react-fetch-data-loading-error">What about loading spinner and error handling?</a></li>
                <li><a href="#react-fetch-data-axios">How to fetch data with Axios in React</a></li>
                <li><a href="#react-fetch-data-test-testing">How to test data fetching in React?</a></li>
                <li><a href="#react-fetch-data-async-await">How to fetch data with Async/Await in React?</a></li>
                <li><a href="#react-fetch-data-higher-order-component">How to fetch data in Higher-Order Components?</a>
                </li>
                <li><a href="#react-fetch-data-render-props">How to fetch data in Render Props?</a></li>
                <li><a href="#react-fetch-data-graphql">How to fetch data from a GraphQL API in React?</a></li>
              </ul>

              <h2 class="chapter-header" id="react-where-fetch-data">Where to fetch in React&#39;s component tree?</h2>

              <p>Imagine you already have a component tree that has several levels of components in its hierarchy. Now
                you are about to fetch a list of items from a third-party API. Which level in your component hierarchy,
                to be more precise, which specific component, should fetch the data now? Basically it depends on three
                criteria:</p>

              <p><strong>1. Who is interested in this data?</strong> The fetching component should be a common parent
                component for all these components.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span>                      <span style="color: #5bc4bf">+---------------+</span>
                      <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">+------+--------+</span>
                             <span style="color: #5bc4bf">|</span>
                   <span style="color: #5bc4bf">+---------+------------+</span>
                   <span style="color: #5bc4bf">|</span>                      <span style="color: #5bc4bf">|</span>
                   <span style="color: #5bc4bf">|</span>                      <span style="color: #5bc4bf">|</span>
           <span style="color: #5bc4bf">+-------+-------+</span>     <span style="color: #5bc4bf">+--------+------+</span>
           <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
           <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
           <span style="color: #5bc4bf">|</span>  <span style="color: #06b6ef">Fetch</span> <span style="color: #06b6ef">here</span><span style="color: #5bc4bf">!</span>  <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
           <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
           <span style="color: #5bc4bf">+-------+-------+</span>     <span style="color: #5bc4bf">+---------------+</span>
                   <span style="color: #5bc4bf">|</span>
       <span style="color: #5bc4bf">+-----------+----------+---------------------+</span>
       <span style="color: #5bc4bf">|</span>                      <span style="color: #5bc4bf">|</span>                     <span style="color: #5bc4bf">|</span>
       <span style="color: #5bc4bf">|</span>                      <span style="color: #5bc4bf">|</span>                     <span style="color: #5bc4bf">|</span>
<span style="color: #5bc4bf">+------+--------+</span>     <span style="color: #5bc4bf">+-------+-------+</span>     <span style="color: #5bc4bf">+-------+-------+</span>
<span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
<span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
<span style="color: #5bc4bf">|</span>    <span style="color: #06b6ef">I</span> <span style="color: #06b6ef">am</span><span style="color: #5bc4bf">!</span>      <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>     <span style="color: #06b6ef">I</span> <span style="color: #06b6ef">am</span><span style="color: #5bc4bf">!</span>     <span style="color: #5bc4bf">|</span>
<span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
<span style="color: #5bc4bf">+---------------+</span>     <span style="color: #5bc4bf">+-------+-------+</span>     <span style="color: #5bc4bf">+---------------+</span>
                              <span style="color: #5bc4bf">|</span>
                              <span style="color: #5bc4bf">|</span>
                              <span style="color: #5bc4bf">|</span>
                              <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">+-------+-------+</span>
                      <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">|</span>     <span style="color: #06b6ef">I</span> <span style="color: #06b6ef">am</span><span style="color: #5bc4bf">!</span>     <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">+---------------+</span>
</code></pre>
              </div>


              <p><strong>2. Where do you want to show a conditional loading indicator (e.g. loading spinner, progress
                  bar) when the fetched data from the asynchronous request is pending?</strong> The loading indicator
                could be shown in the common parent component from the first criteria. Then the common parent component
                would still be the component to fetch the data.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span>                      <span style="color: #5bc4bf">+---------------+</span>
                      <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">+------+--------+</span>
                             <span style="color: #5bc4bf">|</span>
                   <span style="color: #5bc4bf">+---------+------------+</span>
                   <span style="color: #5bc4bf">|</span>                      <span style="color: #5bc4bf">|</span>
                   <span style="color: #5bc4bf">|</span>                      <span style="color: #5bc4bf">|</span>
           <span style="color: #5bc4bf">+-------+-------+</span>     <span style="color: #5bc4bf">+--------+------+</span>
           <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
           <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
           <span style="color: #5bc4bf">|</span>  <span style="color: #06b6ef">Fetch</span> <span style="color: #06b6ef">here</span><span style="color: #5bc4bf">!</span>  <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
           <span style="color: #5bc4bf">|</span>  <span style="color: #06b6ef">Loading</span> <span style="color: #e7e9db">...</span>  <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
           <span style="color: #5bc4bf">+-------+-------+</span>     <span style="color: #5bc4bf">+---------------+</span>
                   <span style="color: #5bc4bf">|</span>
       <span style="color: #5bc4bf">+-----------+----------+---------------------+</span>
       <span style="color: #5bc4bf">|</span>                      <span style="color: #5bc4bf">|</span>                     <span style="color: #5bc4bf">|</span>
       <span style="color: #5bc4bf">|</span>                      <span style="color: #5bc4bf">|</span>                     <span style="color: #5bc4bf">|</span>
<span style="color: #5bc4bf">+------+--------+</span>     <span style="color: #5bc4bf">+-------+-------+</span>     <span style="color: #5bc4bf">+-------+-------+</span>
<span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
<span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
<span style="color: #5bc4bf">|</span>    <span style="color: #06b6ef">I</span> <span style="color: #06b6ef">am</span><span style="color: #5bc4bf">!</span>      <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>     <span style="color: #06b6ef">I</span> <span style="color: #06b6ef">am</span><span style="color: #5bc4bf">!</span>     <span style="color: #5bc4bf">|</span>
<span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
<span style="color: #5bc4bf">+---------------+</span>     <span style="color: #5bc4bf">+-------+-------+</span>     <span style="color: #5bc4bf">+---------------+</span>
                              <span style="color: #5bc4bf">|</span>
                              <span style="color: #5bc4bf">|</span>
                              <span style="color: #5bc4bf">|</span>
                              <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">+-------+-------+</span>
                      <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">|</span>     <span style="color: #06b6ef">I</span> <span style="color: #06b6ef">am</span><span style="color: #5bc4bf">!</span>     <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">+---------------+</span>
</code></pre>
              </div>


              <p><strong>2.1.</strong> But when the loading indicator should be shown in a more top level component, the
                data fetching needs to be lifted up to this component.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span>                      <span style="color: #5bc4bf">+---------------+</span>
                      <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">|</span>  <span style="color: #06b6ef">Fetch</span> <span style="color: #06b6ef">here</span><span style="color: #5bc4bf">!</span>  <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">|</span>  <span style="color: #06b6ef">Loading</span> <span style="color: #e7e9db">...</span>  <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">+------+--------+</span>
                             <span style="color: #5bc4bf">|</span>
                   <span style="color: #5bc4bf">+---------+------------+</span>
                   <span style="color: #5bc4bf">|</span>                      <span style="color: #5bc4bf">|</span>
                   <span style="color: #5bc4bf">|</span>                      <span style="color: #5bc4bf">|</span>
           <span style="color: #5bc4bf">+-------+-------+</span>     <span style="color: #5bc4bf">+--------+------+</span>
           <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
           <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
           <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
           <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
           <span style="color: #5bc4bf">+-------+-------+</span>     <span style="color: #5bc4bf">+---------------+</span>
                   <span style="color: #5bc4bf">|</span>
       <span style="color: #5bc4bf">+-----------+----------+---------------------+</span>
       <span style="color: #5bc4bf">|</span>                      <span style="color: #5bc4bf">|</span>                     <span style="color: #5bc4bf">|</span>
       <span style="color: #5bc4bf">|</span>                      <span style="color: #5bc4bf">|</span>                     <span style="color: #5bc4bf">|</span>
<span style="color: #5bc4bf">+------+--------+</span>     <span style="color: #5bc4bf">+-------+-------+</span>     <span style="color: #5bc4bf">+-------+-------+</span>
<span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
<span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
<span style="color: #5bc4bf">|</span>    <span style="color: #06b6ef">I</span> <span style="color: #06b6ef">am</span><span style="color: #5bc4bf">!</span>      <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>     <span style="color: #06b6ef">I</span> <span style="color: #06b6ef">am</span><span style="color: #5bc4bf">!</span>     <span style="color: #5bc4bf">|</span>
<span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
<span style="color: #5bc4bf">+---------------+</span>     <span style="color: #5bc4bf">+-------+-------+</span>     <span style="color: #5bc4bf">+---------------+</span>
                              <span style="color: #5bc4bf">|</span>
                              <span style="color: #5bc4bf">|</span>
                              <span style="color: #5bc4bf">|</span>
                              <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">+-------+-------+</span>
                      <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">|</span>     <span style="color: #06b6ef">I</span> <span style="color: #06b6ef">am</span><span style="color: #5bc4bf">!</span>     <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">+---------------+</span>
</code></pre>
              </div>


              <p><strong>2.2.</strong> When the loading indicator should be shown in child components of the common
                parent component, not necessarily the components that need the data, the common parent component would
                still be the component to fetch the data. The loading indicator state could then be passed down to all
                child components that would be interested to show a loading indicator.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span>                      <span style="color: #5bc4bf">+---------------+</span>
                      <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">+------+--------+</span>
                             <span style="color: #5bc4bf">|</span>
                   <span style="color: #5bc4bf">+---------+------------+</span>
                   <span style="color: #5bc4bf">|</span>                      <span style="color: #5bc4bf">|</span>
                   <span style="color: #5bc4bf">|</span>                      <span style="color: #5bc4bf">|</span>
           <span style="color: #5bc4bf">+-------+-------+</span>     <span style="color: #5bc4bf">+--------+------+</span>
           <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
           <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
           <span style="color: #5bc4bf">|</span>  <span style="color: #06b6ef">Fetch</span> <span style="color: #06b6ef">here</span><span style="color: #5bc4bf">!</span>  <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
           <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
           <span style="color: #5bc4bf">+-------+-------+</span>     <span style="color: #5bc4bf">+---------------+</span>
                   <span style="color: #5bc4bf">|</span>
       <span style="color: #5bc4bf">+-----------+----------+---------------------+</span>
       <span style="color: #5bc4bf">|</span>                      <span style="color: #5bc4bf">|</span>                     <span style="color: #5bc4bf">|</span>
       <span style="color: #5bc4bf">|</span>                      <span style="color: #5bc4bf">|</span>                     <span style="color: #5bc4bf">|</span>
<span style="color: #5bc4bf">+------+--------+</span>     <span style="color: #5bc4bf">+-------+-------+</span>     <span style="color: #5bc4bf">+-------+-------+</span>
<span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
<span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
<span style="color: #5bc4bf">|</span>    <span style="color: #06b6ef">I</span> <span style="color: #06b6ef">am</span><span style="color: #5bc4bf">!</span>      <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>     <span style="color: #06b6ef">I</span> <span style="color: #06b6ef">am</span><span style="color: #5bc4bf">!</span>     <span style="color: #5bc4bf">|</span>
<span style="color: #5bc4bf">|</span>  <span style="color: #06b6ef">Loading</span> <span style="color: #e7e9db">...</span>  <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>  <span style="color: #06b6ef">Loading</span> <span style="color: #e7e9db">...</span>  <span style="color: #5bc4bf">|</span>     <span style="color: #5bc4bf">|</span>  <span style="color: #06b6ef">Loading</span> <span style="color: #e7e9db">...</span>  <span style="color: #5bc4bf">|</span>
<span style="color: #5bc4bf">+---------------+</span>     <span style="color: #5bc4bf">+-------+-------+</span>     <span style="color: #5bc4bf">+---------------+</span>
                              <span style="color: #5bc4bf">|</span>
                              <span style="color: #5bc4bf">|</span>
                              <span style="color: #5bc4bf">|</span>
                              <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">+-------+-------+</span>
                      <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">|</span>     <span style="color: #06b6ef">I</span> <span style="color: #06b6ef">am</span><span style="color: #5bc4bf">!</span>     <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">|</span>               <span style="color: #5bc4bf">|</span>
                      <span style="color: #5bc4bf">+---------------+</span>
</code></pre>
              </div>


              <p><strong>3. Where do you want to show an optional error message when the request fails?</strong> Here
                the same rules from the second criteria for the loading indicator apply.</p>

              <p>That&rsquo;s basically everything on <strong>where to fetch the data</strong> in your React component
                hierarchy. But when should the data be fetched and how should it be fetched once the common parent
                component is agreed on?</p>

              <h2 class="chapter-header" id="react-how-fetch-data">How to fetch data in React?</h2>

              <p>React&rsquo;s ES6 class components have <a target="_blank" rel="noopener noreferrer"
                  href="https://facebook.github.io/react/docs/react-component.html">lifecycle methods</a>. The
                <code>render()</code> lifecycle method is mandatory to output a React element, because after all you may
                want to display the fetched data at some point.</p>

              <p>There is another lifecycle method that is a perfect match to fetch data:
                <code>componentDidMount()</code>. When this method runs, the component was already rendered once with
                the <code>render()</code> method, but it would render again when the fetched data would be stored in the
                local state of the component with <code>setState()</code>. Afterward, the local state could be used in
                the <code>render()</code> method to display it or to pass it down as props.</p>

              <p>The <code>componentDidMount()</code> lifecycle method is the best place to fetch data. But how to fetch
                the data after all? <a href="../essential-react-libraries-framework/index.html">React&rsquo;s ecosystem
                  is a flexible framework</a>, thus you can choose your own solution to fetch data. For the sake of
                simplicity, the article will showcase it with the <a target="_blank" rel="noopener noreferrer"
                  href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch">native fetch API</a>
                that comes with the browser. It uses <a target="_blank" rel="noopener noreferrer"
                  href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise">JavaScript
                  promises</a> to resolve the asynchronous response. The most minimal example to fetch data would be the
                following:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">constructor</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">super</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">);</span>

    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">data</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">null</span><span style="color: #e7e9db">,</span>
    <span style="color: #e7e9db">};</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">componentDidMount</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">fetch</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;https://api.mydomain.com&#39;</span><span style="color: #e7e9db">)</span>
      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">response</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">response</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">json</span><span style="color: #e7e9db">())</span>
      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">data</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">data</span> <span style="color: #e7e9db">}));</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #e7e9db">...</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>That&rsquo;s the most basic React.js fetch API example. It shows you how to get JSON in React from an
                API. However, the article is going to demonstrate it with a real world third-party API:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">API</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">&#39;https://hn.algolia.com/api/v1/search?query=&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">DEFAULT_QUERY</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">&#39;redux&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">constructor</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">super</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">);</span>

    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">      <span style="color: #06b6ef">hits</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">[],</span>
</span>    <span style="color: #e7e9db">};</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">componentDidMount</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">    <span style="color: #06b6ef">fetch</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">API</span> <span style="color: #5bc4bf">+</span> <span style="color: #06b6ef">DEFAULT_QUERY</span><span style="color: #e7e9db">)</span>
</span>      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">response</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">response</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">json</span><span style="color: #e7e9db">())</span>
<span style="background-color: #4f424c">      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">data</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">hits</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">hits</span> <span style="color: #e7e9db">}));</span>
</span>  <span style="color: #e7e9db">}</span>

  <span style="color: #e7e9db">...</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>The example uses the <a target="_blank" rel="noopener noreferrer"
                  href="https://hn.algolia.com/api">Hacker News API</a> but feel free to use your own API endpoints.
                When the data is fetched successfully, it will be stored in the local state with React&rsquo;s
                <code>this.setState()</code> method. Then the <code>render()</code> method will trigger again and you
                can display the fetched data.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
 <span style="color: #e7e9db">...</span>

  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">hits</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">;</span>

    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ul</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #e7e9db">{</span><span style="color: #06b6ef">hits</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">hit</span> <span style="color: #5bc4bf">=&gt;</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">li</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">hit</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">objectID</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">a</span> <span style="color: #06b6ef">href</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">hit</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">url</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">hit</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">title</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/a&gt;</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/li&gt;</span>
        <span style="color: #e7e9db">)}</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ul&gt;</span>
    <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Even though the <code>render()</code> method already ran once before the
                <code>componentDidMount()</code> method, you don&rsquo;t run into any null pointer exceptions because
                you have initialized the <code>hits</code> property in the local state with an empty array.</p>

              <p><strong>Note:</strong> If you want to get to know data fetching with a feature called React Hooks,
                checkout this comprehensive tutorial: <a href="../react-hooks-fetch-data/index.html">How to fetch data
                  with React Hooks?</a></p>

              <h2 class="chapter-header" id="react-fetch-data-loading-error">What about loading spinner and error
                handling?</h2>

              <p>Of course you need the fetched data in your local state. But what else? There are two more properties
                that you could store in the state: loading state and error state. Both will improve your user experience
                for end-users of your application.</p>

              <p>The loading state should be used to indicated that an asynchronous request is happening. Between both
                <code>render()</code> methods the fetched data is pending due to arriving asynchronously. Thus you can
                add a loading indicator during the time of waiting. In your fetching lifecycle method, you would have to
                toggle the property from false to true and when the data is resolved from true to false.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">constructor</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">super</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">);</span>

    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">hits</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">[],</span>
<span style="background-color: #4f424c">      <span style="color: #06b6ef">isLoading</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">false</span><span style="color: #e7e9db">,</span>
</span>    <span style="color: #e7e9db">};</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">componentDidMount</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">isLoading</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">true</span> <span style="color: #e7e9db">});</span>
</span>
    <span style="color: #06b6ef">fetch</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">API</span> <span style="color: #5bc4bf">+</span> <span style="color: #06b6ef">DEFAULT_QUERY</span><span style="color: #e7e9db">)</span>
      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">response</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">response</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">json</span><span style="color: #e7e9db">())</span>
<span style="background-color: #4f424c">      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">data</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">hits</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">hits</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">isLoading</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">false</span> <span style="color: #e7e9db">}));</span>
</span>  <span style="color: #e7e9db">}</span>

  <span style="color: #e7e9db">...</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>In your <code>render()</code> method you can use <a
                  href="../conditional-rendering-react/index.html">React&rsquo;s conditional rendering</a> to display
                either a loading indicator or the resolved data.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">...</span>

  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">    <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">hits</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">isLoading</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">;</span>
</span>
<span style="background-color: #4f424c">    <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">isLoading</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">      <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">p</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Loading</span> <span style="color: #e7e9db">...</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/p&gt;;</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">}</span>
</span>
    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ul</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #e7e9db">{</span><span style="color: #06b6ef">hits</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">hit</span> <span style="color: #5bc4bf">=&gt;</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">li</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">hit</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">objectID</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">a</span> <span style="color: #06b6ef">href</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">hit</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">url</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">hit</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">title</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/a&gt;</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/li&gt;</span>
        <span style="color: #e7e9db">)}</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ul&gt;</span>
    <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>
</code></pre>
              </div>


              <p>A loading indicator can be as simple as a Loading&hellip; message, but you can also use third-party
                libraries to show a spinner or <a target="_blank" rel="noopener noreferrer"
                  href="https://github.com/danilowoz/react-content-loader">pending content component</a>. It is up to
                you to signalize your end-user that the data fetching is pending.</p>

              <p>The second state that you could keep in your local state would be an error state. When an error occurs
                in your application, nothing is worse than giving your end-user no indication about the error.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">constructor</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">super</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">);</span>

    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">hits</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">[],</span>
      <span style="color: #06b6ef">isLoading</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">false</span><span style="color: #e7e9db">,</span>
<span style="background-color: #4f424c">      <span style="color: #06b6ef">error</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">null</span><span style="color: #e7e9db">,</span>
</span>    <span style="color: #e7e9db">};</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #e7e9db">...</span>

<span style="color: #e7e9db">}</span>
</code></pre>
              </div>


              <p>When using promises, the <code>catch()</code> block is usually used after the <code>then()</code> block
                to handle errors. That&rsquo;s why it can be used for the native fetch API.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>

  <span style="color: #e7e9db">...</span>

  <span style="color: #06b6ef">componentDidMount</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">isLoading</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">true</span> <span style="color: #e7e9db">});</span>

    <span style="color: #06b6ef">fetch</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">API</span> <span style="color: #5bc4bf">+</span> <span style="color: #06b6ef">DEFAULT_QUERY</span><span style="color: #e7e9db">)</span>
      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">response</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">response</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">json</span><span style="color: #e7e9db">())</span>
      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">data</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">hits</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">hits</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">isLoading</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">false</span> <span style="color: #e7e9db">}))</span>
<span style="background-color: #4f424c">      <span style="color: #e7e9db">.</span><span style="color: #815ba4">catch</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">error</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">error</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">isLoading</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">false</span> <span style="color: #e7e9db">}));</span>
</span>  <span style="color: #e7e9db">}</span>

  <span style="color: #e7e9db">...</span>

<span style="color: #e7e9db">}</span>
</code></pre>
              </div>


              <p>Unfortunately, the native fetch API doesn&rsquo;t use its catch block for every erroneous status code.
                For instance, when a HTTP 404 happens, it wouldn&rsquo;t run into the catch block. But you can force it
                to run into the catch block by throwing an error when your response doesn&rsquo;t match your expected
                data.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>

  <span style="color: #e7e9db">...</span>

  <span style="color: #06b6ef">componentDidMount</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">isLoading</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">true</span> <span style="color: #e7e9db">});</span>

    <span style="color: #06b6ef">fetch</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">API</span> <span style="color: #5bc4bf">+</span> <span style="color: #06b6ef">DEFAULT_QUERY</span><span style="color: #e7e9db">)</span>
<span style="background-color: #4f424c">      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">response</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">        <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">response</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">ok</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">          <span style="color: #815ba4">return</span> <span style="color: #06b6ef">response</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">json</span><span style="color: #e7e9db">();</span>
</span><span style="background-color: #4f424c">        <span style="color: #e7e9db">}</span> <span style="color: #815ba4">else</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">          <span style="color: #815ba4">throw</span> <span style="color: #815ba4">new</span> <span style="color: #e7e9db">Error(</span><span style="color: #48b685">&#39;Something went wrong ...&#39;</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">        <span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">})</span>
</span>      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">data</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">hits</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">hits</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">isLoading</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">false</span> <span style="color: #e7e9db">}))</span>
      <span style="color: #e7e9db">.</span><span style="color: #815ba4">catch</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">error</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">error</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">isLoading</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">false</span> <span style="color: #e7e9db">}));</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #e7e9db">...</span>

<span style="color: #e7e9db">}</span>
</code></pre>
              </div>


              <p>Last but not least, you can show the error message in your <code>render()</code> method as conditional
                rendering again.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>

  <span style="color: #e7e9db">...</span>

  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">    <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">hits</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">isLoading</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">error</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">;</span>
</span>
<span style="background-color: #4f424c">    <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">error</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">      <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">p</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">error</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">message</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/p&gt;;</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">}</span>
</span>
    <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">isLoading</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
      <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">p</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Loading</span> <span style="color: #e7e9db">...</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/p&gt;;</span>
    <span style="color: #e7e9db">}</span>

    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ul</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #e7e9db">{</span><span style="color: #06b6ef">hits</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">hit</span> <span style="color: #5bc4bf">=&gt;</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">li</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">hit</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">objectID</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">a</span> <span style="color: #06b6ef">href</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">hit</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">url</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">hit</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">title</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/a&gt;</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/li&gt;</span>
        <span style="color: #e7e9db">)}</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ul&gt;</span>
    <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>
</code></pre>
              </div>


              <p>That&rsquo;s all about the basics in data fetching with plain React. You can read more about managing
                the fetched data in React&rsquo;s local state or libraries such as Redux in <a target="_blank"
                  rel="noopener noreferrer" href="https://roadtoreact.com/">Taming the State in React</a>.</p>

              <h2 class="chapter-header" id="react-fetch-data-axios">How to fetch data with Axios in React</h2>

              <p>As already mentioned, you can substitute the native fetch API with another library. For instance,
                another library might run for every erroneous requests into the catch block on its own without you
                having to throw an error in the first place. A great candidate as a library for fetching data is <a
                  target="_blank" rel="noopener noreferrer" href="https://github.com/axios/axios">axios</a>. You can
                install axios in your project with <code>npm install axios</code> and then use it instead of the native
                fetch API in your project. Let&rsquo;s refactor the previous project for using axios instead of the
                native fetch API for requesting data in React.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">axios</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;axios&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #815ba4">const</span> <span style="color: #06b6ef">API</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">&#39;https://hn.algolia.com/api/v1/search?query=&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">const</span> <span style="color: #06b6ef">DEFAULT_QUERY</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">&#39;redux&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">constructor</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">super</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">);</span>

    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">hits</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">[],</span>
      <span style="color: #06b6ef">isLoading</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">false</span><span style="color: #e7e9db">,</span>
      <span style="color: #06b6ef">error</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">null</span><span style="color: #e7e9db">,</span>
    <span style="color: #e7e9db">};</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">componentDidMount</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">isLoading</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">true</span> <span style="color: #e7e9db">});</span>

<span style="background-color: #4f424c">    <span style="color: #06b6ef">axios</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">get</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">API</span> <span style="color: #5bc4bf">+</span> <span style="color: #06b6ef">DEFAULT_QUERY</span><span style="color: #e7e9db">)</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">result</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span>
</span><span style="background-color: #4f424c">        <span style="color: #06b6ef">hits</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">result</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">data</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">hits</span><span style="color: #e7e9db">,</span>
</span>        <span style="color: #06b6ef">isLoading</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">false</span>
      <span style="color: #e7e9db">}))</span>
      <span style="color: #e7e9db">.</span><span style="color: #815ba4">catch</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">error</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span>
        <span style="color: #06b6ef">error</span><span style="color: #e7e9db">,</span>
        <span style="color: #06b6ef">isLoading</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">false</span>
      <span style="color: #e7e9db">}));</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #e7e9db">...</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>As you can see, axios returns a JavaScript promise as well. But this time you don&rsquo;t have to
                resolve the promise two times, because axios already returns a JSON response for you. Furthermore, when
                using axios you can be sure that all errors are caught in the <code>catch()</code> block. In addition,
                you need to adjust the data structure slightly for the returned axios data.</p>

              <p>The previous example has only shown you how to get data in React from an API with a HTTP GET method in
                React&rsquo;s componentDidMount lifecycle method. However, you can also actively request data with a
                button click. Then you wouldn&rsquo;t use a lifecycle method, but your own class method.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">axios</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;axios&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">API</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">&#39;https://hn.algolia.com/api/v1/search?query=&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">const</span> <span style="color: #06b6ef">DEFAULT_QUERY</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">&#39;redux&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">constructor</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">super</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">);</span>

    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">hits</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">[],</span>
      <span style="color: #06b6ef">isLoading</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">false</span><span style="color: #e7e9db">,</span>
      <span style="color: #06b6ef">error</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">null</span><span style="color: #e7e9db">,</span>
    <span style="color: #e7e9db">};</span>
  <span style="color: #e7e9db">}</span>

<span style="background-color: #4f424c">  <span style="color: #06b6ef">getStories</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
</span>    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">isLoading</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">true</span> <span style="color: #e7e9db">});</span>

    <span style="color: #06b6ef">axios</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">get</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">API</span> <span style="color: #5bc4bf">+</span> <span style="color: #06b6ef">DEFAULT_QUERY</span><span style="color: #e7e9db">)</span>
      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">result</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span>
        <span style="color: #06b6ef">hits</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">result</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">data</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">hits</span><span style="color: #e7e9db">,</span>
        <span style="color: #06b6ef">isLoading</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">false</span>
      <span style="color: #e7e9db">}))</span>
      <span style="color: #e7e9db">.</span><span style="color: #815ba4">catch</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">error</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span>
        <span style="color: #06b6ef">error</span><span style="color: #e7e9db">,</span>
        <span style="color: #06b6ef">isLoading</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">false</span>
      <span style="color: #e7e9db">}));</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #e7e9db">...</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>But that&rsquo;s only the GET method in React. What about writing data to an API? When having axios in
                place, you can do a post request in React as well. You only need to swap the <code>axios.get()</code>
                with a <code>axios.post()</code>.</p>

              <h2 class="chapter-header" id="react-fetch-data-test-testing">How to test data fetching in React?</h2>

              <p>So what about testing your data request from a React component? There exists an <a
                  href="../react-testing-tutorial/index.html">extensive React testing tutorial</a> about this topic, but
                here it comes in a nutshell. When you have setup your application with <a target="_blank"
                  rel="noopener noreferrer" href="https://github.com/facebook/create-react-app">create-react-app</a>, it
                already comes with <a target="_blank" rel="noopener noreferrer" href="https://jestjs.io/">Jest</a> as
                test runner and assertion library. Otherwise you could use <a target="_blank" rel="noopener noreferrer"
                  href="https://mochajs.org/">Mocha</a> (test runner) and <a target="_blank" rel="noopener noreferrer"
                  href="http://www.chaijs.com/">Chai</a> (assertion library) for these purposes as well (keep in mind
                that the functions for the test runner and assertions vary then).</p>

              <p>When testing React components, I often rely <a target="_blank" rel="noopener noreferrer"
                  href="https://github.com/airbnb/enzyme">Enzyme</a> for rendering the components in my test cases.
                Furthermore, when it comes to testing asynchronous data fetching, <a target="_blank"
                  rel="noopener noreferrer" href="http://sinonjs.org/">Sinon</a> is helpful for spying and mocking data.
              </p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #06b6ef">enzyme</span> <span style="color: #06b6ef">enzyme</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">adapter</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">react</span><span style="color: #5bc4bf">-</span><span style="color: #f99b15">16</span> <span style="color: #06b6ef">sinon</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">dev</span>
</code></pre>
              </div>


              <p>Once you have your test setup, you can write your first test suite for the data request in React
                scenario.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">axios</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;axios&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">import</span> <span style="color: #06b6ef">sinon</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;sinon&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">mount</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">configure</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;enzyme&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">Adapter</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;enzyme-adapter-react-16&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">import</span> <span style="color: #06b6ef">App</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #06b6ef">configure</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">adapter</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">new</span> <span style="color: #06b6ef">Adapter</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">});</span>

<span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;App&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">beforeAll</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>

  <span style="color: #e7e9db">});</span>

  <span style="color: #06b6ef">afterAll</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>

  <span style="color: #e7e9db">});</span>

  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;renders data when it fetched data successfully&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">done</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>

  <span style="color: #e7e9db">});</span>

  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;stores data in local state&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">done</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>

  <span style="color: #e7e9db">});</span>
<span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>Whereas one test case should show that the data is rendered in the React component successfully after
                the data fetching, the other test verifies that the data is stored in the local state. Perhaps it is
                redundant to test both cases, because when the data is rendered it should be stored in the local state
                as well, but just for the sake of demonstrating it you will see both use cases.</p>

              <p>Before all tests you want to stub your axios request with mocked data. You can create your own
                JavaScript promise for it and use it later to have fine-grained control over its resolve functionality.
              </p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;App&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">result</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">    <span style="color: #06b6ef">data</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">hits</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">[</span>
</span><span style="background-color: #4f424c">        <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">objectID</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;1&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">url</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;https://blog.com/hello&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">title</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;hello&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">},</span>
</span><span style="background-color: #4f424c">        <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">objectID</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;2&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">url</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;https://blog.com/there&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">title</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;there&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">},</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">],</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">};</span>
</span>
<span style="background-color: #4f424c">  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">promise</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">Promise.</span><span style="color: #06b6ef">resolve</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">result</span><span style="color: #e7e9db">);</span>
</span>
  <span style="color: #06b6ef">beforeAll</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">    <span style="color: #06b6ef">sinon</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">stub</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">axios</span><span style="color: #e7e9db">,</span> <span style="color: #48b685">&#39;get&#39;</span><span style="color: #e7e9db">)</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">withArgs</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;https://hn.algolia.com/api/v1/search?query=redux&#39;</span><span style="color: #e7e9db">)</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">returns</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">promise</span><span style="color: #e7e9db">);</span>
</span>  <span style="color: #e7e9db">});</span>

  <span style="color: #06b6ef">afterAll</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">    <span style="color: #06b6ef">axios</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">get</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">restore</span><span style="color: #e7e9db">();</span>
</span>  <span style="color: #e7e9db">});</span>

  <span style="color: #e7e9db">...</span>
<span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>After all tests you should have sure to remove the stub from axios again. That&rsquo;s it for the
                asynchronous data fetching test setups. Now let&rsquo;s implement the first test:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;App&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">...</span>

  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;stores data in local state&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">done</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">wrapper</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">mount</span><span style="color: #e7e9db">(</span><span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">App</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">);</span>

    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">().</span><span style="color: #06b6ef">hits</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">toEqual</span><span style="color: #e7e9db">([]);</span>

    <span style="color: #06b6ef">promise</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">update</span><span style="color: #e7e9db">();</span>

      <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">().</span><span style="color: #06b6ef">hits</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">toEqual</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">result</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">data</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">hits</span><span style="color: #e7e9db">);</span>

      <span style="color: #06b6ef">done</span><span style="color: #e7e9db">();</span>
    <span style="color: #e7e9db">});</span>
  <span style="color: #e7e9db">});</span>

  <span style="color: #e7e9db">...</span>
<span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>In the test, you start to render the React component with Enzyme&rsquo;s <code>mount()</code> function
                which makes sure that all lifecycle methods are executed and all child components are rendered.
                Initially you can have an assertion for your hits being an empty array in the local state of the
                component. That should be true, because you initialze your local state with an empty array for the hits
                property. Once you resolve the promise and trigger your component&rsquo;s rendering manually, the state
                should have changed after the data fetching.</p>

              <p>Next you can test whether everything renders accordingly. The test is similar to the previous test:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;App&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">...</span>

  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;renders data when it fetched data successfully&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">done</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">wrapper</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">mount</span><span style="color: #e7e9db">(</span><span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">App</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">);</span>

    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">find</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;p&#39;</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">text</span><span style="color: #e7e9db">()).</span><span style="color: #06b6ef">toEqual</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;Loading ...&#39;</span><span style="color: #e7e9db">);</span>

    <span style="color: #06b6ef">promise</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">update</span><span style="color: #e7e9db">();</span>

      <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">find</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;li&#39;</span><span style="color: #e7e9db">)).</span><span style="color: #06b6ef">toHaveLength</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">2</span><span style="color: #e7e9db">);</span>

      <span style="color: #06b6ef">done</span><span style="color: #e7e9db">();</span>
    <span style="color: #e7e9db">});</span>
  <span style="color: #e7e9db">});</span>
<span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>In the beginning of the test, the loading indicator should be rendered. Again, once you resolve the
                promise and trigger your component&rsquo;s rendering manually, there should be two list elements for the
                requested data.</p>

              <p>That&rsquo;s essentially what you need to know about testing data fetching in React. It doesn&rsquo;t
                need to be complicated. By having a promise on your own, you have fine-grained control over when to
                resolve the promise and when to update the component. Afterward you can conduct your assertions. The
                previous shown testing scenarios are only one way of doing it. For instance, regarding the test tooling
                you don&rsquo;t necessarily need to use Sinon and Enzyme.</p>

              <h2 class="chapter-header" id="react-fetch-data-async-await">How to fetch data with Async/Await in React?
              </h2>

              <p>So far, you have only used the common way for dealing with JavaScript promises by using their
                <code>then()</code> and <code>catch()</code> blocks. What about the next generation of asynchronous
                requests in JavaScript? Let&rsquo;s refactor the previous data fetching example in React to async/await.
              </p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">axios</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;axios&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">API</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">&#39;https://hn.algolia.com/api/v1/search?query=&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">const</span> <span style="color: #06b6ef">DEFAULT_QUERY</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">&#39;redux&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">...</span>

<span style="background-color: #4f424c">  <span style="color: #06b6ef">async</span> <span style="color: #06b6ef">componentDidMount</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
</span>    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">isLoading</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">true</span> <span style="color: #e7e9db">});</span>

<span style="background-color: #4f424c">    <span style="color: #815ba4">try</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">      <span style="color: #815ba4">const</span> <span style="color: #06b6ef">result</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">await</span> <span style="color: #06b6ef">axios</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">get</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">API</span> <span style="color: #5bc4bf">+</span> <span style="color: #06b6ef">DEFAULT_QUERY</span><span style="color: #e7e9db">);</span>
</span>
      <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span>
        <span style="color: #06b6ef">hits</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">result</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">data</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">hits</span><span style="color: #e7e9db">,</span>
        <span style="color: #06b6ef">isLoading</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">false</span>
      <span style="color: #e7e9db">});</span>
<span style="background-color: #4f424c">    <span style="color: #e7e9db">}</span> <span style="color: #815ba4">catch</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">error</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span>      <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span>
        <span style="color: #06b6ef">error</span><span style="color: #e7e9db">,</span>
        <span style="color: #06b6ef">isLoading</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">false</span>
      <span style="color: #e7e9db">});</span>
<span style="background-color: #4f424c">    <span style="color: #e7e9db">}</span>
</span>  <span style="color: #e7e9db">}</span>

  <span style="color: #e7e9db">...</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Instead of <code>then()</code> you can use the async/await statements when fetching data in React. The
                async statement is used to signalize that a function is executed asynchronously. It can be used on a
                (React) class component&rsquo;s method too. The await statement is used within the async function
                whenever something is executed asynchronously. So the next line is not executed before the awaited
                request resolves. Furthermore, a try and catch block can be used to catch the error in case the request
                fails.</p>

              <h2 class="chapter-header" id="react-fetch-data-higher-order-component">How to fetch data in Higher-Order
                Components?</h2>

              <p>The previously shown ways to fetch data can be repetitive when using it in a lot of components. Once a
                component mounted, you want to fetch data and show conditional loading or error indicators. The
                component so far can be split up into two responsibilities: showing the fetched data with conditional
                renderings and fetching the remote data with storing it in local state afterward. Whereas the former is
                only there for rendering purposes, the latter could be made reusable by a <a
                  href="../gentle-introduction-higher-order-components/index.html">higher-order component</a>.</p>

              <p>Note: When you are going to read the linked article, you will also see how you could abstract away the
                conditional renderings in higher-order components. After that, your component would only be concerned
                displaying the fetched data without any conditional renderings.</p>

              <p>So how would you introduce such abstract higher-order component which deals with the data fetching in
                React for you. First, you would have to separate all the fetching and state logic into a higher-order
                component.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">withFetching</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">url</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">Component</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span>
  <span style="color: #815ba4">class</span> <span style="color: #06b6ef">WithFetching</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">constructor</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
      <span style="color: #815ba4">super</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">);</span>

      <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
        <span style="color: #06b6ef">data</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">null</span><span style="color: #e7e9db">,</span>
        <span style="color: #06b6ef">isLoading</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">false</span><span style="color: #e7e9db">,</span>
        <span style="color: #06b6ef">error</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">null</span><span style="color: #e7e9db">,</span>
      <span style="color: #e7e9db">};</span>
    <span style="color: #e7e9db">}</span>

    <span style="color: #06b6ef">componentDidMount</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
      <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">isLoading</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">true</span> <span style="color: #e7e9db">});</span>

      <span style="color: #06b6ef">axios</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">get</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">url</span><span style="color: #e7e9db">)</span>
        <span style="color: #e7e9db">.</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">result</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span>
          <span style="color: #06b6ef">data</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">result</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">data</span><span style="color: #e7e9db">,</span>
          <span style="color: #06b6ef">isLoading</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">false</span>
        <span style="color: #e7e9db">}))</span>
        <span style="color: #e7e9db">.</span><span style="color: #815ba4">catch</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">error</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span>
          <span style="color: #06b6ef">error</span><span style="color: #e7e9db">,</span>
          <span style="color: #06b6ef">isLoading</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">false</span>
        <span style="color: #e7e9db">}));</span>
    <span style="color: #e7e9db">}</span>

    <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
      <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span> <span style="color: #e7e9db">...</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">props</span> <span style="color: #e7e9db">}</span> <span style="color: #e7e9db">{</span> <span style="color: #e7e9db">...</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">;</span>
    <span style="color: #e7e9db">}</span>
  <span style="color: #e7e9db">}</span>
</code></pre>
              </div>


              <p>Except for the rendering, everything else within the higher-order component is taken from the previous
                component where the data fetching happened right in the component. In addition, the higher-order
                component receives an url that will be used to request the data. If you need to pass more query
                parameters to your higher-order component later on, you always can extend the arguments in the function
                signature.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">withFetching</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">url</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">query</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">Comp</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span>
  <span style="color: #e7e9db">...</span>
</code></pre>
              </div>


              <p>In addition, the higher-order component uses a generic data container in the local state called
                <code>data</code>. It is not aware anymore of the specific property naming (e.g. hits) as before.</p>

              <p>In the second step, you can dispose all of the fetching and state logic from your <code>App</code>
                component. Because it has no local state or lifecycle methods anymore, you can refactor it to a
                functional stateless component. The incoming property changes from the specific <code>hits</code> to the
                generic <code>data</code> property.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">App</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">isLoading</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">error</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #5bc4bf">!</span><span style="color: #06b6ef">data</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">p</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">No</span> <span style="color: #06b6ef">data</span> <span style="color: #06b6ef">yet</span> <span style="color: #e7e9db">...</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/p&gt;;</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">error</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">p</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">error</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">message</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/p&gt;;</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">isLoading</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">p</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Loading</span> <span style="color: #e7e9db">...</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/p&gt;;</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ul</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #e7e9db">{</span><span style="color: #06b6ef">data</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">hits</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">hit</span> <span style="color: #5bc4bf">=&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">li</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">hit</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">objectID</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">a</span> <span style="color: #06b6ef">href</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">hit</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">url</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">hit</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">title</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/a&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/li&gt;</span>
      <span style="color: #e7e9db">)}</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ul&gt;</span>
  <span style="color: #e7e9db">);</span>
<span style="color: #e7e9db">}</span>
</code></pre>
              </div>


              <p>Last but not least, you can use the higher-order component to wrap your <code>App</code> component.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">API</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">&#39;https://hn.algolia.com/api/v1/search?query=&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">const</span> <span style="color: #06b6ef">DEFAULT_QUERY</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">&#39;redux&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #e7e9db">...</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">AppWithFetch</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">withFetching</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">API</span> <span style="color: #5bc4bf">+</span> <span style="color: #06b6ef">DEFAULT_QUERY</span><span style="color: #e7e9db">)(</span><span style="color: #06b6ef">App</span><span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>Basically that&rsquo;s it to abstract away the data fetching in React. By using higher-order components
                to fetch the data, you can easily opt-in this feature for any component with any endpoint API url. In
                addition, you can extend it with query parameters as shown before.</p>

              <h2 class="chapter-header" id="react-fetch-data-render-props">How to fetch data in Render Props?</h2>

              <p>The alternative way of higher-order components are render prop components in React. It is possible to
                use a render prop component for declarative data fetching in React as well.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">class</span> <span style="color: #06b6ef">Fetcher</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">constructor</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">super</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">);</span>

    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">data</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">null</span><span style="color: #e7e9db">,</span>
      <span style="color: #06b6ef">isLoading</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">false</span><span style="color: #e7e9db">,</span>
      <span style="color: #06b6ef">error</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">null</span><span style="color: #e7e9db">,</span>
    <span style="color: #e7e9db">};</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">componentDidMount</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">isLoading</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">true</span> <span style="color: #e7e9db">});</span>

    <span style="color: #06b6ef">axios</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">get</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">url</span><span style="color: #e7e9db">)</span>
      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">result</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span>
        <span style="color: #06b6ef">data</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">result</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">data</span><span style="color: #e7e9db">,</span>
        <span style="color: #06b6ef">isLoading</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">false</span>
      <span style="color: #e7e9db">}))</span>
      <span style="color: #e7e9db">.</span><span style="color: #815ba4">catch</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">error</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span>
        <span style="color: #06b6ef">error</span><span style="color: #e7e9db">,</span>
        <span style="color: #06b6ef">isLoading</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">false</span>
      <span style="color: #e7e9db">}));</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">return</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">children</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>
</code></pre>
              </div>


              <p>Then again you would be able to use the render prop component the following way in your App component:
              </p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">API</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">&#39;https://hn.algolia.com/api/v1/search?query=&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">const</span> <span style="color: #06b6ef">DEFAULT_QUERY</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">&#39;redux&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #e7e9db">...</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">RenderPropApproach</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Fetcher</span> <span style="color: #06b6ef">url</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">API</span> <span style="color: #5bc4bf">+</span> <span style="color: #06b6ef">DEFAULT_QUERY</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">{({</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">isLoading</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">error</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
      <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #5bc4bf">!</span><span style="color: #06b6ef">data</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
        <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">p</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">No</span> <span style="color: #06b6ef">data</span> <span style="color: #06b6ef">yet</span> <span style="color: #e7e9db">...</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/p&gt;;</span>
      <span style="color: #e7e9db">}</span>

      <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">error</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
        <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">p</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">error</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">message</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/p&gt;;</span>
      <span style="color: #e7e9db">}</span>

      <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">isLoading</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
        <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">p</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Loading</span> <span style="color: #e7e9db">...</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/p&gt;;</span>
      <span style="color: #e7e9db">}</span>

      <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ul</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #e7e9db">{</span><span style="color: #06b6ef">data</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">hits</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">hit</span> <span style="color: #5bc4bf">=&gt;</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">li</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">hit</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">objectID</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
              <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">a</span> <span style="color: #06b6ef">href</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">hit</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">url</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">hit</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">title</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/a&gt;</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/li&gt;</span>
          <span style="color: #e7e9db">)}</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ul&gt;</span>
      <span style="color: #e7e9db">);</span>
    <span style="color: #e7e9db">}}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Fetcher&gt;</span>
</code></pre>
              </div>


              <p>By using React&rsquo;s children property as render prop, you are able to pass all the local state from
                the Fetcher component. That&rsquo;s how you can make all the conditional rendering and the final
                rendering within your render prop component.</p>

              <h2 class="chapter-header" id="react-fetch-data-graphql">How to fetch data from a GraphQL API in React?
              </h2>

              <p>Last but not least, the article should shortly mention GraphQL APIs for React. How would you fetch data
                from a GraphQL API instead of a REST API (which you have used so far) from a React component? Basically
                it can be achieved the same way, because GraphQL is not opinionated about the network layer. Most
                GraphQL APIs are exposed over HTTP whether it is possible to query them with the native fetch API or
                axios too. If you are interested in how you would fetch data from a GraphQL API in React, head over to
                this article: <a href="../react-with-graphql-tutorial/index.html">A complete React with GraphQL
                  Tutorial</a>.</p>

              <hr class="section-divider">

              <p>You can find the finished project in this <a target="_blank" rel="noopener noreferrer"
                  href="https://github.com/ChrisPaulDev/react-data-fetching">GitHub repository</a>. Do you have any other
                suggestions for data fetching in React? Please reach out to me. It would mean lots to me if you would
                share the article to others for learning about data fetching in React.</p>



              



              <div class="box-inline col-md-12">
                <div class="col-md-12 text-center">
                  <h2 class="newsletter">The Road to learn React</h2>

                  <div class="col-md-4">
                    <img class="img-lazy img-responsive" data-lazy-src="//img/page/cover.png">
                  </div>

                  <p class="lead">
                    Build a Hacker News App along the way. No setup configuration. No tooling. No Redux. Plain React in
                    200+ pages of learning material. Learn React like <strong>50.000+ readers</strong>.
                  </p>
                  <a class="btn btn-template-main" href="https://roadtoreact.com" target="_blank"
                    rel="noopener noreferrer">
                    Get the Book for free <i class="fa fa-chevron-right"></i>
                  </a>

                  <div>
                    <a href="https://amzn.to/2QY2ONp" target="_blank" rel="noopener noreferrer">
                      Get it from Amazon
                    </a>
                  </div>

                </div>
              </div>

            </div>



            


          </article>


        </div>


      </div>

    </div>




    <section class="bar background-image-fixed-2 no-mb color-white text-center">
      <div class="dark-mask"></div>
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <h3 class="lead">Never miss an article about web development, JavaScript and self-growth.</h3>
            <h2 class="text-uppercase">Take Part</h2>
          </div>

          <div class="col-md-12 text-center">

            <h3 class="lead"><i class="fa fa-check"></i> Join 30.000&#43; Developers</h3>

            <h3 class="lead"><i class="fa fa-check"></i> Learn Web Development with JavaScript</h3>

            <h3 class="lead"><i class="fa fa-check"></i> Tips and Tricks</h3>

            <h3 class="lead"><i class="fa fa-check"></i> Access Tutorials, eBooks and Courses</h3>

            <h3 class="lead"><i class="fa fa-check"></i> Personal Development as a Software Engineer</h3>

          </div>
          <div class="col-md-12">
            <p class="text-center">
              <div id="mc_embed_signup">
                <form action="https://www.getrevue.co/profile/rwieruch/add_subscriber" method="post" id="revue-form"
                  name="revue-form" target="_blank">
                  <div id="mc_embed_signup_scroll">
                    <input class="email" placeholder="email address" type="email" name="member[email]"
                      id="member_email">
                    <div>
                      <button type="submit" value="Subscribe" name="member[subscribe]" id="member_submit"
                        class="btn btn-template-transparent-black btn-lg">
                        Subscribe
                      </button>
                    </div>
                  </div>
                </form>
              </div>

            </p>
          </div>
        </div>
      </div>
    </section>
    <footer id="subfooter">
      <div class="container">

        <div class="col-md-5 col-sm-6">

          <h4>Recent posts</h4>

          <div class="blog-entries">

            <div class="item same-height-row clearfix">
              <div class="article same-height-always">
                <a href="../redux-vs-usereducer/index.html">

                  <img data-lazy-src="//img/posts/redux-vs-usereducer/banner.jpg" data-is-thumb="is-thumb"
                    class="img-lazy img-responsive" alt="React&#39;s useReducer vs Redux">

                </a>
              </div>
              <div class="name same-height-always">
                <h5><a href="../redux-vs-usereducer/index.html">React&#39;s useReducer vs Redux</a></h5>
              </div>
            </div>

            <div class="item same-height-row clearfix">
              <div class="article same-height-always">
                <a href="../publish-npm-package-node/index.html">

                  <img data-lazy-src="//img/posts/publish-npm-package-node/banner.jpg" data-is-thumb="is-thumb"
                    class="img-lazy img-responsive" alt="How to publish a npm package?">

                </a>
              </div>
              <div class="name same-height-always">
                <h5><a href="../publish-npm-package-node/index.html">How to publish a npm package?</a></h5>
              </div>
            </div>

            <div class="item same-height-row clearfix">
              <div class="article same-height-always">
                <a href="../react-scroll-to-item/index.html">

                  <img data-lazy-src="//img/posts/react-scroll-to-item/banner.jpg" data-is-thumb="is-thumb"
                    class="img-lazy img-responsive" alt="How to Scroll to Item in React?">

                </a>
              </div>
              <div class="name same-height-always">
                <h5><a href="../react-scroll-to-item/index.html">How to Scroll to Item in React?</a></h5>
              </div>
            </div>

          </div>

          <hr class="hidden-md hidden-lg hidden-sm">

        </div>



        <div class="col-md-5 col-md-offset-2 col-sm-6">

          <h4>About Me</h4>

          <div class="blog-entries">
            <div class="item same-height-row clearfix">
              <div class="profile same-height-always">
                <img class="img-lazy img-responsive" data-lazy-src="//img/page/profile.jpg" alt="profile">
              </div>
              <div class="name same-height-always">
                <p>
                  Hi, I'm Chris - a Midvale, Utah-based consulting software developer. Find out more <a
                    href="../about/index.html">about me</a>, <a href="../work-with-me/index.html">work with me</a>, or
                  have a look at my social media profiles below.
                </p>
              </div>
            </div>
          </div>

        </div>



      </div>

    </footer>


    <footer id="copyright">
      <div class="container">
        <div class="row">
          <div class="col-md-4">
            <ul class="info list-inline quicklinks pull-left">

              <li>© Chris Paul</li>

            </ul>
          </div>
          <div class="col-md-4">
            
          </div>
          <div class="col-md-4">
            <ul class="info list-inline quicklinks pull-right">

              <li><a aria-label="quicklinks" href="../legal/index.html">Legal Notice</a></li>

            </ul>
          </div>
        </div>
      </div>
    </footer>


  </div>



  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>

  <script src="../js/script.js"></script>
</body>

</html>