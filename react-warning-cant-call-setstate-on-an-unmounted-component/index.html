<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="robots" content="all,follow">
    <meta name="googlebot" content="index,follow,snippet,archive">
    <meta name="viewport" content="width=device-width, initial-scale=1">



    <title>
        Prevent React setState on unmounted Component - CPaul
    </title>

    <meta name="author" content="" />
    <meta name="description"
        content="How to avoid the React warning: Can only update a mounted or mounting component. It usually means you have called setState on an unmounted component ...">


    <meta name="theme-color" content="#38bb6c" />

    <meta name="generator" content="Hugo 0.41" />
    <link href="https://cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <link href="../css/bootstrap.default.css" rel="stylesheet" id="theme-stylesheet">
    <link href="../css/customizations.css" rel="stylesheet">

    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link rel="shortcut icon" href="../img/favicon/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="../img/favicon/apple-touch-icon.png" />
    <link rel="manifest" href="../img/favicon/manifest.json">
    <link rel="mask-icon" href="../img/favicon/safari-pinned-tab.svg" color="#5bbad5">

    <link rel="alternate" href="../index.xml" type="application/rss+xml" title="CPaul">

    <meta itemprop="name" content="Prevent React setState on unmounted Component">
    <meta itemprop="description"
        content="How to avoid the React warning: Can only update a mounted or mounting component. It usually means you have called setState on an unmounted component ...">
    <meta itemprop="image"
        content="https://chrispaul.dev/img/posts/react-warning-cant-call-setstate-on-an-unmounted-component/banner_640.jpg">
    <meta itemprop="keywords"
        content="angular,apollo,d3,graphql,growth,javascript,machine-learning,mobx,node,react,reason,redux,tooling,vue,web-development,angular,apollo,d3,graphql,growth,javascript,machine-learning,mobx,node,react,reason,redux,tooling,web-development," />


    <meta itemprop="wordCount" content="1361">

    <meta name="keywords"
        content="can&#39;t call setstate on an unmounted component, react prevent setState on unmounted Component">

    <meta property="og:title" content="Prevent React setState on unmounted Component - CPaul">


    <meta property="og:description"
        content="How to avoid the React warning: Can only update a mounted or mounting component. It usually means you have called setState on an unmounted component ..." />


    <meta property="og:type" content="website" />
    <meta property="og:url"
        content="https://chrispaul.dev/react-warning-cant-call-setstate-on-an-unmounted-component/" />
    <meta property="og:image"
        content="https://chrispaul.dev/img/posts/react-warning-cant-call-setstate-on-an-unmounted-component/banner_640.jpg" />



    <meta name="news_keywords"
        content="can&#39;t call setstate on an unmounted component,react prevent setState on unmounted Component" />



    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:image:src"
        content="https://chrispaul.dev/img/posts/react-warning-cant-call-setstate-on-an-unmounted-component/banner_640.jpg" />
    <meta name="twitter:title" content="Prevent React setState on unmounted Component" />
    <meta name="twitter:description"
        content="How to avoid the React warning: Can only update a mounted or mounting component. It usually means you have called setState on an unmounted component ..." />
    <meta name="twitter:site" content="@rwieruch" />
    <meta name="twitter:domain" content="rwieruch" />



</head>


<body>

    <div id="all">

        <header>

            <div class="navbar-affixed-top" data-spy="affix" data-offset-top="200">

                <div class="navbar navbar-default yamm" role="navigation" id="navbar">

                    <div class="container">
                        <div class="navbar-header">
                            <a class="navbar-brand home" href="../index.html">
                                <img src="../img/page/logo.svg" alt="Prevent React setState on unmounted Component logo"
                                    class="img-lazy">
                                <span class="sr-only">Prevent React setState on unmounted Component - go to
                                    homepage</span>
                            </a>

                            <div class="navbar-buttons">
                                <button type="button" class="navbar-toggle btn-template-main" data-toggle="collapse"
                                    data-target="#navigation">
                                    <span class="sr-only">Toggle navigation</span>
                                    <i class="fa fa-align-justify"></i>
                                </button>
                            </div>
                        </div>


                        <div class="navbar-collapse collapse" id="navigation">
                            <ul class="nav navbar-nav navbar-right">

                                <li class="dropdown">

                                    <a href="../index.html">Blog</a>

                                </li>

                                <li class="dropdown">

                                    <a href="../work-with-me/index.html">Work with me</a>

                                </li>

                                <li class="dropdown">

                                    <a href="../about/index.html">About</a>

                                </li>

                                <li class="dropdown">

                                    <a style="color: #38bb6c" href="https://roadtoreact.com/">Books &amp; Courses</a>

                                </li>

                            </ul>
                        </div>


                        <div class="collapse clearfix" id="search">

                            <form class="navbar-form" role="search">
                                <div class="input-group">
                                    <input type="text" class="form-control" placeholder="Search">
                                    <span class="input-group-btn">

                                        <button type="submit" class="btn btn-template-main"><i
                                                class="fa fa-search"></i></button>

                                    </span>
                                </div>
                            </form>

                        </div>


                    </div>
                </div>


            </div>
        </header>

        <div class="post-share post-share-fixed post-share-desktop hidden-xs hidden-sm">


            <a aria-label="icon-facebook" class="icon-facebook"
                href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fchrispaul.dev%2freact-warning-cant-call-setstate-on-an-unmounted-component%2f"
                onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                <i class="fa fa-facebook"></i>
            </a>


            <a aria-label="icon-twitter" class="icon-twitter"
                href="https://twitter.com/share?text=Prevent%20React%20setState%20on%20unmounted%20Component%20by%20%40rwieruch%20%23ReactJs&amp;url=https%3a%2f%2fchrispaul.dev%2freact-warning-cant-call-setstate-on-an-unmounted-component%2f"
                onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                <i class="fa fa-twitter"></i>
            </a>

            <a aria-label="icon-linkedin" class="icon-linkedin"
                href="https://www.linkedin.com/shareArticle?mini=true&amp;title=Prevent%20React%20setState%20on%20unmounted%20Component&amp;url=https%3a%2f%2fchrispaul.dev%2freact-warning-cant-call-setstate-on-an-unmounted-component%2f">
                <i class="fa fa-linkedin"></i>
            </a>

        </div>

        <div class="visible-xs visible-sm text-center">
            <div class="post-share post-share-fixed post-share-mobile">


                <a aria-label="icon-facebook" class="icon-facebook"
                    href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fchrispaul.dev%2freact-warning-cant-call-setstate-on-an-unmounted-component%2f"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <i class="fa fa-facebook"></i>
                </a>


                <a aria-label="icon-twitter" class="icon-twitter"
                    href="https://twitter.com/share?text=Prevent%20React%20setState%20on%20unmounted%20Component%20by%20%40rwieruch%20%23ReactJs&amp;url=https%3a%2f%2fchrispaul.dev%2freact-warning-cant-call-setstate-on-an-unmounted-component%2f"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <i class="fa fa-twitter"></i>
                </a>

                <a aria-label="icon-linkedin" class="icon-linkedin"
                    href="https://www.linkedin.com/shareArticle?mini=true&amp;title=Prevent%20React%20setState%20on%20unmounted%20Component&amp;url=https%3a%2f%2fchrispaul.dev%2freact-warning-cant-call-setstate-on-an-unmounted-component%2f">
                    <i class="fa fa-linkedin"></i>
                </a>

            </div>
        </div>



        <div class="hidden-xs">


            <section class="bar background-image-fixed-2 no-mb color-white text-center">
                <div class="dark-mask"></div>
                <div class="container">
                    <div class="row">
                        <div class="col-md-12">
                            <h3 class="lead">Never miss an article about web development, JavaScript and self-growth.
                            </h3>
                            <h2 class="text-uppercase newsletter">Take Part</h2>
                        </div>

                        <div class="col-md-12">
                            <p class="text-center">
                                <div id="mc_embed_signup">
                                    <form action="https://www.getrevue.co/profile/rwieruch/add_subscriber" method="post"
                                        id="revue-form" name="revue-form" target="_blank">
                                        <div id="mc_embed_signup_scroll">
                                            <input class="email" placeholder="email address" type="email"
                                                name="member[email]" id="member_email">
                                            <div>
                                                <button type="submit" value="Subscribe" name="member[subscribe]"
                                                    id="member_submit"
                                                    class="btn btn-template-transparent-black btn-lg">
                                                    Subscribe
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                </div>

                            </p>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <div id="content">
            <div class="container">

                <div class="row">

                    <article class="col-md-8 col-md-offset-2" id="blog-post" itemprop="blogPosts" itemscope
                        itemtype="http://schema.org/BlogPosting">

                        <div id="post-content" itemprop="articleBody">

                            <header>
                                <h1 itemprop="name headline">Prevent React setState on unmounted Component</h1>
                            </header>

                            <div class="text-center">

                                <a target="_blank" rel="noopener noreferrer" href="https://www.facebook.com/rwieruch"
                                    class="facebook-button-follow">
                                    <i class="fa fa-facebook"></i>Follow
                                </a>


                                &nbsp;


                                &nbsp;

                                <a target="_blank" rel="noopener noreferrer"
                                    href="https://twitter.com/intent/follow?screen_name=rwieruch"
                                    class="generic-button-follow">
                                    <img src="https://img.shields.io/twitter/follow/rwieruch.svg?style=social&amp;logo=twitter&amp;label=Follow"
                                        alt="Follow on Twitter">
                                </a>


                                &nbsp;

                            </div>

                            <p class="text-muted text-uppercase mb-small text-center">
                                <span itemprop="author publisher">

                                </span>


                                <time datetime="2018-10-21" itemprop="datePublished">
                                    October 21, 2018
                                </time>



                                <span class="hidden-xs hidden-sm"> - <a target="_blank" rel="noopener noreferrer"
                                        href="https://github.com/rwieruch/blog_chriswieruch_content/blob/master/react-warning-cant-call-setstate-on-an-unmounted-component.md">
                                        Edit this Post on GitHub
                                    </a>
                                </span>

                            </p>

                            <div>


                            </div>

                            <div class="post-image-primary">
                                <div class="pinterest-pinner-wrapper" itemscope
                                    itemtype="http://schema.org/ImageObject">
                                    <div class="pinterest-pinner">
                                        <a data-pin-do="buttonPin" data-pin-save="true" data-pin-tall="true"
                                            href="https://www.pinterest.com/pin/create/button/?url=https%3a%2f%2fchrispaul.dev%2freact-warning-cant-call-setstate-on-an-unmounted-component%2f&amp;media=https://chrispaul.dev/img%2fposts%2freact-warning-cant-call-setstate-on-an-unmounted-component%2fbanner.jpg&amp;description=">
                                        </a>
                                    </div>

                                    <img class="img-lazy img-responsive"
                                        data-lazy-src="/src="/img/posts/react-warning-cant-call-setstate-on-an-unmounted-component/banner.jpg"
                                        data-is-src-set="is-src-set"
                                        alt="can&#39;t call setstate on an unmounted component" itemprop="image" />
                                </div>
                            </div>


                            <p>There are too many people who encounter the following warnings. I have seen many GitHub
                                issues regarding it and many people are asking me about it as well. That&rsquo;s why I
                                wanted to have this article to address it and reference to it.</p>

                            <ul>
                                <li>
                                    <p><strong>Warning: Can only update a mounted or mounting component. This usually
                                            means you called setState, replaceState, or forceUpdate on an unmounted
                                            component. This is a no-op.</strong></p>
                                </li>

                                <li>
                                    <p><strong>Warning: Can&rsquo;t call setState (or forceUpdate) on an unmounted
                                            component. This is a no-op, but it indicates a memory leak in your
                                            application. To fix, cancel all subscriptions and asynchronous tasks in the
                                            componentWillUnmount method.</strong></p>
                                </li>
                            </ul>

                            <p>In general, warnings don&rsquo;t crash your application. But you should care about them.
                                For instance, the previous warning(s) can lead to performance issues when not properly
                                unmounting your stateful components. Let&rsquo;s discuss what these warnings are about.
                            </p>

                            <p>The shown warning(s) usually show up when <code>this.setState()</code> is called in a
                                component even though the component got already unmounted. The unmounting can happen for
                                different cases:</p>

                            <ul>
                                <li>
                                    <p>You don&rsquo;t render a component anymore due to <a
                                            href="../conditional-rendering-react/index.html">React&rsquo;s conditional
                                            rendering</a>.</p>
                                </li>

                                <li>
                                    <p>You navigate away from a component by using a library such as React Router.</p>
                                </li>
                            </ul>

                            <p>When not rendering the component anymore, it can still happen that
                                <code>this.setState()</code> is called if you have done asynchronous business logic in
                                your component and updated the local state of the component afterward. The following
                                cases are the most common causes:</p>

                            <ul>
                                <li>
                                    <p>You made an asynchronous request to an <a
                                            href="../what-is-an-api-javascript/index.html">API</a>, the request (e.g.
                                        Promise) isn&rsquo;t resolved yet, but you unmount the component. Then the
                                        request resolves, <code>this.setState()</code> is called to set the new state,
                                        but it hits an unmounted component.</p>
                                </li>

                                <li>
                                    <p>You have a <a target="_blank" rel="noopener noreferrer"
                                            href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener">listener</a>
                                        in your component, but didn&rsquo;t remove it on
                                        <code>componentWillUnmount()</code>. Then the listener may be triggered when the
                                        component unmounted.</p>
                                </li>

                                <li>
                                    <p>You have an interval (e.g. <a target="_blank" rel="noopener noreferrer"
                                            href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setInterval">setInterval</a>)
                                        set up in your component and within the interval <code>this.setState()</code> is
                                        called. If you forgot to remove the interval on
                                        <code>componentWillUnmount()</code>, you will update state on an unmounted
                                        component again.</p>
                                </li>
                            </ul>

                            <p><strong>What&rsquo;s the worst that can happen when seeing this warning?</strong> It can
                                have an performance impact on your React application, because it introduces memory leaks
                                over time for your application running in the browser. If you only missed once
                                preventing to set state after a component unmounted, it may doesn&rsquo;t have a huge
                                performance impact. However, if you have a list of these components with asynchronous
                                requests and you miss preventing to set state for all of them, it can start to slow down
                                your React application. Still, that&rsquo;s not the worst about it. The worst case would
                                be to miss removing event listeners and especially intervals. Imagine an interval every
                                second updating the local state of a component even though the component got unmounted.
                                If you miss to remove this interval, you may experience how it slows down your
                                application.</p>

                            <h2 class="chapter-header"
                                id="react-prevent-setstate-unmounted-component-interval-listener">How to prevent
                                setState for intervals/listeners on unmounted Components?</h2>

                            <p>As you have noticed, most often the warning can be prevented by providing a mechanism in
                                the unmounting lifecycle of a React component. For instance, listeners and intervals
                                should be removed. <a target="_blank" rel="noopener noreferrer"
                                    href="https://github.com/taming-the-state-in-react/react-snake/blob/master/src/App.js">Checkout
                                    this implementation of a game called Snake in React.</a>. There you will find both
                                cases, clearing an interval and removing a listener, in the
                                <code>componentWillUnmount()</code> lifecycle method of the App component.</p>

                            <p>I encourage you as well to try out <a target="_blank" rel="noopener noreferrer"
                                    href="https://github.com/the-road-to-learn-react/react-interval-setstate-unmounted-component-performance">this
                                    timer application</a>. You will see, when removing the
                                <code>componentWillUnmount</code> lifecycle method, that the console logs from the
                                interval should still show up in the browser&rsquo;s developer tools after toggling, in
                                this case hiding, the timer. If you toggle the timer various times, you should see more
                                and more console logs from orphan components which had this registered interval. The
                                React warning for not calling setState on unmounted components should show up too.</p>

                            <h2 class="chapter-header" id="react-prevent-setstate-unmounted-component-async-request">How
                                to prevent setState for asynchronous requests on unmounted Components?</h2>

                            <p>You have seen how straight forward it can be to avoid the warning for intervals and
                                listeners. It&rsquo;s just about preventing a callback function, the one in
                                <code>setInterval</code> or <code>addEventListener</code>, to be called when the
                                component is unmounted. Actually there is no excuse not doing it.</p>

                            <p>But what about asynchronous requests in React components? It can happen that you <a
                                    href="../react-fetching-data/index.html">trigger an asynchronous request in your
                                    React component</a>, which will call <code>this.setState()</code> eventually to set
                                the result in the local state of the component. But what if the component has unmounted
                                before. Then the warning will show up, because React cannot set the result in state when
                                the component isn&rsquo;t there anymore.</p>

                            <div class="highlight" style="background: #2f1e2e">
                                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">class</span> <span style="color: #06b6ef">News</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">constructor</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">super</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">);</span>

    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">news</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">[],</span>
    <span style="color: #e7e9db">};</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">componentDidMount</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">axios</span>
      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">get</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;https://hn.algolia.com/api/v1/search?query=react&#39;</span><span style="color: #e7e9db">)</span>
      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">result</span> <span style="color: #5bc4bf">=&gt;</span>
        <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span>
          <span style="color: #06b6ef">news</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">result</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">data</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">hits</span><span style="color: #e7e9db">,</span>
        <span style="color: #e7e9db">}),</span>
      <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ul</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">news</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">topic</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">li</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">topic</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">objectID</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">topic</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">title</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/li&gt;</span>
        <span style="color: #e7e9db">))}</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ul&gt;</span>
    <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>
</code></pre>
                            </div>


                            <p>You can handle this issue either by aborting the request when your component unmounts or
                                preventing <code>this.setState()</code> on an unmounted component. However, most
                                promise-based libraries/API don&rsquo;t implement aborting a request, so we add a
                                workaround, introducing a class field that holds the lifecycle state of your component,
                                to prevent <code>this.setState()</code> being called. It can be initialized as false
                                when the component initializes, changed to true when the component mounted, and then
                                reset to false when the component unmounted. This way, you can keep track of your
                                component&rsquo;s lifecycle state. It doesn&rsquo;t affect the local state stored and
                                modified with <code>this.state</code> and <code>this.setState()</code>, because you can
                                access it directly on the component instance without relying on React&rsquo;s local
                                state management. Moreover, it doesn&rsquo;t lead to any re-rendering of the component
                                when the class field is changed.</p>

                            <div class="highlight" style="background: #2f1e2e">
                                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">class</span> <span style="color: #06b6ef">News</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">  <span style="color: #06b6ef">_isMounted</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">false</span><span style="color: #e7e9db">;</span>
</span>
  <span style="color: #06b6ef">constructor</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">super</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">);</span>

    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">news</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">[],</span>
    <span style="color: #e7e9db">};</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">componentDidMount</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">_isMounted</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">true</span><span style="color: #e7e9db">;</span>
</span>
    <span style="color: #06b6ef">axios</span>
      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">get</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;https://hn.algolia.com/api/v1/search?query=react&#39;</span><span style="color: #e7e9db">)</span>
      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">result</span> <span style="color: #5bc4bf">=&gt;</span>
        <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span>
          <span style="color: #06b6ef">news</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">result</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">data</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">hits</span><span style="color: #e7e9db">,</span>
        <span style="color: #e7e9db">}),</span>
      <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>

<span style="background-color: #4f424c">  <span style="color: #06b6ef">componentWillUnmount</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">_isMounted</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">false</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">}</span>
</span>
  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">...</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>
</code></pre>
                            </div>


                            <p>Finally, you can use this knowledge not to abort the request itself, but avoid calling
                                <code>this.setState()</code> on your component instance, even though the component
                                already unmounted. It will prevent the warning.</p>

                            <div class="highlight" style="background: #2f1e2e">
                                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">class</span> <span style="color: #06b6ef">News</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">_isMounted</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">false</span><span style="color: #e7e9db">;</span>

  <span style="color: #06b6ef">constructor</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">super</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">);</span>

    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">news</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">[],</span>
    <span style="color: #e7e9db">};</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">componentDidMount</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">_isMounted</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">true</span><span style="color: #e7e9db">;</span>

    <span style="color: #06b6ef">axios</span>
      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">get</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;https://hn.algolia.com/api/v1/search?query=react&#39;</span><span style="color: #e7e9db">)</span>
      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">result</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">        <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">_isMounted</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span>          <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span>
            <span style="color: #06b6ef">news</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">result</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">data</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">hits</span><span style="color: #e7e9db">,</span>
          <span style="color: #e7e9db">});</span>
<span style="background-color: #4f424c">        <span style="color: #e7e9db">}</span>
</span>      <span style="color: #e7e9db">});</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">componentWillUnmount</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">_isMounted</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">false</span><span style="color: #e7e9db">;</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">...</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>
</code></pre>
                            </div>


                            <p>Now, even though the component got unmounted and the request resolves eventually, the
                                flag in your component will prevent to set the state of the React component after it got
                                unmounted. You can checkout <a target="_blank" rel="noopener noreferrer"
                                    href="https://github.com/the-road-to-learn-react/react-asynchronous-request-setstate-unmounted-component">this
                                    project on GitHub</a> that implements the shown example. In addition, the example
                                comes with a toggle to trigger the warning (identical to the previous timer example)
                                too. In order to see the warning happening, you have to remove the previous shown
                                solution, throttle your network connection in your browser&rsquo;s developer tools, and
                                click the toggle button once you see it. When you see the toggle button, the other
                                component for fetching the data should have been rendered too. But the data fetching is
                                still pending. Once you toggle the component with the data fetching with the conditional
                                rendering to not render it anymore, you should see the warning once the response of the
                                asynchronous request resolves. Now, if you add the solution for the problem again and
                                repeat everything, you shouldn&rsquo;t see the warning anymore.</p>

                            <p>The solution with <code>this._isMounted</code> is agnostic to your library or third-party
                                API that you are using to fetch data in React. It works with the native fetch API of the
                                browser but also with the powerful axios library. Not every of these data fetching
                                solutions comes with a feature to cancel requests, so it&rsquo;s good to know about this
                                general solution to prevent setting the state in unmounted React components. However, if
                                you are using axios, you can checkout its <a target="_blank" rel="noopener noreferrer"
                                    href="https://github.com/axios/axios#cancellation">cancellation mechanism</a>. I
                                find it way more verbose than the more general solution with
                                <code>this._isMounted</code>, but it&rsquo;s worth checking it out.</p>

                            <hr class="section-divider">

                            <p>Hopefully you got all the tools to prevent the warnings now, but more importantly to make
                                your application more robust for memory leaks and performance issues. If you have any
                                other suggestions on how to deal with the warning, leave a comment below.</p>



                            



                            <div class="box-inline col-md-12">
                                <div class="col-md-12 text-center">
                                    <h2 class="newsletter">The Road to learn React</h2>

                                    <div class="col-md-4">
                                        <img class="img-lazy img-responsive" data-lazy-src="//img/page/cover.png">
                                    </div>

                                    <p class="lead">
                                        Build a Hacker News App along the way. No setup configuration. No tooling. No
                                        Redux. Plain React in 200+ pages of learning material. Learn React like
                                        <strong>50.000+ readers</strong>.
                                    </p>
                                    <a class="btn btn-template-main" href="https://roadtoreact.com" target="_blank"
                                        rel="noopener noreferrer">
                                        Get the Book for free <i class="fa fa-chevron-right"></i>
                                    </a>

                                    <div>
                                        <a href="https://amzn.to/2QY2ONp" target="_blank" rel="noopener noreferrer">
                                            Get it from Amazon
                                        </a>
                                    </div>

                                </div>
                            </div>

                        </div>



                        <div id="comments">
                            <div id="disqus_thread"></div>
                            <script type="text/javascript">

                                (function () {


                                    if (window.location.hostname == "localhost")
                                        return;

                                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                                    var disqus_shortname = 'rwieruch';
                                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                                })();
                            </script>
                            <noscript>Please enable JavaScript to view the <a
                                    href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                            <a href="http://disqus.com/" class="dsq-brlink">comments powered by <span
                                    class="logo-disqus">Disqus</span></a>
                        </div>


                    </article>


                </div>


            </div>

        </div>




        <section class="bar background-image-fixed-2 no-mb color-white text-center">
            <div class="dark-mask"></div>
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <h3 class="lead">Never miss an article about web development, JavaScript and self-growth.</h3>
                        <h2 class="text-uppercase">Take Part</h2>
                    </div>

                    <div class="col-md-12 text-center">

                        <h3 class="lead"><i class="fa fa-check"></i> Join 30.000&#43; Developers</h3>

                        <h3 class="lead"><i class="fa fa-check"></i> Learn Web Development with JavaScript</h3>

                        <h3 class="lead"><i class="fa fa-check"></i> Tips and Tricks</h3>

                        <h3 class="lead"><i class="fa fa-check"></i> Access Tutorials, eBooks and Courses</h3>

                        <h3 class="lead"><i class="fa fa-check"></i> Personal Development as a Software Engineer</h3>

                    </div>
                    <div class="col-md-12">
                        <p class="text-center">
                            <div id="mc_embed_signup">
                                <form action="https://www.getrevue.co/profile/rwieruch/add_subscriber" method="post"
                                    id="revue-form" name="revue-form" target="_blank">
                                    <div id="mc_embed_signup_scroll">
                                        <input class="email" placeholder="email address" type="email"
                                            name="member[email]" id="member_email">
                                        <div>
                                            <button type="submit" value="Subscribe" name="member[subscribe]"
                                                id="member_submit" class="btn btn-template-transparent-black btn-lg">
                                                Subscribe
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>

                        </p>
                    </div>
                </div>
            </div>
        </section>
        <footer id="subfooter">
            <div class="container">

                <div class="col-md-5 col-sm-6">

                    <h4>Recent posts</h4>

                    <div class="blog-entries">

                        <div class="item same-height-row clearfix">
                            <div class="article same-height-always">
                                <a href="../redux-vs-usereducer/index.html">

                                    <img data-lazy-src="//img/posts/redux-vs-usereducer/banner.jpg"
                                        data-is-thumb="is-thumb" class="img-lazy img-responsive"
                                        alt="React&#39;s useReducer vs Redux">

                                </a>
                            </div>
                            <div class="name same-height-always">
                                <h5><a href="../redux-vs-usereducer/index.html">React&#39;s useReducer vs Redux</a></h5>
                            </div>
                        </div>

                        <div class="item same-height-row clearfix">
                            <div class="article same-height-always">
                                <a href="../publish-npm-package-node/index.html">

                                    <img data-lazy-src="//img/posts/publish-npm-package-node/banner.jpg"
                                        data-is-thumb="is-thumb" class="img-lazy img-responsive"
                                        alt="How to publish a npm package?">

                                </a>
                            </div>
                            <div class="name same-height-always">
                                <h5><a href="../publish-npm-package-node/index.html">How to publish a npm package?</a>
                                </h5>
                            </div>
                        </div>

                        <div class="item same-height-row clearfix">
                            <div class="article same-height-always">
                                <a href="../react-scroll-to-item/index.html">

                                    <img data-lazy-src="//img/posts/react-scroll-to-item/banner.jpg"
                                        data-is-thumb="is-thumb" class="img-lazy img-responsive"
                                        alt="How to Scroll to Item in React?">

                                </a>
                            </div>
                            <div class="name same-height-always">
                                <h5><a href="../react-scroll-to-item/index.html">How to Scroll to Item in React?</a>
                                </h5>
                            </div>
                        </div>

                    </div>

                    <hr class="hidden-md hidden-lg hidden-sm">

                </div>



                <div class="col-md-5 col-md-offset-2 col-sm-6">

                    <h4>About Me</h4>

                    <div class="blog-entries">
                        <div class="item same-height-row clearfix">
                            <div class="profile same-height-always">
                                <img class="img-lazy img-responsive" data-lazy-src="//img/page/profile.jpg"
                                    alt="profile">
                            </div>
                            <div class="name same-height-always">
                                <p>
                                    Hi, I'm Chris - a Midvale, Utah-based consulting software developer. Find out more
                                    <a href="../about/index.html">about me</a>, <a
                                        href="../work-with-me/index.html">work with me</a>, or have a look at my social
                                    media profiles below.
                                </p>
                            </div>
                        </div>
                    </div>

                </div>



            </div>

        </footer>


        <footer id="copyright">
            <div class="container">
                <div class="row">
                    <div class="col-md-4">
                        <ul class="info list-inline quicklinks pull-left">

                            <li>© Chris Paul</li>

                        </ul>
                    </div>
                    <div class="col-md-4">
                        <ul class="list-inline footer-social-buttons text-center">

                            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media"
                                    href="https://www.twitter.com/rwieruch"><i class="fa fa-twitter"></i></a></li>

                            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media"
                                    href="https://www.github.com/rwieruch"><i class="fa fa-github"></i></a></li>

                            

                            

                            

                            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media"
                                    href="https://www.paypal.me/rwieruch"><i class="fa fa-paypal"></i></a></li>

                            

                            

                        </ul>
                    </div>
                    <div class="col-md-4">
                        <ul class="info list-inline quicklinks pull-right">

                            <li><a aria-label="quicklinks" href="../legal/index.html">Legal Notice</a></li>

                        </ul>
                    </div>
                </div>
            </div>
        </footer>


    </div>



    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>

    <script src="../js/script.js"></script>
</body>

</html>