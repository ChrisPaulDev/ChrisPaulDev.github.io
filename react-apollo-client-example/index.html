<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta name="viewport" content="width=device-width, initial-scale=1">



  <title>
    A minimal Apollo Client in React Example - CPaul
  </title>

  <meta name="author" content="" />
  <meta name="description"
    content="The tutorial guides you through building a minimal Apollo Client in React example application where Apollo Client is used for remote data and React&#39;s local state for local data. After all, it&#39;s a minimal boilerplate project to get you started with GraphQL in React ...">


  <meta name="theme-color" content="#38bb6c" />

  <meta name="generator" content="Hugo 0.41" />
  <link href="https://cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
  <link href="../css/bootstrap.default.css" rel="stylesheet" id="theme-stylesheet">
  <link href="../css/customizations.css" rel="stylesheet">

  <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

  <link rel="shortcut icon" href="../img/favicon/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="../img/favicon/apple-touch-icon.png" />
  <link rel="manifest" href="../img/favicon/manifest.json">
  <link rel="mask-icon" href="../img/favicon/safari-pinned-tab.svg" color="#5bbad5">

  <link rel="alternate" href="../index.xml" type="application/rss+xml" title="CPaul">

  <meta itemprop="name" content="A minimal Apollo Client in React Example">
  <meta itemprop="description"
    content="The tutorial guides you through building a minimal Apollo Client in React example application where Apollo Client is used for remote data and React&#39;s local state for local data. After all, it&#39;s a minimal boilerplate project to get you started with GraphQL in React ...">
  <meta itemprop="image" content="https://chrispaul.dev/img/posts/react-apollo-client-example/banner_640.jpg">
  <meta itemprop="keywords"
    content="angular,apollo,d3,graphql,growth,javascript,machine-learning,mobx,node,react,reason,redux,tooling,vue,web-development,angular,apollo,d3,graphql,growth,javascript,machine-learning,mobx,node,react,reason,redux,tooling,web-development," />


  <meta itemprop="wordCount" content="1670">

  <meta name="keywords"
    content="react apollo client example, react apollo example, react graphql boilerplate, react graphql example, react apollo demo, react apollo tutorial">

  <meta property="og:title" content="A minimal Apollo Client in React Example - CPaul">


  <meta property="og:description"
    content="The tutorial guides you through building a minimal Apollo Client in React example application where Apollo Client is used for remote data and React&#39;s local state for local data. After all, it&#39;s a minimal boilerplate project to get you started with GraphQL in React ..." />


  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://chrispaul.dev/react-apollo-client-example/" />
  <meta property="og:image" content="https://chrispaul.dev/img/posts/react-apollo-client-example/banner_640.jpg" />



  <meta name="news_keywords"
    content="react apollo client example,react apollo example,react graphql boilerplate,react graphql example,react apollo demo,react apollo tutorial" />



  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:image:src" content="https://chrispaul.dev/img/posts/react-apollo-client-example/banner_640.jpg" />
  <meta name="twitter:title" content="A minimal Apollo Client in React Example" />
  <meta name="twitter:description"
    content="The tutorial guides you through building a minimal Apollo Client in React example application where Apollo Client is used for remote data and React&#39;s local state for local data. After all, it&#39;s a minimal boilerplate project to get you started with GraphQL in React ..." />
  <meta name="twitter:site" content="@ChrisPaulDev" />
  



</head>


<body>

  <div id="all">

    <header>

      <div class="navbar-affixed-top" data-spy="affix" data-offset-top="200">

        <div class="navbar navbar-default yamm" role="navigation" id="navbar">

          <div class="container">
            <div class="navbar-header">
              

              <div class="navbar-buttons">
                <button type="button" class="navbar-toggle btn-template-main" data-toggle="collapse"
                  data-target="#navigation">
                  <span class="sr-only">Toggle navigation</span>
                  <i class="fa fa-align-justify"></i>
                </button>
              </div>
            </div>


            <div class="navbar-collapse collapse" id="navigation">
              <ul class="nav navbar-nav navbar-right">

                <li class="dropdown">

                  <a href="../index.html">Blog</a>

                </li>

                <li class="dropdown">

                  <a href="../work-with-me/index.html">Work with me</a>

                </li>

                <li class="dropdown">

                  <a href="../about/index.html">About</a>

                </li>

                <li class="dropdown">

                  <a style="color: #38bb6c" href="https://roadtoreact.com/">Books &amp; Courses</a>

                </li>

              </ul>
            </div>


            <div class="collapse clearfix" id="search">

              <form class="navbar-form" role="search">
                <div class="input-group">
                  <input type="text" class="form-control" placeholder="Search">
                  <span class="input-group-btn">

                    <button type="submit" class="btn btn-template-main"><i class="fa fa-search"></i></button>

                  </span>
                </div>
              </form>

            </div>


          </div>
        </div>


      </div>
    </header>

    

    



    <div class="hidden-xs">


      
    </div>

    <div id="content">
      <div class="container">

        <div class="row">

          <article class="col-md-8 col-md-offset-2" id="blog-post" itemprop="blogPosts" itemscope
            itemtype="http://schema.org/BlogPosting">

            <div id="post-content" itemprop="articleBody">

              <header>
                <h1 itemprop="name headline">A minimal Apollo Client in React Example</h1>
              </header>

              

              <p class="text-muted text-uppercase mb-small text-center">
                <span itemprop="author publisher">

                </span>


                <time datetime="2018-06-05" itemprop="datePublished">
                  June 5, 2018
                </time>



              </p>



              <div>


              </div>

              <div class="post-image-primary">
                <div class="pinterest-pinner-wrapper" itemscope itemtype="http://schema.org/ImageObject">
                  <div class="pinterest-pinner">
                    <a data-pin-do="buttonPin" data-pin-save="true" data-pin-tall="true"
                      href="https://www.pinterest.com/pin/create/button/?url=https%3a%2f%2fchrispaul.dev%2freact-apollo-client-example%2f&amp;media=https://chrispaul.dev/img%2fposts%2freact-apollo-client-example%2fbanner.jpg&amp;description=">
                    </a>
                  </div>

                  <img class="img-lazy img-responsive"
                    data-lazy-src="/src="/img/posts/react-apollo-client-example/banner.jpg" data-is-src-set="is-src-set"
                    alt="react apollo client example" itemprop="image" />
                </div>
              </div>


              <p>
                <em>
                  Interested in reading this tutorial as one of many chapters in my GraphQL book? Checkout the entire <a
                    href="https://roadtoreact.com">The Road to GraphQL</a> book that teaches you to become a fullstack
                  developer with JavaScript.
                </em>
              </p>

              <div class="read-before">
                <p>This tutorial is part 3 of 3 in this series.</p>
                <div>Part 1: <a href="../react-with-graphql-tutorial/index.html" itemprop="url">A complete React with
                    GraphQL Tutorial</a></div>
                <div>Part 2: <a href="../react-graphql-apollo-tutorial/index.html" itemprop="url">A complete React with
                    Apollo and GraphQL Tutorial</a></div>
              </div>

              <p>It&rsquo;s time to get you started with a minimal Apollo Client in React application that can be used
                as boilerplate project. There will be sections later on where you can use this application as starter
                project, but also you may want to experiment with it on your own. After all, it gives you all the
                necessary parts to consume GitHub&rsquo;s GraphQL API in your React application by using Apollo Client
                in a minimal starter project. In addition though, there will be some local state management with React
                only to show you that local state management for local data is still used when having Apollo Client for
                your remote data.</p>

              <h2 class="chapter-header" id="apollo-client-react-starter-project">Apollo Client in React Starter Project
              </h2>

              <p>In the following case study application, you will consume GitHub&rsquo;s GraphQL API to query a bunch
                of repositories from an organization. You have learned those steps before. Basically it is how your
                remote data is managed in Apollo Client&rsquo;s Cache. However, this time you will introduce local data
                along the way. Imagine a use case where you would have to select the queried repositories in a list to
                make a batch operation (e.g. mutation) on them. For instance, you maybe want to star 3 of the 10
                repositories. Therefore, you would have to introduce local data to track the selected repositories which
                are managed in a local state. In the following you will implement this use case, first by using
                React&rsquo;s local state but then transition to Apollo Link State as alternative.</p>

              <p>It is up to you to create a React application with <a target="_blank" rel="noopener noreferrer"
                  href="https://github.com/facebook/create-react-app">create-react-app</a>. Afterward, you will have to
                setup Apollo Client in your React application as you have done in previous applications in the
                <em>src/index.js</em> file.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">ReactDOM</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-dom&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">ApolloProvider</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-apollo&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">ApolloClient</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;apollo-client&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">HttpLink</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;apollo-link-http&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">InMemoryCache</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;apollo-cache-inmemory&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">import</span> <span style="color: #06b6ef">App</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./App&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">import</span> <span style="color: #06b6ef">registerServiceWorker</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./registerServiceWorker&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">cache</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">new</span> <span style="color: #06b6ef">InMemoryCache</span><span style="color: #e7e9db">();</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">GITHUB_BASE_URL</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">&#39;https://api.github.com/graphql&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">httpLink</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">new</span> <span style="color: #06b6ef">HttpLink</span><span style="color: #e7e9db">({</span>
  <span style="color: #06b6ef">uri</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">GITHUB_BASE_URL</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">headers</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">authorization</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">`Bearer </span><span style="color: #f99b15">${</span>
      <span style="color: #06b6ef">process</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">env</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">REACT_APP_GITHUB_PERSONAL_ACCESS_TOKEN</span>
    <span style="color: #f99b15">}</span><span style="color: #48b685">`</span><span style="color: #e7e9db">,</span>
  <span style="color: #e7e9db">},</span>
<span style="color: #e7e9db">});</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">client</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">new</span> <span style="color: #06b6ef">ApolloClient</span><span style="color: #e7e9db">({</span>
  <span style="color: #06b6ef">link</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">httpLink</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">cache</span><span style="color: #e7e9db">,</span>
<span style="color: #e7e9db">});</span>

<span style="color: #06b6ef">ReactDOM</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">render</span><span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ApolloProvider</span> <span style="color: #06b6ef">client</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">client</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">App</span> <span style="color: #5bc4bf">/&gt;</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ApolloProvider&gt;,</span>
  <span style="color: #e7e9db">document.</span><span style="color: #06b6ef">getElementById</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;root&#39;</span><span style="color: #e7e9db">),</span>
<span style="color: #e7e9db">);</span>

<span style="color: #06b6ef">registerServiceWorker</span><span style="color: #e7e9db">();</span>
</code></pre>
              </div>


              <p>Don&rsquo;t forget to install the necessary packages for GraphQL, Apollo Client and React Apollo on the
                command line:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span> <span style="color: #06b6ef">apollo</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">client</span> <span style="color: #06b6ef">apollo</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">cache</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">inmemory</span> <span style="color: #06b6ef">apollo</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">link</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">http</span> <span style="color: #06b6ef">graphql</span> <span style="color: #06b6ef">graphql</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">tag</span> <span style="color: #06b6ef">react</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">apollo</span>
</code></pre>
              </div>


              <p>And furthermore, don&rsquo;t forget to add your <a target="_blank" rel="noopener noreferrer"
                  href="https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/">personal
                  access token</a> from GitHub as value to the key in the <em>.env</em> file which you have to create in
                your project folder.</p>

              <p>In the next step, implement the components to display the remote data which gets queried with React
                Apollo&rsquo;s Query component eventually.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">gql</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;graphql-tag&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Query</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-apollo&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">import</span> <span style="color: #48b685">&#39;./App.css&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">GET_REPOSITORIES_OF_ORGANIZATION</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">gql</span><span style="color: #48b685">`</span>
<span style="color: #48b685">  {</span>
<span style="color: #48b685">    organization(login: &quot;the-road-to-learn-react&quot;) {</span>
<span style="color: #48b685">      repositories(first: 20) {</span>
<span style="color: #48b685">        edges {</span>
<span style="color: #48b685">          node {</span>
<span style="color: #48b685">            id</span>
<span style="color: #48b685">            name</span>
<span style="color: #48b685">            url</span>
<span style="color: #48b685">            viewerHasStarred</span>
<span style="color: #48b685">          }</span>
<span style="color: #48b685">        }</span>
<span style="color: #48b685">      }</span>
<span style="color: #48b685">    }</span>
<span style="color: #48b685">  }</span>
<span style="color: #48b685">`</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">App</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Query</span> <span style="color: #06b6ef">query</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">GET_REPOSITORIES_OF_ORGANIZATION</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">{({</span> <span style="color: #06b6ef">data</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">organization</span> <span style="color: #e7e9db">},</span> <span style="color: #06b6ef">loading</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
      <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">loading</span> <span style="color: #5bc4bf">||</span> <span style="color: #5bc4bf">!</span><span style="color: #06b6ef">organization</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
        <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Loading</span> <span style="color: #e7e9db">...</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;;</span>
      <span style="color: #e7e9db">}</span>

      <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">RepositoryList</span> <span style="color: #06b6ef">repositories</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">organization</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span>
      <span style="color: #e7e9db">);</span>
    <span style="color: #e7e9db">}}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Query&gt;</span>
<span style="color: #e7e9db">);</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">RepositoryList</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">repositories</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ul</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">edges</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(({</span> <span style="color: #06b6ef">node</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
      <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">li</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">node</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">a</span> <span style="color: #06b6ef">href</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">node</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">url</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">node</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">name</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/a&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/li&gt;</span>
      <span style="color: #e7e9db">);</span>
    <span style="color: #e7e9db">})}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ul&gt;</span>
<span style="color: #e7e9db">);</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Once you run this application, you should see initially a loading indicator and afterward the list of
                repositories fetched from the defined GitHub organization in your GraphQL query. In addition, it could
                be possible to star a repository by executing a GraphQL mutation with the Mutation component.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">gql</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;graphql-tag&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Query</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">Mutation</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-apollo&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #e7e9db">...</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">STAR_REPOSITORY</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">gql</span><span style="color: #48b685">`</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">  mutation($id: ID!) {</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">    addStar(input: { starrableId: $id }) {</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">      starrable {</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">        id</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">        viewerHasStarred</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">      }</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">    }</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">  }</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">`</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #e7e9db">...</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">RepositoryList</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">repositories</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ul</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">edges</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(({</span> <span style="color: #06b6ef">node</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
      <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">li</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">node</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
<span style="background-color: #4f424c">          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">a</span> <span style="color: #06b6ef">href</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">node</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">url</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">node</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">name</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/a&gt;{&#39; &#39;}</span>
</span><span style="background-color: #4f424c">          <span style="color: #e7e9db">{</span><span style="color: #5bc4bf">!</span><span style="color: #06b6ef">node</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">viewerHasStarred</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Star</span> <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">node</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">}</span>
</span>        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/li&gt;</span>
      <span style="color: #e7e9db">);</span>
    <span style="color: #e7e9db">})}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ul&gt;</span>
<span style="color: #e7e9db">);</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">Star</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">id</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Mutation</span> <span style="color: #06b6ef">mutation</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">STAR_REPOSITORY</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">variables</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{{</span> <span style="color: #06b6ef">id</span> <span style="color: #e7e9db">}}</span><span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">starRepository</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span> <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span> <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">starRepository</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">        <span style="color: #06b6ef">Star</span>
</span><span style="background-color: #4f424c">      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">)}</span>
</span><span style="background-color: #4f424c">  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Mutation&gt;</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">);</span>
</span>
<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Nevertheless, there are a couple of potential improvements that you can do as exercise already before
                continuing with the tutorial. For instance, there is only a star mutation but not a unstar mutation when
                the repository is already starred. Another thing could be a search field to pass in a dynamic login of
                an organization to be flexible in querying repositories from different organizations. All of these
                improvements are up to your implementation to internalize the learnings from previous applications which
                you have built while learning about GraphQL in React.</p>

              <h3 id="exercises">Exercises:</h3>

              <ul>
                <li>Implement the unstar mutation</li>
                <li>Implement a flexible way to query repositories from different organizations

                  <ul>
                    <li>Implement a search field that is managed with React&rsquo;s local state</li>
                    <li>When submitting the value from the search field, pass this value as variable to the Query
                      component to use it as dynamic value for the <code>login</code> argument</li>
                  </ul>
                </li>
              </ul>

              <p>
                <h2 class="chapter-header" id="react-local-data">Starting with React&#39;s Local State Management for
                  Local Data</h2>
              </p>

              <p>Another requirement for this application was it to be able to select (and unselect) repositories in the
                list of repositories for performing batch operations. Such a batch operation could be to star (and
                unstar) selected repositories. Before being able to execute such an operation, it must be possible to
                select the repositories from the list in the first place. Therefore, React&rsquo;s local state
                management is the most straight forward choice for this problem to keep track of selected repositories.
                Each rendered repository row will have a button next to it. When clicking the button, the
                repository&rsquo;s identifier will be stored in React&rsquo;s local state. When clicking it again, the
                identifier will be removed again.</p>

              <p>In order to keep the components lightweight and suited to their responsibilities (e.g. fetching data,
                rendering data), you can introduce a Repositories component which is used as container component in
                between of the App component and the RepositoryList component to manage local state.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">App</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Query</span> <span style="color: #06b6ef">query</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">GET_REPOSITORIES_OF_ORGANIZATION</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">{({</span> <span style="color: #06b6ef">data</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">organization</span> <span style="color: #e7e9db">},</span> <span style="color: #06b6ef">loading</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
      <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">loading</span> <span style="color: #5bc4bf">||</span> <span style="color: #5bc4bf">!</span><span style="color: #06b6ef">organization</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
        <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Loading</span> <span style="color: #e7e9db">...</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;;</span>
      <span style="color: #e7e9db">}</span>

      <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
<span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Repositories</span> <span style="color: #06b6ef">repositories</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">organization</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span>
</span>      <span style="color: #e7e9db">);</span>
    <span style="color: #e7e9db">}}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Query&gt;</span>
<span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>The Repositories component in between manages the state of selected repositories by storing their
                identifiers in React&rsquo;s local state. in the end, it renders the RepositoryList component which was
                rendered previously in the App component. After all, you only introduced a component in between which
                has the responsibility to manage local state (container component) while the RepositoryList component
                only needs to render data (presentational component).</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">class</span> <span style="color: #06b6ef">Repositories</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">selectedRepositoryIds</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">[],</span>
  <span style="color: #e7e9db">};</span>

  <span style="color: #06b6ef">toggleSelectRepository</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">isSelected</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">...</span>
  <span style="color: #e7e9db">};</span>

  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">RepositoryList</span>
        <span style="color: #06b6ef">repositories</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">}</span>
        <span style="color: #06b6ef">selectedRepositoryIds</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">selectedRepositoryIds</span><span style="color: #e7e9db">}</span>
        <span style="color: #06b6ef">toggleSelectRepository</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">toggleSelectRepository</span><span style="color: #e7e9db">}</span>
      <span style="color: #5bc4bf">/&gt;</span>
    <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>
</code></pre>
              </div>


              <p>Now implement the business logic of the class method in Repositories component which adds and removes
                (toggles) the identifier of a repository depending on its incoming selection state.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">class</span> <span style="color: #06b6ef">Repositories</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">selectedRepositoryIds</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">[],</span>
  <span style="color: #e7e9db">};</span>

  <span style="color: #06b6ef">toggleSelectRepository</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">isSelected</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">    <span style="color: #815ba4">let</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">selectedRepositoryIds</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">selectedRepositoryIds</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">isSelected</span>
</span><span style="background-color: #4f424c">      <span style="color: #5bc4bf">?</span> <span style="color: #06b6ef">selectedRepositoryIds</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">filter</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">itemId</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">itemId</span> <span style="color: #5bc4bf">!==</span> <span style="color: #06b6ef">id</span><span style="color: #e7e9db">)</span>
</span><span style="background-color: #4f424c">      <span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">selectedRepositoryIds</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">concat</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">selectedRepositoryIds</span> <span style="color: #e7e9db">});</span>
</span>  <span style="color: #e7e9db">};</span>

  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">...</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>
</code></pre>
              </div>


              <p>Since the list of selected repository identifiers and the class method to actually toggle a repository
                are passed to the RepositoryList component, you can implement a new Select component there to make use
                of those props.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">RepositoryList</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span>
  <span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">,</span>
<span style="background-color: #4f424c">  <span style="color: #06b6ef">selectedRepositoryIds</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">toggleSelectRepository</span><span style="color: #e7e9db">,</span>
</span><span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ul</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">edges</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(({</span> <span style="color: #06b6ef">node</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">      <span style="color: #815ba4">const</span> <span style="color: #06b6ef">isSelected</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">selectedRepositoryIds</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">includes</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">node</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">);</span>
</span>
      <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">li</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">node</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
<span style="background-color: #4f424c">          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Select</span>
</span><span style="background-color: #4f424c">            <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">node</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">            <span style="color: #06b6ef">isSelected</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">isSelected</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">            <span style="color: #06b6ef">toggleSelectRepository</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">toggleSelectRepository</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">          <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">{</span><span style="color: #48b685">&#39; &#39;</span><span style="color: #e7e9db">}</span>
</span>          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">a</span> <span style="color: #06b6ef">href</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">node</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">url</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">node</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">name</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/a&gt;{&#39; &#39;}</span>
          <span style="color: #e7e9db">{</span><span style="color: #5bc4bf">!</span><span style="color: #06b6ef">node</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">viewerHasStarred</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Star</span> <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">node</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">}</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/li&gt;</span>
      <span style="color: #e7e9db">);</span>
    <span style="color: #e7e9db">})}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ul&gt;</span>
<span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>The Select component is only a button which acts as toggle to select and unselect a repository.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">Select</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">id</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">isSelected</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">toggleSelectRepository</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span>
    <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span>
    <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">toggleSelectRepository</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">isSelected</span><span style="color: #e7e9db">)}</span>
  <span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">isSelected</span> <span style="color: #5bc4bf">?</span> <span style="color: #48b685">&#39;Unselect&#39;</span> <span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;Select&#39;</span><span style="color: #e7e9db">}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
<span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>The select interaction should work after starting your application. It is indicated by a toggling
                &ldquo;Select&rdquo; and &ldquo;Unselect&rdquo; label after clicking the new button multiple times. But
                you can do better by adding some conditional styling to each row in the RepositoryList component.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">RepositoryList</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #e7e9db">...</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ul</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">edges</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(({</span> <span style="color: #06b6ef">node</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
      <span style="color: #815ba4">const</span> <span style="color: #06b6ef">isSelected</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">selectedRepositoryIds</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">includes</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">node</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">);</span>

<span style="background-color: #4f424c">      <span style="color: #815ba4">const</span> <span style="color: #06b6ef">rowClassName</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">[</span><span style="color: #48b685">&#39;row&#39;</span><span style="color: #e7e9db">];</span>
</span>
<span style="background-color: #4f424c">      <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">isSelected</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">        <span style="color: #06b6ef">rowClassName</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">push</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;row_selected&#39;</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">}</span>
</span>
      <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
<span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">li</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">rowClassName</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">join</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39; &#39;</span><span style="color: #e7e9db">)}</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">node</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
</span>          <span style="color: #e7e9db">...</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/li&gt;</span>
      <span style="color: #e7e9db">);</span>
    <span style="color: #e7e9db">})}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ul&gt;</span>
<span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>Last but not least, you have to define the CSS classed which were used for the repository row in the
                <em>src/App.css</em> file:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">row</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">padding</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">5</span><span style="color: #06b6ef">px</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #e7e9db">.</span><span style="color: #06b6ef">row</span><span style="color: #5bc4bf">:</span><span style="color: #06b6ef">hover</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">background</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">color</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">lightblue</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #e7e9db">.</span><span style="color: #06b6ef">row_selected</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">background</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">color</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">orange</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #e7e9db">.</span><span style="color: #06b6ef">row_selected</span><span style="color: #5bc4bf">:</span><span style="color: #06b6ef">hover</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">background</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">color</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">orange</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>
</code></pre>
              </div>


              <p>That&rsquo;s it for the selection feature implementation. You should be able to select and unselect
                repositories in your list when starting your application now.</p>

              <hr class="section-divider">

              <p>Remember that this solution with React&rsquo;s local state would already be sufficient to deal with
                this problem. No one else than the one component is interested in the selected repositories. So the
                state is co-located to the component. But following applications will show you how to replace
                React&rsquo;s local state management with Apollo Link State or Redux which is used side by side with
                Apollo Client. The minimal boilerplate application can be found in this <a target="_blank"
                  rel="noopener noreferrer" href="https://github.com/ChrisPaulDev/react-apollo-client-example">GitHub
                  repository as boilerplate project</a>.</p>

              <div class="read-before">
                <p>This tutorial is part 1 of 3 in this series.</p>
                <div>Part 2: <a href="../graphql-server-mock-apollo-client/index.html" itemprop="url">Mocking a GraphQL
                    Server for Apollo Client</a></div>
                <div>Part 3: <a href="../react-apollo-client-testing/index.html" itemprop="url">Writing Tests for Apollo
                    Client in React</a></div>
              </div>

              <div class="read-before">
                <p>This tutorial is part 1 of 3 in this series.</p>
                <div>Part 2: <a href="../react-apollo-link-state-tutorial/index.html" itemprop="url">A apollo-link-state
                    Tutorial for Local State in React</a></div>
                <div>Part 3: <a href="../react-redux-apollo-client-state-management-tutorial/index.html"
                    itemprop="url">How to use Redux with Apollo Client and GraphQL in React</a></div>
              </div>



              



              <div class="box-inline col-md-12">
                <div class="col-md-12 text-center">
                  <h2 class="newsletter">The Road to learn React</h2>

                  <div class="col-md-4">
                    <img class="img-lazy img-responsive" data-lazy-src="//img/page/cover.png">
                  </div>

                  <p class="lead">
                    Build a Hacker News App along the way. No setup configuration. No tooling. No Redux. Plain React in
                    200+ pages of learning material. Learn React like <strong>50.000+ readers</strong>.
                  </p>
                  <a class="btn btn-template-main" href="https://roadtoreact.com" target="_blank"
                    rel="noopener noreferrer">
                    Get the Book for free <i class="fa fa-chevron-right"></i>
                  </a>

                  <div>
                    <a href="https://amzn.to/2QY2ONp" target="_blank" rel="noopener noreferrer">
                      Get it from Amazon
                    </a>
                  </div>

                </div>
              </div>

            </div>



            


          </article>


        </div>


      </div>

    </div>




    
    <footer id="subfooter">
      <div class="container">

        <div class="col-md-5 col-sm-6">

          <h4>Recent posts</h4>

          <div class="blog-entries">

            <div class="item same-height-row clearfix">
              <div class="article same-height-always">
                <a href="../redux-vs-usereducer/index.html">

                  <img data-lazy-src="//img/posts/redux-vs-usereducer/banner.jpg" data-is-thumb="is-thumb"
                    class="img-lazy img-responsive" alt="React&#39;s useReducer vs Redux">

                </a>
              </div>
              <div class="name same-height-always">
                <h5><a href="../redux-vs-usereducer/index.html">React&#39;s useReducer vs Redux</a></h5>
              </div>
            </div>

            <div class="item same-height-row clearfix">
              <div class="article same-height-always">
                <a href="../publish-npm-package-node/index.html">

                  <img data-lazy-src="//img/posts/publish-npm-package-node/banner.jpg" data-is-thumb="is-thumb"
                    class="img-lazy img-responsive" alt="How to publish a npm package?">

                </a>
              </div>
              <div class="name same-height-always">
                <h5><a href="../publish-npm-package-node/index.html">How to publish a npm package?</a></h5>
              </div>
            </div>

            <div class="item same-height-row clearfix">
              <div class="article same-height-always">
                <a href="../react-scroll-to-item/index.html">

                  <img data-lazy-src="//img/posts/react-scroll-to-item/banner.jpg" data-is-thumb="is-thumb"
                    class="img-lazy img-responsive" alt="How to Scroll to Item in React?">

                </a>
              </div>
              <div class="name same-height-always">
                <h5><a href="../react-scroll-to-item/index.html">How to Scroll to Item in React?</a></h5>
              </div>
            </div>

          </div>

          <hr class="hidden-md hidden-lg hidden-sm">

        </div>



        <div class="col-md-5 col-md-offset-2 col-sm-6">

          <h4>About Me</h4>

          <div class="blog-entries">
            <div class="item same-height-row clearfix">
              <div class="profile same-height-always">
                <img class="img-lazy img-responsive" data-lazy-src="//img/page/profile.jpg" alt="profile">
              </div>
              <div class="name same-height-always">
                <p>
                  Hi, I'm Chris - a Midvale, Utah-based consulting software developer. Find out more <a
                    href="../about/index.html">about me</a>, <a href="../work-with-me/index.html">work with me</a>, or
                  have a look at my social media profiles below.
                </p>
              </div>
            </div>
          </div>

        </div>



      </div>

    </footer>


    <footer id="copyright">
      <div class="container">
        <div class="row">
          <div class="col-md-4">
            <ul class="info list-inline quicklinks pull-left">

              <li>© Chris Paul</li>

            </ul>
          </div>
          <div class="col-md-4">
            
          </div>
          <div class="col-md-4">
            <ul class="info list-inline quicklinks pull-right">

              <li><a aria-label="quicklinks" href="../legal/index.html">Legal Notice</a></li>

            </ul>
          </div>
        </div>
      </div>
    </footer>


  </div>





  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>

  <script src="../js/script.js"></script>
</body>

</html>