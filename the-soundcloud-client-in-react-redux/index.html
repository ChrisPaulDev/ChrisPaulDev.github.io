<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="google-site-verification" content="We9gRQmlTIjMkOPPjPWDQTXd15nWA6tBEYlxQ2cMpEg" />

  <title>
    The SoundCloud Client in React &#43; Redux - CPaul
  </title>

  <meta name="author" content="" />

  
    <meta name="description" content="Build a React &#43; Redux SoundCloud Client. It is a huge tutorial where you build an example real world application. Learn React JS and Redux along the way. Consume the SoundCloud API, login and interact...">
  

  <meta name="theme-color" content="#38bb6c"/>

  <meta name="generator" content="Hugo 0.41" />

  
  <link href="https://cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">

  
  

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">

  
  <link href="../css/bootstrap.default.css" rel="stylesheet" id="theme-stylesheet">
  <link href="../css/customizations.css" rel="stylesheet">

  
  
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
  <link rel="shortcut icon" href="../img/favicon/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="../img/favicon/apple-touch-icon.png" />
  <link rel="manifest" href="../img/favicon/manifest.json">
  <link rel="mask-icon" href="../img/favicon/safari-pinned-tab.svg" color="#5bbad5">

  <link rel="alternate" href="../index.xml" type="application/rss+xml" title="CPaul">

  
  
<meta itemprop="name" content="The SoundCloud Client in React &#43; Redux">
<meta itemprop="description" content="Build a React &#43; Redux SoundCloud Client. It is a huge tutorial where you build an example real world application. Learn React JS and Redux along the way. Consume the SoundCloud API, login and interact...">



    <meta itemprop="image" content="https://chrispaul.dev/img/posts/the-soundcloud-client-in-react-redux/banner_640.jpg">



<meta itemprop="keywords" content="angular,apollo,d3,graphql,growth,javascript,machine-learning,mobx,node,react,reason,redux,tooling,vue,web-development,angular,apollo,d3,graphql,growth,javascript,machine-learning,mobx,node,react,reason,redux,tooling,web-development," />


<meta itemprop="wordCount" content="8936">


  
  <meta name="keywords" content="react redux">

  <meta property="og:title" content="The SoundCloud Client in React &#43; Redux - CPaul">


  <meta property="og:description" content="Build a React &#43; Redux SoundCloud Client. It is a huge tutorial where you build an example real world application. Learn React JS and Redux along the way. Consume the SoundCloud API, login and interact..." />


<meta property="og:type" content="website" />
<meta property="og:url" content="https://chrispaul.dev/the-soundcloud-client-in-react-redux/" />
<meta property="og:image" content="https://chrispaul.dev/img/posts/the-soundcloud-client-in-react-redux/banner_640.jpg" />

  

    <meta name="news_keywords" content="react redux" />

  

    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:image:src" content="https://chrispaul.dev/img/posts/the-soundcloud-client-in-react-redux/banner_640.jpg"/>



<meta name="twitter:title" content="The SoundCloud Client in React &#43; Redux"/>
<meta name="twitter:description" content="Build a React &#43; Redux SoundCloud Client. It is a huge tutorial where you build an example real world application. Learn React JS and Redux along the way. Consume the SoundCloud API, login and interact..."/>
<meta name="twitter:site" content="@rwieruch"/>
<meta name="twitter:domain" content="rwieruch"/>

  

</head>


  <body>

    <div id="all">

        <header>

          <div class="navbar-affixed-top" data-spy="affix" data-offset-top="200">

    <div class="navbar navbar-default yamm" role="navigation" id="navbar">

        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand home" href="../index.html">
                    <img src="../img/page/logo.svg" alt="The SoundCloud Client in React &#43; Redux logo" class="img-lazy">
                    <span class="sr-only">The SoundCloud Client in React &#43; Redux - go to homepage</span>
                </a>

                <div class="navbar-buttons">
                    <button type="button" class="navbar-toggle btn-template-main" data-toggle="collapse" data-target="#navigation">
                        <span class="sr-only">Toggle navigation</span>
                        <i class="fa fa-align-justify"></i>
                    </button>
                </div>
            </div>
            

            <div class="navbar-collapse collapse" id="navigation">
                <ul class="nav navbar-nav navbar-right">
                    
                    <li class="dropdown">
                        
                            <a href="../index.html">Blog</a>
                        
                    </li>
                    
                    <li class="dropdown">
                        
                            <a href="../work-with-me/index.html">Work with me</a>
                        
                    </li>
                    
                    <li class="dropdown">
                        
                            <a href="../about/index.html">About</a>
                        
                    </li>
                    
                    <li class="dropdown">
                        
                            <a style="color: #38bb6c" href="https://roadtoreact.com/">Books &amp; Courses</a>
                        
                    </li>
                    
                </ul>
            </div>
            

            <div class="collapse clearfix" id="search">

                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search">
                        <span class="input-group-btn">

                    <button type="submit" class="btn btn-template-main"><i class="fa fa-search"></i></button>

                </span>
                    </div>
                </form>

            </div>
            

        </div>
    </div>
    

</div>




        </header>

        <div class="post-share post-share-fixed post-share-desktop hidden-xs hidden-sm">
    

<a
    aria-label="icon-facebook"
    class="icon-facebook"
    href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fchrispaul.dev%2fthe-soundcloud-client-in-react-redux%2f"
    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
    <i class="fa fa-facebook"></i>
</a>


<a
    aria-label="icon-twitter"
    class="icon-twitter"
    href="https://twitter.com/share?text=The%20SoundCloud%20Client%20in%20React%20%2b%20Redux%20by%20%40rwieruch%20%23ReactJs&amp;url=https%3a%2f%2fchrispaul.dev%2fthe-soundcloud-client-in-react-redux%2f"
    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
    <i class="fa fa-twitter"></i>
</a>





<a
    aria-label="icon-linkedin"
    class="icon-linkedin"
    href="https://www.linkedin.com/shareArticle?mini=true&amp;title=The%20SoundCloud%20Client%20in%20React%20%2b%20Redux&amp;url=https%3a%2f%2fchrispaul.dev%2fthe-soundcloud-client-in-react-redux%2f">
    <i class="fa fa-linkedin"></i>
</a>

</div>

<div class="visible-xs visible-sm text-center">
    <div class="post-share post-share-fixed post-share-mobile">
        

<a
    aria-label="icon-facebook"
    class="icon-facebook"
    href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fchrispaul.dev%2fthe-soundcloud-client-in-react-redux%2f"
    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
    <i class="fa fa-facebook"></i>
</a>


<a
    aria-label="icon-twitter"
    class="icon-twitter"
    href="https://twitter.com/share?text=The%20SoundCloud%20Client%20in%20React%20%2b%20Redux%20by%20%40rwieruch%20%23ReactJs&amp;url=https%3a%2f%2fchrispaul.dev%2fthe-soundcloud-client-in-react-redux%2f"
    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
    <i class="fa fa-twitter"></i>
</a>





<a
    aria-label="icon-linkedin"
    class="icon-linkedin"
    href="https://www.linkedin.com/shareArticle?mini=true&amp;title=The%20SoundCloud%20Client%20in%20React%20%2b%20Redux&amp;url=https%3a%2f%2fchrispaul.dev%2fthe-soundcloud-client-in-react-redux%2f">
    <i class="fa fa-linkedin"></i>
</a>

    </div>
</div>

        

        <div class="hidden-xs">
            

<section class="bar background-image-fixed-2 no-mb color-white text-center">
    <div class="dark-mask"></div>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h3 class="lead">Never miss an article about web development, JavaScript and self-growth.</h3>
                <h2 class="text-uppercase newsletter">Take Part</h2>
            </div>

            <div class="col-md-12">
                <p class="text-center">
                    



<div id="mc_embed_signup">
    <form
        action="https://www.getrevue.co/profile/rwieruch/add_subscriber"
        method="post"
        id="revue-form"
        name="revue-form"
        target="_blank">
        <div id="mc_embed_signup_scroll">
            <input
                class="email"
                placeholder="email address"
                type="email"
                name="member[email]"
                id="member_email"
            >
            <div>
                <button
                    type="submit"
                    value="Subscribe"
                    name="member[subscribe]"
                    id="member_submit"
                    class="btn btn-template-transparent-black btn-lg"
                >
                    Subscribe
                </button>
            </div>
        </div>
    </form>
</div>

                </p>
            </div>
        </div>
    </div>
</section>



        </div>

        <div id="content">
            <div class="container">

                <div class="row">

                    <article
                        class="col-md-8 col-md-offset-2"
                        id="blog-post"
                        itemprop="blogPosts"
                        itemscope itemtype="http://schema.org/BlogPosting">

                        <div id="post-content" itemprop="articleBody">

                            <header>
                                <h1 itemprop="name headline">The SoundCloud Client in React &#43; Redux</h1>
                            </header>

                            <div class="text-center">
                                
    <a target="_blank" rel="noopener noreferrer" href="https://www.facebook.com/rwieruch" class="facebook-button-follow">
         <i class="fa fa-facebook"></i>Follow
    </a>


                                &nbsp;
                                

                                &nbsp;
                                
  <a target="_blank" rel="noopener noreferrer" href="https://twitter.com/intent/follow?screen_name=rwieruch" class="generic-button-follow">
    <img src="https://img.shields.io/twitter/follow/rwieruch.svg?style=social&amp;logo=twitter&amp;label=Follow" alt="Follow on Twitter">
  </a>


                                &nbsp;
                                
                            </div>

                            <p class="text-muted text-uppercase mb-small text-center">
    <span itemprop="author publisher">
        
    </span>

    
        <time datetime="2016-06-11" itemprop="datePublished">
            June 11, 2016
        </time>
    

    
        <span class="hidden-xs hidden-sm"> - <a
            target="_blank"
            rel="noopener noreferrer"
            href="https://github.com/rwieruch/blog_chriswieruch_content/blob/master/the-soundcloud-client-in-react-redux.md">
                Edit this Post on GitHub
            </a>
        </span>
    
</p>

                            <div>
  

</div>

<div class="post-image-primary">
    <div class="pinterest-pinner-wrapper" itemscope itemtype="http://schema.org/ImageObject">
        <div class="pinterest-pinner">
            <a
                data-pin-do="buttonPin"
                data-pin-save="true"
                data-pin-tall="true"
                href="https://www.pinterest.com/pin/create/button/?url=https%3a%2f%2fchrispaul.dev%2fthe-soundcloud-client-in-react-redux%2f&amp;media=https://chrispaul.dev/img%2fposts%2fthe-soundcloud-client-in-react-redux%2fbanner.jpg&amp;description=">
            </a>
        </div>

        <img
            class="img-lazy img-responsive"
            data-lazy-src="/src="/img/posts/the-soundcloud-client-in-react-redux/banner.jpg"
            data-is-src-set="is-src-set"
            alt="react redux"
            itemprop="image"
        />
    </div>
</div>


<p>In the beginning of 2016 it was time for me to deep dive into the ReactJs world. I read tons of articles about React and its environment, especially Redux, so far. Several of my colleagues used it in side projects and on a theoretical level I could participate in the discussions.</p>

<p>In my <a target="_blank" rel="noopener noreferrer" href="https://www.small-improvements.com/?ref=chrispaul.dev">company</a> we relied heavily on Angular 1 at this point. Since we are using it in a quite large code base, we know a lot about its flaws. Back in 2015 we already adopted our own flux architecture in the Angular world with the usage of stores and an unidirectional data flow. We were highly aware of the change coming with the React environment.</p>

<p>Again in the early days of 2016 I wanted to see this hyped paradigm shift in its natural environment (React and its flux successor Redux) with a hands on side project.</p>

<p>It took me some weeks to implement the <a target="_blank" rel="noopener noreferrer" href="http://www.favesound.de/">SoundCloud Client FaveSound</a>. Being both a passionate SoundCloud <a target="_blank" rel="noopener noreferrer" href="https://soundcloud.com/schlenkermitturnbeutel">consumer and producer</a>, it felt compelling for me to do my own SoundCloud client in React + Redux.</p>

<p>Professionally I grew with the code base, but also got an entry point into the open source community by providing a <a target="_blank" rel="noopener noreferrer" href="https://github.com/rwieruch/favesound-redux">larger code base example for beginners</a> in the React + Redux world. Since I made this great experience, I wanted to give the community this hands on tutorial, which will guide people to get started in React + Redux with a compelling real world application - a SoundCloud client.</p>

<p>At the end of this tutorial you can expect to have a running React + Redux app, which consumes the SoundCloud API (<a href="../what-is-an-api-javascript/index.html">What&rsquo;s an API?</a>). You will be able to login with your SoundCloud account, list your latest tracks and listen to them within the browser. Additionally you will learn a lot about tooling with Webpack and Babel.</p>

<p>In the future I am going to write some <a href="#extensions">smaller tutorials</a> based on this one. They will simply build on top of this project and help you to get started in various topics. So keep an eye on this tutorial, follow me on <a target="_blank" rel="noopener noreferrer" href="https://twitter.com/rwieruch">Twitter</a> or <a target="_blank" rel="noopener noreferrer" href="https://github.com/rwieruch">GitHub</a> or simply star the <a target="_blank" rel="noopener noreferrer" href="https://github.com/rwieruch/react-redux-soundcloud">repository</a> to get updates.</p>

<h2 class="chapter-header" id="toc">Table of Contents</h2>

<ul>
<li><a href="#aProjectFromScratch">A project from scratch</a></li>
<li><a href="#getStarted">Let’s get started</a></li>
<li><a href="#testSetup">Test Setup</a></li>
<li><a href="#redux">Redux</a>

<ul>
<li><a href="#reduxLoop">Redux Roundtrip</a></li>
<li><a href="#dispatchingAnAction">Dispatching an Action</a></li>
<li><a href="#constantActionTypes">Constant Action Types</a></li>
<li><a href="#actionCreators">Action Creators</a></li>
<li><a href="#reducers">Reducers</a></li>
<li><a href="#storeWithGlobalState">Store with Global State</a></li>
</ul></li>
<li><a href="#connectReduxReact">Connect Redux and React</a>

<ul>
<li><a href="#provider">Provider</a></li>
<li><a href="#connect">Connect</a></li>
<li><a href="#containerAndPresenterComponent">Container and Presenter Component</a></li>
</ul></li>
<li><a href="#soundCloudApp">SoundCloud App</a>

<ul>
<li><a href="#registration">Registration</a></li>
<li><a href="#reactRouter">React Router</a></li>
<li><a href="#authentication">Authentication</a></li>
<li><a href="#reduxThunk">Redux Thunk</a></li>
<li><a href="#setMe">Set Me</a></li>
<li><a href="#fetchTracks">Fetch Tracks</a></li>
</ul></li>
<li><a href="#soundCloudPlayer">SoundCloud Player</a>

<ul>
<li><a href="#newReduxLoop">Another Redux Roundtrip</a></li>
<li><a href="#listenToTheMusic">Listen to the music!</a></li>
</ul></li>
<li><a href="#whatsNext">What&rsquo;s next?</a></li>
<li><a href="#troubleshoot">Troubleshoot</a></li>
<li><a href="#finalThoughts">Final Thoughts</a></li>
<li><a href="#contribution">Contribute</a></li>
</ul>

<h2 class="chapter-header" id="extensions">Extensions</h2>

<p>A list of extensions which can be applied on top of the SoundCloud Client with React + Redux tutorial afterwards.</p>

<ul>
<li><a href="../react-eslint-webpack-babel/index.html">React ESLint: Code Style like Airbnb in React</a></li>
<li><a href="../the-soundcloud-client-in-react-redux-flow/index.html">Flow: Type Checking with Flow in React + Redux</a></li>
<li><a href="../the-soundcloud-client-in-react-redux-ducks/index.html">Redux Ducks: Restructure your Redux App with Ducks</a></li>
<li><a href="../the-soundcloud-client-in-react-redux-normalizr/index.html">Redux Normalizr: Improve your State Management</a></li>
<li><a href="../redux-observable-rxjs/index.html">Redux Observable RxJS: Going Epic with Reactive Programming</a></li>
<li><a href="../mobx-react/index.html">MobX React: Simplified State Management in React</a></li>
</ul>

<h2 class="chapter-header" id="aProjectFromScratch">A project from scratch</h2>

<p>I must say I learned a lot from implementing a project from scratch. It makes totally sense to set up your side project from zero to one without having a boilerplate project. You will learn tons of stuff not only about React + Redux, but also about JavaScript in general and its environment. This tutorial will be learning by doing by understanding each step, like it was for me when I did this whole project, with some helpful explanations. After you have finished this, you should be able to set up your own React + Redux side project to provide another real world project for the community.</p>

<p>The whole tutorial contains a lot of information. I wouldn&rsquo;t suggest to do everything at once when you are still learning React + Redux. Make some breaks between the chapters. Once you build your first React component, don&rsquo;t continue with Redux immediately. Experiment a bit with the code, do some internal state management with React, before you use Redux for state management. Take your time.</p>

<p>Additionally I can recommend to read <em>The Road to learn React</em> before you dive into Redux. It teaches React by building a Hacker News App without configuration, tooling and Redux. If you are new to React, do yourself a favour and learn React first.</p>

<div class="box-inline col-md-12">
    <div class="col-md-12 text-center">
        <h2 class="newsletter">The Road to learn React</h2>
        <div class="col-md-4">
            <img
                class="img-lazy img-responsive"
                data-lazy-src="//img/page/cover.png"
                alt="package"
            >
        </div>
        <p class="lead">
            Build a Hacker News App along the way. No setup configuration. No tooling. No Redux. Plain React in 200+ pages of learning material. Pay what you want like <strong>50.000+ readers</strong>.
        </p>
        <a
            class="btn btn-template-main"
            href="https://roadtoreact.com/"
            target="_blank"
            rel="noopener noreferrer"
        >
            Get the Book <i class="fa fa-chevron-right"></i>
        </a>
    </div>
</div>


<h2 class="chapter-header" id="getStarted">Let’s get started</h2>

<p>Before you can write your first React component, you have to install Webpack and Babel. I extracted the React setup into an own article to make it reusable and maintainable for the future. You can follow the <a href="../minimal-react-webpack-babel-setup/index.html">instructions in the article</a> to setup your project. After that you can come back to this tutorial and continue here to write your first React component.</p>

<p>Is your project set up? Then let&rsquo;s render some data. It makes sense to render a list of tracks, since we are writing a SoundCloud application.</p>

<p><em>src/index.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">ReactDOM</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-dom&#39;</span><span style="color: #e7e9db">;</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">tracks</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">[</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">title</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;Some track&#39;</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">},</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">title</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;Some other track&#39;</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">];</span>
</span>
<span style="color: #06b6ef">ReactDOM</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">render</span><span style="color: #e7e9db">(</span>
<span style="background-color: #4f424c">  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">tracks</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">        <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;track&quot;</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">title</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;;</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">})</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;,</span>
</span>  <span style="color: #e7e9db">document.</span><span style="color: #06b6ef">getElementById</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;app&#39;</span><span style="color: #e7e9db">)</span>
<span style="color: #e7e9db">);</span>

<span style="color: #06b6ef">module</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">hot</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">accept</span><span style="color: #e7e9db">();</span>
</code></pre></div>


<p>The <a target="_blank" rel="noopener noreferrer" href="https://facebook.github.io/react/docs/jsx-in-depth.html">JSX syntax</a> takes getting used to. Basically we can use JavaScript in HTML. In our code snippet we map over a list of tracks and return a HTML node with track properties.</p>

<p>The console output gives the hint of a missing key property. <a target="_blank" rel="noopener noreferrer" href="https://facebook.github.io/react/docs/lists-and-keys.html">React elements need that key property to uniquely identify themselves in a list of elements</a>. Let’s fix this, save the file and see how hot reloading kicks in and refreshes our page!</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">ReactDOM</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-dom&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">tracks</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">[</span>
  <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">title</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;Some track&#39;</span>
  <span style="color: #e7e9db">},</span>
  <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">title</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;Some other track&#39;</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">];</span>

<span style="color: #06b6ef">ReactDOM</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">render</span><span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">      <span style="color: #06b6ef">tracks</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">key</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">        <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;track&quot;</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">key</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">title</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;;</span>
</span>      <span style="color: #e7e9db">})</span>
    <span style="color: #e7e9db">}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;,</span>
  <span style="color: #e7e9db">document.</span><span style="color: #06b6ef">getElementById</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;app&#39;</span><span style="color: #e7e9db">)</span>
<span style="color: #e7e9db">);</span>
</code></pre></div>


<p>Now it&rsquo;s time to write our first real component. We can extract the rendered list of tracks in an own component, because the <em>src/index.js</em> should be only seen as entry point to the React application.</p>

<p><em>src/index.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">ReactDOM</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-dom&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">Stream</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./components/Stream&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #815ba4">const</span> <span style="color: #06b6ef">tracks</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">[</span>
  <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">title</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;Some track&#39;</span>
  <span style="color: #e7e9db">},</span>
  <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">title</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;Some other track&#39;</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">];</span>

<span style="color: #06b6ef">ReactDOM</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">render</span><span style="color: #e7e9db">(</span>
<span style="background-color: #4f424c">  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Stream</span> <span style="color: #06b6ef">tracks</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">tracks</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">,</span>
</span>  <span style="color: #e7e9db">document.</span><span style="color: #06b6ef">getElementById</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;app&#39;</span><span style="color: #e7e9db">)</span>
<span style="color: #e7e9db">);</span>

<span style="color: #06b6ef">module</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">hot</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">accept</span><span style="color: #e7e9db">();</span>
</code></pre></div>


<p>We import a Stream component which gets a list of tracks as props. Moreover we use that component as first parameter for <code>ReactDOM.render</code>. Now let&rsquo;s implement the Stream component.</p>

<p><em>From src folder:</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">mkdir</span> <span style="color: #06b6ef">components</span>
<span style="color: #06b6ef">cd</span> <span style="color: #06b6ef">components</span>
<span style="color: #06b6ef">touch</span> <span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">js</span>
</code></pre></div>


<p>Our src folder is getting its first structure. We will organise our files by a technical separation - starting with a components folder, but later on adding more folders aside.</p>

<blockquote>
<p>While it&rsquo;s good to have a technical separation of concerns in an early project, it may not scale for larger applications. You might want to consider to <a target="_blank" rel="noopener noreferrer" href="https://medium.com/@alexmngn/how-to-better-organize-your-react-applications-2fd3ea1920f1">organise your app by features with a growing code base</a>.</p>
</blockquote>

<p>Let’s give our recent created file some content.</p>

<p><em>src/components/Stream.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">Stream</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>

  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">tracks</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">[]</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">;</span>

    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #e7e9db">{</span>
          <span style="color: #06b6ef">tracks</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">key</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
            <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;track&quot;</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">key</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">title</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;;</span>
          <span style="color: #e7e9db">})</span>
        <span style="color: #e7e9db">}</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
    <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>

<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>The Stream component is a React ES6 class component. The render shorthand function returns the element. Additionally we retrieve the props from <code>this</code> by using ES6 destructuring and providing a default empty list.</p>

<p>React ES6 class components provide a slim API. These lifecycle methods can be used to hook into the component lifecycle. For instance you can do things before a component gets rendered with <code>componentWillMount()</code> or when it updated with <code>componentDidUpdate()</code>. You can read about all component <a target="_blank" rel="noopener noreferrer" href="https://facebook.github.io/react/docs/react-component.html">lifecycle methods</a>.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">class</span> <span style="color: #06b6ef">Stream</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">...</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">componentWillMount</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #776e71">// do things</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">componentDidUpdate</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #776e71">// do things</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>
</code></pre></div>


<p>ES6 class components can have internal component state. Imagine you could like a track. You would have to save the state whether a track is liked or not liked. I will demonstrate how you can achieve it.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">Stream</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>

<span style="background-color: #4f424c">  <span style="color: #06b6ef">constructor</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">super</span><span style="color: #e7e9db">();</span>
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{};</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">}</span>
</span>
  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">tracks</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">[]</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">;</span>

    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #e7e9db">{</span>
          <span style="color: #06b6ef">tracks</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">key</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">            <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
</span>              <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;track&quot;</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">key</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
                <span style="color: #e7e9db">{</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">title</span><span style="color: #e7e9db">}</span>
<span style="background-color: #4f424c">                <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span> <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">key</span><span style="color: #e7e9db">]</span><span style="color: #5bc4bf">:</span> <span style="color: #5bc4bf">!</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">key</span><span style="color: #e7e9db">]</span> <span style="color: #e7e9db">})}</span> <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span><span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">                  <span style="color: #e7e9db">{</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">key</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">?</span> <span style="color: #48b685">&#39;Dislike&#39;</span> <span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;Like&#39;</span> <span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">                <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
</span>              <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
<span style="background-color: #4f424c">            <span style="color: #e7e9db">);</span>
</span>          <span style="color: #e7e9db">})</span>
        <span style="color: #e7e9db">}</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
    <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>

<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>You would need a contructor to setup the initial internal component state. Afterwards you can use <code>setState()</code> to modify the state and <code>this.state</code> to get the state. We modify the state in the <code>onClick</code> handler and get the state to show a button label.</p>

<p>Let&rsquo;s keep the state out of our component for the sake of simplicity.</p>

<p><em>src/components/Stream.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">Stream</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>

  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">tracks</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">[]</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">;</span>

    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #e7e9db">{</span>
          <span style="color: #06b6ef">tracks</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">key</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
            <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;track&quot;</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">key</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">title</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;;</span>
          <span style="color: #e7e9db">})</span>
        <span style="color: #e7e9db">}</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
    <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>

<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>Since we don&rsquo;t need internal component state nor lifecycle methods, we can refactor our ES6 class component to a <a target="_blank" rel="noopener noreferrer" href="https://facebook.github.io/react/docs/components-and-props.html">stateless functional component</a>.</p>

<p><em>src/components/Stream.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">tracks</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">[]</span> <span style="color: #e7e9db">})</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #e7e9db">{</span>
        <span style="color: #06b6ef">tracks</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">key</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
          <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;track&quot;</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">key</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">title</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;;</span>
        <span style="color: #e7e9db">})</span>
      <span style="color: #e7e9db">}</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
  <span style="color: #e7e9db">);</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>It&rsquo;s called stateless functional component, because it only gets an input and generates an output. There are no side effects happening (functional) and our component doesn’t know internal state at all (stateless). It&rsquo;s only a function which gets a state and returns a view: <code>(State) =&gt; View</code>.</p>

<p>You can use ES6 class components whenever you need component lifecycle methods or internal component state. If that&rsquo;s not the case, use functional stateless components.</p>

<p><em>Folder structure:</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #5bc4bf">-</span> <span style="color: #06b6ef">dist</span>
<span style="color: #5bc4bf">--</span> <span style="color: #06b6ef">index</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">html</span>
<span style="color: #5bc4bf">-</span> <span style="color: #06b6ef">node_modules</span>
<span style="color: #5bc4bf">-</span> <span style="color: #06b6ef">src</span>
<span style="color: #5bc4bf">--</span> <span style="color: #06b6ef">components</span>
<span style="color: #5bc4bf">---</span> <span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">js</span>
<span style="color: #5bc4bf">--</span> <span style="color: #06b6ef">index</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">js</span>
<span style="color: #5bc4bf">-</span> <span style="color: #815ba4">package</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">json</span>
<span style="color: #5bc4bf">-</span> <span style="color: #06b6ef">webpack</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">config</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">js</span>
</code></pre></div>


<p>It’s done. We have written our first React code!</p>

<p>A lot of things already happened during the last chapters. Let’s summarise these with some notes:</p>

<ul>
<li>we use webpack + webpack-dev-server for bundling, building and serving our app</li>
<li>we use Babel

<ul>
<li>to write in ES6 syntax</li>
<li>to have .js rather than .jsx files</li>
</ul></li>
<li>the src/index.js file is used by Webpack as entry point to bundle all of its used imports in one file named bundle.js</li>
<li>bundle.js is used in dist/index.html</li>
<li>dist/index.html provides us an identifier as entry point for our React root component</li>
<li>we set up our first React hook via the id attribute in src/index.js</li>
<li>we implemented our first component as stateless functional component src/components/Stream.js</li>
</ul>

<blockquote>
<p>You may want to experiment a bit more with React before you dive into Redux. Build some more ES6 class and functional stateless components. Additionally use lifecycle methods and internal component state to get used to it. Only then you will see the benefits of using Redux for state management.</p>
</blockquote>

<div class="read-before">
  Read more: <a href="../redux-mobx-confusion/index.html" itemprop="url">The learning curve for state management in React</a>
</div>

<h2 class="chapter-header" id="testSetup">Test Setup</h2>

<p>I want to show you a simple setup to test your React components. I will do this by testing the Stream component, but later on I will not go any deeper into the topic of testing.</p>

<p>We will use <a target="_blank" rel="noopener noreferrer" href="https://github.com/mochajs/mocha">mocha</a> as test framework, <a target="_blank" rel="noopener noreferrer" href="https://github.com/chaijs/chai">chai</a> as assertion library and <a target="_blank" rel="noopener noreferrer" href="https://github.com/tmpvar/jsdom">jsdom</a> to provide us with a pure JavaScript DOM implementation which runs in node.</p>

<p><em>From root folder:</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">dev</span> <span style="color: #06b6ef">mocha</span> <span style="color: #06b6ef">chai</span> <span style="color: #06b6ef">jsdom</span>
</code></pre></div>


<p>Moreover we need a test setup file for some more configuration especially for our virtual DOM setup.</p>

<p><em>From root folder:</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">mkdir</span> <span style="color: #06b6ef">test</span>
<span style="color: #06b6ef">cd</span> <span style="color: #06b6ef">test</span>
<span style="color: #06b6ef">touch</span> <span style="color: #06b6ef">setup</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">js</span>
</code></pre></div>


<p><em>test/setup.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">expect</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;chai&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">jsdom</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;jsdom&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">doc</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">jsdom</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">jsdom</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;&lt;!doctype html&gt;&lt;html&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;&#39;</span><span style="color: #e7e9db">);</span>
<span style="color: #815ba4">const</span> <span style="color: #06b6ef">win</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">doc</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">defaultView</span><span style="color: #e7e9db">;</span>

<span style="color: #06b6ef">global</span><span style="color: #e7e9db">.document</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">doc</span><span style="color: #e7e9db">;</span>
<span style="color: #06b6ef">global</span><span style="color: #e7e9db">.window</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">win</span><span style="color: #e7e9db">;</span>

<span style="color: #e7e9db">Object.</span><span style="color: #06b6ef">keys</span><span style="color: #e7e9db">(window).</span><span style="color: #06b6ef">forEach</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">key</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #5bc4bf">!</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">key</span> <span style="color: #815ba4">in</span> <span style="color: #06b6ef">global</span><span style="color: #e7e9db">))</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">global</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">key</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">window[</span><span style="color: #06b6ef">key</span><span style="color: #e7e9db">];</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">});</span>

<span style="color: #06b6ef">global</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">React</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">;</span>
<span style="color: #06b6ef">global</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">expect</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>Essentially we are exposing globally a jsdom generated document and window object, which can be used by React during tests. Additionally we need to expose all properties from the window object that our running tests later on can use them. Last but not least we are giving global access to the objects React and expect. It helps us that we don’t have to import each of them in our tests.</p>

<p>In package.json we will have to add a new script to run our tests which respects Babel, uses mocha as test framework, uses our previously written <em>test/setup.js</em> file and traverses through all of our files within the <em>src</em> folder with a <em>spec.js</em> suffix.</p>

<p><em>package.json</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>
  <span style="color: #48b685">&quot;scripts&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
    <span style="color: #48b685">&quot;start&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;webpack-dev-server --progress --colors --hot --config ./webpack.config.js&quot;</span><span style="color: #e7e9db">,</span>
<span style="background-color: #4f424c">    <span style="color: #48b685">&quot;test&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;mocha --compilers js:babel-core/register --require ./test/setup.js &#39;src/**/*spec.js&#39;&quot;</span>
</span>  <span style="color: #e7e9db">},</span>
<span style="color: #e7e9db">...</span>
</code></pre></div>


<p>Additionally there are some more neat libraries to help us with React component tests. <a target="_blank" rel="noopener noreferrer" href="https://github.com/airbnb/enzyme">Enzyme</a> by Airbnb is a library to test React components. It relies on react-addons-test-utils and react-dom (the latter we already installed via npm).</p>

<blockquote>
<p><a target="_blank" rel="noopener noreferrer" href="https://facebook.github.io/jest/docs/tutorial-react.html">Jest</a> can be used alone or in combination with enzyme to test React components. It&rsquo;s the official library by Facebook.</p>
</blockquote>

<p><em>From root folder:</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">dev</span> <span style="color: #06b6ef">react</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">addons</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">test</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">utils</span> <span style="color: #06b6ef">enzyme</span>
</code></pre></div>


<p>Now we are set to write our first component test.</p>

<p><em>From components folder:</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">touch</span> <span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">spec</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">js</span>
</code></pre></div>


<p><em>src/components/Stream.spec.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">Stream</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./Stream&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">shallow</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;enzyme&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;Stream&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>

  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">props</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">tracks</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">[{</span> <span style="color: #06b6ef">title</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;x&#39;</span> <span style="color: #e7e9db">},</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">title</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;y&#39;</span> <span style="color: #e7e9db">}],</span>
  <span style="color: #e7e9db">};</span>

  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;shows two elements&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">element</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">shallow</span><span style="color: #e7e9db">(</span><span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Stream</span> <span style="color: #e7e9db">{</span> <span style="color: #e7e9db">...</span><span style="color: #06b6ef">props</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">);</span>

    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">element</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">find</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;.track&#39;</span><span style="color: #e7e9db">)).</span><span style="color: #06b6ef">to</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">have</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">length</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">2</span><span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">});</span>

<span style="color: #e7e9db">});</span>
</code></pre></div>


<p>Here we are serving our Stream component with an array of two tracks. As we know both of these tracks should get rendered. The expect assertion checks whether we are rendering two DOM elements with the class track. When we run our tests, they should pass.</p>

<p><em>From root folder:</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">test</span>
</code></pre></div>


<p>Moreover we can enhance our package.json scripts collection by a test:watch script.</p>

<p><em>package.json</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>
  <span style="color: #48b685">&quot;scripts&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
    <span style="color: #48b685">&quot;start&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;webpack-dev-server --progress --colors --hot --config ./webpack.config.js&quot;</span><span style="color: #e7e9db">,</span>
    <span style="color: #48b685">&quot;test&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;mocha --compilers js:babel-core/register --require ./test/setup.js ‘src/**/*spec.js’”,</span>
<span style="background-color: #4f424c"><span style="color: #48b685">    &quot;</span><span style="color: #06b6ef">test</span><span style="color: #5bc4bf">:</span><span style="color: #06b6ef">watch</span><span style="color: #48b685">&quot;: &quot;</span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">run</span> <span style="color: #06b6ef">test</span> <span style="color: #5bc4bf">--</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">watch</span><span style="color: #ef6155">&quot;</span>
</span>  <span style="color: #e7e9db">},</span>
<span style="color: #e7e9db">...</span>
</code></pre></div>


<p>By running the script we can see our tests executed every time we change something in our source code.</p>

<p><em>From root folder:</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">run</span> <span style="color: #06b6ef">test</span><span style="color: #5bc4bf">:</span><span style="color: #06b6ef">watch</span>
</code></pre></div>


<p><em>Folder structure:</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #5bc4bf">-</span> <span style="color: #06b6ef">dist</span>
<span style="color: #5bc4bf">--</span> <span style="color: #06b6ef">index</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">html</span>
<span style="color: #5bc4bf">-</span> <span style="color: #06b6ef">node_modules</span>
<span style="color: #5bc4bf">-</span> <span style="color: #06b6ef">src</span>
<span style="color: #5bc4bf">--</span> <span style="color: #06b6ef">components</span>
<span style="color: #5bc4bf">---</span> <span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">js</span>
<span style="color: #5bc4bf">---</span> <span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">spec</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">js</span>
<span style="color: #5bc4bf">--</span> <span style="color: #06b6ef">index</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">js</span>
<span style="color: #5bc4bf">-</span> <span style="color: #06b6ef">test</span>
<span style="color: #5bc4bf">--</span> <span style="color: #06b6ef">setup</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">js</span>
<span style="color: #5bc4bf">-</span> <span style="color: #815ba4">package</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">json</span>
<span style="color: #5bc4bf">-</span> <span style="color: #06b6ef">webpack</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">config</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">js</span>
</code></pre></div>


<p>We won&rsquo;t create anymore tests during this tutorial. As exercise feel free to add more tests during the next chapters!</p>

<h2 class="chapter-header" id="redux">Redux</h2>

<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/reactjs/redux">Redux</a> describes itself as predictable state container for JS apps. Most of the time you will see Redux coupled with React used in client side applications. But it&rsquo;s far more than that. Like JavaScript itself is spreading on server side applications or IoT applications, Redux can be used everywhere to have a predictable state container. You will see that Redux is not strictly coupled to React, because it has its own module, while you can install another module to <a target="_blank" rel="noopener noreferrer" href="https://github.com/reactjs/react-redux">connect it to the React world</a>. There exist modules to <a target="_blank" rel="noopener noreferrer" href="https://github.com/angular-redux/ng-redux">connect Redux to other frameworks</a> as well. Moreover the ecosystem around Redux itself is huge. Once you dive into it, you can learn tons of new stuff. Most of the time it is not only just another library: You have to look behind the facade to grasp which problem it will solve for you. Only then you should use it! When you don’t run into that problem, don’t use it. But be curious what is out there and how people get creative in that ecosystem!</p>

<p>At this point I want to show some respect to <a target="_blank" rel="noopener noreferrer" href="https://twitter.com/dan_abramov">Dan Abramov</a>, the inventor of Redux, who is not only providing us with a simple yet mature library to control our state, but also showing a huge contribution in the open source community on a daily basis. Watch his talk from React Europe 2016 where he speaks about <a target="_blank" rel="noopener noreferrer" href="https://www.youtube.com/watch?v=uvAXVMwHJXU&amp;index=1&amp;list=PLCC436JpVnK09bZeayg-KeLuHfHgc-tDa">the journey of Redux</a> and what made Redux successful.</p>

<h3 id="reduxLoop">Redux Roundtrip</h3>

<p>I call it the Redux Roundtrip, because it encourages you to use a unidirectional data flow. The Redux Roundtrip evolved from the <a target="_blank" rel="noopener noreferrer" href="https://facebook.github.io/flux/docs/actions-and-the-dispatcher.html">flux architecture</a>. Basically you trigger an action in a component, it could be a button, someone listens to that action, uses the payload of that action, and generates a new global state object which gets provided to all components. The components can update and the roundtrip is finished.</p>

<p>Let’s get started with Redux by implementing our first roundtrip!</p>

<p><em>From root folder:</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span> <span style="color: #06b6ef">redux</span>
</code></pre></div>


<h3 id="dispatchingAnAction">Dispatching an Action</h3>

<p>Let’s dispatch our first action and get some explanation afterwards.</p>

<p><em>src/index.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">ReactDOM</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-dom&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">configureStore</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./stores/configureStore&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #5bc4bf">*</span> <span style="color: #06b6ef">as</span> <span style="color: #06b6ef">actions</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./actions&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">Stream</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./components/Stream&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">tracks</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">[</span>
  <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">title</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;Some track&#39;</span>
  <span style="color: #e7e9db">},</span>
  <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">title</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;Some other track&#39;</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">];</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">store</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">configureStore</span><span style="color: #e7e9db">();</span>
</span><span style="background-color: #4f424c"><span style="color: #06b6ef">store</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">dispatch</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">actions</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setTracks</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">tracks</span><span style="color: #e7e9db">));</span>
</span>
<span style="color: #06b6ef">ReactDOM</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">render</span><span style="color: #e7e9db">(</span>
<span style="background-color: #4f424c">  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Stream</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">,</span>
</span>  <span style="color: #e7e9db">document.</span><span style="color: #06b6ef">getElementById</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;app&#39;</span><span style="color: #e7e9db">)</span>
<span style="color: #e7e9db">);</span>

<span style="color: #06b6ef">module</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">hot</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">accept</span><span style="color: #e7e9db">();</span>
</code></pre></div>


<p>As you can see we initialise a store object with some imported function we didn’t define yet. The store is a singleton Redux object and holds our global state object. Moreover it is possible to use a lightweight store API to dispatch an action, get the state of the store or subscribe to the store when updates occur.</p>

<p>In this case we are dispatching our first action with a payload of our hardcoded tracks. Since we want to wire our Stream component directly to the store later on, we don’t need to pass anymore the tracks as properties to our Stream component.</p>

<p>Where will we continue? Either we can define our configureStore function which generates the store object or we can have a look at our first dispatched action. We will continue with the latter by explaining actions and action creators, go over to reducers which will deal with the global state object and at the end set up our store which holds the global state object. After that our component can subscribe to the store to get updates or use the stores interface to dispatch new actions to modify the global state.</p>

<h3 id="constantActionTypes">Constant Action Types</h3>

<p>It is good to have a constants folder in general, but in early Redux projects you will often end up with some constants to identify your actions. These constants get shared by actions and reducers. In general it is a good approach to have all your action constants, which describe the change of your global state, at one place.</p>

<blockquote>
<p>When your project grows, there exist other <a target="_blank" rel="noopener noreferrer" href="https://github.com/erikras/ducks-modular-redux">folder/file structure patterns</a> to organise your Redux code.</p>
</blockquote>

<p><em>From src folder:</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">mkdir</span> <span style="color: #06b6ef">constants</span>
<span style="color: #06b6ef">cd</span> <span style="color: #06b6ef">constants</span>
<span style="color: #06b6ef">touch</span> <span style="color: #06b6ef">actionTypes</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">js</span>
</code></pre></div>


<p><em>src/constants/actionTypes.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">export</span> <span style="color: #815ba4">const</span> <span style="color: #06b6ef">TRACKS_SET</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">&#39;TRACKS_SET&#39;</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<h3 id="actionCreators">Action Creators</h3>

<p>Now we get to the action creators. They return an object with a type and a payload. The type is an action constant like the one we defined in our previous created action types. The payload can be anything which will be used to change the global state.</p>

<p><em>From src folder:</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">mkdir</span> <span style="color: #06b6ef">actions</span>
<span style="color: #06b6ef">cd</span> <span style="color: #06b6ef">actions</span>
<span style="color: #06b6ef">touch</span> <span style="color: #06b6ef">track</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">js</span>
</code></pre></div>


<p><em>src/actions/track.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #5bc4bf">*</span> <span style="color: #06b6ef">as</span> <span style="color: #06b6ef">actionTypes</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../constants/actionTypes&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">function</span> <span style="color: #06b6ef">setTracks</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">tracks</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">actionTypes</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">TRACKS_SET</span><span style="color: #e7e9db">,</span>
    <span style="color: #06b6ef">tracks</span>
  <span style="color: #e7e9db">};</span>
<span style="color: #e7e9db">};</span>
</code></pre></div>


<p>Our first action creator takes as input some tracks which we want to set to our global state. It returns an object with an action type and a payload.</p>

<p>To keep our folder structure tidy, we need to setup an entry point to our action creators via an <em>index.js</em> file.</p>

<p><em>From actions folder:</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">touch</span> <span style="color: #06b6ef">index</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">js</span>
</code></pre></div>


<p><em>src/actions/index.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">setTracks</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./track&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">export</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">setTracks</span>
<span style="color: #e7e9db">};</span>
</code></pre></div>


<p>In that file we can bundle all of our action creators to export them as public interface to the rest of the app. Whenever we need to access some action creator from somewhere else, we have a clearly defined interface for that, without reaching into every action creator file itself. We will do the same later on for our reducers.</p>

<h3 id="reducers">Reducers</h3>

<p>After we dispatched our first action and implemented our first action creator, someone must be aware of that action type to access the global state. These functions are called reducers, because they take an action with its type and payload and reduce it to a new state <code>(previousState, action) =&gt; newState</code>. Important: Rather than modifying the <code>previousState</code>, we return a new object <code>newState</code> - the state is immutable.</p>

<p>The state in Redux must be treated as immutable state. You will never modify the previous state and you will always return a new state object. You want to keep your data structure immutable to avoid any side effects in your application.</p>

<p>Let’s create our first reducer.</p>

<p><em>From src folder:</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">mkdir</span> <span style="color: #06b6ef">reducers</span>
<span style="color: #06b6ef">cd</span> <span style="color: #06b6ef">reducers</span>
<span style="color: #06b6ef">touch</span> <span style="color: #06b6ef">track</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">js</span>
</code></pre></div>


<p><em>src/reducers/track.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #5bc4bf">*</span> <span style="color: #06b6ef">as</span> <span style="color: #06b6ef">actionTypes</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../constants/actionTypes&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">initialState</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">[];</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #815ba4">function</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">initialState</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">action</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">switch</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">action</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">type</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">case</span> <span style="color: #06b6ef">actionTypes</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">TRACKS_SET</span><span style="color: #5bc4bf">:</span>
      <span style="color: #815ba4">return</span> <span style="color: #06b6ef">setTracks</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">action</span><span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>
  <span style="color: #815ba4">return</span> <span style="color: #06b6ef">state</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">setTracks</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">action</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">tracks</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">action</span><span style="color: #e7e9db">;</span>
  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">[</span> <span style="color: #e7e9db">...</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">...</span><span style="color: #06b6ef">tracks</span> <span style="color: #e7e9db">];</span>
<span style="color: #e7e9db">}</span>
</code></pre></div>


<p>As you can see we export an anonymous function, the reducer, as an interface to our existing app. The reducer gets a state and action like explained previously. Additionally you can define a default parameter as a function input. In this case we want to have an empty array as initial state.</p>

<blockquote>
<p>The initial state is the place where you normally would put something like our hardcoded tracks from the beginning, rater than dispatching an action (because they are hardcoded). But later on, we want to replace these tracks with tracks we fetched from the SoundCloud API, and thus we have to set these tracks as state via an action.</p>
</blockquote>

<p>The reducer itself has a switch case to differ between action types. Now we have only one action type, but this will grow by adding more action types in an evolving application.</p>

<p>After all we use the ES6 spread operator to put our previous state plus the action payload, in that case the tracks, in our returned new state. We are using the spread operator to keep our object immutable. I can recommend libraries like <a target="_blank" rel="noopener noreferrer" href="https://facebook.github.io/immutable-js/">Immutable.js</a> in the beginning to enforce the usage of immutable data structures, but for the sake of simplicity I will go on with pure ES6 syntax.</p>

<p>Again to keep our folder interfaces tidy, we create an entry point to our reducers.</p>

<p><em>From reducers folder:</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">touch</span> <span style="color: #06b6ef">index</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">js</span>
</code></pre></div>


<p><em>src/reducers/index.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">combineReducers</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;redux&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">track</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./track&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">combineReducers</span><span style="color: #e7e9db">({</span>
  <span style="color: #06b6ef">track</span>
<span style="color: #e7e9db">});</span>
</code></pre></div>


<p>Saving us some refactoring, I already use a helper function <a target="_blank" rel="noopener noreferrer" href="http://redux.js.org/docs/api/combineReducers.html">combineReducers</a> here. Normally you would start to export one plain reducer. That reducer would return the <em>whole state</em>. When you use <code>combineReducers</code>, you are able to have multiple reducers, where each reducer only returns a <em>substate</em>. Without <code>combineReducers</code> you would access your tracks in the global state with <code>state.tracks</code>. But with <code>combineReducers</code> you get these intermediate layer to get to the subset of states produced by multiple reducers. In that case <code>state.track.tracks</code> where track is our substate to handle all track states in the future.</p>

<h3 id="storeWithGlobalState">Store with Global State</h3>

<p>Now we dispatched our first action, implemented a pair of action type and action creator, and generated a new state via a reducer. What is missing is our store, which we already created from some not yet implemented function in our <em>src/index.js</em>.</p>

<p>Remember when we dispatched our first action via the store interface <em>store.dispatch(actionCreator(payload))</em>? The store is aware of the state and thus it is aware of our reducers with their state manipulations.</p>

<p>Let’s create the store file.</p>

<p><em>From src folder:</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">mkdir</span> <span style="color: #06b6ef">stores</span>
<span style="color: #06b6ef">cd</span> <span style="color: #06b6ef">stores</span>
<span style="color: #06b6ef">touch</span> <span style="color: #06b6ef">configureStore</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">js</span>
</code></pre></div>


<p><em>src/stores/configureStore.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">createStore</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;redux&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">rootReducer</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../reducers/index&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #815ba4">function</span> <span style="color: #06b6ef">configureStore</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">initialState</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">return</span> <span style="color: #06b6ef">createStore</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">rootReducer</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">initialState</span><span style="color: #e7e9db">);</span>
<span style="color: #e7e9db">}</span>
</code></pre></div>


<p>Redux provides us with a <a target="_blank" rel="noopener noreferrer" href="http://redux.js.org/docs/api/createStore.html">createStore</a> function which takes the <code>rootReducer</code> and an initial state.</p>

<p>Let&rsquo;s add a store middleware to even the way to a mature Redux application.</p>

<p><em>src/stores/configureStore.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">createStore</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">applyMiddleware</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;redux&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">rootReducer</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../reducers/index&#39;</span><span style="color: #e7e9db">;</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">createStoreWithMiddleware</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">applyMiddleware</span><span style="color: #e7e9db">()(</span><span style="color: #06b6ef">createStore</span><span style="color: #e7e9db">);</span>
</span>
<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #815ba4">function</span> <span style="color: #06b6ef">configureStore</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">initialState</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">  <span style="color: #815ba4">return</span> <span style="color: #06b6ef">createStoreWithMiddleware</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">rootReducer</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">initialState</span><span style="color: #e7e9db">);</span>
</span><span style="color: #e7e9db">}</span>
</code></pre></div>


<p>The Redux store is aware of a <a target="_blank" rel="noopener noreferrer" href="http://redux.js.org/docs/advanced/Middleware.html">middleware</a>, which can be used to do something between dispatching an action and the moment it reaches the reducer. There is already a lot of middleware for Redux out there. Let&rsquo;s use the <a target="_blank" rel="noopener noreferrer" href="https://github.com/theaqua/redux-logger">logger middleware</a> for the beginning.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span> <span style="color: #06b6ef">redux</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">logger</span>
</code></pre></div>


<p>The logger middleware shows us console output for each action: the previous state, the action itself and the next state. It helps us to keep track of our state changes in our application.</p>

<p><em>src/stores/configureStore.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">createStore</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">applyMiddleware</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;redux&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">createLogger</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;redux-logger&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">rootReducer</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../reducers/index&#39;</span><span style="color: #e7e9db">;</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">logger</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">createLogger</span><span style="color: #e7e9db">();</span>
</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">createStoreWithMiddleware</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">applyMiddleware</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">logger</span><span style="color: #e7e9db">)(</span><span style="color: #06b6ef">createStore</span><span style="color: #e7e9db">);</span>
</span>
<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #815ba4">function</span> <span style="color: #06b6ef">configureStore</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">initialState</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">return</span> <span style="color: #06b6ef">createStoreWithMiddleware</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">rootReducer</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">initialState</span><span style="color: #e7e9db">);</span>
<span style="color: #e7e9db">}</span>
</code></pre></div>


<p>Let’s start our app again and see what happens.</p>

<p><em>From root folder:</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">start</span>
</code></pre></div>


<p>In the browser we don’t see the tracks from our global store, because we don’t pass any global state to our Stream component yet. But we can see in the console output our first action which gets dispatched.</p>

<p>Let’s connect our Stream component to the Redux store to close the Redux Roundtrip.</p>

<h2 class="chapter-header" id="connectReduxReact">Connect Redux and React</h2>

<p>As I mentioned early there exist some libraries to wire Redux to other environments. Since we are using React, we want to <a target="_blank" rel="noopener noreferrer" href="https://github.com/reactjs/react-redux">connect Redux to our React components</a>.</p>

<p><em>From root folder:</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span> <span style="color: #06b6ef">react</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">redux</span>
</code></pre></div>


<p>Do you remember when I told you about the lightweight Redux store API? We will never have the pleasure to enjoy the <code>store.subscribe</code> functionality to listen to store updates. With react-redux we are skipping that step and let this library take care of connecting our components to the store to listen to updates.</p>

<p>Essentially we need two steps to wire the Redux store to our components. Let’s begin with the first one.</p>

<h3 id="provider">Provider</h3>

<p>The Provider from react-redux helps us to make the store and its functionalities available in all child components. The only thing we have to do is to initiate our store and wrap our child components within the Provider component. At the end the Provider component uses the store as property.</p>

<p><em>src/index.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">ReactDOM</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-dom&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Provider</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-redux&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">configureStore</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./stores/configureStore&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #5bc4bf">*</span> <span style="color: #06b6ef">as</span> <span style="color: #06b6ef">actions</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./actions&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">Stream</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./components/Stream&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">tracks</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">[</span>
  <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">title</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;Some track&#39;</span>
  <span style="color: #e7e9db">},</span>
  <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">title</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;Some other track&#39;</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">];</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">store</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">configureStore</span><span style="color: #e7e9db">();</span>
<span style="color: #06b6ef">store</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">dispatch</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">actions</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setTracks</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">tracks</span><span style="color: #e7e9db">));</span>

<span style="color: #06b6ef">ReactDOM</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">render</span><span style="color: #e7e9db">(</span>
<span style="background-color: #4f424c">  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Provider</span> <span style="color: #06b6ef">store</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">store</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Stream</span> <span style="color: #5bc4bf">/&gt;</span>
</span><span style="background-color: #4f424c">  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Provider&gt;,</span>
</span>  <span style="color: #e7e9db">document.</span><span style="color: #06b6ef">getElementById</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;app&#39;</span><span style="color: #e7e9db">)</span>
<span style="color: #e7e9db">);</span>

<span style="color: #06b6ef">module</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">hot</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">accept</span><span style="color: #e7e9db">();</span>
</code></pre></div>


<p>Now we made the Redux store available to all child components, in that case the Stream component.</p>

<h3 id="connect">Connect</h3>

<p>The connect functionality from react-redux helps us to wire React components, which are embedded in the Provider helper component, to our Redux store. We can extend our Stream component as follows to get the required state from the Redux store.</p>

<p>Remember when we passed the hardcoded tracks directly to the Stream component? Now we set these tracks via the Redux Roundtrip in our global state and want to retrieve a part of this state in the Stream component.</p>

<p><em>src/components/Stream.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">connect</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-redux&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #815ba4">function</span> <span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">tracks</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">[]</span> <span style="color: #e7e9db">})</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #e7e9db">{</span>
        <span style="color: #06b6ef">tracks</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">key</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
          <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;track&quot;</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">key</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">title</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;;</span>
        <span style="color: #e7e9db">})</span>
      <span style="color: #e7e9db">}</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
  <span style="color: #e7e9db">);</span>
<span style="color: #e7e9db">}</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">function</span> <span style="color: #06b6ef">mapStateToProps</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">tracks</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">tracks</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c"><span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">connect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">mapStateToProps</span><span style="color: #e7e9db">)(</span><span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">);</span>
</span></code></pre></div>


<p>As you can see the component itself doesn’t change at all.</p>

<p>Basically we are using the returned function of connect to take our Stream component as argument to return a higher order component. The <a target="_blank" rel="noopener noreferrer" href="https://medium.com/@dan_abramov/mixins-are-dead-long-live-higher-order-components-94a0d2f9e750">higher order component</a> is able to access the Redux store while the Stream component itself is only presenting our data.</p>

<p>Additionally the connect function takes as first argument a <code>mapStateToProps</code> function which returns an object. The object is a substate of our global state. In <code>mapStateToProps</code> we are only exposing the substate of the global state which is required by the component.</p>

<p>Moreover it is worth to mention that we could still access properties given from parent components via <code>&lt;Stream something={thing} /&gt;</code> via the <code>mapStateToProps</code> function. The functions gives us as second argument these properties, which we could pass with out substate to the Stream component itself.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">function</span> <span style="color: #06b6ef">mapStateToProps</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">props</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span> <span style="color: #ef6155">…</span> <span style="color: #e7e9db">}</span>
</code></pre></div>


<p>Now start your app and you should see this time the rendered list of tracks in your browser. We already saw these tracks in a previous step, but this time we retrieve them from our Redux store.</p>

<p>The test should break right now, but we will fix that in the next step.</p>

<h3 id="containerAndPresenterComponent">Container and Presenter Component</h3>

<p>Our Stream component has two responsibilities now. First it connects some state to our component and second it renders some DOM. We could split both into <a target="_blank" rel="noopener noreferrer" href="https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0">container and presenter component</a>, where the container component is responsible to connect the component to the Redux world and the presenter component only renders some DOM.</p>

<p>Let’s refactor!</p>

<p>First we need to organise our folder. Since we will not only end up with one file for the Stream component, we need to set up a dedicated Stream folder with all its files.</p>

<p>From components folder:</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">mkdir</span> <span style="color: #06b6ef">Stream</span>
<span style="color: #06b6ef">cd</span> <span style="color: #06b6ef">Stream</span>
<span style="color: #06b6ef">touch</span> <span style="color: #06b6ef">index</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">js</span>
<span style="color: #06b6ef">touch</span> <span style="color: #06b6ef">presenter</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">js</span>
<span style="color: #06b6ef">touch</span> <span style="color: #06b6ef">spec</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">js</span>
</code></pre></div>


<p>The Stream folder consists of an index.js file (container), presenter.js file (presenter) and spec.js file (test). Later on we could have style.css/less/scss, <a target="_blank" rel="noopener noreferrer" href="https://github.com/kadirahq/react-storybook">story.js</a> etc. files in that folder as well.</p>

<p>Let’s refactor by each file. While every line of code is new in these files, I highlighted the important new parts coming with that refactoring. Most of the old code gets only separated in the new files.</p>

<p><em>src/components/Stream/index.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">connect</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-redux&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">Stream</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./presenter&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #815ba4">function</span> <span style="color: #06b6ef">mapStateToProps</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">tracks</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">;</span>
  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">tracks</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">connect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">mapStateToProps</span><span style="color: #e7e9db">)(</span><span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">);</span>
</code></pre></div>


<p><em>src/components/Stream/presenter.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">tracks</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">[]</span> <span style="color: #e7e9db">})</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #e7e9db">{</span>
        <span style="color: #06b6ef">tracks</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">key</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
          <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;track&quot;</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">key</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">title</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;;</span>
        <span style="color: #e7e9db">})</span>
      <span style="color: #e7e9db">}</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
  <span style="color: #e7e9db">);</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p><em>src/components/Stream/spec.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">Stream</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./presenter&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">shallow</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;enzyme&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;Stream&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>

  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">props</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">tracks</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">[{</span> <span style="color: #06b6ef">title</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;x&#39;</span> <span style="color: #e7e9db">},</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">title</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;y&#39;</span> <span style="color: #e7e9db">}],</span>
  <span style="color: #e7e9db">};</span>

  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;shows two elements&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">element</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">shallow</span><span style="color: #e7e9db">(</span><span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Stream</span> <span style="color: #e7e9db">{</span> <span style="color: #e7e9db">...</span><span style="color: #06b6ef">props</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">);</span>

    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">element</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">find</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;.track&#39;</span><span style="color: #e7e9db">)).</span><span style="color: #06b6ef">to</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">have</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">length</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">2</span><span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">});</span>

<span style="color: #e7e9db">});</span>
</code></pre></div>


<p>Now you can delete the old files Stream.js and Stream.spec.js, because they got refactored into the new Stream folder.</p>

<p>When you start your app, you should still see the list of tracks rendered. Moreover the test should be fixed again.</p>

<p>In the last steps we finished the Redux Roundtrip and connected our components to the Redux environment. Now let’s dive into our real world application - the SoundCloud client.</p>

<h2 class="chapter-header" id="soundCloudApp">SoundCloud App</h2>

<p>There is nothing better than having an app with some real data showing up. Rather than having some hardcoded data to display, it is an awesome feeling to fetch some data from a well known service like SoundCloud.</p>

<p>In the chapter of this tutorial we will implement our SoundCloud client, which means that we login as SoundCloud user and show our latest track stream. Moreover we will be able to hit the play button for these tracks.</p>

<h3 id="registration">Registration</h3>

<p>Before you can create a SoundCloud client, you need to have an account and register a new app. Visit <a target="_blank" rel="noopener noreferrer" href="https://developers.soundcloud.com/">Developers SoundCloud</a> and click the “Register a new app” link. Give your app a name and “Register” it.</p>

<div class="post-image-primary">
    <div class="pinterest-pinner-wrapper" itemscope itemtype="http://schema.org/ImageObject">
        <div class="pinterest-pinner">
            <a
                data-pin-do="buttonPin"
                data-pin-save="true"
                data-pin-tall="true"
                href="https://www.pinterest.com/pin/create/button/?url=https%3a%2f%2fchrispaul.dev%2fthe-soundcloud-client-in-react-redux%2f&amp;media=https://chrispaul.dev/img%2fposts%2fthe-soundcloud-client-in-react-redux%2fsc_register_your_app.jpg&amp;description=">
            </a>
        </div>

        <img
            class="img-lazy img-responsive"
            data-lazy-src="/src="/img/posts/the-soundcloud-client-in-react-redux/sc_register_your_app.jpg"
            data-is-src-set="is-src-set"
            alt="react redux"
            itemprop="image"
        />
    </div>
</div>


<p>In the last registration step you give your app a “Redirect URI” to fulfil the registration later in the app via a login popup. Since we are developing locally, we will set this Redirect URI to “<a href="http://localhost:8080/callback%E2%80%9D">http://localhost:8080/callback”</a>.</p>

<div class="post-image-primary">
    <div class="pinterest-pinner-wrapper" itemscope itemtype="http://schema.org/ImageObject">
        <div class="pinterest-pinner">
            <a
                data-pin-do="buttonPin"
                data-pin-save="true"
                data-pin-tall="true"
                href="https://www.pinterest.com/pin/create/button/?url=https%3a%2f%2fchrispaul.dev%2fthe-soundcloud-client-in-react-redux%2f&amp;media=https://chrispaul.dev/img%2fposts%2fthe-soundcloud-client-in-react-redux%2fsc_configuration_app.jpg&amp;description=">
            </a>
        </div>

        <img
            class="img-lazy img-responsive"
            data-lazy-src="/src="/img/posts/the-soundcloud-client-in-react-redux/sc_configuration_app.jpg"
            data-is-src-set="is-src-set"
            alt="react redux"
            itemprop="image"
        />
    </div>
</div>


<blockquote>
<p>The port should be 8080 by default, but consider to change this according to your setup.</p>
</blockquote>

<p>The previous step gives us two constants which we have to use in our app: Client ID and Redirect URI. We need both to setup our authentication process. Let’s transfer these constants into a file.</p>

<p><em>From constants folder:</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">touch</span> <span style="color: #06b6ef">auth</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">js</span>
</code></pre></div>


<p><em>src/constants/auth.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">export</span> <span style="color: #815ba4">const</span> <span style="color: #06b6ef">CLIENT_ID</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">&#39;1fb0d04a94f035059b0424154fd1b18c&#39;</span><span style="color: #e7e9db">;</span> <span style="color: #776e71">// Use your client ID</span>
<span style="color: #815ba4">export</span> <span style="color: #815ba4">const</span> <span style="color: #06b6ef">REDIRECT_URI</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">`</span><span style="color: #f99b15">${</span><span style="color: #e7e9db">window.</span><span style="color: #06b6ef">location</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">protocol</span><span style="color: #f99b15">}</span><span style="color: #48b685">//</span><span style="color: #f99b15">${</span><span style="color: #e7e9db">window.</span><span style="color: #06b6ef">location</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">host</span><span style="color: #f99b15">}</span><span style="color: #48b685">/callback`</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>Now we can authenticate with SoundCloud.</p>

<p><em>From root folder:</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span> <span style="color: #06b6ef">install</span> <span style="color: #06b6ef">soundcloud</span>
</code></pre></div>


<p><em>src/index.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">SC</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;soundcloud&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">ReactDOM</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-dom&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Provider</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-redux&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">configureStore</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./stores/configureStore&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #5bc4bf">*</span> <span style="color: #06b6ef">as</span> <span style="color: #06b6ef">actions</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./actions&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">Stream</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./components/Stream&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">CLIENT_ID</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">REDIRECT_URI</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./constants/auth&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="background-color: #4f424c"><span style="color: #06b6ef">SC</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">initialize</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">client_id</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">CLIENT_ID</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">redirect_uri</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">REDIRECT_URI</span> <span style="color: #e7e9db">});</span>
</span>
<span style="color: #815ba4">const</span> <span style="color: #06b6ef">tracks</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">[</span>
  <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">title</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;Some track&#39;</span>
  <span style="color: #e7e9db">},</span>
  <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">title</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;Some other track&#39;</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">];</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">store</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">configureStore</span><span style="color: #e7e9db">();</span>
<span style="color: #06b6ef">store</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">dispatch</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">actions</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setTracks</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">tracks</span><span style="color: #e7e9db">));</span>

<span style="color: #06b6ef">ReactDOM</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">render</span><span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Provider</span> <span style="color: #06b6ef">store</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">store</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Stream</span> <span style="color: #5bc4bf">/&gt;</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Provider&gt;,</span>
  <span style="color: #e7e9db">document.</span><span style="color: #06b6ef">getElementById</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;app&#39;</span><span style="color: #e7e9db">)</span>
<span style="color: #e7e9db">);</span>

<span style="color: #06b6ef">module</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">hot</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">accept</span><span style="color: #e7e9db">();</span>
</code></pre></div>


<h3 id="reactRouter">React Router</h3>

<p>The authentication process relies on a route called “/callback” in our app. Therefore we need to setup <a target="_blank" rel="noopener noreferrer" href="https://github.com/reactjs/react-router">React Router</a> to provide our app with some simple routing.</p>

<p><em>From root folder:</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span> <span style="color: #06b6ef">install</span> <span style="color: #06b6ef">react</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">router</span> <span style="color: #06b6ef">react</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">router</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">redux</span>
</code></pre></div>


<p>You have to add the following line to your web pack configuration.</p>

<p><em>webpack.config.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">module</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">exports</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">entry</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">[</span>
    <span style="color: #48b685">&#39;webpack-dev-server/client?http://localhost:8080&#39;</span><span style="color: #e7e9db">,</span>
    <span style="color: #48b685">&#39;webpack/hot/only-dev-server&#39;</span><span style="color: #e7e9db">,</span>
    <span style="color: #48b685">&#39;./src/index.js&#39;</span>
  <span style="color: #e7e9db">],</span>
  <span style="color: #06b6ef">module</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">loaders</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">[{</span>
      <span style="color: #06b6ef">test</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">/\.jsx?$/</span><span style="color: #e7e9db">,</span>
      <span style="color: #06b6ef">exclude</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">/node_modules/</span><span style="color: #e7e9db">,</span>
      <span style="color: #06b6ef">loader</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;react-hot-loader!babel-loader&#39;</span>
    <span style="color: #e7e9db">}]</span>
  <span style="color: #e7e9db">},</span>
  <span style="color: #06b6ef">resolve</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">extensions</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">[</span><span style="color: #48b685">&#39;&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #48b685">&#39;.js&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #48b685">&#39;.jsx&#39;</span><span style="color: #e7e9db">]</span>
  <span style="color: #e7e9db">},</span>
  <span style="color: #06b6ef">output</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">path</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">__dirname</span> <span style="color: #5bc4bf">+</span> <span style="color: #48b685">&#39;/dist&#39;</span><span style="color: #e7e9db">,</span>
    <span style="color: #06b6ef">publicPath</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;/&#39;</span><span style="color: #e7e9db">,</span>
    <span style="color: #06b6ef">filename</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;bundle.js&#39;</span>
  <span style="color: #e7e9db">},</span>
  <span style="color: #06b6ef">devServer</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">contentBase</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;./dist&#39;</span><span style="color: #e7e9db">,</span>
    <span style="color: #06b6ef">hot</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">true</span><span style="color: #e7e9db">,</span>
<span style="background-color: #4f424c">    <span style="color: #06b6ef">historyApiFallback</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">true</span>
</span>  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">};</span>
</code></pre></div>


<p>The historyApiFallback allows our app to do routing purely on the client side. Usually a route change would result into a server request to fetch new resources.</p>

<p>Let’s provide our app with two routes: one for our app, another one for the callback and authentication handling. Therefore we use some helper components provided by react-router. In general we have to specify path and component pairs. Therefore we define to see the Stream component on the root path “/” and the Callback component on “/callback” (that’s where the authentication happens). Additionally we can specify a wrapper component like App. We will see during its implementation, why it is good to have a wrapper component like App. Moreover we use react-router-redux to synchronise the browser history with the store. This would help us to react to route changes.</p>

<p><em>src/index.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">SC</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;soundcloud&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">ReactDOM</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-dom&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Router</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">Route</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">IndexRoute</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">browserHistory</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-router&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">syncHistoryWithStore</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-router-redux&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Provider</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-redux&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">configureStore</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./stores/configureStore&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #5bc4bf">*</span> <span style="color: #06b6ef">as</span> <span style="color: #06b6ef">actions</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./actions&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">App</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./components/App&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">Callback</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./components/Callback&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">Stream</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./components/Stream&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">CLIENT_ID</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">REDIRECT_URI</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./constants/auth&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #06b6ef">SC</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">initialize</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">client_id</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">CLIENT_ID</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">redirect_uri</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">REDIRECT_URI</span> <span style="color: #e7e9db">});</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">tracks</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">[</span>
  <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">title</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;Some track&#39;</span>
  <span style="color: #e7e9db">},</span>
  <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">title</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;Some other track&#39;</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">];</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">store</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">configureStore</span><span style="color: #e7e9db">();</span>
<span style="color: #06b6ef">store</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">dispatch</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">actions</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setTracks</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">tracks</span><span style="color: #e7e9db">));</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">history</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">syncHistoryWithStore</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">browserHistory</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">store</span><span style="color: #e7e9db">);</span>
</span>
<span style="color: #06b6ef">ReactDOM</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">render</span><span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Provider</span> <span style="color: #06b6ef">store</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">store</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
<span style="background-color: #4f424c">    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Router</span> <span style="color: #06b6ef">history</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">history</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Route</span> <span style="color: #06b6ef">path</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;/&quot;</span> <span style="color: #06b6ef">component</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">App</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">IndexRoute</span> <span style="color: #06b6ef">component</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span>
</span><span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Route</span> <span style="color: #06b6ef">path</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;/&quot;</span> <span style="color: #06b6ef">component</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span>
</span><span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Route</span> <span style="color: #06b6ef">path</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;/callback&quot;</span> <span style="color: #06b6ef">component</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">Callback</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span>
</span><span style="background-color: #4f424c">      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Route&gt;</span>
</span><span style="background-color: #4f424c">    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Router&gt;</span>
</span>  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Provider&gt;,</span>
  <span style="color: #e7e9db">document.</span><span style="color: #06b6ef">getElementById</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;app&#39;</span><span style="color: #e7e9db">)</span>
<span style="color: #e7e9db">);</span>

<span style="color: #06b6ef">module</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">hot</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">accept</span><span style="color: #e7e9db">();</span>
</code></pre></div>


<p>At the end there are two new components: App as component wrapper and Callback for the authentication. Let’s create the first one.</p>

<p><em>From components folder:</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">mkdir</span> <span style="color: #06b6ef">App</span>
<span style="color: #06b6ef">cd</span> <span style="color: #06b6ef">App</span>
<span style="color: #06b6ef">touch</span> <span style="color: #06b6ef">index</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">js</span>
</code></pre></div>


<p><em>src/components/App/index.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">children</span> <span style="color: #e7e9db">})</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">children</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>App does not much here but passing all children. We will not use this component in this tutorial anymore, but in future implementations you could use this component to have static Header, Footer, Playlist or Player components while the children are changing.</p>

<p>Let’s create our Callback component.</p>

<p><em>From components folder:</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">mkdir</span> <span style="color: #06b6ef">Callback</span>
<span style="color: #06b6ef">cd</span> <span style="color: #06b6ef">Callback</span>
<span style="color: #06b6ef">touch</span> <span style="color: #06b6ef">index</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">js</span>
</code></pre></div>


<p><em>src/components/Calback/index.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">Callback</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>

  <span style="color: #06b6ef">componentDidMount</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">window.</span><span style="color: #06b6ef">setTimeout</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">opener</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">SC</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">connectCallback</span><span style="color: #e7e9db">,</span> <span style="color: #f99b15">1</span><span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;&lt;</span><span style="color: #06b6ef">p</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">This</span> <span style="color: #06b6ef">page</span> <span style="color: #06b6ef">should</span> <span style="color: #06b6ef">close</span> <span style="color: #06b6ef">soon</span><span style="color: #e7e9db">.</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/p&gt;&lt;/div&gt;;</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Callback</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>That’s the default implementation to create the callback for the SoundCloud API. We do not need to touch this file anymore in the future.</p>

<p>The last step for the Router setup is to provide our store with the route state when we navigate from page to page.</p>

<p><em>src/reducers/index.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">combineReducers</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;redux&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">routerReducer</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-router-redux&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">track</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./track&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">combineReducers</span><span style="color: #e7e9db">({</span>
  <span style="color: #06b6ef">track</span><span style="color: #e7e9db">,</span>
<span style="background-color: #4f424c">  <span style="color: #06b6ef">routing</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">routerReducer</span>
</span><span style="color: #e7e9db">});</span>
</code></pre></div>


<p><em>src/stores/configureStore.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">createStore</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">applyMiddleware</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;redux&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">createLogger</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;redux-logger&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">browserHistory</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-router&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">routerMiddleware</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-router-redux&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">rootReducer</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../reducers/index&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">logger</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">createLogger</span><span style="color: #e7e9db">();</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">router</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">routerMiddleware</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">browserHistory</span><span style="color: #e7e9db">);</span>
</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">createStoreWithMiddleware</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">applyMiddleware</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">router</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">logger</span><span style="color: #e7e9db">)(</span><span style="color: #06b6ef">createStore</span><span style="color: #e7e9db">);</span>
</span>
<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #815ba4">function</span> <span style="color: #06b6ef">configureStore</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">initialState</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">return</span> <span style="color: #06b6ef">createStoreWithMiddleware</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">rootReducer</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">initialState</span><span style="color: #e7e9db">);</span>
<span style="color: #e7e9db">}</span>
</code></pre></div>


<p>Moreover we sync our store with the browser history, so that we can listen later on to events based on our current route. We will not use that in this tutorial, but it can help you to fetch data on route changes for instance. Additionally properties like browser path or query params in the URL can be accessed in the store now.</p>

<h3 id="authentication">Authentication</h3>

<p>Let’s authenticate with SoundCloud! We need to setup a new action to trigger that an event to authenticate. Let’s expose the auth function already and add the required action file afterwards.</p>

<p><em>src/actions/index.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">auth</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./auth&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">setTracks</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./track&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">export</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">  <span style="color: #06b6ef">auth</span><span style="color: #e7e9db">,</span>
</span>  <span style="color: #06b6ef">setTracks</span>
<span style="color: #e7e9db">};</span>
</code></pre></div>


<p><em>From actions folder:</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">touch</span> <span style="color: #06b6ef">auth</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">js</span>
</code></pre></div>


<p><em>src/actions/auth.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">SC</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;soundcloud&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">function</span> <span style="color: #06b6ef">auth</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">SC</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">connect</span><span style="color: #e7e9db">().</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">session</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">fetchMe</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">session</span><span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">});</span>
<span style="color: #e7e9db">};</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">fetchMe</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">session</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">fetch</span><span style="color: #e7e9db">(</span><span style="color: #48b685">`//api.soundcloud.com/me?oauth_token=</span><span style="color: #f99b15">${</span><span style="color: #06b6ef">session</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">oauth_token</span><span style="color: #f99b15">}</span><span style="color: #48b685">`</span><span style="color: #e7e9db">)</span>
    <span style="color: #e7e9db">.</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">response</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">response</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">json</span><span style="color: #e7e9db">())</span>
    <span style="color: #e7e9db">.</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">data</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">console</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">log</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">data</span><span style="color: #e7e9db">);</span>
    <span style="color: #e7e9db">});</span>
<span style="color: #e7e9db">}</span>
</code></pre></div>


<p>We are able to connect to the SoundCloud API, login with our credentials and see our account details in the console output.</p>

<p>Nobody is triggering that action though, so let’s do that for the sake of simplicity in our Stream component.</p>

<p><em>src/components/Stream/index.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">bindActionCreators</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;redux&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">connect</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-redux&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #5bc4bf">*</span> <span style="color: #06b6ef">as</span> <span style="color: #06b6ef">actions</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../../actions&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">Stream</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./presenter&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">mapStateToProps</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">tracks</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">;</span>
  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">tracks</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">function</span> <span style="color: #06b6ef">mapDispatchToProps</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">dispatch</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">onAuth</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">bindActionCreators</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">actions</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">auth</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">dispatch</span><span style="color: #e7e9db">)</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">};</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">}</span>
</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">connect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">mapStateToProps</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">mapDispatchToProps</span><span style="color: #e7e9db">)(</span><span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">);</span>
</span></code></pre></div>


<p>In our container component we did only map some state to our presenter component. Now it comes to a second function we can pass to the connect function: mapDispatchToProps. This function helps us to pass actions to our presenter component. Within the mapDispatchToProps we return an object with functions, in this case one function named onAuth, and use our previously created action auth within that. Moreover we need to bind our action creator with the dispatch function.</p>

<p>Now let’s use this new available action in our presenter component.</p>

<p><em>src/components/Stream/presenter.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">function</span> <span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">tracks</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">[],</span> <span style="color: #06b6ef">onAuth</span> <span style="color: #e7e9db">})</span> <span style="color: #e7e9db">{</span>
</span>  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
<span style="background-color: #4f424c">      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span> <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">onAuth</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Login</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
</span><span style="background-color: #4f424c">      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
</span><span style="background-color: #4f424c">      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">br</span><span style="color: #5bc4bf">/&gt;</span>
</span><span style="background-color: #4f424c">      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
</span>        <span style="color: #e7e9db">{</span>
          <span style="color: #06b6ef">tracks</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">key</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
            <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;track&quot;</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">key</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">title</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;;</span>
          <span style="color: #e7e9db">})</span>
        <span style="color: #e7e9db">}</span>
<span style="background-color: #4f424c">      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
</span>    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
  <span style="color: #e7e9db">);</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>We simply put in a button and pass the onAuth function as onClick handler. After we start our app again, we should see the current user in the console output after we clicked the Login button. Additionally we will still see some error message, because our action goes nowhere, since we didn’t supply a according reducer for it.</p>

<blockquote>
<p>We might need to install a polyfill for fetch, because some browser do not support the fetch API yet.</p>
</blockquote>

<p><em>From root folder:</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span> <span style="color: #06b6ef">install</span> <span style="color: #06b6ef">whatwg</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">fetch</span>
<span style="color: #06b6ef">npm</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">dev</span> <span style="color: #06b6ef">install</span> <span style="color: #06b6ef">imports</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">loader</span> <span style="color: #06b6ef">exports</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">loader</span>
</code></pre></div>


<p><em>webpack.config.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="background-color: #4f424c"><span style="color: #815ba4">var</span> <span style="color: #06b6ef">webpack</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">require</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;webpack&#39;</span><span style="color: #e7e9db">);</span>
</span>
<span style="color: #06b6ef">module</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">exports</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">entry</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">[</span>
    <span style="color: #48b685">&#39;webpack-dev-server/client?http://localhost:8080&#39;</span><span style="color: #e7e9db">,</span>
    <span style="color: #48b685">&#39;webpack/hot/only-dev-server&#39;</span><span style="color: #e7e9db">,</span>
    <span style="color: #48b685">&#39;./src/index.js&#39;</span>
  <span style="color: #e7e9db">],</span>
  <span style="color: #06b6ef">module</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">loaders</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">[{</span>
      <span style="color: #06b6ef">test</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">/\.jsx?$/</span><span style="color: #e7e9db">,</span>
      <span style="color: #06b6ef">exclude</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">/node_modules/</span><span style="color: #e7e9db">,</span>
      <span style="color: #06b6ef">loader</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;react-hot-loader!babel-loader&#39;</span>
    <span style="color: #e7e9db">}]</span>
  <span style="color: #e7e9db">},</span>
  <span style="color: #06b6ef">resolve</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">extensions</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">[</span><span style="color: #48b685">&#39;*&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #48b685">&#39;.js&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #48b685">&#39;.jsx&#39;</span><span style="color: #e7e9db">]</span>
  <span style="color: #e7e9db">},</span>
  <span style="color: #06b6ef">output</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">path</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">__dirname</span> <span style="color: #5bc4bf">+</span> <span style="color: #48b685">&#39;/dist&#39;</span><span style="color: #e7e9db">,</span>
    <span style="color: #06b6ef">publicPath</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;/&#39;</span><span style="color: #e7e9db">,</span>
    <span style="color: #06b6ef">filename</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;bundle.js&#39;</span>
  <span style="color: #e7e9db">},</span>
  <span style="color: #06b6ef">devServer</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">contentBase</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;./dist&#39;</span><span style="color: #e7e9db">,</span>
    <span style="color: #06b6ef">hot</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">true</span><span style="color: #e7e9db">,</span>
    <span style="color: #06b6ef">historyApiFallback</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">true</span>
  <span style="color: #e7e9db">},</span>
<span style="background-color: #4f424c">  <span style="color: #06b6ef">plugins</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">[</span>
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">new</span> <span style="color: #06b6ef">webpack</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">ProvidePlugin</span><span style="color: #e7e9db">({</span>
</span><span style="background-color: #4f424c">      <span style="color: #48b685">&#39;fetch&#39;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;imports-loader?this=&gt;global!exports-loader?global.fetch!whatwg-fetch&#39;</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">})</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">]</span>
</span><span style="color: #e7e9db">};</span>
</code></pre></div>


<h3 id="reduxThunk">Redux Thunk</h3>

<p>We can see our current user object in the console output, but we don’t store it yet! Moreover we are using our first asynchronous action, because we have to wait for the SoundCloud server to respond our request. The Redux environment provides several middleware to deal with asynchronous actions (see list below). One of them is <a target="_blank" rel="noopener noreferrer" href="https://github.com/gaearon/redux-thunk">redux-thunk</a>. The thunk middleware returns you a function instead of an action. Since we deal with an asynchronous call, we can delay the dispatch function with the middleware. Moreover the inner function gives us access to the store functions dispatch and getState.</p>

<blockquote>
<p><a target="_blank" rel="noopener noreferrer" href="https://egghead.io/lessons/javascript-redux-dispatching-actions-asynchronously-with-thunks">Building React Applications with Idiomatic Redux</a> by egghead.io and Dan Abramov shows you how to implement your own thunk middleware.</p>
</blockquote>

<p>Some side-effect middleware in Redux:</p>

<ul>
<li><a target="_blank" rel="noopener noreferrer" href="https://github.com/gaearon/redux-thunk">Redux Thunk</a></li>
<li><a target="_blank" rel="noopener noreferrer" href="https://github.com/acdlite/redux-promise">Redux Promise</a></li>
<li><a target="_blank" rel="noopener noreferrer" href="https://github.com/yelouafi/redux-saga">Redux Saga</a></li>
<li><a target="_blank" rel="noopener noreferrer" href="https://github.com/redux-observable/redux-observable">Redux Observable</a></li>
</ul>

<p><em>From root folder:</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span> <span style="color: #06b6ef">install</span> <span style="color: #06b6ef">redux</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">thunk</span>
</code></pre></div>


<p>Let’s add thunk as middleware to our store.</p>

<p><em>src/stores/configurationStore.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">createStore</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">applyMiddleware</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;redux&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">createLogger</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;redux-logger&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">thunk</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;redux-thunk&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">browserHistory</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-router&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">routerMiddleware</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-router-redux&#39;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">rootReducer</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../reducers/index&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">logger</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">createLogger</span><span style="color: #e7e9db">();</span>
<span style="color: #815ba4">const</span> <span style="color: #06b6ef">router</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">routerMiddleware</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">browserHistory</span><span style="color: #e7e9db">);</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">createStoreWithMiddleware</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">applyMiddleware</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">thunk</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">router</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">logger</span><span style="color: #e7e9db">)(</span><span style="color: #06b6ef">createStore</span><span style="color: #e7e9db">);</span>
</span>
<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #815ba4">function</span> <span style="color: #06b6ef">configureStore</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">initialState</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">return</span> <span style="color: #06b6ef">createStoreWithMiddleware</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">rootReducer</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">initialState</span><span style="color: #e7e9db">);</span>
<span style="color: #e7e9db">}</span>
</code></pre></div>


<h3 id="setMe">Set Me</h3>

<p>Now we have everything in place to save our user object to the store. Therefore we need to create a new set of action type, action creator and reducer.</p>

<p><em>src/constants/actionTypes.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="background-color: #4f424c"><span style="color: #815ba4">export</span> <span style="color: #815ba4">const</span> <span style="color: #06b6ef">ME_SET</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">&#39;ME_SET&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">export</span> <span style="color: #815ba4">const</span> <span style="color: #06b6ef">TRACKS_SET</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">&#39;TRACKS_SET&#39;</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p><em>src/actions/auth.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">SC</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;soundcloud&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #5bc4bf">*</span> <span style="color: #06b6ef">as</span> <span style="color: #06b6ef">actionTypes</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../constants/actionTypes&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">function</span> <span style="color: #06b6ef">setMe</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">user</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">actionTypes</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">ME_SET</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">user</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">};</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">}</span>
</span>
<span style="color: #815ba4">export</span> <span style="color: #815ba4">function</span> <span style="color: #06b6ef">auth</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">  <span style="color: #815ba4">return</span> <span style="color: #815ba4">function</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">dispatch</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span>    <span style="color: #06b6ef">SC</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">connect</span><span style="color: #e7e9db">().</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">session</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">      <span style="color: #06b6ef">dispatch</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">fetchMe</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">session</span><span style="color: #e7e9db">));</span>
</span>    <span style="color: #e7e9db">});</span>
<span style="background-color: #4f424c">  <span style="color: #e7e9db">};</span>
</span><span style="color: #e7e9db">};</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">fetchMe</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">session</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">  <span style="color: #815ba4">return</span> <span style="color: #815ba4">function</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">dispatch</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span>    <span style="color: #06b6ef">fetch</span><span style="color: #e7e9db">(</span><span style="color: #48b685">`//api.soundcloud.com/me?oauth_token=</span><span style="color: #f99b15">${</span><span style="color: #06b6ef">session</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">oauth_token</span><span style="color: #f99b15">}</span><span style="color: #48b685">`</span><span style="color: #e7e9db">)</span>
      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">response</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">response</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">json</span><span style="color: #e7e9db">())</span>
      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">data</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">        <span style="color: #06b6ef">dispatch</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">setMe</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">data</span><span style="color: #e7e9db">));</span>
</span>      <span style="color: #e7e9db">});</span>
<span style="background-color: #4f424c">  <span style="color: #e7e9db">};</span>
</span><span style="color: #e7e9db">}</span>
</code></pre></div>


<p>Instead of doing the console output when we retrieved the user object, we simply call our action creator. Moreover we can see that the thunk middleware requires us to return a function instead of an object. The function gives us access to the dispatch functionality of the store.</p>

<p>Let&rsquo;s add the new reducer.</p>

<p><em>src/reducers/index.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">combineReducers</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;redux&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">routerReducer</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-router-redux&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">auth</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./auth&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">track</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./track&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">combineReducers</span><span style="color: #e7e9db">({</span>
<span style="background-color: #4f424c">  <span style="color: #06b6ef">auth</span><span style="color: #e7e9db">,</span>
</span>  <span style="color: #06b6ef">track</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">routing</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">routerReducer</span>
<span style="color: #e7e9db">});</span>
</code></pre></div>


<p><em>From reducers folder:</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">touch</span> <span style="color: #06b6ef">auth</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">js</span>
</code></pre></div>


<p><em>src/reducers/auth.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #5bc4bf">*</span> <span style="color: #06b6ef">as</span> <span style="color: #06b6ef">actionTypes</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../constants/actionTypes&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">initialState</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{};</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #815ba4">function</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">initialState</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">action</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">switch</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">action</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">type</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">case</span> <span style="color: #06b6ef">actionTypes</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">ME_SET</span><span style="color: #5bc4bf">:</span>
      <span style="color: #815ba4">return</span> <span style="color: #06b6ef">setMe</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">action</span><span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>
  <span style="color: #815ba4">return</span> <span style="color: #06b6ef">state</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">setMe</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">action</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">user</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">action</span><span style="color: #e7e9db">;</span>
  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">{</span> <span style="color: #e7e9db">...</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">user</span> <span style="color: #e7e9db">};</span>
<span style="color: #e7e9db">}</span>
</code></pre></div>


<p>The reducer respects the new action type and returns a newState with our user in place.</p>

<p>Now we want to see visually in our DOM whether the login was successful. Therefor we can exchange the Login button once the login itself was successful.</p>

<p><em>src/components/Stream/index.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">bindActionCreators</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;redux&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">connect</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-redux&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #5bc4bf">*</span> <span style="color: #06b6ef">as</span> <span style="color: #06b6ef">actions</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../../actions&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">Stream</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./presenter&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">mapStateToProps</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">user</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">auth</span><span style="color: #e7e9db">;</span>
</span>  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">tracks</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">;</span>
  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">    <span style="color: #06b6ef">user</span><span style="color: #e7e9db">,</span>
</span>    <span style="color: #06b6ef">tracks</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">mapDispatchToProps</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">dispatch</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">onAuth</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">bindActionCreators</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">actions</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">auth</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">dispatch</span><span style="color: #e7e9db">)</span>
  <span style="color: #e7e9db">};</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">connect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">mapStateToProps</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">mapDispatchToProps</span><span style="color: #e7e9db">)(</span><span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">);</span>
</code></pre></div>


<p>In our container component we map our new state, the current user, to the presenter component.</p>

<p><em>src/components/Stream/presenter.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">function</span> <span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">user</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">tracks</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">[],</span> <span style="color: #06b6ef">onAuth</span> <span style="color: #e7e9db">})</span> <span style="color: #e7e9db">{</span>
</span>  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
<span style="background-color: #4f424c">        <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">          <span style="color: #06b6ef">user</span> <span style="color: #5bc4bf">?</span>
</span><span style="background-color: #4f424c">            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">user</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">username</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt; :</span>
</span><span style="background-color: #4f424c">            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span> <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">onAuth</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Login</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
</span><span style="background-color: #4f424c">        <span style="color: #e7e9db">}</span>
</span>      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">br</span><span style="color: #5bc4bf">/&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #e7e9db">{</span>
          <span style="color: #06b6ef">tracks</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">key</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
            <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;track&quot;</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">key</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">title</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;;</span>
          <span style="color: #e7e9db">})</span>
        <span style="color: #e7e9db">}</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
  <span style="color: #e7e9db">);</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>The presenter component decides whether it has to show the username or the Login button. When we start our app again and login, we should the displayed username instead of a button.</p>

<p><em>From root folder:</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">start</span>
</code></pre></div>


<h3 id="fetchTracks">Fetch Tracks</h3>

<p>Now we are authenticated with the SoundCloud server. Let’s get real and fetch some real tracks and replace the hardcoded tracks.</p>

<p><em>src/index.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">SC</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;soundcloud&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">ReactDOM</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-dom&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Router</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">Route</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">IndexRoute</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">browserHistory</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-router&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">syncHistoryWithStore</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-router-redux&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Provider</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-redux&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">configureStore</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./stores/configureStore&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">App</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./components/App&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">Callback</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./components/Callback&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">Stream</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./components/Stream&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">CLIENT_ID</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">REDIRECT_URI</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./constants/auth&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #06b6ef">SC</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">initialize</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">client_id</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">CLIENT_ID</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">redirect_uri</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">REDIRECT_URI</span> <span style="color: #e7e9db">});</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">store</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">configureStore</span><span style="color: #e7e9db">();</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">history</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">syncHistoryWithStore</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">browserHistory</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">store</span><span style="color: #e7e9db">);</span>

<span style="color: #06b6ef">ReactDOM</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">render</span><span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Provider</span> <span style="color: #06b6ef">store</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">store</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Router</span> <span style="color: #06b6ef">history</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">history</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Route</span> <span style="color: #06b6ef">path</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;/&quot;</span> <span style="color: #06b6ef">component</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">App</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">IndexRoute</span> <span style="color: #06b6ef">component</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Route</span> <span style="color: #06b6ef">path</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;/&quot;</span> <span style="color: #06b6ef">component</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Route</span> <span style="color: #06b6ef">path</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;/callback&quot;</span> <span style="color: #06b6ef">component</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">Callback</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Route&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Router&gt;</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Provider&gt;,</span>
  <span style="color: #e7e9db">document.</span><span style="color: #06b6ef">getElementById</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;app&#39;</span><span style="color: #e7e9db">)</span>
<span style="color: #e7e9db">);</span>

<span style="color: #06b6ef">module</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">hot</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">accept</span><span style="color: #e7e9db">();</span>
</code></pre></div>


<p>We only removed the hardcoded tracks in here. Moreover we don’t dispatch anymore an action to set some initial state.</p>

<p><em>src/actions/auth.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">SC</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;soundcloud&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #5bc4bf">*</span> <span style="color: #06b6ef">as</span> <span style="color: #06b6ef">actionTypes</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../constants/actionTypes&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">setTracks</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../actions/track&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #815ba4">function</span> <span style="color: #06b6ef">setMe</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">user</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">actionTypes</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">ME_SET</span><span style="color: #e7e9db">,</span>
    <span style="color: #06b6ef">user</span>
  <span style="color: #e7e9db">};</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">function</span> <span style="color: #06b6ef">auth</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">return</span> <span style="color: #815ba4">function</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">dispatch</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">SC</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">connect</span><span style="color: #e7e9db">().</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">session</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">dispatch</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">fetchMe</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">session</span><span style="color: #e7e9db">));</span>
<span style="background-color: #4f424c">      <span style="color: #06b6ef">dispatch</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">fetchStream</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">session</span><span style="color: #e7e9db">));</span>
</span>    <span style="color: #e7e9db">});</span>
  <span style="color: #e7e9db">};</span>
<span style="color: #e7e9db">};</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">fetchMe</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">session</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">return</span> <span style="color: #815ba4">function</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">dispatch</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">fetch</span><span style="color: #e7e9db">(</span><span style="color: #48b685">`//api.soundcloud.com/me?oauth_token=</span><span style="color: #f99b15">${</span><span style="color: #06b6ef">session</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">oauth_token</span><span style="color: #f99b15">}</span><span style="color: #48b685">`</span><span style="color: #e7e9db">)</span>
        <span style="color: #e7e9db">.</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">response</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">response</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">json</span><span style="color: #e7e9db">())</span>
        <span style="color: #e7e9db">.</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">data</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
          <span style="color: #06b6ef">dispatch</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">setMe</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">data</span><span style="color: #e7e9db">));</span>
        <span style="color: #e7e9db">});</span>
    <span style="color: #e7e9db">};</span>
<span style="color: #e7e9db">}</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">function</span> <span style="color: #06b6ef">fetchStream</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">session</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">return</span> <span style="color: #815ba4">function</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">dispatch</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">fetch</span><span style="color: #e7e9db">(</span><span style="color: #48b685">`//api.soundcloud.com/me/activities?limit=20&amp;offset=0&amp;oauth_token=</span><span style="color: #f99b15">${</span><span style="color: #06b6ef">session</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">oauth_token</span><span style="color: #f99b15">}</span><span style="color: #48b685">`</span><span style="color: #e7e9db">)</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">response</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">response</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">json</span><span style="color: #e7e9db">())</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">data</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">        <span style="color: #06b6ef">dispatch</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">setTracks</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">data</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">collection</span><span style="color: #e7e9db">));</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">});</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">};</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">}</span>
</span></code></pre></div>


<p>After the authentication we simply dispatch a new asynchronous action to fetch track data from the SoundCloud API. Since we already had an action creator to set tracks in our state, wen can reuse this.</p>

<blockquote>
<p>The returned data hasn’t only the list of tracks, it has some more meta data which could be used to fetch more paginated data afterwards. You would have to save the next_href property of data to do that.</p>
</blockquote>

<p>The data structure of the SoundCloud tracks looks a bit different than our hardcoded tracks before. We need to change that in our Stream presenter component.</p>

<p><em>src/components/Stream/presenter.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">user</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">tracks</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">[],</span> <span style="color: #06b6ef">onAuth</span> <span style="color: #e7e9db">})</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #e7e9db">{</span>
          <span style="color: #06b6ef">user</span> <span style="color: #5bc4bf">?</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">user</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">username</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt; :</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span> <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">onAuth</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Login</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
        <span style="color: #e7e9db">}</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">br</span><span style="color: #5bc4bf">/&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #e7e9db">{</span>
          <span style="color: #06b6ef">tracks</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">key</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">            <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;track&quot;</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">key</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">origin</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">title</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;;</span>
</span>          <span style="color: #e7e9db">})</span>
        <span style="color: #e7e9db">}</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
  <span style="color: #e7e9db">);</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>Moreover we need to adjust our test that it respects the new track data structure.</p>

<p><em>src/components/Stream/spec.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">Stream</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./presenter&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">shallow</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;enzyme&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;Stream&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>

  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">props</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">    <span style="color: #06b6ef">tracks</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">[{</span> <span style="color: #06b6ef">origin</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">title</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;x&#39;</span> <span style="color: #e7e9db">}</span> <span style="color: #e7e9db">},</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">origin</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">title</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;y&#39;</span> <span style="color: #e7e9db">}</span> <span style="color: #e7e9db">}],</span>
</span>  <span style="color: #e7e9db">};</span>

  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;shows two elements&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">element</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">shallow</span><span style="color: #e7e9db">(</span><span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Stream</span> <span style="color: #e7e9db">{</span> <span style="color: #e7e9db">...</span><span style="color: #06b6ef">props</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">);</span>

    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">element</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">find</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;.track&#39;</span><span style="color: #e7e9db">)).</span><span style="color: #06b6ef">to</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">have</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">length</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">2</span><span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">});</span>

<span style="color: #e7e9db">});</span>
</code></pre></div>


<p>When you start your app now, you should see some tracks from your personal stream listed after the login.</p>

<blockquote>
<p>Even if you created a new SoundCloud account, I hope you have a stream displayed though. If you get some empty stream data, you have to use SoundCloud directly to generate some e.g. via following some people.</p>
</blockquote>

<p><em>From root folder:</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">start</span>
</code></pre></div>


<h2 class="chapter-header" id="soundCloudPlayer">SoundCloud Player</h2>

<p>How would it be to have your own audio player within the browser? Therefor the last step in this tutorial is to make the tracks playable!</p>

<h3 id="newReduxLoop">Another Redux Roundtrip</h3>

<p>You should be already familiar with the procedure of creating action, action creator and reducer. Moreover you have to trigger that from within a component. Let’s start by providing our Stream component some yet not existing onPlay functionality. Moreover we will display a Play button next to each track which triggers that functionality.</p>

<p><em>src/components/Stream/presenter.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">function</span> <span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">user</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">tracks</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">[],</span> <span style="color: #06b6ef">onAuth</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">onPlay</span> <span style="color: #e7e9db">})</span> <span style="color: #e7e9db">{</span>
</span>  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #e7e9db">{</span>
          <span style="color: #06b6ef">user</span> <span style="color: #5bc4bf">?</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">user</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">username</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt; :</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span> <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">onAuth</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Login</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
        <span style="color: #e7e9db">}</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">br</span><span style="color: #5bc4bf">/&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #e7e9db">{</span>
          <span style="color: #06b6ef">tracks</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">key</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">            <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">              <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;track&quot;</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">key</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">                <span style="color: #e7e9db">{</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">origin</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">title</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">                <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span> <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span> <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">onPlay</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">)}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Play</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
</span><span style="background-color: #4f424c">              <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
</span><span style="background-color: #4f424c">            <span style="color: #e7e9db">);</span>
</span>          <span style="color: #e7e9db">})</span>
        <span style="color: #e7e9db">}</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
  <span style="color: #e7e9db">);</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>In our container Stream component we can map that action to the presenter component.</p>

<p><em>src/components/Stream/index.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">bindActionCreators</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;redux&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">connect</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-redux&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #5bc4bf">*</span> <span style="color: #06b6ef">as</span> <span style="color: #06b6ef">actions</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../../actions&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">Stream</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./presenter&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">mapStateToProps</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">user</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">auth</span><span style="color: #e7e9db">;</span>
  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">tracks</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">;</span>
  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">user</span><span style="color: #e7e9db">,</span>
    <span style="color: #06b6ef">tracks</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">};</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">mapDispatchToProps</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">dispatch</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">onAuth</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">bindActionCreators</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">actions</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">auth</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">dispatch</span><span style="color: #e7e9db">),</span>
<span style="background-color: #4f424c">    <span style="color: #06b6ef">onPlay</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">bindActionCreators</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">actions</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">playTrack</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">dispatch</span><span style="color: #e7e9db">),</span>
</span>  <span style="color: #e7e9db">};</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">connect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">mapStateToProps</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">mapDispatchToProps</span><span style="color: #e7e9db">)(</span><span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">);</span>
</code></pre></div>


<p>Now we will have to implement the non existent playTrack action creator.</p>

<p><em>src/actions/index.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">auth</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./auth&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">setTracks</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">playTrack</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./track&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #815ba4">export</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">auth</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">setTracks</span><span style="color: #e7e9db">,</span>
<span style="background-color: #4f424c">  <span style="color: #06b6ef">playTrack</span>
</span><span style="color: #e7e9db">};</span>
</code></pre></div>


<p><em>src/actions/track.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #5bc4bf">*</span> <span style="color: #06b6ef">as</span> <span style="color: #06b6ef">actionTypes</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../constants/actionTypes&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">function</span> <span style="color: #06b6ef">setTracks</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">tracks</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">actionTypes</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">TRACKS_SET</span><span style="color: #e7e9db">,</span>
    <span style="color: #06b6ef">tracks</span>
  <span style="color: #e7e9db">};</span>
<span style="color: #e7e9db">};</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">export</span> <span style="color: #815ba4">function</span> <span style="color: #06b6ef">playTrack</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">actionTypes</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">TRACK_PLAY</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">track</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">};</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">}</span>
</span></code></pre></div>


<p>Don’t forget to export a new action type as constant.</p>

<p><em>src/constants/actionTypes.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">export</span> <span style="color: #815ba4">const</span> <span style="color: #06b6ef">ME_SET</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">&#39;ME_SET&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">export</span> <span style="color: #815ba4">const</span> <span style="color: #06b6ef">TRACKS_SET</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">&#39;TRACKS_SET&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">export</span> <span style="color: #815ba4">const</span> <span style="color: #06b6ef">TRACK_PLAY</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">&#39;TRACK_PLAY&#39;</span><span style="color: #e7e9db">;</span>
</span></code></pre></div>


<p>In our reducer we make place for another initial state. In the beginning there will be no active track set, but when we trigger to play a track, the track should be set as activeTrack.</p>

<p><em>src/reducers/track.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #5bc4bf">*</span> <span style="color: #06b6ef">as</span> <span style="color: #06b6ef">actionTypes</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../constants/actionTypes&#39;</span><span style="color: #e7e9db">;</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">initialState</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">tracks</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">[],</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">activeTrack</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">null</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">};</span>
</span>
<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #815ba4">function</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">initialState</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">action</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">switch</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">action</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">type</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">case</span> <span style="color: #06b6ef">actionTypes</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">TRACKS_SET</span><span style="color: #5bc4bf">:</span>
      <span style="color: #815ba4">return</span> <span style="color: #06b6ef">setTracks</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">action</span><span style="color: #e7e9db">);</span>
<span style="background-color: #4f424c">    <span style="color: #815ba4">case</span> <span style="color: #06b6ef">actionTypes</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">TRACK_PLAY</span><span style="color: #5bc4bf">:</span>
</span><span style="background-color: #4f424c">      <span style="color: #815ba4">return</span> <span style="color: #06b6ef">setPlay</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">action</span><span style="color: #e7e9db">);</span>
</span>  <span style="color: #e7e9db">}</span>
  <span style="color: #815ba4">return</span> <span style="color: #06b6ef">state</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">setTracks</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">action</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">tracks</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">action</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c">  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">{</span> <span style="color: #e7e9db">...</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">tracks</span> <span style="color: #e7e9db">};</span>
</span><span style="color: #e7e9db">}</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">function</span> <span style="color: #06b6ef">setPlay</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">action</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">track</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">action</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">{</span> <span style="color: #e7e9db">...</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">activeTrack</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">track</span> <span style="color: #e7e9db">};</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">}</span>
</span></code></pre></div>


<p>Additionally we want to show the currently played track, therefore we need to map the activeTrack in our Stream container component.</p>

<p><em>src/components/Stream/index.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">bindActionCreators</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;redux&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">connect</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-redux&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #5bc4bf">*</span> <span style="color: #06b6ef">as</span> <span style="color: #06b6ef">actions</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../../actions&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">Stream</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./presenter&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">mapStateToProps</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">user</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">auth</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c">  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">tracks</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">activeTrack</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">;</span>
</span>  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">user</span><span style="color: #e7e9db">,</span>
    <span style="color: #06b6ef">tracks</span><span style="color: #e7e9db">,</span>
<span style="background-color: #4f424c">    <span style="color: #06b6ef">activeTrack</span>
</span>  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">};</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">mapDispatchToProps</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">dispatch</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">onAuth</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">bindActionCreators</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">actions</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">auth</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">dispatch</span><span style="color: #e7e9db">),</span>
    <span style="color: #06b6ef">onPlay</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">bindActionCreators</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">actions</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">playTrack</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">dispatch</span><span style="color: #e7e9db">),</span>
  <span style="color: #e7e9db">};</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">connect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">mapStateToProps</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">mapDispatchToProps</span><span style="color: #e7e9db">)(</span><span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">);</span>
</code></pre></div>


<p>By starting our app, we should be able to login, to see our tracks and to play a track. The redux-logger should show some console output that we have set an activeTrack. But there is no music yet! Let’s implement that!</p>

<h3 id="listenToTheMusic">Listen to the music!</h3>

<p>In our last step we already handed the activeTrack to our presenter Stream component. Let’s see what we can do about that.</p>

<p><em>src/components/Stream/presenter.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">CLIENT_ID</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../../constants/auth&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">function</span> <span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">user</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">tracks</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">[],</span> <span style="color: #06b6ef">activeTrack</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">onAuth</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">onPlay</span> <span style="color: #e7e9db">})</span> <span style="color: #e7e9db">{</span>
</span>  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #e7e9db">{</span>
          <span style="color: #06b6ef">user</span> <span style="color: #5bc4bf">?</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">user</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">username</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt; :</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span> <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">onAuth</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Login</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
        <span style="color: #e7e9db">}</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">br</span><span style="color: #5bc4bf">/&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #e7e9db">{</span>
          <span style="color: #06b6ef">tracks</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">key</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
            <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
              <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;track&quot;</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">key</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
                <span style="color: #e7e9db">{</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">origin</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">title</span><span style="color: #e7e9db">}</span>
                <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span> <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span> <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">onPlay</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">)}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Play</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
              <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
            <span style="color: #e7e9db">);</span>
          <span style="color: #e7e9db">})</span>
        <span style="color: #e7e9db">}</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
<span style="background-color: #4f424c">      <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">        <span style="color: #06b6ef">activeTrack</span> <span style="color: #5bc4bf">?</span>
</span><span style="background-color: #4f424c">          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">audio</span> <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;audio&quot;</span> <span style="color: #06b6ef">ref</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;audio&quot;</span> <span style="color: #06b6ef">src</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #48b685">`</span><span style="color: #f99b15">${</span><span style="color: #06b6ef">activeTrack</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">origin</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">stream_url</span><span style="color: #f99b15">}</span><span style="color: #48b685">?client_id=</span><span style="color: #f99b15">${</span><span style="color: #06b6ef">CLIENT_ID</span><span style="color: #f99b15">}</span><span style="color: #48b685">`</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;&lt;</span><span style="color: #ef6155">/audio&gt; :</span>
</span><span style="background-color: #4f424c">          <span style="color: #815ba4">null</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">}</span>
</span>    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
  <span style="color: #e7e9db">);</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>We need the CLIENT_ID to authenticate the audio player with the SoundCloud API in order to stream a track via its stream_url. In React 15 you can return null, when there is no activeTrack. In older versions you had to return <code>&lt;noscript /&gt;</code>.</p>

<p>When we start our app and try to play a track, the console output says that we cannot define refs on stateless functional components. But we need that reference on the audio element to be able to use its audio API. Let’s transform the Stream presenter component to a stateful component. We will see how it gives us control over the audio element.</p>

<blockquote>
<p>After all you should avoid to have stateful components and try to stick to functional stateless components. In this case we have no other choice.</p>
</blockquote>

<p><em>src/components/Stream/presenter.js</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">ReactDOM</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-dom&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">CLIENT_ID</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;../../constants/auth&#39;</span><span style="color: #e7e9db">;</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">class</span> <span style="color: #06b6ef">Stream</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
</span>
<span style="background-color: #4f424c">  <span style="color: #06b6ef">componentDidUpdate</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">audioElement</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">ReactDOM</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">findDOMNode</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">refs</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">audio</span><span style="color: #e7e9db">);</span>
</span>
<span style="background-color: #4f424c">    <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #5bc4bf">!</span><span style="color: #06b6ef">audioElement</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span> <span style="color: #815ba4">return</span><span style="color: #e7e9db">;</span> <span style="color: #e7e9db">}</span>
</span>
<span style="background-color: #4f424c">    <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">activeTrack</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">;</span>
</span>
<span style="background-color: #4f424c">    <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">activeTrack</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">audioElement</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">play</span><span style="color: #e7e9db">();</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">}</span> <span style="color: #815ba4">else</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">audioElement</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">pause</span><span style="color: #e7e9db">();</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">}</span>
</span>
<span style="background-color: #4f424c">  <span style="color: #06b6ef">render</span> <span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">user</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">tracks</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">[],</span> <span style="color: #06b6ef">activeTrack</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">onAuth</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">onPlay</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">;</span>
</span>
    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #e7e9db">{</span>
            <span style="color: #06b6ef">user</span> <span style="color: #5bc4bf">?</span>
              <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">user</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">username</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt; :</span>
              <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span> <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">onAuth</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Login</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
          <span style="color: #e7e9db">}</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">br</span><span style="color: #5bc4bf">/&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #e7e9db">{</span>
            <span style="color: #06b6ef">tracks</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">key</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
              <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
                <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">className</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;track&quot;</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">key</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
                  <span style="color: #e7e9db">{</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">origin</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">title</span><span style="color: #e7e9db">}</span>
                  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span> <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span> <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">onPlay</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">track</span><span style="color: #e7e9db">)}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Play</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
                <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
              <span style="color: #e7e9db">);</span>
            <span style="color: #e7e9db">})</span>
          <span style="color: #e7e9db">}</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
        <span style="color: #e7e9db">{</span>
          <span style="color: #06b6ef">activeTrack</span> <span style="color: #5bc4bf">?</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">audio</span> <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;audio&quot;</span> <span style="color: #06b6ef">ref</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;audio&quot;</span> <span style="color: #06b6ef">src</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #48b685">`</span><span style="color: #f99b15">${</span><span style="color: #06b6ef">activeTrack</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">origin</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">stream_url</span><span style="color: #f99b15">}</span><span style="color: #48b685">?client_id=</span><span style="color: #f99b15">${</span><span style="color: #06b6ef">CLIENT_ID</span><span style="color: #f99b15">}</span><span style="color: #48b685">`</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;&lt;</span><span style="color: #ef6155">/audio&gt; :</span>
            <span style="color: #815ba4">null</span>
        <span style="color: #e7e9db">}</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
    <span style="color: #e7e9db">);</span>
<span style="background-color: #4f424c">  <span style="color: #e7e9db">}</span>
</span><span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Stream</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>Let’s start our app again. We login, we see our tracks as a list, we are able to hit the play button, we listen to music! I hope it works for you!</p>

<h2 class="chapter-header" id="whatsNext">What&#39;s next?</h2>

<p>Add one of the following tutorials on top of your current SoundCloud project:</p>

<ul>
<li><a href="../react-eslint-webpack-babel/index.html">React ESLint: Code Style like Airbnb in React</a></li>
<li><a href="../the-soundcloud-client-in-react-redux-flow/index.html">Flow: Type Checking with Flow in React + Redux</a></li>
<li><a href="../the-soundcloud-client-in-react-redux-ducks/index.html">Redux Ducks: Restructure your Redux App with Ducks</a></li>
<li><a href="../the-soundcloud-client-in-react-redux-normalizr/index.html">Redux Normalizr: Improve your State Management</a></li>
<li><a href="../redux-observable-rxjs/index.html">Redux Observable RxJS: Going Epic with Reactive Programming</a></li>
<li><a href="../mobx-react/index.html">MobX React: Simplified State Management in React</a></li>
</ul>

<h2 class="chapter-header" id="troubleshoot">Troubleshoot</h2>

<p>In case you want to know which versions npm installed during that tutorial, here a list of all npm packages in my package.json.</p>

<p><em>package.json</em></p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #48b685">&quot;devDependencies&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
  <span style="color: #48b685">&quot;babel-core&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;^6.23.1&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;babel-loader&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;^6.3.2&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;babel-preset-es2015&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;^6.22.0&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;babel-preset-react&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;^6.23.0&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;babel-preset-stage-2&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;^6.22.0&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;chai&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;^3.5.0&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;enzyme&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;^2.7.1&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;exports-loader&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;^0.6.3&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;imports-loader&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;^0.7.0&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;jsdom&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;^9.11.0&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;mocha&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;^3.2.0&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;react-addons-test-utils&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;^15.4.2&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;react-hot-loader&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;^1.3.1&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;webpack&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;^2.2.1&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;webpack-dev-server&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;^2.4.1&quot;</span>
<span style="color: #e7e9db">},</span>
<span style="color: #48b685">&quot;dependencies&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
  <span style="color: #48b685">&quot;react&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;^15.4.2&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;react-dom&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;^15.4.2&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;react-redux&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;^5.0.2&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;react-router&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;^3.0.2&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;react-router-redux&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;^4.0.8&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;redux&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;^3.6.0&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;redux-logger&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;^3.0.0&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;redux-thunk&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;^2.2.0&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;soundcloud&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;^3.1.2&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;whatwg-fetch&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;^2.0.2&quot;</span>
<span style="color: #e7e9db">}</span>
</code></pre></div>


<h2 class="chapter-header" id="finalThoughts">Final Thoughts</h2>

<p>Hopefully you enjoyed this tutorial and learned a lot like I did. I didn’t plan to write so much in the first place, but I hope at the end it reaches enough people to encourage them to learn something new or simply to setup their own project.</p>

<p>I am open for feedback or bug reports on this tutorial. Please comment directly or reach out on <a target="_blank" rel="noopener noreferrer" href="https://twitter.com/rwieruch">Twitter</a>.</p>

<p>Moreover have a look again at <a target="_blank" rel="noopener noreferrer" href="https://github.com/rwieruch/favesound-redux">favesound-redux</a>. Feel free <a target="_blank" rel="noopener noreferrer" href="http://www.favesound.de/">to try it</a>, to contribute, to raise issues when you find bugs or to use it as blueprint for your own application.</p>

<p>In conclusion keep an eye on that tutorial. I will add more smaller content in the future. Have a look at the next chapter for more information.</p>

<h2 class="chapter-header" id="contribution">Contribute</h2>

<p>I already mentioned it, but feel free to contribute to <a target="_blank" rel="noopener noreferrer" href="https://github.com/rwieruch/favesound-redux">favesound-redux</a>. Get in contact with me, there is plenty of stuff to do and it gives you a start into the open source community.</p>

<p>Moreover I want to extend this tutorial with smaller tutorials on top. Like I explained in <a href="#tutorialExtensions">Tutorial Extensions</a> you can contribute in this <a target="_blank" rel="noopener noreferrer" href="https://github.com/rwieruch/react-redux-soundcloud">repository</a> and add your own folder in there which builds on top of the init folder. In your own folder you can address a new topic. There is a lot of potential!</p>


                            
<div class="feedback-and-share text-center">
    <hr>
    
    <p class="lead">
        I would like to hear your thoughts :-) Find me on <a target="_blank" rel="noopener noreferrer" aria-label="twitter" href="https://twitter.com/rwieruch"><i class="fa fa-twitter"></i>Twitter</a> and <a target="_blank" aria-label="facebook" href="https://www.facebook.com/rwieruch/"><i class="fa fa-facebook"></i>Facebook</a>
    </p>
    
    
        <p class="lead">
            Did the article help you? Share it with your friends on social media <i class="fa fa-arrow-left"></i>, support me as my <a target="_blank" rel="noopener noreferrer" aria-label="patreon" href="https://www.patreon.com/rwieruch"><i class="fa fa-paw"></i>Patron</a>, and become a full-stack developer with my books <i class="fa fa-arrow-down"></i>
        </p>
    
</div>


                            
                                <div class="box-inline col-md-12">
    <div class="col-md-12 text-center">
        <h2 class="newsletter">The Road to learn React</h2>
        
            <div class="col-md-4">
                <img class="img-lazy img-responsive" data-lazy-src="//img/page/cover.png">
            </div>
        
        <p class="lead">
            Build a Hacker News App along the way. No setup configuration. No tooling. No Redux. Plain React in 200+ pages of learning material. Learn React like <strong>50.000+ readers</strong>.
        </p>
        <a
            class="btn btn-template-main"
            href="https://roadtoreact.com"
            target="_blank"
            rel="noopener noreferrer"
        >
            Get the Book for free <i class="fa fa-chevron-right"></i>
        </a>
        
            <div>
                <a
                    href="https://amzn.to/2QY2ONp"
                    target="_blank"
                    rel="noopener noreferrer"
                >
                    Get it from Amazon
                </a>
            </div>
        
    </div>
</div>
                            
                        </div>

                        
                        
                        <div id="comments">
                            <div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'rwieruch';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                        </div>
                        

                    </article>
                    

                </div>
                

            </div>
            
        </div>
        

        

<section class="bar background-image-fixed-2 no-mb color-white text-center">
    <div class="dark-mask"></div>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h3 class="lead">Never miss an article about web development, JavaScript and self-growth.</h3>
                <h2 class="text-uppercase">Take Part</h2>
            </div>

            <div class="col-md-12 text-center">
                
                    <h3 class="lead"><i class="fa fa-check"></i> Join 30.000&#43; Developers</h3>
                
                    <h3 class="lead"><i class="fa fa-check"></i> Learn Web Development with JavaScript</h3>
                
                    <h3 class="lead"><i class="fa fa-check"></i> Tips and Tricks</h3>
                
                    <h3 class="lead"><i class="fa fa-check"></i> Access Tutorials, eBooks and Courses</h3>
                
                    <h3 class="lead"><i class="fa fa-check"></i> Personal Development as a Software Engineer</h3>
                
            </div>
            <div class="col-md-12">
                <p class="text-center">
                    



<div id="mc_embed_signup">
    <form
        action="https://www.getrevue.co/profile/rwieruch/add_subscriber"
        method="post"
        id="revue-form"
        name="revue-form"
        target="_blank">
        <div id="mc_embed_signup_scroll">
            <input
                class="email"
                placeholder="email address"
                type="email"
                name="member[email]"
                id="member_email"
            >
            <div>
                <button
                    type="submit"
                    value="Subscribe"
                    name="member[subscribe]"
                    id="member_submit"
                    class="btn btn-template-transparent-black btn-lg"
                >
                    Subscribe
                </button>
            </div>
        </div>
    </form>
</div>

                </p>
            </div>
        </div>
    </div>
</section>




        <footer id="subfooter">
    <div class="container">

        <div class="col-md-5 col-sm-6">

            <h4>Recent posts</h4>

            <div class="blog-entries">
                
                <div class="item same-height-row clearfix">
                    <div class="article same-height-always">
                        <a href="../redux-vs-usereducer/index.html">
                          
                            <img
                                data-lazy-src="//img/posts/redux-vs-usereducer/banner.jpg"
                                data-is-thumb="is-thumb"
                                class="img-lazy img-responsive"
                                alt="React&#39;s useReducer vs Redux"
                            >
                          
                        </a>
                    </div>
                    <div class="name same-height-always">
                        <h5><a href="../redux-vs-usereducer/index.html">React&#39;s useReducer vs Redux</a></h5>
                    </div>
                </div>
                
                <div class="item same-height-row clearfix">
                    <div class="article same-height-always">
                        <a href="../publish-npm-package-node/index.html">
                          
                            <img
                                data-lazy-src="//img/posts/publish-npm-package-node/banner.jpg"
                                data-is-thumb="is-thumb"
                                class="img-lazy img-responsive"
                                alt="How to publish a npm package?"
                            >
                          
                        </a>
                    </div>
                    <div class="name same-height-always">
                        <h5><a href="../publish-npm-package-node/index.html">How to publish a npm package?</a></h5>
                    </div>
                </div>
                
                <div class="item same-height-row clearfix">
                    <div class="article same-height-always">
                        <a href="../react-scroll-to-item/index.html">
                          
                            <img
                                data-lazy-src="//img/posts/react-scroll-to-item/banner.jpg"
                                data-is-thumb="is-thumb"
                                class="img-lazy img-responsive"
                                alt="How to Scroll to Item in React?"
                            >
                          
                        </a>
                    </div>
                    <div class="name same-height-always">
                        <h5><a href="../react-scroll-to-item/index.html">How to Scroll to Item in React?</a></h5>
                    </div>
                </div>
                
            </div>

            <hr class="hidden-md hidden-lg hidden-sm">

        </div>
        

        
        <div class="col-md-5 col-md-offset-2 col-sm-6">

            <h4>About Me</h4>

            <div class="blog-entries">
                <div class="item same-height-row clearfix">
                    <div class="profile same-height-always">
                        <img
                            class="img-lazy img-responsive"
                            data-lazy-src="//img/page/profile.jpg"
                            alt="profile"
                        >
                    </div>
                    <div class="name same-height-always">
                        <p>
                            Hi, I'm Chris - a German and Remote/Berlin based consulting software engineer. Find out more <a href="../about/index.html">about me</a>, <a href="../work-with-me/index.html">work with me</a>, or have a look at my social media profiles below.
                        </p>
                    </div>
                </div>
            </div>

        </div>
        
        

    </div>
    
</footer>






        <footer id="copyright">
  <div class="container">
    <div class="row">
      <div class="col-md-4">
        <ul class="info list-inline quicklinks pull-left">
          
            <li>© Chris Paul</li>
          
        </ul>
      </div>
      <div class="col-md-4">
        <ul class="list-inline footer-social-buttons text-center">
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.twitter.com/rwieruch"><i class="fa fa-twitter"></i></a></li>
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.github.com/rwieruch"><i class="fa fa-github"></i></a></li>
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.linkedin.com/in/chris-wieruch-971933a6"><i class="fa fa-linkedin"></i></a></li>
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.producthunt.com/@rwieruch"><i class="fa fa-product-hunt"></i></a></li>
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.patreon.com/rwieruch"><i class="fa fa-paw"></i></a></li>
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.paypal.me/rwieruch"><i class="fa fa-paypal"></i></a></li>
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.facebook.com/rwieruch"><i class="fa fa-facebook"></i></a></li>
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.instagram.com/rwieruch/"><i class="fa fa-instagram"></i></a></li>
          
        </ul>
      </div>
      <div class="col-md-4">
        <ul class="info list-inline quicklinks pull-right">
          
            <li><a aria-label="quicklinks" href="../legal/index.html">Legal Notice</a></li>
          
        </ul>
      </div>
    </div>
  </div>
</footer>


    </div>
    


<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>









<script src="../js/script.js"></script>



  </body>
</html>
