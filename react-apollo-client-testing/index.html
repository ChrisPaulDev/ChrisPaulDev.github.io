<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta name="viewport" content="width=device-width, initial-scale=1">



  <title>
    Writing Tests for Apollo Client in React - CPaul
  </title>

  <meta name="author" content="" />
  <meta name="description"
    content="The tutorial builds up on a mocked GraphQL API enabling you to write tests for your Apollo Client queries and mutations in React. It answers the question: How to test Apollo Client in React ...">


  <meta name="theme-color" content="#38bb6c" />

  <meta name="generator" content="Hugo 0.41" />
  <link href="https://cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
  <link href="../css/bootstrap.default.css" rel="stylesheet" id="theme-stylesheet">
  <link href="../css/customizations.css" rel="stylesheet">

  <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

  <link rel="shortcut icon" href="../img/favicon/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="../img/favicon/apple-touch-icon.png" />
  <link rel="manifest" href="../img/favicon/manifest.json">
  <link rel="mask-icon" href="../img/favicon/safari-pinned-tab.svg" color="#5bbad5">

  <link rel="alternate" href="../index.xml" type="application/rss+xml" title="CPaul">

  <meta itemprop="name" content="Writing Tests for Apollo Client in React">
  <meta itemprop="description"
    content="The tutorial builds up on a mocked GraphQL API enabling you to write tests for your Apollo Client queries and mutations in React. It answers the question: How to test Apollo Client in React ...">
  <meta itemprop="image" content="https://chrispaul.dev/img/posts/react-apollo-client-testing/banner_640.jpg">
  <meta itemprop="keywords"
    content="angular,apollo,d3,graphql,growth,javascript,machine-learning,mobx,node,react,reason,redux,tooling,vue,web-development,angular,apollo,d3,graphql,growth,javascript,machine-learning,mobx,node,react,reason,redux,tooling,web-development," />


  <meta itemprop="wordCount" content="3466">

  <meta name="keywords"
    content="apollo client test, apollo client testing, apollo client query test, apollo client mutation test, apollo client react test">

  <meta property="og:title" content="Writing Tests for Apollo Client in React - CPaul">


  <meta property="og:description"
    content="The tutorial builds up on a mocked GraphQL API enabling you to write tests for your Apollo Client queries and mutations in React. It answers the question: How to test Apollo Client in React ..." />


  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://chrispaul.dev/react-apollo-client-testing/" />
  <meta property="og:image" content="https://chrispaul.dev/img/posts/react-apollo-client-testing/banner_640.jpg" />



  <meta name="news_keywords"
    content="apollo client test,apollo client testing,apollo client query test,apollo client mutation test,apollo client react test" />



  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:image:src" content="https://chrispaul.dev/img/posts/react-apollo-client-testing/banner_640.jpg" />
  <meta name="twitter:title" content="Writing Tests for Apollo Client in React" />
  <meta name="twitter:description"
    content="The tutorial builds up on a mocked GraphQL API enabling you to write tests for your Apollo Client queries and mutations in React. It answers the question: How to test Apollo Client in React ..." />
  <meta name="twitter:site" content="@rwieruch" />
  <meta name="twitter:domain" content="rwieruch" />



</head>


<body>

  <div id="all">

    <header>

      <div class="navbar-affixed-top" data-spy="affix" data-offset-top="200">

        <div class="navbar navbar-default yamm" role="navigation" id="navbar">

          <div class="container">
            <div class="navbar-header">
              <a class="navbar-brand home" href="../index.html">
                <img src="../img/page/logo.svg" alt="Writing Tests for Apollo Client in React logo" class="img-lazy">
                <span class="sr-only">Writing Tests for Apollo Client in React - go to homepage</span>
              </a>

              <div class="navbar-buttons">
                <button type="button" class="navbar-toggle btn-template-main" data-toggle="collapse"
                  data-target="#navigation">
                  <span class="sr-only">Toggle navigation</span>
                  <i class="fa fa-align-justify"></i>
                </button>
              </div>
            </div>


            <div class="navbar-collapse collapse" id="navigation">
              <ul class="nav navbar-nav navbar-right">

                <li class="dropdown">

                  <a href="../index.html">Blog</a>

                </li>

                <li class="dropdown">

                  <a href="../work-with-me/index.html">Work with me</a>

                </li>

                <li class="dropdown">

                  <a href="../about/index.html">About</a>

                </li>

                <li class="dropdown">

                  <a style="color: #38bb6c" href="https://roadtoreact.com/">Books &amp; Courses</a>

                </li>

              </ul>
            </div>


            <div class="collapse clearfix" id="search">

              <form class="navbar-form" role="search">
                <div class="input-group">
                  <input type="text" class="form-control" placeholder="Search">
                  <span class="input-group-btn">

                    <button type="submit" class="btn btn-template-main"><i class="fa fa-search"></i></button>

                  </span>
                </div>
              </form>

            </div>


          </div>
        </div>


      </div>
    </header>

    

    



    <div class="hidden-xs">


      <section class="bar background-image-fixed-2 no-mb color-white text-center">
        <div class="dark-mask"></div>
        <div class="container">
          <div class="row">
            <div class="col-md-12">
              <h3 class="lead">Never miss an article about web development, JavaScript and self-growth.</h3>
              <h2 class="text-uppercase newsletter">Take Part</h2>
            </div>

            <div class="col-md-12">
              <p class="text-center">
                <div id="mc_embed_signup">
                  <form action="https://www.getrevue.co/profile/rwieruch/add_subscriber" method="post" id="revue-form"
                    name="revue-form" target="_blank">
                    <div id="mc_embed_signup_scroll">
                      <input class="email" placeholder="email address" type="email" name="member[email]"
                        id="member_email">
                      <div>
                        <button type="submit" value="Subscribe" name="member[subscribe]" id="member_submit"
                          class="btn btn-template-transparent-black btn-lg">
                          Subscribe
                        </button>
                      </div>
                    </div>
                  </form>
                </div>

              </p>
            </div>
          </div>
        </div>
      </section>
    </div>

    <div id="content">
      <div class="container">

        <div class="row">

          <article class="col-md-8 col-md-offset-2" id="blog-post" itemprop="blogPosts" itemscope
            itemtype="http://schema.org/BlogPosting">

            <div id="post-content" itemprop="articleBody">

              <header>
                <h1 itemprop="name headline">Writing Tests for Apollo Client in React</h1>
              </header>

              

              <p class="text-muted text-uppercase mb-small text-center">
                <span itemprop="author publisher">

                </span>


                <time datetime="2018-10-19" itemprop="datePublished">
                  October 19, 2018
                </time>



                <span class="hidden-xs hidden-sm"> - <a target="_blank" rel="noopener noreferrer"
                    href="https://github.com/rwieruch/blog_chriswieruch_content/blob/master/react-apollo-client-testing.md">
                    Edit this Post on GitHub
                  </a>
                </span>

              </p>

              <div>


              </div>

              <div class="post-image-primary">
                <div class="pinterest-pinner-wrapper" itemscope itemtype="http://schema.org/ImageObject">
                  <div class="pinterest-pinner">
                    <a data-pin-do="buttonPin" data-pin-save="true" data-pin-tall="true"
                      href="https://www.pinterest.com/pin/create/button/?url=https%3a%2f%2fchrispaul.dev%2freact-apollo-client-testing%2f&amp;media=https://chrispaul.dev/img%2fposts%2freact-apollo-client-testing%2fbanner.jpg&amp;description=">
                    </a>
                  </div>

                  <img class="img-lazy img-responsive"
                    data-lazy-src="/src="/img/posts/react-apollo-client-testing/banner.jpg" data-is-src-set="is-src-set"
                    alt="apollo client test react" itemprop="image" />
                </div>
              </div>


              <p>
                <em>
                  Interested in reading this tutorial as one of many chapters in my GraphQL book? Checkout the entire <a
                    href="https://roadtoreact.com">The Road to GraphQL</a> book that teaches you to become a fullstack
                  developer with JavaScript.
                </em>
              </p>

              <div class="read-before">
                <p>This tutorial is part 3 of 3 in this series.</p>
                <div>Part 1: <a href="../react-apollo-client-example/index.html" itemprop="url">A minimal Apollo Client
                    in React Application</a></div>
                <div>Part 2: <a href="../graphql-server-mock-apollo-client/index.html" itemprop="url">Mocking a GraphQL
                    Server for Apollo Client</a></div>
              </div>

              <p>In a previous application, you have learned how to mock a GraphQL server in different ways when having
                Apollo Client as GraphQL client in your React application. The following application shows you how you
                can take this knowledge to the next level for writing tests for your Apollo Client queries and
                mutations. So far, the Apollo Client instance can be mocked, but one unsolved question keeps popping up:
                How to test Apollo Client in a React application?</p>

              <h2 class="chapter-header" id="apollo-client-mock">Separation of Apollo Client and Mock Client</h2>

              <p>If you have the previous application with the mocked Apollo Client at your disposal, you can start
                writing tests with it. Otherwise, you find the application with the mocking of the Apollo Client in this
                <a target="_blank" rel="noopener noreferrer"
                  href="https://github.com/rwieruch/apollo-client-mocking-example">GitHub repository</a>. Let&rsquo;s
                start to separate both concerns, the actual Apollo Client and the mocked Apollo Client, before using the
                former for the actual application and the latter for testing the application. The Apollo Client setup
                for the React application can be done in a couple of steps for the GitHub client application:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">ApolloClient</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;apollo-client&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">HttpLink</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;apollo-link-http&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">InMemoryCache</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;apollo-cache-inmemory&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">cache</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">new</span> <span style="color: #06b6ef">InMemoryCache</span><span style="color: #e7e9db">();</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">GITHUB_BASE_URL</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">&#39;https://api.github.com/graphql&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">httpLink</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">new</span> <span style="color: #06b6ef">HttpLink</span><span style="color: #e7e9db">({</span>
  <span style="color: #06b6ef">uri</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">GITHUB_BASE_URL</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">headers</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">authorization</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">`Bearer </span><span style="color: #f99b15">${</span>
      <span style="color: #06b6ef">process</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">env</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">REACT_APP_GITHUB_PERSONAL_ACCESS_TOKEN</span>
    <span style="color: #f99b15">}</span><span style="color: #48b685">`</span><span style="color: #e7e9db">,</span>
  <span style="color: #e7e9db">},</span>
<span style="color: #e7e9db">});</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #815ba4">new</span> <span style="color: #06b6ef">ApolloClient</span><span style="color: #e7e9db">({</span>
  <span style="color: #06b6ef">link</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">httpLink</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">cache</span><span style="color: #e7e9db">,</span>
<span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>Afterward, the Apollo Client instance can be imported in your React root component for using it in
                React Apollo&rsquo;s Provider component:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">ReactDOM</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-dom&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">ApolloProvider</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-apollo&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">import</span> <span style="color: #06b6ef">App</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./App&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">client</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./client&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #06b6ef">ReactDOM</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">render</span><span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ApolloProvider</span> <span style="color: #06b6ef">client</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">client</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">App</span> <span style="color: #5bc4bf">/&gt;</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ApolloProvider&gt;,</span>
  <span style="color: #e7e9db">document.</span><span style="color: #06b6ef">getElementById</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;root&#39;</span><span style="color: #e7e9db">),</span>
<span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>That&rsquo;s the part for the actual application. So what about the mocked Apollo Client from the
                previous application? You can implement it in another file which is only used by your tests later on.
              </p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">ApolloClient</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;apollo-client&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">InMemoryCache</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;apollo-cache-inmemory&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">SchemaLink</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;apollo-link-schema&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">makeExecutableSchema</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;graphql-tools&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">schema</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">resolvers</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./schema&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">cache</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">new</span> <span style="color: #06b6ef">InMemoryCache</span><span style="color: #e7e9db">();</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">executableSchema</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">makeExecutableSchema</span><span style="color: #e7e9db">({</span>
  <span style="color: #06b6ef">typeDefs</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">schema</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">resolvers</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">resolverValidationOptions</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">requireResolversForResolveType</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">false</span><span style="color: #e7e9db">,</span>
  <span style="color: #e7e9db">},</span>
<span style="color: #e7e9db">});</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #815ba4">new</span> <span style="color: #06b6ef">ApolloClient</span><span style="color: #e7e9db">({</span>
  <span style="color: #06b6ef">link</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">new</span> <span style="color: #06b6ef">SchemaLink</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">schema</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">executableSchema</span> <span style="color: #e7e9db">}),</span>
  <span style="color: #06b6ef">cache</span><span style="color: #e7e9db">,</span>
<span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>In this case, a client-side schema is used (and no GraphQL introspection) to define the executable
                GraphQL schema with its resolvers. Whereas the resolvers deliver all the mock data for your tests, the
                schema itself defines all the GraphQL types and their structure. You have implemented both, client-side
                schema and resolvers, in the previous application where you have mocked the Apollo Client.</p>

              <p>Now you have an actual Apollo Client instance for your application in one file and the mocked Apollo
                Client in another file. The latter should be used in the following sections for testing your interaction
                between React and the mocked Apollo Client.</p>

              <p>Since the application is set up with create-react-app, it already comes with Jest as testing framework.
                Jest can be used as test runner and assertion library at the same time. You can read more about it in
                this <a href="../react-testing-tutorial/index.html">comprehensive React testing tutorial</a> which
                covers <a target="_blank" rel="noopener noreferrer" href="https://facebook.github.io/jest">Jest</a> but
                also other libraries such as <a target="_blank" rel="noopener noreferrer"
                  href="http://sinonjs.org">Sinon</a> and <a target="_blank" rel="noopener noreferrer"
                  href="https://github.com/airbnb/enzyme">Enzyme</a>, which you are going to use in the following
                sections, for React applications. In order to have access to Enzyme and Sinon next to Jest, you have to
                install them as development dependencies to your project.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #06b6ef">enzyme</span> <span style="color: #06b6ef">enzyme</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">adapter</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">react</span><span style="color: #5bc4bf">-</span><span style="color: #f99b15">16</span> <span style="color: #06b6ef">sinon</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">dev</span>
</code></pre>
              </div>


              <p>So what are these libraries, Enzyme and Sinon, including Jest doing for us to test a React application
                with Apollo Client?</p>

              <ul>
                <li><strong>Jest</strong>: Since this application already comes with Jest, Jest is used as test runner
                  (e.g. tests can be started from the command line, tests can be grouped in test suites and test cases)
                  and assertion library (e.g. making expectations such as &ldquo;to equal&rdquo; or &ldquo;to be&rdquo;
                  between result and expected result).</li>
                <li><strong>Enzyme</strong>: The library is used for rendering React components in tests. Afterward,
                  components rendered by Enzyme have an API to access them (e.g. find all input HTML nodes in the
                  component) to conduct assertions with them. In addition, it is possible to simulate events such as a
                  click on a button element or writing in an input element.</li>
                <li><strong>Sinon</strong>: The library is used to spy, stub and mock functions. It is often used to
                  make expectations on how many times a function is called, with which arguments a function is called or
                  to return dummy output from a stubbed/mocked function.</li>
              </ul>

              <p>Before you can start with using Enzyme in your Jest test files (by default all files which end with the
                <em>test.js</em> suffix are executed as tests by the Jest test runner), you have to setup Enzyme with
                the recent React version. You can do this in a separate file which you only have to import once in your
                test files. As alternative, you can do the Enzyme setup in your test files too.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">Adapter</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;enzyme-adapter-react-16&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">configure</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;enzyme&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #06b6ef">configure</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">adapter</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">new</span> <span style="color: #06b6ef">Adapter</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>Now you are ready to write your tests with Jest, Enzyme and Sinon for your React components which are
                using Apollo Client for GraphQL queries and mutations. In case of the tests, it will be the mocked
                Apollo Client and not the actual Apollo Client connecting to the real API.</p>

              <h2 class="chapter-header" id="apollo-client-test-mutation">Testing a Apollo Client Mutation in React</h2>

              <p>If you continued with the previous application, most of your React component implementation should be
                in the <em>src/App.js</em> file. So what about writing the tests for a couple of its React components in
                a <em>src/App.test.js</em> file next to it? In the following, you will test the execution of a GraphQL
                mutation which is conducted with the mocked Apollo Client. In your <em>src/App.js</em> file, the Star
                component is a perfect candidate to be tested in isolation. It only receives an identifier as prop which
                is used for the GraphQL mutation when clicking the button in the component at some point. In order to
                make the component accessible in other files (e.g. test file), you have to export it. Along with it you
                have to export the mutation to make assertions with it in your test file.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">Star</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">id</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Mutation</span> <span style="color: #06b6ef">mutation</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">STAR_REPOSITORY</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">variables</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{{</span> <span style="color: #06b6ef">id</span> <span style="color: #e7e9db">}}</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">starRepository</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span> <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span> <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">starRepository</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #06b6ef">Star</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
    <span style="color: #e7e9db">)}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Mutation&gt;</span>
<span style="color: #e7e9db">);</span>

<span style="color: #e7e9db">...</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">export</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Star</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">STAR_REPOSITORY</span> <span style="color: #e7e9db">};</span>
</span>
<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Now comes the exciting part: writing a test for a GraphQL mutation. In your <em>src/App.test.js</em>
                file, import all the parts which are needed for the testing. If you are wondering about the
                <em>src/test/setup.js</em> file, it is the part where you had to set up Enzyme with its adapter to React
                from the previous section.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">import</span> <span style="color: #48b685">&#39;./test/setup&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">Star</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">STAR_REPOSITORY</span><span style="color: #e7e9db">,</span>
<span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./App&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;Star&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;calls the mutate method on Apollo Client&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>

  <span style="color: #e7e9db">});</span>
<span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>Now you can use the mocked Apollo Client instance and React Apollo&rsquo;s Provider component to render
                the Star component with Enzyme.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">ApolloProvider</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-apollo&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">mount</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;enzyme&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #815ba4">import</span> <span style="color: #48b685">&#39;./test/setup&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">clientMock</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./test/client-mock&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">Star</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">STAR_REPOSITORY</span><span style="color: #e7e9db">,</span>
<span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./App&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;Star&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;calls the mutate method on Apollo Client&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">wrapper</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">mount</span><span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ApolloProvider</span> <span style="color: #06b6ef">client</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">clientMock</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Star</span> <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #48b685">&#39;1&#39;</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span>
</span><span style="background-color: #4f424c">      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ApolloProvider&gt;,</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">});</span>
</span><span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>If you revisit your resolvers where you have set up all the mocked data in the previous application, it
                should have a repository with the <code>id</code> property, because this is the repository you are going
                to star in the test.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;Star&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;calls the mutate method on Apollo Client&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">wrapper</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">mount</span><span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ApolloProvider</span> <span style="color: #06b6ef">client</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">clientMock</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Star</span> <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #48b685">&#39;1&#39;</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ApolloProvider&gt;,</span>
    <span style="color: #e7e9db">);</span>

<span style="background-color: #4f424c">    <span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">find</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;button&#39;</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">simulate</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;click&#39;</span><span style="color: #e7e9db">);</span>
</span>  <span style="color: #e7e9db">});</span>
<span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>The mutation should be called by Apollo Client in the test now. If you are not sure about what&rsquo;s
                happening when clicking the button, check again the Star component. But how do you find out that the
                mutation is actually executed in your test? That&rsquo;s where Sinon comes into play to spy methods of
                your Apollo Client instance.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">ApolloProvider</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-apollo&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">mount</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;enzyme&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">spy</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;sinon&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #e7e9db">...</span>

<span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;Star&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;calls the mutate method on Apollo Client&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">    <span style="color: #06b6ef">spy</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">clientMock</span><span style="color: #e7e9db">,</span> <span style="color: #48b685">&#39;mutate&#39;</span><span style="color: #e7e9db">);</span>
</span>
    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">wrapper</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">mount</span><span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ApolloProvider</span> <span style="color: #06b6ef">client</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">clientMock</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Star</span> <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #48b685">&#39;1&#39;</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ApolloProvider&gt;,</span>
    <span style="color: #e7e9db">);</span>

    <span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">find</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;button&#39;</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">simulate</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;click&#39;</span><span style="color: #e7e9db">);</span>

<span style="background-color: #4f424c">    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">clientMock</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">mutate</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">calledOnce</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">toEqual</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">true</span><span style="color: #e7e9db">);</span>
</span>
<span style="background-color: #4f424c">    <span style="color: #06b6ef">clientMock</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">mutate</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">restore</span><span style="color: #e7e9db">();</span>
</span>  <span style="color: #e7e9db">});</span>
<span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>The spy on the <code>mutate()</code> method on the Apollo Client instance wraps the method itself into
                a testable function. That&rsquo;s why it has the <code>calledOnce</code> property at its disposal to
                conduct assertions with it. So basically after clicking the button, you want to assert that the mutation
                was executed once by the mocked Apollo Client. Afterward, you remove the spy again with the
                <code>restore()</code> method on the spied method for leaving your tests without any footprint. Once you
                run your tests with <code>npm test</code>, it should give you a green output for the previous test.
                That&rsquo;s basically it for testing a GraphQL mutation which is executed by Apollo Client. Since
                Apollo Client itself is tested by the Apollo Client package, you can be assured that the executed method
                reaches the network and thus your GraphQL API eventually.</p>

              <p>But the testing doesn&rsquo;t stop here. Since you have used a spy on the <code>mutate()</code> method
                of the Apollo Client which result in a network request eventually, you can use the spy to make further
                assertions. Basically you have access to all the props which you have passed to the Mutation component
                in the arguments of the call of the spy.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;Star&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;calls the mutate method on Apollo Client&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">spy</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">clientMock</span><span style="color: #e7e9db">,</span> <span style="color: #48b685">&#39;mutate&#39;</span><span style="color: #e7e9db">);</span>

    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">wrapper</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">mount</span><span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ApolloProvider</span> <span style="color: #06b6ef">client</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">clientMock</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Star</span> <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #48b685">&#39;1&#39;</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ApolloProvider&gt;,</span>
    <span style="color: #e7e9db">);</span>

    <span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">find</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;button&#39;</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">simulate</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;click&#39;</span><span style="color: #e7e9db">);</span>

    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">clientMock</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">mutate</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">calledOnce</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">toEqual</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">true</span><span style="color: #e7e9db">);</span>

<span style="background-color: #4f424c">    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">clientMock</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">mutate</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">getCall</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">0</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">args</span><span style="color: #e7e9db">[</span><span style="color: #f99b15">0</span><span style="color: #e7e9db">].</span><span style="color: #06b6ef">variables</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">toEqual</span><span style="color: #e7e9db">({</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;1&#39;</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">});</span>
</span>
<span style="background-color: #4f424c">    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">clientMock</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">mutate</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">getCall</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">0</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">args</span><span style="color: #e7e9db">[</span><span style="color: #f99b15">0</span><span style="color: #e7e9db">].</span><span style="color: #06b6ef">mutation</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">toEqual</span><span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">STAR_REPOSITORY</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">);</span>
</span>
    <span style="color: #06b6ef">clientMock</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">mutate</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">restore</span><span style="color: #e7e9db">();</span>
  <span style="color: #e7e9db">});</span>
<span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>That&rsquo;s it for testing the GraphQL mutation in Apollo Client in a React application. In the next
                section, you will test a GraphQL query. There you will also see how the result of the GraphQL operation
                can be tested. Since the mutation result from this section wasn&rsquo;t used in the Star component, it
                wasn&rsquo;t necessary to test it.</p>

              <h2 class="chapter-header" id="apollo-client-test-query">Testing a Apollo Client Query in React</h2>

              <p>This time you are going to test the App component itself which queries a list of items (repositories).
                The list of items is defined as mocked data in your client-side resolvers which are used for the mocked
                Apollo Client. Therefore, make sure the App component is exported from the <em>src/App.js</em> file,
                which should already be there with a default export, along with its query, which is used in the Query
                component, to make them accessible for your test file.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">App</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Query</span> <span style="color: #06b6ef">query</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">GET_REPOSITORIES_OF_ORGANIZATION</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">{({</span> <span style="color: #06b6ef">data</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">organization</span> <span style="color: #e7e9db">},</span> <span style="color: #06b6ef">loading</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
      <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">loading</span> <span style="color: #5bc4bf">||</span> <span style="color: #5bc4bf">!</span><span style="color: #06b6ef">organization</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
        <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Loading</span> <span style="color: #e7e9db">...</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;;</span>
      <span style="color: #e7e9db">}</span>

      <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Repositories</span> <span style="color: #06b6ef">repositories</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">organization</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span>
      <span style="color: #e7e9db">);</span>
    <span style="color: #e7e9db">}}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Query&gt;</span>
<span style="color: #e7e9db">);</span>

<span style="color: #e7e9db">...</span>

<span style="color: #815ba4">export</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">Star</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">STAR_REPOSITORY</span><span style="color: #e7e9db">,</span>
<span style="background-color: #4f424c">  <span style="color: #06b6ef">GET_REPOSITORIES_OF_ORGANIZATION</span><span style="color: #e7e9db">,</span>
</span><span style="color: #e7e9db">};</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>In your <em>src/App.test.js</em> file, import these things and create a new test suite with two test
                cases. Whereas the former test case is similar to the mutation test case from before, the latter test
                case should make an assertion about the rendered component after the queried (mocked) data arrived and
                thus is used to display something with it.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span>
</span>  <span style="color: #06b6ef">Star</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">STAR_REPOSITORY</span><span style="color: #e7e9db">,</span>
<span style="background-color: #4f424c">  <span style="color: #06b6ef">GET_REPOSITORIES_OF_ORGANIZATION</span><span style="color: #e7e9db">,</span>
</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./App&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;Star&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">...</span>
<span style="color: #e7e9db">});</span>

<span style="background-color: #4f424c"><span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;App&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;calls the query method on Apollo Client&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">});</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;renders correctly after the query method on Apollo Client executed&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">});</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">});</span>
</span></code></pre>
              </div>


              <p>The former test case for the query is similar to the mutation test case and thus can be tested in a
                similar way:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;App&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;calls the query method on Apollo Client&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">    <span style="color: #06b6ef">spy</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">clientMock</span><span style="color: #e7e9db">,</span> <span style="color: #48b685">&#39;watchQuery&#39;</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">wrapper</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">mount</span><span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ApolloProvider</span> <span style="color: #06b6ef">client</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">clientMock</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">App</span> <span style="color: #5bc4bf">/&gt;</span>
</span><span style="background-color: #4f424c">      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ApolloProvider&gt;,</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">clientMock</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">watchQuery</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">calledOnce</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">toEqual</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">true</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">clientMock</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">watchQuery</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">getCall</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">0</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">args</span><span style="color: #e7e9db">[</span><span style="color: #f99b15">0</span><span style="color: #e7e9db">].</span><span style="color: #06b6ef">query</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">toEqual</span><span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">GET_REPOSITORIES_OF_ORGANIZATION</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">clientMock</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">watchQuery</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">restore</span><span style="color: #e7e9db">();</span>
</span>  <span style="color: #e7e9db">});</span>

  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;renders correctly after the query method on Apollo Client executed&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>

  <span style="color: #e7e9db">});</span>
<span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>Internally in Apollo Client, not the <code>query()</code> method is called, but the
                <code>watchQuery()</code> method. Hence you have to spy this method for making assertions on it. Once
                you start your tests again, they should turn out to be green. So what about the second test case?</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;App&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;calls the query method on Apollo Client&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">...</span>
  <span style="color: #e7e9db">});</span>

  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;renders correctly after the query method on Apollo Client executed&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">wrapper</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">mount</span><span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ApolloProvider</span> <span style="color: #06b6ef">client</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">clientMock</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">App</span> <span style="color: #5bc4bf">/&gt;</span>
</span><span style="background-color: #4f424c">      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ApolloProvider&gt;,</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">wrapper</span>
</span><span style="background-color: #4f424c">        <span style="color: #e7e9db">.</span><span style="color: #06b6ef">find</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;Repositories&#39;</span><span style="color: #e7e9db">)</span>
</span><span style="background-color: #4f424c">        <span style="color: #e7e9db">.</span><span style="color: #06b6ef">find</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;RepositoryList&#39;</span><span style="color: #e7e9db">)</span>
</span><span style="background-color: #4f424c">        <span style="color: #e7e9db">.</span><span style="color: #06b6ef">find</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;li&#39;</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">length</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">).</span><span style="color: #06b6ef">toEqual</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">2</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">find</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;Repositories&#39;</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">().</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">edges</span><span style="color: #e7e9db">[</span><span style="color: #f99b15">0</span><span style="color: #e7e9db">].</span><span style="color: #06b6ef">node</span>
</span><span style="background-color: #4f424c">        <span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">).</span><span style="color: #06b6ef">toEqual</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;1&#39;</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">find</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;Repositories&#39;</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">().</span><span style="color: #06b6ef">repositories</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">edges</span><span style="color: #e7e9db">[</span><span style="color: #f99b15">1</span><span style="color: #e7e9db">].</span><span style="color: #06b6ef">node</span>
</span><span style="background-color: #4f424c">        <span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">).</span><span style="color: #06b6ef">toEqual</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;2&#39;</span><span style="color: #e7e9db">);</span>
</span>  <span style="color: #e7e9db">});</span>
<span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>The second test case differs from the previous query test and the mutation test too. Yet it isn&rsquo;t
                any more spectacular. It could have been conducted for the mutation as well, but there was no result
                used from the GraphQL mutation after executing the mutation in the first place. However, the test
                verifies for you whether everything is rendered accordingly to the mocked query result from the Query
                component&rsquo;s child function. Since the resolver returns two repositories, you can test the rendered
                HTML elements and the props that are passed to child components. The final application can be found in
                this <a target="_blank" rel="noopener noreferrer"
                  href="https://github.com/rwieruch/react-apollo-client-testing-example">GitHub repository</a>.</p>

              <h2 class="chapter-header" id="apollo-client-testing-utilities">Apollo Client Testing Utilities</h2>

              <p>Whereas the previous application has shown you how to mock Apollo Client for your GraphQL server, the
                last two sections have shown you how to write tests for your React components which are using the Query
                and Mutation components from React Apollo. In the case of the GraphQL query, you have tested both: the
                query itself and the query result. Most of the time the shown testing patterns should be sufficient.
                Nevertheless, this section shows you a couple of additional techniques which you can use to test your
                GraphQL operations in React.</p>

              <h3 id="fetch-api-stub">Stubbing the fetch API</h3>

              <p>If you are not able to create a mock for your GraphQL server, you can intercept the actual request made
                by your Apollo Client instance and stub the result instead. At this time, Apollo Client is using the <a
                  target="_blank" rel="noopener noreferrer"
                  href="https://developer.mozilla.org/en/docs/Web/API/Fetch_API">native fetch API</a> as default to
                conduct HTTP requests under the hood. That&rsquo;s why you can use it as your advantage to stub the
                fetch API with Sinon. The following code snippets demonstrate how it could work:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">sinon</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;sinon&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">print</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;graphql/language/printer&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">mockData</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">[</span>
  <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;1&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">title</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;Foo&#39;</span> <span style="color: #e7e9db">},</span>
  <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;2&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">title</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;Bar&#39;</span> <span style="color: #e7e9db">},</span>
<span style="color: #e7e9db">];</span>
<span style="color: #815ba4">const</span> <span style="color: #06b6ef">uri</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">&#39;https://api.github.com/graphql&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #776e71">// Promise implementation for a returned result from the fetch API</span>
<span style="color: #815ba4">const</span> <span style="color: #06b6ef">promise</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">Promise.</span><span style="color: #06b6ef">resolve</span><span style="color: #e7e9db">({</span>
  <span style="color: #06b6ef">text</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">Promise.</span><span style="color: #06b6ef">resolve</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">JSON</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">stringify</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">data</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">mockData</span> <span style="color: #e7e9db">})),</span>
<span style="color: #e7e9db">});</span>

<span style="color: #06b6ef">sinon</span>
  <span style="color: #e7e9db">.</span><span style="color: #06b6ef">stub</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">global</span><span style="color: #e7e9db">,</span> <span style="color: #48b685">&#39;fetch&#39;</span><span style="color: #e7e9db">)</span>
  <span style="color: #e7e9db">.</span><span style="color: #06b6ef">withArgs</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">uri</span><span style="color: #e7e9db">)</span>
  <span style="color: #e7e9db">.</span><span style="color: #06b6ef">returns</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">promise</span><span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>That&rsquo;s basically your test setup for stubbing your GraphQL API endpoint and having control over
                the returned data by having a promise in place. Then it should be possible to resolve the promise in
                your test and expect the correct data from the stubbed fetch API.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">test</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;query result of Query component&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">done</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #776e71">// using the real Apollo Client instance</span>
  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">wrapper</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">mount</span><span style="color: #e7e9db">(</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ApolloProvider</span> <span style="color: #06b6ef">client</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">client</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">App</span> <span style="color: #5bc4bf">/&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ApolloProvider&gt;,</span>
  <span style="color: #e7e9db">);</span>

  <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">find</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;[data-test-id=&quot;loading&quot;]&#39;</span><span style="color: #e7e9db">)).</span><span style="color: #06b6ef">toHaveLength</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">1</span><span style="color: #e7e9db">);</span>

  <span style="color: #06b6ef">promise</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">().</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">setImmediate</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">update</span><span style="color: #e7e9db">();</span>

      <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">find</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;li&#39;</span><span style="color: #e7e9db">)).</span><span style="color: #06b6ef">toHaveLength</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">2</span><span style="color: #e7e9db">);</span>

      <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">find</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;li&#39;</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">at</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">0</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">text</span><span style="color: #e7e9db">())</span>
        <span style="color: #e7e9db">.</span><span style="color: #06b6ef">toEqual</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">mockData</span><span style="color: #e7e9db">[</span><span style="color: #f99b15">0</span><span style="color: #e7e9db">].</span><span style="color: #06b6ef">title</span><span style="color: #e7e9db">);</span>

      <span style="color: #06b6ef">done</span><span style="color: #e7e9db">();</span>
    <span style="color: #e7e9db">});</span>
  <span style="color: #e7e9db">});</span>
<span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>This way, you are able to stub your GraphQL query, but also get more fine-grained control over the
                resolving promise(s) and the different rendering states (e.g. loading, finish) of your React component.
                You can even stub your request more fine-grained by providing the arguments that are expected in the
                native fetch API request when using Apollo Client.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">sinon</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;sinon&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">print</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;graphql/language/printer&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">mockData</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">[</span>
  <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;1&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">title</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;Foo&#39;</span> <span style="color: #e7e9db">},</span>
  <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;2&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">title</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;Bar&#39;</span> <span style="color: #e7e9db">},</span>
<span style="color: #e7e9db">];</span>
<span style="color: #815ba4">const</span> <span style="color: #06b6ef">uri</span> <span style="color: #5bc4bf">=</span> <span style="color: #48b685">&#39;https://api.github.com/graphql&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">mockInput</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">query</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">print</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">GET_REPOSITORIES_OF_ORGANIZATION</span><span style="color: #e7e9db">),</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">};</span>
</span>
<span style="color: #815ba4">const</span> <span style="color: #06b6ef">promise</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">Promise.</span><span style="color: #06b6ef">resolve</span><span style="color: #e7e9db">({</span>
  <span style="color: #06b6ef">text</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">Promise.</span><span style="color: #06b6ef">resolve</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">JSON</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">stringify</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">data</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">mockData</span> <span style="color: #e7e9db">})),</span>
<span style="color: #e7e9db">});</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">args</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">method</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;POST&#39;</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">headers</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">accept</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;*/*&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #48b685">&#39;content-type&#39;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;application/json&#39;</span> <span style="color: #e7e9db">},</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">credentials</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">undefined</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">body</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">JSON</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">stringify</span><span style="color: #e7e9db">({</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">operationName</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">mockInput</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">operationName</span> <span style="color: #5bc4bf">||</span> <span style="color: #815ba4">null</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">variables</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">mockInput</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">variables</span> <span style="color: #5bc4bf">||</span> <span style="color: #e7e9db">{},</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">query</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">print</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">mockInput</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">query</span><span style="color: #e7e9db">),</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">}),</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">};</span>
</span>
<span style="color: #06b6ef">sinon</span>
  <span style="color: #e7e9db">.</span><span style="color: #06b6ef">stub</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">global</span><span style="color: #e7e9db">,</span> <span style="color: #48b685">&#39;fetch&#39;</span><span style="color: #e7e9db">)</span>
<span style="background-color: #4f424c">  <span style="color: #e7e9db">.</span><span style="color: #06b6ef">withArgs</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">uri</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">args</span><span style="color: #e7e9db">)</span>
</span>  <span style="color: #e7e9db">.</span><span style="color: #06b6ef">returns</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">promise</span><span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>Keep in mind, that you can provide Apollo Client something else (e.g. <a target="_blank"
                  rel="noopener noreferrer" href="https://github.com/axios/axios">axios</a>) than the default fetch API.
                Then you would have to stub this (e.g. axios) instead of the fetch API. In addition, the structure of
                the arguments (here <code>args</code>) can change in the future, because they are internally provided by
                Apollo Client to the fetch API and you don&rsquo;t have any control over their structure.</p>

              <h3 id="testing-children-function-render-prop-component">Testing the Children Function in a Render Prop
                Component</h3>

              <p>Both components, the Query and the Mutation component, come with the render props pattern where you use
                a child function. The children function has access to the query/mutation results, but also to the
                function which calls the mutation itself. The following example will show you how you can get access to
                the child function of a render prop component (Mutation) in order to make assertions (with a spy) on it.
                You will use Jest to manipulate the Mutation component and Sinon to give you a spy for the mutation
                function which is then available in the children&rsquo;s arguments.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #5bc4bf">*</span> <span style="color: #06b6ef">as</span> <span style="color: #06b6ef">ReactApollo</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-apollo&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">sinon</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;sinon&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">spy</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">sinon</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">spy</span><span style="color: #e7e9db">();</span>

<span style="color: #06b6ef">ReactApollo</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">Mutation</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">mutation</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">variables</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">children</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">children</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">spy</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">mutation</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">variables</span> <span style="color: #e7e9db">}))}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
<span style="color: #e7e9db">);</span>

<span style="color: #06b6ef">jest</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setMock</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;react-apollo&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">ReactApollo</span><span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>That&rsquo;s again basically your test setup to spy the mutation function from every Mutation component
                that is used in your tested components. In this scenario, you mock the Mutation component from the React
                Apollo package. The spy is used for the mutation function. Afterward, when testing a component which has
                the Mutation component, you can use the spy to verify that it was called. For instance, in case of the
                Star component:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">Star</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">id</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Mutation</span> <span style="color: #06b6ef">mutation</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">STAR_REPOSITORY</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">variables</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{{</span> <span style="color: #06b6ef">id</span> <span style="color: #e7e9db">}}</span><span style="color: #5bc4bf">&gt;</span>
    <span style="color: #e7e9db">{</span><span style="color: #06b6ef">starRepository</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span> <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span> <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">starRepository</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #06b6ef">Star</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
    <span style="color: #e7e9db">)}</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Mutation&gt;</span>
<span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>You can verify that the mutation was called (also with the correct arguments if you wish to do so)
                after the button has been clicked:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">test</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;interaction with mutation function from the Mutation component&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">wrapper</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">mount</span><span style="color: #e7e9db">(</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ApolloProvider</span> <span style="color: #06b6ef">client</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">client</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Star</span> <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #48b685">&#39;1&#39;</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ApolloProvider&gt;,</span>
  <span style="color: #e7e9db">);</span>

  <span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">find</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;button&#39;</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">simulate</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;click&#39;</span><span style="color: #e7e9db">);</span>

  <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">sinonSpy</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">calledOnce</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">toEqual</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">true</span><span style="color: #e7e9db">);</span>
<span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>That&rsquo;s how you get access to the <code>starRepository()</code> function in your tests from the
                arguments of the child function of the Mutation component. If you want to advance the previous test
                setup, you can even provide a mutation result as second argument to your child function and verify the
                rendered output in your Mutation component (only when the mutation result is used there) after the
                button has been clicked.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #5bc4bf">*</span> <span style="color: #06b6ef">as</span> <span style="color: #06b6ef">ReactApollo</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-apollo&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">sinon</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;sinon&#39;</span><span style="color: #e7e9db">;</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">mockData</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;1&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">starred</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">true</span> <span style="color: #e7e9db">};</span>
</span><span style="color: #815ba4">const</span> <span style="color: #06b6ef">spy</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">sinon</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">spy</span><span style="color: #e7e9db">();</span>

<span style="color: #06b6ef">ReactApollo</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">Mutation</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">mutation</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">variables</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">children</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
<span style="background-color: #4f424c">  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">children</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">spy</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">mutation</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">variables</span> <span style="color: #e7e9db">}),</span> <span style="color: #06b6ef">mockData</span><span style="color: #e7e9db">)}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
</span><span style="color: #e7e9db">);</span>

<span style="color: #06b6ef">jest</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setMock</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;react-apollo&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">ReactApollo</span><span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>That&rsquo;s how you get full control over the Mutation component (but also Query component) in your
                tests. Jest enables you to mock the render prop components.</p>

              <p>All the previous techniques, stubbing the GraphQL API and mocking the Query/Mutation components, can be
                found in <a target="_blank" rel="noopener noreferrer"
                  href="https://github.com/rwieruch/react-apollo-async-testing/blob/master/src/index.js">this
                  experimental library for testing Apollo Client</a>. It is not an official library, so I wouldn&rsquo;t
                advice you to use it, but it is a great place to check again the previous techniques and its usage in
                the example application which can be found in the GitHub repository as well.</p>

              <hr class="section-divider">

              <p>After all, keep in mind that the testing setup and how you use the tools at your hand (Jest, Enzyme,
                Sinon) is up to you. It doesn&rsquo;t have to be a Apollo specific testing library. In the previous
                sections, you have learned how you can test your GraphQL queries and mutations in React when having a
                mocked Apollo Client. Everything you need is a test runner (Jest or Mocha), an assertion library (Jest
                or Chai), and a library to spy/stub/mock functions (Sinon). Afterward, you can test whether your
                spied/stubbed methods of the mocked Apollo Client are called. Furthermore, the client-side resolvers
                return mock data which can be used for testing the rendered output when using the query or mutation
                results in your component. In conclusion, if you follow these straight forward test patterns, you
                don&rsquo;t need to reinvent the wheel every time you test Apollo Client with its Mutation and Query
                components in React.</p>

              <p>
                <div class="read-before">
                  Read more: <a href="../react-apollo-link-state-tutorial/index.html" itemprop="url">A apollo-link-state
                    Tutorial for Local State in React</a>
                </div>
                <div class="read-before">
                  Read more: <a href="../react-graphql-client-library/index.html" itemprop="url">How to build a GraphQL
                    client library for React</a>
                </div>
              </p>



              



              <div class="box-inline col-md-12">
                <div class="col-md-12 text-center">
                  <h2 class="newsletter">The Road to learn React</h2>

                  <div class="col-md-4">
                    <img class="img-lazy img-responsive" data-lazy-src="//img/page/cover.png">
                  </div>

                  <p class="lead">
                    Build a Hacker News App along the way. No setup configuration. No tooling. No Redux. Plain React in
                    200+ pages of learning material. Learn React like <strong>50.000+ readers</strong>.
                  </p>
                  <a class="btn btn-template-main" href="https://roadtoreact.com" target="_blank"
                    rel="noopener noreferrer">
                    Get the Book for free <i class="fa fa-chevron-right"></i>
                  </a>

                  <div>
                    <a href="https://amzn.to/2QY2ONp" target="_blank" rel="noopener noreferrer">
                      Get it from Amazon
                    </a>
                  </div>

                </div>
              </div>

            </div>



            <div id="comments">
              <div id="disqus_thread"></div>
              <script type="text/javascript">

                (function () {


                  if (window.location.hostname == "localhost")
                    return;

                  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                  var disqus_shortname = 'rwieruch';
                  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
              </script>
              <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered
                  by Disqus.</a></noscript>
              <a href="http://disqus.com/" class="dsq-brlink">comments powered by <span
                  class="logo-disqus">Disqus</span></a>
            </div>


          </article>


        </div>


      </div>

    </div>




    <section class="bar background-image-fixed-2 no-mb color-white text-center">
      <div class="dark-mask"></div>
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <h3 class="lead">Never miss an article about web development, JavaScript and self-growth.</h3>
            <h2 class="text-uppercase">Take Part</h2>
          </div>

          <div class="col-md-12 text-center">

            <h3 class="lead"><i class="fa fa-check"></i> Join 30.000&#43; Developers</h3>

            <h3 class="lead"><i class="fa fa-check"></i> Learn Web Development with JavaScript</h3>

            <h3 class="lead"><i class="fa fa-check"></i> Tips and Tricks</h3>

            <h3 class="lead"><i class="fa fa-check"></i> Access Tutorials, eBooks and Courses</h3>

            <h3 class="lead"><i class="fa fa-check"></i> Personal Development as a Software Engineer</h3>

          </div>
          <div class="col-md-12">
            <p class="text-center">
              <div id="mc_embed_signup">
                <form action="https://www.getrevue.co/profile/rwieruch/add_subscriber" method="post" id="revue-form"
                  name="revue-form" target="_blank">
                  <div id="mc_embed_signup_scroll">
                    <input class="email" placeholder="email address" type="email" name="member[email]"
                      id="member_email">
                    <div>
                      <button type="submit" value="Subscribe" name="member[subscribe]" id="member_submit"
                        class="btn btn-template-transparent-black btn-lg">
                        Subscribe
                      </button>
                    </div>
                  </div>
                </form>
              </div>

            </p>
          </div>
        </div>
      </div>
    </section>
    <footer id="subfooter">
      <div class="container">

        <div class="col-md-5 col-sm-6">

          <h4>Recent posts</h4>

          <div class="blog-entries">

            <div class="item same-height-row clearfix">
              <div class="article same-height-always">
                <a href="../redux-vs-usereducer/index.html">

                  <img data-lazy-src="//img/posts/redux-vs-usereducer/banner.jpg" data-is-thumb="is-thumb"
                    class="img-lazy img-responsive" alt="React&#39;s useReducer vs Redux">

                </a>
              </div>
              <div class="name same-height-always">
                <h5><a href="../redux-vs-usereducer/index.html">React&#39;s useReducer vs Redux</a></h5>
              </div>
            </div>

            <div class="item same-height-row clearfix">
              <div class="article same-height-always">
                <a href="../publish-npm-package-node/index.html">

                  <img data-lazy-src="//img/posts/publish-npm-package-node/banner.jpg" data-is-thumb="is-thumb"
                    class="img-lazy img-responsive" alt="How to publish a npm package?">

                </a>
              </div>
              <div class="name same-height-always">
                <h5><a href="../publish-npm-package-node/index.html">How to publish a npm package?</a></h5>
              </div>
            </div>

            <div class="item same-height-row clearfix">
              <div class="article same-height-always">
                <a href="../react-scroll-to-item/index.html">

                  <img data-lazy-src="//img/posts/react-scroll-to-item/banner.jpg" data-is-thumb="is-thumb"
                    class="img-lazy img-responsive" alt="How to Scroll to Item in React?">

                </a>
              </div>
              <div class="name same-height-always">
                <h5><a href="../react-scroll-to-item/index.html">How to Scroll to Item in React?</a></h5>
              </div>
            </div>

          </div>

          <hr class="hidden-md hidden-lg hidden-sm">

        </div>



        <div class="col-md-5 col-md-offset-2 col-sm-6">

          <h4>About Me</h4>

          <div class="blog-entries">
            <div class="item same-height-row clearfix">
              <div class="profile same-height-always">
                <img class="img-lazy img-responsive" data-lazy-src="//img/page/profile.jpg" alt="profile">
              </div>
              <div class="name same-height-always">
                <p>
                  Hi, I'm Chris - a Midvale, Utah-based consulting software developer. Find out more <a
                    href="../about/index.html">about me</a>, <a href="../work-with-me/index.html">work with me</a>, or
                  have a look at my social media profiles below.
                </p>
              </div>
            </div>
          </div>

        </div>



      </div>

    </footer>


    <footer id="copyright">
      <div class="container">
        <div class="row">
          <div class="col-md-4">
            <ul class="info list-inline quicklinks pull-left">

              <li>© Chris Paul</li>

            </ul>
          </div>
          <div class="col-md-4">
            
          </div>
          <div class="col-md-4">
            <ul class="info list-inline quicklinks pull-right">

              <li><a aria-label="quicklinks" href="../legal/index.html">Legal Notice</a></li>

            </ul>
          </div>
        </div>
      </div>
    </footer>


  </div>



  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>

  <script src="../js/script.js"></script>
</body>

</html>