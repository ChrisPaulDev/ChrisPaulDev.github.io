<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  

  <title>
    Creating a REST API with Express.js and PostgreSQL - CPaul
  </title>

  <meta name="author" content="" />

  
    <meta name="description" content="A Node.js with Express and PostgreSQL tutorial to learn step by step how to create a REST API for CRUD operations which can be consumed by a client application ...">
  

  <meta name="theme-color" content="#38bb6c"/>

  <meta name="generator" content="Hugo 0.41" />

  
  <link href="https://cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">

  
  

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">

  
  <link href="../css/bootstrap.default.css" rel="stylesheet" id="theme-stylesheet">
  <link href="../css/customizations.css" rel="stylesheet">

  
  
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
  <link rel="shortcut icon" href="../img/favicon/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="../img/favicon/apple-touch-icon.png" />
  <link rel="manifest" href="../img/favicon/manifest.json">
  <link rel="mask-icon" href="../img/favicon/safari-pinned-tab.svg" color="#5bbad5">

  <link rel="alternate" href="../index.xml" type="application/rss+xml" title="CPaul">

  
  
<meta itemprop="name" content="Creating a REST API with Express.js and PostgreSQL">
<meta itemprop="description" content="A Node.js with Express and PostgreSQL tutorial to learn step by step how to create a REST API for CRUD operations which can be consumed by a client application ...">



    <meta itemprop="image" content="https://chrispaul.dev/img/posts/postgresql-express-node-rest-api/banner_640.jpg">



<meta itemprop="keywords" content="angular,apollo,d3,graphql,growth,javascript,machine-learning,mobx,node,react,reason,redux,tooling,vue,web-development,angular,apollo,d3,graphql,growth,javascript,machine-learning,mobx,node,react,reason,redux,tooling,web-development," />


<meta itemprop="wordCount" content="964">


  
  <meta name="keywords" content="express postgresql rest api, express postgresql rest, express postgresql crud">

  <meta property="og:title" content="Creating a REST API with Express.js and PostgreSQL - CPaul">


  <meta property="og:description" content="A Node.js with Express and PostgreSQL tutorial to learn step by step how to create a REST API for CRUD operations which can be consumed by a client application ..." />


<meta property="og:type" content="website" />
<meta property="og:url" content="https://chrispaul.dev/postgresql-express-node-rest-api/" />
<meta property="og:image" content="https://chrispaul.dev/img/posts/postgresql-express-node-rest-api/banner_640.jpg" />

  

    <meta name="news_keywords" content="express postgresql rest api,express postgresql rest,express postgresql crud" />

  

    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:image:src" content="https://chrispaul.dev/img/posts/postgresql-express-node-rest-api/banner_640.jpg"/>



<meta name="twitter:title" content="Creating a REST API with Express.js and PostgreSQL"/>
<meta name="twitter:description" content="A Node.js with Express and PostgreSQL tutorial to learn step by step how to create a REST API for CRUD operations which can be consumed by a client application ..."/>
<meta name="twitter:site" content="@rwieruch"/>
<meta name="twitter:domain" content="rwieruch"/>

  

</head>


  <body>

    <div id="all">

        <header>

          <div class="navbar-affixed-top" data-spy="affix" data-offset-top="200">

    <div class="navbar navbar-default yamm" role="navigation" id="navbar">

        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand home" href="../index.html">
                    <img src="../img/page/logo.svg" alt="Creating a REST API with Express.js and PostgreSQL logo" class="img-lazy">
                    <span class="sr-only">Creating a REST API with Express.js and PostgreSQL - go to homepage</span>
                </a>

                <div class="navbar-buttons">
                    <button type="button" class="navbar-toggle btn-template-main" data-toggle="collapse" data-target="#navigation">
                        <span class="sr-only">Toggle navigation</span>
                        <i class="fa fa-align-justify"></i>
                    </button>
                </div>
            </div>
            

            <div class="navbar-collapse collapse" id="navigation">
                <ul class="nav navbar-nav navbar-right">
                    
                    <li class="dropdown">
                        
                            <a href="../index.html">Blog</a>
                        
                    </li>
                    
                    <li class="dropdown">
                        
                            <a href="../work-with-me/index.html">Work with me</a>
                        
                    </li>
                    
                    <li class="dropdown">
                        
                            <a href="../about/index.html">About</a>
                        
                    </li>
                    
                    <li class="dropdown">
                        
                            <a style="color: #38bb6c" href="https://roadtoreact.com/">Books &amp; Courses</a>
                        
                    </li>
                    
                </ul>
            </div>
            

            <div class="collapse clearfix" id="search">

                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search">
                        <span class="input-group-btn">

                    <button type="submit" class="btn btn-template-main"><i class="fa fa-search"></i></button>

                </span>
                    </div>
                </form>

            </div>
            

        </div>
    </div>
    

</div>




        </header>

        <div class="post-share post-share-fixed post-share-desktop hidden-xs hidden-sm">
    

<a
    aria-label="icon-facebook"
    class="icon-facebook"
    href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fchrispaul.dev%2fpostgresql-express-node-rest-api%2f"
    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
    <i class="fa fa-facebook"></i>
</a>


<a
    aria-label="icon-twitter"
    class="icon-twitter"
    href="https://twitter.com/share?text=Creating%20a%20REST%20API%20with%20Express.js%20and%20PostgreSQL%20by%20%40rwieruch%20%23NodeJs&amp;url=https%3a%2f%2fchrispaul.dev%2fpostgresql-express-node-rest-api%2f"
    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
    <i class="fa fa-twitter"></i>
</a>





<a
    aria-label="icon-linkedin"
    class="icon-linkedin"
    href="https://www.linkedin.com/shareArticle?mini=true&amp;title=Creating%20a%20REST%20API%20with%20Express.js%20and%20PostgreSQL&amp;url=https%3a%2f%2fchrispaul.dev%2fpostgresql-express-node-rest-api%2f">
    <i class="fa fa-linkedin"></i>
</a>

</div>

<div class="visible-xs visible-sm text-center">
    <div class="post-share post-share-fixed post-share-mobile">
        

<a
    aria-label="icon-facebook"
    class="icon-facebook"
    href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fchrispaul.dev%2fpostgresql-express-node-rest-api%2f"
    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
    <i class="fa fa-facebook"></i>
</a>


<a
    aria-label="icon-twitter"
    class="icon-twitter"
    href="https://twitter.com/share?text=Creating%20a%20REST%20API%20with%20Express.js%20and%20PostgreSQL%20by%20%40rwieruch%20%23NodeJs&amp;url=https%3a%2f%2fchrispaul.dev%2fpostgresql-express-node-rest-api%2f"
    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
    <i class="fa fa-twitter"></i>
</a>





<a
    aria-label="icon-linkedin"
    class="icon-linkedin"
    href="https://www.linkedin.com/shareArticle?mini=true&amp;title=Creating%20a%20REST%20API%20with%20Express.js%20and%20PostgreSQL&amp;url=https%3a%2f%2fchrispaul.dev%2fpostgresql-express-node-rest-api%2f">
    <i class="fa fa-linkedin"></i>
</a>

    </div>
</div>

        

        <div class="hidden-xs">
            

<section class="bar background-image-fixed-2 no-mb color-white text-center">
    <div class="dark-mask"></div>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h3 class="lead">Never miss an article about web development, JavaScript and self-growth.</h3>
                <h2 class="text-uppercase newsletter">Take Part</h2>
            </div>

            <div class="col-md-12">
                <p class="text-center">
                    



<div id="mc_embed_signup">
    <form
        action="https://www.getrevue.co/profile/rwieruch/add_subscriber"
        method="post"
        id="revue-form"
        name="revue-form"
        target="_blank">
        <div id="mc_embed_signup_scroll">
            <input
                class="email"
                placeholder="email address"
                type="email"
                name="member[email]"
                id="member_email"
            >
            <div>
                <button
                    type="submit"
                    value="Subscribe"
                    name="member[subscribe]"
                    id="member_submit"
                    class="btn btn-template-transparent-black btn-lg"
                >
                    Subscribe
                </button>
            </div>
        </div>
    </form>
</div>

                </p>
            </div>
        </div>
    </div>
</section>



        </div>

        <div id="content">
            <div class="container">

                <div class="row">

                    <article
                        class="col-md-8 col-md-offset-2"
                        id="blog-post"
                        itemprop="blogPosts"
                        itemscope itemtype="http://schema.org/BlogPosting">

                        <div id="post-content" itemprop="articleBody">

                            <header>
                                <h1 itemprop="name headline">Creating a REST API with Express.js and PostgreSQL</h1>
                            </header>

                            <div class="text-center">
                                
    <a target="_blank" rel="noopener noreferrer" href="https://www.facebook.com/rwieruch" class="facebook-button-follow">
         <i class="fa fa-facebook"></i>Follow
    </a>


                                &nbsp;
                                

                                &nbsp;
                                
  <a target="_blank" rel="noopener noreferrer" href="https://twitter.com/intent/follow?screen_name=rwieruch" class="generic-button-follow">
    <img src="https://img.shields.io/twitter/follow/rwieruch.svg?style=social&amp;logo=twitter&amp;label=Follow" alt="Follow on Twitter">
  </a>


                                &nbsp;
                                
                            </div>

                            <p class="text-muted text-uppercase mb-small text-center">
    <span itemprop="author publisher">
        
    </span>

    
        <time datetime="2019-02-24" itemprop="datePublished">
            February 24, 2019
        </time>
    

    
        <span class="hidden-xs hidden-sm"> - <a
            target="_blank"
            rel="noopener noreferrer"
            href="https://github.com/rwieruch/blog_chriswieruch_content/blob/master/postgresql-express-node-rest-api.md">
                Edit this Post on GitHub
            </a>
        </span>
    
</p>

                            

<div>
  

</div>

<div class="post-image-primary">
    <div class="pinterest-pinner-wrapper" itemscope itemtype="http://schema.org/ImageObject">
        <div class="pinterest-pinner">
            <a
                data-pin-do="buttonPin"
                data-pin-save="true"
                data-pin-tall="true"
                href="https://www.pinterest.com/pin/create/button/?url=https%3a%2f%2fchrispaul.dev%2fpostgresql-express-node-rest-api%2f&amp;media=https://chrispaul.dev/img%2fposts%2fpostgresql-express-node-rest-api%2fbanner.jpg&amp;description=">
            </a>
        </div>

        <img
            class="img-lazy img-responsive"
            data-lazy-src="/src="/img/posts/postgresql-express-node-rest-api/banner.jpg"
            data-is-src-set="is-src-set"
            alt="express mongodb rest api"
            itemprop="image"
        />
    </div>
</div>


<div class="read-before">
    <p>This tutorial is part 5 of 5 in this series.</p>
    <div>Part 1: <a href="../minimal-node-js-babel-setup/index.html" itemprop="url">The minimal Node.js with Babel Setup</a></div>
    <div>Part 2: <a href="../node-js-express-tutorial/index.html" itemprop="url">How to setup Express.js in Node.js</a></div>
    <div>Part 3: <a href="../node-express-server-rest-api/index.html" itemprop="url">How to create a REST API with Express.js in Node.js</a></div>
    <div>Part 4: <a href="../postgres-express-setup-tutorial/index.html" itemprop="url">Setup PostgreSQL with Sequelize in Express</a></div>
</div>

<p>Node + Express + PostgreSQL is a powerful tech stack for backend applications to offer CRUD operations. It gives you everything to expose an API (Express routes), to add business logic (Express middleware and logic within Express routes), and to use real data with a database (PostgreSQL). It&rsquo;s perfect for establishing a PERN (PostgreSQL, Express, React, Node), PEAN (PostgreSQL, Express, Angular, Node), or PEVN (PostgreSQL, Express, Vue, Node) tech stack. Everything that would be missing is the frontend application with React, Angular, Vue or something else. But that&rsquo;s up to another section.</p>

<p>This section focuses first on connecting PostgreSQL to Express for our REST API. Previously we have set up PostgreSQL in our Express.js application and seeded the database with initial data, but didn&rsquo;t use it in Express for the RESTful API yet. Now we want to make sure that every CRUD operation going through this REST API reads or writes from/to the PostgreSQL database rather than using sample data as we did before for our Express routes. That&rsquo;s why we need to wire our Express routes to PostgreSQL via Sequelize to marry both worlds.</p>

<p>In our <em>src/index.js</em> where we set up and start the Express application with the PostgreSQL database, we already have a Express middleware in place which passes the models as context to all of our Express routes. Previously, these models have been sample data. Now we are using the Sequelize models that connect us to the PostgreSQL database. Since the folder/file data structure is the same as before, nothing changes for passing the models as context to the Express routes.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #815ba4">import</span> <span style="color: #06b6ef">models</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./models&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">app</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">express</span><span style="color: #e7e9db">();</span>

<span style="color: #e7e9db">...</span>

<span style="color: #06b6ef">app</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">use</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">req</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">res</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">next</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">req</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">context</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">models</span><span style="color: #e7e9db">,</span>
    <span style="color: #06b6ef">me</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">models</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">users</span><span style="color: #e7e9db">[</span><span style="color: #f99b15">1</span><span style="color: #e7e9db">],</span>
  <span style="color: #e7e9db">};</span>
  <span style="color: #06b6ef">next</span><span style="color: #e7e9db">();</span>
<span style="color: #e7e9db">});</span>

<span style="color: #e7e9db">...</span>
</code></pre></div>


<p>However, the me user (authenticated user) can be retrieved from the seeded data from the database. There is no <code>users</code> array available anymore as sample data on the models object, because the models are our interface to the PostgreSQL database now.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #815ba4">import</span> <span style="color: #06b6ef">models</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./models&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">app</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">express</span><span style="color: #e7e9db">();</span>

<span style="color: #e7e9db">...</span>

<span style="background-color: #4f424c"><span style="color: #06b6ef">app</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">use</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">async</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">req</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">res</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">next</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span>  <span style="color: #06b6ef">req</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">context</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">models</span><span style="color: #e7e9db">,</span>
<span style="background-color: #4f424c">    <span style="color: #06b6ef">me</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">await</span> <span style="color: #06b6ef">models</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">User</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">findByLogin</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;rwieruch&#39;</span><span style="color: #e7e9db">),</span>
</span>  <span style="color: #e7e9db">};</span>
  <span style="color: #06b6ef">next</span><span style="color: #e7e9db">();</span>
<span style="color: #e7e9db">});</span>

<span style="color: #e7e9db">...</span>
</code></pre></div>


<p>Even though we don&rsquo;t know the authenticated user yet, because we are not passing any data to the REST API for it from the outside, we just take any user that we know exists in our database because of the previous PostgreSQL database seeding. The <code>findByLogin</code> method is available on our model, because we have implemented it previously as custom method for it to retrieve users by username or email.</p>

<p>Let&rsquo;s dive into our Express routes now. We have routes for the session, the user, and the message entity. The session entity comes first. Again, instead of using the sample data which was available previously on the models, we can use the models&rsquo; interface &ndash; powered by Sequelize &ndash; to interact with the database now. In the <em>src/routes/session.js</em> change the following lines of code:</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Router</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;express&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">router</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">Router</span><span style="color: #e7e9db">();</span>

<span style="background-color: #4f424c"><span style="color: #06b6ef">router</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">get</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;/&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">async</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">req</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">res</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">user</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">await</span> <span style="color: #06b6ef">req</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">context</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">models</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">User</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">findByPk</span><span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">req</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">context</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">me</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">return</span> <span style="color: #06b6ef">res</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">send</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">user</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">});</span>
</span>
<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">router</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>The route function becomes an asynchronous function, because we are dealing with an asynchronous request to the PostgreSQL database now. We handle the asynchronous nature of the function with async/await.</p>

<p>Since we passed the models conveniently via the context object to every Express route with an application-wide Express middleware before, we can make use of it here. The authenticated user, which we have taken arbitrarily from the PostgreSQL database before, can be used to retrieve the current session user from the database.</p>

<p>Let&rsquo;s tackle the user routes in the <em>src/routes/user.js</em> file which offer RESTful API endpoints for fetching users or a single user by id. Both API requests should lead into read operations for the PostgreSQL database:</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Router</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;express&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">router</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">Router</span><span style="color: #e7e9db">();</span>

<span style="background-color: #4f424c"><span style="color: #06b6ef">router</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">get</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;/&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">async</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">req</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">res</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">users</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">await</span> <span style="color: #06b6ef">req</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">context</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">models</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">User</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">findAll</span><span style="color: #e7e9db">();</span>
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">return</span> <span style="color: #06b6ef">res</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">send</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">users</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">});</span>
</span>
<span style="background-color: #4f424c"><span style="color: #06b6ef">router</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">get</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;/:userId&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">async</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">req</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">res</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">user</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">await</span> <span style="color: #06b6ef">req</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">context</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">models</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">User</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">findByPk</span><span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">req</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">params</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">userId</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">return</span> <span style="color: #06b6ef">res</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">send</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">user</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">});</span>
</span>
<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">router</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>The first API endpoint that fetches a list of users doesn&rsquo;t get any input parameters from the request. But the second API endpoint has access to the user identifier to read the correct user from the PostgreSQL database.</p>

<p>Last but not least, the message routes in the <em>src/routes/message.js</em> file. Apart from reading messages and a single message by identifier, we also have API endpoints for creating a message and deleting a message. Both operations should lead to write operations for the PostgreSQL database:</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Router</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;express&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">router</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">Router</span><span style="color: #e7e9db">();</span>

<span style="background-color: #4f424c"><span style="color: #06b6ef">router</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">get</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;/&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">async</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">req</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">res</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">messages</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">await</span> <span style="color: #06b6ef">req</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">context</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">models</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">Message</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">findAll</span><span style="color: #e7e9db">();</span>
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">return</span> <span style="color: #06b6ef">res</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">send</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">messages</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">});</span>
</span>
<span style="background-color: #4f424c"><span style="color: #06b6ef">router</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">get</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;/:messageId&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">async</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">req</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">res</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">message</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">await</span> <span style="color: #06b6ef">req</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">context</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">models</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">Message</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">findByPk</span><span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">req</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">params</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">messageId</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">return</span> <span style="color: #06b6ef">res</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">send</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">message</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">});</span>
</span>
<span style="background-color: #4f424c"><span style="color: #06b6ef">router</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">post</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;/&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">async</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">req</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">res</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">message</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">await</span> <span style="color: #06b6ef">req</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">context</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">models</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">Message</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">create</span><span style="color: #e7e9db">({</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">text</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">req</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">body</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">text</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">userId</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">req</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">context</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">me</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">});</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">return</span> <span style="color: #06b6ef">res</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">send</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">message</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">});</span>
</span>
<span style="background-color: #4f424c"><span style="color: #06b6ef">router</span><span style="color: #e7e9db">.</span><span style="color: #815ba4">delete</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;/:messageId&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">async</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">req</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">res</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">result</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">await</span> <span style="color: #06b6ef">req</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">context</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">models</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">Message</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">destroy</span><span style="color: #e7e9db">({</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">where</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">req</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">params</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">messageId</span> <span style="color: #e7e9db">},</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">});</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">return</span> <span style="color: #06b6ef">res</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">send</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">true</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">});</span>
</span>
<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">router</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>Basically that&rsquo;s it for connecting PostgreSQL to Express routes with Sequelize. All the models set up with Sequelize can be used as interface to your PostgreSQL database. Once a user hits your REST API, you can do read or write operations in the Express routes to your PostgreSQL database.</p>

<h3 id="exercises">Exercises</h3>

<ul>
<li>Confirm your <a target="_blank" rel="noopener noreferrer" href="https://github.com/rwieruch/node-express-postgresql-server">source code</a></li>
<li>Check the <a target="_blank" rel="noopener noreferrer" href="https://github.com/rwieruch/node-express-mongodb-server">source code of the alternative MongoDB with Mongoose implementation</a></li>
<li>Experiment with your REST API with CURL operations.</li>
</ul>


                            
<div class="feedback-and-share text-center">
    <hr>
    
    <p class="lead">
        I would like to hear your thoughts :-) Find me on <a target="_blank" rel="noopener noreferrer" aria-label="twitter" href="https://twitter.com/rwieruch"><i class="fa fa-twitter"></i>Twitter</a> and <a target="_blank" aria-label="facebook" href="https://www.facebook.com/rwieruch/"><i class="fa fa-facebook"></i>Facebook</a>
    </p>
    
    
        <p class="lead">
            Did the article help you? Share it with your friends on social media <i class="fa fa-arrow-left"></i>, support me as my <a target="_blank" rel="noopener noreferrer" aria-label="patreon" href="https://www.patreon.com/rwieruch"><i class="fa fa-paw"></i>Patron</a>, and become a full-stack developer with my books <i class="fa fa-arrow-down"></i>
        </p>
    
</div>


                            
                                <div class="box-inline col-md-12">
    <div class="col-md-12 text-center">
        <h2 class="newsletter">The Road to learn React</h2>
        
            <div class="col-md-4">
                <img class="img-lazy img-responsive" data-lazy-src="//img/page/cover.png">
            </div>
        
        <p class="lead">
            Build a Hacker News App along the way. No setup configuration. No tooling. No Redux. Plain React in 200+ pages of learning material. Learn React like <strong>50.000+ readers</strong>.
        </p>
        <a
            class="btn btn-template-main"
            href="https://roadtoreact.com"
            target="_blank"
            rel="noopener noreferrer"
        >
            Get the Book for free <i class="fa fa-chevron-right"></i>
        </a>
        
            <div>
                <a
                    href="https://amzn.to/2QY2ONp"
                    target="_blank"
                    rel="noopener noreferrer"
                >
                    Get it from Amazon
                </a>
            </div>
        
    </div>
</div>
                            
                        </div>

                        
                        
                        <div id="comments">
                            <div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'rwieruch';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                        </div>
                        

                    </article>
                    

                </div>
                

            </div>
            
        </div>
        

        

<section class="bar background-image-fixed-2 no-mb color-white text-center">
    <div class="dark-mask"></div>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h3 class="lead">Never miss an article about web development, JavaScript and self-growth.</h3>
                <h2 class="text-uppercase">Take Part</h2>
            </div>

            <div class="col-md-12 text-center">
                
                    <h3 class="lead"><i class="fa fa-check"></i> Join 30.000&#43; Developers</h3>
                
                    <h3 class="lead"><i class="fa fa-check"></i> Learn Web Development with JavaScript</h3>
                
                    <h3 class="lead"><i class="fa fa-check"></i> Tips and Tricks</h3>
                
                    <h3 class="lead"><i class="fa fa-check"></i> Access Tutorials, eBooks and Courses</h3>
                
                    <h3 class="lead"><i class="fa fa-check"></i> Personal Development as a Software Engineer</h3>
                
            </div>
            <div class="col-md-12">
                <p class="text-center">
                    



<div id="mc_embed_signup">
    <form
        action="https://www.getrevue.co/profile/rwieruch/add_subscriber"
        method="post"
        id="revue-form"
        name="revue-form"
        target="_blank">
        <div id="mc_embed_signup_scroll">
            <input
                class="email"
                placeholder="email address"
                type="email"
                name="member[email]"
                id="member_email"
            >
            <div>
                <button
                    type="submit"
                    value="Subscribe"
                    name="member[subscribe]"
                    id="member_submit"
                    class="btn btn-template-transparent-black btn-lg"
                >
                    Subscribe
                </button>
            </div>
        </div>
    </form>
</div>

                </p>
            </div>
        </div>
    </div>
</section>




        <footer id="subfooter">
    <div class="container">

        <div class="col-md-5 col-sm-6">

            <h4>Recent posts</h4>

            <div class="blog-entries">
                
                <div class="item same-height-row clearfix">
                    <div class="article same-height-always">
                        <a href="../redux-vs-usereducer/index.html">
                          
                            <img
                                data-lazy-src="//img/posts/redux-vs-usereducer/banner.jpg"
                                data-is-thumb="is-thumb"
                                class="img-lazy img-responsive"
                                alt="React&#39;s useReducer vs Redux"
                            >
                          
                        </a>
                    </div>
                    <div class="name same-height-always">
                        <h5><a href="../redux-vs-usereducer/index.html">React&#39;s useReducer vs Redux</a></h5>
                    </div>
                </div>
                
                <div class="item same-height-row clearfix">
                    <div class="article same-height-always">
                        <a href="../publish-npm-package-node/index.html">
                          
                            <img
                                data-lazy-src="//img/posts/publish-npm-package-node/banner.jpg"
                                data-is-thumb="is-thumb"
                                class="img-lazy img-responsive"
                                alt="How to publish a npm package?"
                            >
                          
                        </a>
                    </div>
                    <div class="name same-height-always">
                        <h5><a href="../publish-npm-package-node/index.html">How to publish a npm package?</a></h5>
                    </div>
                </div>
                
                <div class="item same-height-row clearfix">
                    <div class="article same-height-always">
                        <a href="../react-scroll-to-item/index.html">
                          
                            <img
                                data-lazy-src="//img/posts/react-scroll-to-item/banner.jpg"
                                data-is-thumb="is-thumb"
                                class="img-lazy img-responsive"
                                alt="How to Scroll to Item in React?"
                            >
                          
                        </a>
                    </div>
                    <div class="name same-height-always">
                        <h5><a href="../react-scroll-to-item/index.html">How to Scroll to Item in React?</a></h5>
                    </div>
                </div>
                
            </div>

            <hr class="hidden-md hidden-lg hidden-sm">

        </div>
        

        
        <div class="col-md-5 col-md-offset-2 col-sm-6">

            <h4>About Me</h4>

            <div class="blog-entries">
                <div class="item same-height-row clearfix">
                    <div class="profile same-height-always">
                        <img
                            class="img-lazy img-responsive"
                            data-lazy-src="//img/page/profile.jpg"
                            alt="profile"
                        >
                    </div>
                    <div class="name same-height-always">
                        <p>
                            Hi, I'm Chris - a German and Remote/Berlin based consulting software engineer. Find out more <a href="../about/index.html">about me</a>, <a href="../work-with-me/index.html">work with me</a>, or have a look at my social media profiles below.
                        </p>
                    </div>
                </div>
            </div>

        </div>
        
        

    </div>
    
</footer>






        <footer id="copyright">
  <div class="container">
    <div class="row">
      <div class="col-md-4">
        <ul class="info list-inline quicklinks pull-left">
          
            <li>Â© Chris Paul</li>
          
        </ul>
      </div>
      <div class="col-md-4">
        <ul class="list-inline footer-social-buttons text-center">
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.twitter.com/rwieruch"><i class="fa fa-twitter"></i></a></li>
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.github.com/rwieruch"><i class="fa fa-github"></i></a></li>
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.linkedin.com/in/chris-wieruch-971933a6"><i class="fa fa-linkedin"></i></a></li>
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.producthunt.com/@rwieruch"><i class="fa fa-product-hunt"></i></a></li>
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.patreon.com/rwieruch"><i class="fa fa-paw"></i></a></li>
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.paypal.me/rwieruch"><i class="fa fa-paypal"></i></a></li>
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.facebook.com/rwieruch"><i class="fa fa-facebook"></i></a></li>
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.instagram.com/rwieruch/"><i class="fa fa-instagram"></i></a></li>
          
        </ul>
      </div>
      <div class="col-md-4">
        <ul class="info list-inline quicklinks pull-right">
          
            <li><a aria-label="quicklinks" href="../legal/index.html">Legal Notice</a></li>
          
        </ul>
      </div>
    </div>
  </div>
</footer>


    </div>
    



<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>









<script src="../js/script.js"></script>



  </body>
</html>
