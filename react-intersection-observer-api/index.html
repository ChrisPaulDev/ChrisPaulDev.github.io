<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="google-site-verification" content="We9gRQmlTIjMkOPPjPWDQTXd15nWA6tBEYlxQ2cMpEg" />

  <title>
    Intersection Observer API in React - CPaul
  </title>

  <meta name="author" content="" />

  
    <meta name="description" content="A tutorial to learn about the Intersection Observer API in React. You will use React&#39;s ref API with createRef() to observe elements in your React application in context of the viewport ...">
  

  <meta name="theme-color" content="#38bb6c"/>

  <meta name="generator" content="Hugo 0.41" />

  
  <link href="https://cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">

  
  

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">

  
  <link href="../css/bootstrap.default.css" rel="stylesheet" id="theme-stylesheet">
  <link href="../css/customizations.css" rel="stylesheet">

  
  
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
  <link rel="shortcut icon" href="../img/favicon/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="../img/favicon/apple-touch-icon.png" />
  <link rel="manifest" href="../img/favicon/manifest.json">
  <link rel="mask-icon" href="../img/favicon/safari-pinned-tab.svg" color="#5bbad5">

  <link rel="alternate" href="../index.xml" type="application/rss+xml" title="CPaul">

  
  
<meta itemprop="name" content="Intersection Observer API in React">
<meta itemprop="description" content="A tutorial to learn about the Intersection Observer API in React. You will use React&#39;s ref API with createRef() to observe elements in your React application in context of the viewport ...">



    <meta itemprop="image" content="https://chrispaul.dev/img/posts/react-intersection-observer-api/banner_640.jpg">



<meta itemprop="keywords" content="angular,apollo,d3,graphql,growth,javascript,machine-learning,mobx,node,react,reason,redux,tooling,vue,web-development,angular,apollo,d3,graphql,growth,javascript,machine-learning,mobx,node,react,reason,redux,tooling,web-development," />


<meta itemprop="wordCount" content="2797">


  
  <meta name="keywords" content="react intersection observer api, react createRef, react ref API">

  <meta property="og:title" content="Intersection Observer API in React - CPaul">


  <meta property="og:description" content="A tutorial to learn about the Intersection Observer API in React. You will use React&#39;s ref API with createRef() to observe elements in your React application in context of the viewport ..." />


<meta property="og:type" content="website" />
<meta property="og:url" content="https://chrispaul.dev/react-intersection-observer-api/" />
<meta property="og:image" content="https://chrispaul.dev/img/posts/react-intersection-observer-api/banner_640.jpg" />

  

    <meta name="news_keywords" content="react intersection observer api,react createRef,react ref API" />

  

    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:image:src" content="https://chrispaul.dev/img/posts/react-intersection-observer-api/banner_640.jpg"/>



<meta name="twitter:title" content="Intersection Observer API in React"/>
<meta name="twitter:description" content="A tutorial to learn about the Intersection Observer API in React. You will use React&#39;s ref API with createRef() to observe elements in your React application in context of the viewport ..."/>
<meta name="twitter:site" content="@rwieruch"/>
<meta name="twitter:domain" content="rwieruch"/>

  

</head>


  <body>

    <div id="all">

        <header>

          <div class="navbar-affixed-top" data-spy="affix" data-offset-top="200">

    <div class="navbar navbar-default yamm" role="navigation" id="navbar">

        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand home" href="../index.html">
                    <img src="../img/page/logo.svg" alt="Intersection Observer API in React logo" class="img-lazy">
                    <span class="sr-only">Intersection Observer API in React - go to homepage</span>
                </a>

                <div class="navbar-buttons">
                    <button type="button" class="navbar-toggle btn-template-main" data-toggle="collapse" data-target="#navigation">
                        <span class="sr-only">Toggle navigation</span>
                        <i class="fa fa-align-justify"></i>
                    </button>
                </div>
            </div>
            

            <div class="navbar-collapse collapse" id="navigation">
                <ul class="nav navbar-nav navbar-right">
                    
                    <li class="dropdown">
                        
                            <a href="../index.html">Blog</a>
                        
                    </li>
                    
                    <li class="dropdown">
                        
                            <a href="../work-with-me/index.html">Work with me</a>
                        
                    </li>
                    
                    <li class="dropdown">
                        
                            <a href="../about/index.html">About</a>
                        
                    </li>
                    
                    <li class="dropdown">
                        
                            <a style="color: #38bb6c" href="https://roadtoreact.com/">Books &amp; Courses</a>
                        
                    </li>
                    
                </ul>
            </div>
            

            <div class="collapse clearfix" id="search">

                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search">
                        <span class="input-group-btn">

                    <button type="submit" class="btn btn-template-main"><i class="fa fa-search"></i></button>

                </span>
                    </div>
                </form>

            </div>
            

        </div>
    </div>
    

</div>




        </header>

        <div class="post-share post-share-fixed post-share-desktop hidden-xs hidden-sm">
    

<a
    aria-label="icon-facebook"
    class="icon-facebook"
    href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fchrispaul.dev%2freact-intersection-observer-api%2f"
    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
    <i class="fa fa-facebook"></i>
</a>


<a
    aria-label="icon-twitter"
    class="icon-twitter"
    href="https://twitter.com/share?text=Intersection%20Observer%20API%20in%20React%20by%20%40rwieruch%20%23ReactJs&amp;url=https%3a%2f%2fchrispaul.dev%2freact-intersection-observer-api%2f"
    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
    <i class="fa fa-twitter"></i>
</a>





<a
    aria-label="icon-linkedin"
    class="icon-linkedin"
    href="https://www.linkedin.com/shareArticle?mini=true&amp;title=Intersection%20Observer%20API%20in%20React&amp;url=https%3a%2f%2fchrispaul.dev%2freact-intersection-observer-api%2f">
    <i class="fa fa-linkedin"></i>
</a>

</div>

<div class="visible-xs visible-sm text-center">
    <div class="post-share post-share-fixed post-share-mobile">
        

<a
    aria-label="icon-facebook"
    class="icon-facebook"
    href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fchrispaul.dev%2freact-intersection-observer-api%2f"
    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
    <i class="fa fa-facebook"></i>
</a>


<a
    aria-label="icon-twitter"
    class="icon-twitter"
    href="https://twitter.com/share?text=Intersection%20Observer%20API%20in%20React%20by%20%40rwieruch%20%23ReactJs&amp;url=https%3a%2f%2fchrispaul.dev%2freact-intersection-observer-api%2f"
    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
    <i class="fa fa-twitter"></i>
</a>





<a
    aria-label="icon-linkedin"
    class="icon-linkedin"
    href="https://www.linkedin.com/shareArticle?mini=true&amp;title=Intersection%20Observer%20API%20in%20React&amp;url=https%3a%2f%2fchrispaul.dev%2freact-intersection-observer-api%2f">
    <i class="fa fa-linkedin"></i>
</a>

    </div>
</div>

        

        <div class="hidden-xs">
            

<section class="bar background-image-fixed-2 no-mb color-white text-center">
    <div class="dark-mask"></div>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h3 class="lead">Never miss an article about web development, JavaScript and self-growth.</h3>
                <h2 class="text-uppercase newsletter">Take Part</h2>
            </div>

            <div class="col-md-12">
                <p class="text-center">
                    



<div id="mc_embed_signup">
    <form
        action="https://www.getrevue.co/profile/rwieruch/add_subscriber"
        method="post"
        id="revue-form"
        name="revue-form"
        target="_blank">
        <div id="mc_embed_signup_scroll">
            <input
                class="email"
                placeholder="email address"
                type="email"
                name="member[email]"
                id="member_email"
            >
            <div>
                <button
                    type="submit"
                    value="Subscribe"
                    name="member[subscribe]"
                    id="member_submit"
                    class="btn btn-template-transparent-black btn-lg"
                >
                    Subscribe
                </button>
            </div>
        </div>
    </form>
</div>

                </p>
            </div>
        </div>
    </div>
</section>



        </div>

        <div id="content">
            <div class="container">

                <div class="row">

                    <article
                        class="col-md-8 col-md-offset-2"
                        id="blog-post"
                        itemprop="blogPosts"
                        itemscope itemtype="http://schema.org/BlogPosting">

                        <div id="post-content" itemprop="articleBody">

                            <header>
                                <h1 itemprop="name headline">Intersection Observer API in React</h1>
                            </header>

                            <div class="text-center">
                                
    <a target="_blank" rel="noopener noreferrer" href="https://www.facebook.com/rwieruch" class="facebook-button-follow">
         <i class="fa fa-facebook"></i>Follow
    </a>


                                &nbsp;
                                

                                &nbsp;
                                
  <a target="_blank" rel="noopener noreferrer" href="https://twitter.com/intent/follow?screen_name=rwieruch" class="generic-button-follow">
    <img src="https://img.shields.io/twitter/follow/rwieruch.svg?style=social&amp;logo=twitter&amp;label=Follow" alt="Follow on Twitter">
  </a>


                                &nbsp;
                                
                            </div>

                            <p class="text-muted text-uppercase mb-small text-center">
    <span itemprop="author publisher">
        
    </span>

    
        <time datetime="2018-09-05" itemprop="datePublished">
            September 5, 2018
        </time>
    

    
        <span class="hidden-xs hidden-sm"> - <a
            target="_blank"
            rel="noopener noreferrer"
            href="https://github.com/rwieruch/blog_chriswieruch_content/blob/master/react-intersection-observer-api.md">
                Edit this Post on GitHub
            </a>
        </span>
    
</p>

                            <div>
  

</div>

<div class="post-image-primary">
    <div class="pinterest-pinner-wrapper" itemscope itemtype="http://schema.org/ImageObject">
        <div class="pinterest-pinner">
            <a
                data-pin-do="buttonPin"
                data-pin-save="true"
                data-pin-tall="true"
                href="https://www.pinterest.com/pin/create/button/?url=https%3a%2f%2fchrispaul.dev%2freact-intersection-observer-api%2f&amp;media=https://chrispaul.dev/img%2fposts%2freact-intersection-observer-api%2fbanner.jpg&amp;description=">
            </a>
        </div>

        <img
            class="img-lazy img-responsive"
            data-lazy-src="/src="/img/posts/react-intersection-observer-api/banner.jpg"
            data-is-src-set="is-src-set"
            alt="react intersection observer api"
            itemprop="image"
        />
    </div>
</div>


<div class="read-before">
    <p>This tutorial is part 2 of 2 in this series.</p>
    <div>Part 1a: <a href="../react-js-windows-setup/index.html" itemprop="url">How to setup React.js on Windows</a></div>
    <div>Part 1b: <a href="../react-js-macos-setup/index.html" itemprop="url">How to setup React.js on MacOS</a></div>
</div>

<p>The Intersection Observer API is a browser API which can be used to track the position of HTML elements in context to the actual viewport of the browser. The <a target="_blank" rel="noopener noreferrer" href="https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API">official documentation</a> says: <em>&ldquo;The Intersection Observer API provides a way to asynchronously observe changes in the intersection of a target element with an ancestor element or with a top-level document&rsquo;s viewport.&rdquo;</em></p>

<p><strong>It can be used for various scenarios:</strong> For instance, what about coloring the background color of your application or animating SVGs when a user scrolls through your application? What about <a href="../react-fetching-data/index.html">fetching more data</a> when <a href="../react-paginated-list/index.html">reaching the end of a list of items</a>? In order to implement such behaviors, you need to know when an HTML element enters (or leaves) the viewport (the user&rsquo;s visible area of a web page) in your browser. Historically there was no dedicated API for this and one had to use other APIs (e.g. <a target="_blank" rel="noopener noreferrer" href="https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect">Element.getBoundingClientRect()</a>) for workarounds. Now it is possible with the intersection observer API.</p>

<p>In this tutorial, I want to show you how to use the intersection observer API in React. We will implement a specific use case with it, but as mentioned, there are various scenarios where the intersection observer API can be applied (in React). In order to get started, it&rsquo;s good to know about <a href="../react-ref-attribute-dom-node/index.html">React&rsquo;s ref API</a>, because it is applied to enable the connection between DOM nodes and the intersection observer in React. Otherwise React is a declarative view layer library where it is not planned to access DOM nodes.</p>

<h2 class="chapter-header" id="anchor-based-navigation-react">Anchor-based Navigation in React</h2>

<p>In this section, let&rsquo;s build a application which can be used in the following sections as use case for the intersection observer API. We want to show a written article with multiple sections. Obviously it is already possible to scroll through the article. But what about very long read articles? It would be great to have some kind of navigation to jump between sections of the article. That&rsquo;s when anchor based navigation comes into play. You can see the application that we are going to build and an example of how it looks like in this <a target="_blank" rel="noopener noreferrer" href="https://github.com/the-road-to-learn-react/react-intersection-observer-api-example">GitHub repository</a>.</p>

<p>First, let&rsquo;s have a application which renders a list of items. Each items represents a section of an article. Later, it should be possible to jump between these sections.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">li</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;lorem-ipsum&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">constructor</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">super</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">);</span>

    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">things</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">[</span>
        <span style="color: #e7e9db">{</span>
          <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;a&#39;</span><span style="color: #e7e9db">,</span>
          <span style="color: #06b6ef">headline</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;React&#39;</span><span style="color: #e7e9db">,</span>
          <span style="color: #06b6ef">text</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">li</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">count</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">50</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">units</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;sentences&#39;</span> <span style="color: #e7e9db">}),</span>
        <span style="color: #e7e9db">},</span>
        <span style="color: #e7e9db">{</span>
          <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;b&#39;</span><span style="color: #e7e9db">,</span>
          <span style="color: #06b6ef">headline</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;Redux&#39;</span><span style="color: #e7e9db">,</span>
          <span style="color: #06b6ef">text</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">li</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">count</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">50</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">units</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;sentences&#39;</span> <span style="color: #e7e9db">}),</span>
        <span style="color: #e7e9db">},</span>
        <span style="color: #e7e9db">{</span>
          <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;c&#39;</span><span style="color: #e7e9db">,</span>
          <span style="color: #06b6ef">headline</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;GraphQL&#39;</span><span style="color: #e7e9db">,</span>
          <span style="color: #06b6ef">text</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">li</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">count</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">50</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">units</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;sentences&#39;</span> <span style="color: #e7e9db">}),</span>
        <span style="color: #e7e9db">},</span>
      <span style="color: #e7e9db">],</span>
    <span style="color: #e7e9db">};</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">things</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">thing</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">h1</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">headline</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/h1&gt;</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">p</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">text</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/p&gt;</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
        <span style="color: #e7e9db">))}</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
    <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>The application uses the neat <a target="_blank" rel="noopener noreferrer" href="https://github.com/knicklabs/lorem-ipsum.js">lorem-ipsum</a> node package to generate sample text. It comes with a couple of configurations that can be used, for instance, to adjust the length of text. You can install it via npm with <code>npm install lorem-ipsum</code>. Furthermore, the application uses <a target="_blank" rel="noopener noreferrer" href="../javascript-fundamentals-react-requirements/index.html">JavaScript arrow functions</a> for keeping the rendered list of items in React&rsquo;s JSX concise.</p>

<p>Second, let&rsquo;s implement the anchor-based navigation. It&rsquo;s not really related to React and only requires you to use anchor tags which navigate to an identifier with a <code>#</code> prefix and each element of the list of items to have a matching identifier. We will use JavaScript template literals to interpolate the prefix with the identifier.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">li</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;lorem-ipsum&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">constructor</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">...</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
<span style="background-color: #4f424c">      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">nav</span><span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">          <span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">things</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">thing</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">              <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">a</span> <span style="color: #06b6ef">href</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #48b685">`#</span><span style="color: #f99b15">${</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #f99b15">}</span><span style="color: #48b685">`</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">headline</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/a&gt;</span>
</span><span style="background-color: #4f424c">            <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
</span><span style="background-color: #4f424c">          <span style="color: #e7e9db">))}</span>
</span><span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/nav&gt;</span>
</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">things</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">thing</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
<span style="background-color: #4f424c">            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
</span>              <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">h1</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">headline</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/h1&gt;</span>
              <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">p</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">text</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/p&gt;</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
          <span style="color: #e7e9db">))}</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
<span style="background-color: #4f424c">      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
</span>    <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>That&rsquo;s it for the anchor-based navigation. Clicking an anchor tag should navigate you to the matching section in the article. Next, before introducing the use case for the intersection observer API, you are going to style the application a bit. It would make sense to have the navigation next to the list of items, wouldn&rsquo;t it? Then only the article scrolls but the navigation is fixed to the side.</p>

<h2 class="chapter-header" id="react-styled-components">Styling a React application with Styled Components</h2>

<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/styled-components/styled-components">Styled components</a> is a popular solution for styling React applications. It follows the philosophy of &ldquo;everything is a component&rdquo;. So why shouldn&rsquo;t be a styled HTML element just a React component? You can install it for your application via npm with <code>npm install styled-components</code> on the command line. Now, let&rsquo;s give the application the necessary style. First, align the navigation and the article horizontally:</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">styled</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;styled-components&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">li</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;lorem-ipsum&#39;</span><span style="color: #e7e9db">;</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">Horizontal</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">styled</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">div</span><span style="color: #48b685">`</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">  display: flex;</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">`</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">constructor</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">...</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
<span style="background-color: #4f424c">      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Horizontal</span><span style="color: #5bc4bf">&gt;</span>
</span>        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">nav</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">things</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">thing</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
              <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">a</span> <span style="color: #06b6ef">href</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #48b685">`#</span><span style="color: #f99b15">${</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #f99b15">}</span><span style="color: #48b685">`</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">headline</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/a&gt;</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
          <span style="color: #e7e9db">))}</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/nav&gt;</span>

        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">things</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">thing</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
              <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">h1</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">headline</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/h1&gt;</span>
              <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">p</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">text</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/p&gt;</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
          <span style="color: #e7e9db">))}</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
<span style="background-color: #4f424c">      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Horizontal&gt;</span>
</span>    <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>Second, give the navigation some margin and let only the article scroll while the navigation stays fixed:</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">Horizontal</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">styled</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">div</span><span style="color: #48b685">`</span>
<span style="color: #48b685">  display: flex;</span>
<span style="color: #48b685">`</span><span style="color: #e7e9db">;</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">Navigation</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">styled</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">nav</span><span style="color: #48b685">`</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">  margin: 30px;</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">`</span><span style="color: #e7e9db">;</span>
</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">Article</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">styled</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">div</span><span style="color: #48b685">`</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">  overflow-y: scroll;</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">  height: 100vh;</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">`</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">constructor</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">...</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Horizontal</span><span style="color: #5bc4bf">&gt;</span>
<span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Navigation</span><span style="color: #5bc4bf">&gt;</span>
</span>          <span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">things</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">thing</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
              <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">a</span> <span style="color: #06b6ef">href</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #48b685">`#</span><span style="color: #f99b15">${</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #f99b15">}</span><span style="color: #48b685">`</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">headline</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/a&gt;</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
          <span style="color: #e7e9db">))}</span>
<span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Navigation&gt;</span>
</span>
<span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Article</span><span style="color: #5bc4bf">&gt;</span>
</span>          <span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">things</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">thing</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
              <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">h1</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">headline</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/h1&gt;</span>
              <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">p</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">text</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/p&gt;</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
          <span style="color: #e7e9db">))}</span>
<span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Article&gt;</span>
</span>      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Horizontal&gt;</span>
    <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>And third, give your anchor some style too whereas a selected boolean is used to accentuate the anchor with optional style. You can read more about this implementation detail in the <a target="_blank" rel="noopener noreferrer" href="https://www.styled-components.com/docs/basics#adapting-based-on-props">official documentation</a> for styled components.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">styled</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">css</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;styled-components&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">li</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;lorem-ipsum&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">Horizontal</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">styled</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">div</span><span style="color: #48b685">`</span>
<span style="color: #48b685">  display: flex;</span>
<span style="color: #48b685">`</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">Navigation</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">styled</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">nav</span><span style="color: #48b685">`</span>
<span style="color: #48b685">  margin: 30px;</span>
<span style="color: #48b685">`</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">Article</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">styled</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">div</span><span style="color: #48b685">`</span>
<span style="color: #48b685">  overflow-y: scroll;</span>
<span style="color: #48b685">  height: 100vh;</span>
<span style="color: #48b685">`</span><span style="color: #e7e9db">;</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">Anchor</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">styled</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">a</span><span style="color: #48b685">`</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">  display: block;</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">  margin-bottom: 10px;</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">  text-decoration: none;</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c"><span style="color: #48b685">  </span><span style="color: #f99b15">${</span><span style="color: #06b6ef">props</span> <span style="color: #5bc4bf">=&gt;</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">props</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">selected</span>
</span><span style="background-color: #4f424c">      <span style="color: #5bc4bf">?</span> <span style="color: #06b6ef">css</span><span style="color: #48b685">`</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">          border-bottom: 1px solid #000;</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">          font-weight: bold;</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">        `</span>
</span><span style="background-color: #4f424c">      <span style="color: #5bc4bf">:</span> <span style="color: #815ba4">null</span><span style="color: #f99b15">}</span><span style="color: #48b685">;</span>
</span><span style="background-color: #4f424c"><span style="color: #48b685">`</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">constructor</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">...</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Horizontal</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Navigation</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">things</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">thing</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
<span style="background-color: #4f424c">              <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Anchor</span>
</span><span style="background-color: #4f424c">                <span style="color: #06b6ef">href</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #48b685">`#</span><span style="color: #f99b15">${</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #f99b15">}</span><span style="color: #48b685">`</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">                <span style="color: #06b6ef">selected</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span> <span style="color: #5bc4bf">===</span> <span style="color: #48b685">&#39;a&#39;</span><span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">              <span style="color: #5bc4bf">&gt;</span>
</span>                <span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">headline</span><span style="color: #e7e9db">}</span>
<span style="background-color: #4f424c">              <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Anchor&gt;</span>
</span>            <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
          <span style="color: #e7e9db">))}</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Navigation&gt;</span>

        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Article</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">things</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">thing</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
              <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">h1</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">headline</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/h1&gt;</span>
              <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">p</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">text</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/p&gt;</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
          <span style="color: #e7e9db">))}</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Article&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Horizontal&gt;</span>
    <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>The selected styling comes into play in the next section of this tutorial where the intersection observer API is applied to check whether a section is currently viewed by a user or not. For now, every section gets a <code>false</code> selection boolean flag <a href="../react-pass-props-to-component/index.html">passed as prop</a> except for the matching section with the id &ldquo;a&rdquo;.</p>

<div class="post-image-primary">
    <div class="pinterest-pinner-wrapper" itemscope itemtype="http://schema.org/ImageObject">
        <div class="pinterest-pinner">
            <a
                data-pin-do="buttonPin"
                data-pin-save="true"
                data-pin-tall="true"
                href="https://www.pinterest.com/pin/create/button/?url=https%3a%2f%2fchrispaul.dev%2freact-intersection-observer-api%2f&amp;media=https://chrispaul.dev/img%2fposts%2freact-intersection-observer-api%2farticle-navigation-side-by-side.png&amp;description=">
            </a>
        </div>

        <img
            class="img-lazy img-responsive"
            data-lazy-src="/src="/img/posts/react-intersection-observer-api/article-navigation-side-by-side.png"
            data-is-src-set="is-src-set"
            alt="react anchor-based navigation"
            itemprop="image"
        />
    </div>
</div>


<h2 class="chapter-header" id="react-intersection-observer-api">Intersection Observer API in React</h2>

<p>Finally, we are going to introduce the intersection observer API in React. The use case: It should be possible to tell only by looking at the navigation which section is currently read by the user. So when a user scrolls through the article, the navigation should always highlight the current section. That&rsquo;s why we have introduced the selected boolean flag for the Anchor component before. But at the moment, we are not able to tell if the anchor should be selected or not. That&rsquo;s where the intersection observer API can help us, because it should know which section is in the specified viewport of the user.</p>

<p>First, we are going to create references for our elements that need to be accessible for the intersection observer. These elements are the single sections (things) but also the wrapping parent element which is used as anchor for the intersection observer later.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">constructor</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">super</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">);</span>

    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">things</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">[</span>
        <span style="color: #e7e9db">{</span>
          <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;a&#39;</span><span style="color: #e7e9db">,</span>
          <span style="color: #06b6ef">headline</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;React&#39;</span><span style="color: #e7e9db">,</span>
          <span style="color: #06b6ef">text</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">li</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">count</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">50</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">units</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;sentences&#39;</span> <span style="color: #e7e9db">}),</span>
        <span style="color: #e7e9db">},</span>
        <span style="color: #e7e9db">{</span>
          <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;b&#39;</span><span style="color: #e7e9db">,</span>
          <span style="color: #06b6ef">headline</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;Redux&#39;</span><span style="color: #e7e9db">,</span>
          <span style="color: #06b6ef">text</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">li</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">count</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">50</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">units</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;sentences&#39;</span> <span style="color: #e7e9db">}),</span>
        <span style="color: #e7e9db">},</span>
        <span style="color: #e7e9db">{</span>
          <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;c&#39;</span><span style="color: #e7e9db">,</span>
          <span style="color: #06b6ef">headline</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;GraphQL&#39;</span><span style="color: #e7e9db">,</span>
          <span style="color: #06b6ef">text</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">li</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">count</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">50</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">units</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;sentences&#39;</span> <span style="color: #e7e9db">}),</span>
        <span style="color: #e7e9db">},</span>
      <span style="color: #e7e9db">],</span>
    <span style="color: #e7e9db">};</span>

<span style="background-color: #4f424c">    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">rootRef</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">createRef</span><span style="color: #e7e9db">();</span>
</span>
<span style="background-color: #4f424c">    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">singleRefs</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">things</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">reduce</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">acc</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">value</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">acc</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">value</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">createRef</span><span style="color: #e7e9db">();</span>
</span><span style="background-color: #4f424c">      <span style="color: #815ba4">return</span> <span style="color: #06b6ef">acc</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">},</span> <span style="color: #e7e9db">{});</span>
</span>  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Horizontal</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Navigation</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #e7e9db">...</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Navigation&gt;</span>

<span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Article</span> <span style="color: #06b6ef">ref</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">rootRef</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
</span>          <span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">things</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">thing</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span>
              <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span>
              <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span>
<span style="background-color: #4f424c">              <span style="color: #06b6ef">ref</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">singleRefs</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">]}</span>
</span>            <span style="color: #5bc4bf">&gt;</span>
              <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">h1</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">headline</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/h1&gt;</span>
              <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">p</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">text</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/p&gt;</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
          <span style="color: #e7e9db">))}</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Article&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Horizontal&gt;</span>
    <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>By having these, it should be possible to track every mapped element within the Article component in relation to the Article as root reference. In order to get to this point, you have used React&rsquo;s createRef() API and a <a target="_blank" rel="noopener noreferrer" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce">JavaScript reduce function</a> to create an object (dictionary) of references which can be accessed by ids in the render method again.</p>

<p>Second, let&rsquo;s introduce the intersection observer API which consists of an initialization and observe part:</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">constructor</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">super</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">);</span>

    <span style="color: #e7e9db">...</span>

    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">rootRef</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">createRef</span><span style="color: #e7e9db">();</span>

    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">singleRefs</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">things</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">reduce</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">acc</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">value</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">acc</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">value</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">createRef</span><span style="color: #e7e9db">();</span>
      <span style="color: #815ba4">return</span> <span style="color: #06b6ef">acc</span><span style="color: #e7e9db">;</span>
    <span style="color: #e7e9db">},</span> <span style="color: #e7e9db">{});</span>

<span style="background-color: #4f424c">    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">callback</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">entries</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">console</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">log</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">entries</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">};</span>
</span>
<span style="background-color: #4f424c">    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">observer</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">new</span> <span style="color: #06b6ef">IntersectionObserver</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">callback</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">root</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">rootRef</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">current</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">threshold</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">new</span> <span style="color: #e7e9db">Array(</span><span style="color: #f99b15">101</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">fill</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">0</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">v</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">i</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">i</span> <span style="color: #5bc4bf">*</span> <span style="color: #f99b15">0.01</span><span style="color: #e7e9db">),</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">});</span>
</span>  <span style="color: #e7e9db">}</span>

<span style="background-color: #4f424c">  <span style="color: #06b6ef">componentDidMount</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">Object.</span><span style="color: #06b6ef">values</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">singleRefs</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">forEach</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">value</span> <span style="color: #5bc4bf">=&gt;</span>
</span><span style="background-color: #4f424c">      <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">observer</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">observe</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">value</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">current</span><span style="color: #e7e9db">),</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">}</span>
</span>
  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Horizontal</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Navigation</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #e7e9db">...</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Navigation&gt;</span>

        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Article</span> <span style="color: #06b6ef">ref</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">rootRef</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">things</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">thing</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span>
              <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span>
              <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span>
              <span style="color: #06b6ef">ref</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">singleRefs</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">]}</span>
            <span style="color: #5bc4bf">&gt;</span>
              <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">h1</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">headline</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/h1&gt;</span>
              <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">p</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">text</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/p&gt;</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
          <span style="color: #e7e9db">))}</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Article&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Horizontal&gt;</span>
    <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>The IntersectionObserver constructor takes two arguments: a callback function which is called every time an observed element (single ref) changes its position relatively to the viewport (root ref) and a configuration object. In the configuration object, you can pass the root reference. If it is not passed, it defaults to the browser&rsquo;s viewport. The threshold is another configuration where you can make a fine-grained choice when to trigger the callback function of the observer.</p>

<p><strong>Root:</strong> <em>&ldquo;The element that is used as the viewport for checking visibility of the target. Must be the ancestor of the target. Defaults to the browser viewport if not specified or if null.&rdquo;</em></p>

<p><strong>Threshold:</strong> <em>&ldquo;Either a single number or an array of numbers which indicate at what percentage of the target&rsquo;s visibility the observer&rsquo;s callback should be executed. If you only want to detect when visibility passes the 50% mark, you can use a value of 0.5. If you want the callback run every time visibility passes another 25%, you would specify the array [0, 0.25, 0.5, 0.75, 1]. The default is 0 (meaning as soon as even one pixel is visible, the callback will be run). A value of 1.0 means that the threshold isn&rsquo;t considered passed until every pixel is visible.&rdquo;</em></p>

<p>In addition, you have to initiate the observation explicitly by passing all elements (single refs) to the observer&rsquo;s observe method. This happens in React in the <code>componentDidMount()</code> lifecycle method, because only then the all refs are applied for the elements in the <code>render()</code> method.</p>

<p>Trying it this way, you should already be able to see the console logs from the callback function in your browser&rsquo;s dev tools. The callback has all entries accessible which have changed their position in relation to the root reference regarding to the defined thresholds. Each entry has a intersectionRatio property which tells us how much of the single referenced element is visible in the viewport (root reference). That&rsquo;s it for the intersection observer setup in React.</p>

<p>However, let&rsquo;s accomplish to our use case: We want to know about the selected element in the navigation by selecting element for the entry (single ref) with the highest intersection ratio. It could be as straight forward as filtering all entries from the callback function and choosing the one with the highest intersection ratio. But that doesn&rsquo;t work, because only the changed entries are accessible in the callback function. It can still happen that an entry which is not in the callback function has the highest intersection ratio, because it didn&rsquo;t pass a threshold. That&rsquo;s why we need to keep track of the ratios of <strong>each</strong> single reference. That can be done at one go in the object (dictionary) where we have set up the single references previously.</p>

<p><div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">constructor</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">super</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">);</span>

    <span style="color: #e7e9db">...</span>

    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">rootRef</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">createRef</span><span style="color: #e7e9db">();</span>

    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">singleRefs</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">things</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">reduce</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">acc</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">value</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">      <span style="color: #06b6ef">acc</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">value</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">        <span style="color: #06b6ef">ref</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">createRef</span><span style="color: #e7e9db">(),</span>
</span><span style="background-color: #4f424c">        <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">value</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">        <span style="color: #06b6ef">ratio</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">0</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">};</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">      <span style="color: #815ba4">return</span> <span style="color: #06b6ef">acc</span><span style="color: #e7e9db">;</span>
</span>    <span style="color: #e7e9db">},</span> <span style="color: #e7e9db">{});</span>

    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">callback</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">entries</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">console</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">log</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">entries</span><span style="color: #e7e9db">);</span>
    <span style="color: #e7e9db">};</span>

    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">observer</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">new</span> <span style="color: #06b6ef">IntersectionObserver</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">callback</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">root</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">rootRef</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">current</span><span style="color: #e7e9db">,</span>
      <span style="color: #06b6ef">threshold</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">new</span> <span style="color: #e7e9db">Array(</span><span style="color: #f99b15">101</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">fill</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">0</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">v</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">i</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">i</span> <span style="color: #5bc4bf">*</span> <span style="color: #f99b15">0.01</span><span style="color: #e7e9db">),</span>
    <span style="color: #e7e9db">});</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">componentDidMount</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">Object.</span><span style="color: #06b6ef">values</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">singleRefs</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">forEach</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">value</span> <span style="color: #5bc4bf">=&gt;</span>
<span style="background-color: #4f424c">      <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">observer</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">observe</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">value</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">ref</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">current</span><span style="color: #e7e9db">),</span>
</span>    <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Horizontal</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Navigation</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #e7e9db">...</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Navigation&gt;</span>

        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Article</span> <span style="color: #06b6ef">ref</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">rootRef</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">things</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">thing</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span>
              <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span>
              <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span>
<span style="background-color: #4f424c">              <span style="color: #06b6ef">ref</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">singleRefs</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">].</span><span style="color: #06b6ef">ref</span><span style="color: #e7e9db">}</span>
</span>            <span style="color: #5bc4bf">&gt;</span>
              <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">h1</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">headline</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/h1&gt;</span>
              <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">p</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">text</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/p&gt;</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
          <span style="color: #e7e9db">))}</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Article&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Horizontal&gt;</span>
    <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre></div>
</p>

<p>Every single reference is initiated with a ratio of 0. Now, once the callback function is called, it should updated these ratios in the object. The target and its id of an entry can be used to find the corresponding single reference in the object (hence the dictionary) and to update the intersection ratio.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">constructor</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">super</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">);</span>

    <span style="color: #e7e9db">...</span>

    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">rootRef</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">createRef</span><span style="color: #e7e9db">();</span>

    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">singleRefs</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">things</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">reduce</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">acc</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">value</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">acc</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">value</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
        <span style="color: #06b6ef">ref</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">createRef</span><span style="color: #e7e9db">(),</span>
        <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">value</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">,</span>
        <span style="color: #06b6ef">ratio</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">0</span><span style="color: #e7e9db">,</span>
      <span style="color: #e7e9db">};</span>

      <span style="color: #815ba4">return</span> <span style="color: #06b6ef">acc</span><span style="color: #e7e9db">;</span>
    <span style="color: #e7e9db">},</span> <span style="color: #e7e9db">{});</span>

    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">callback</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">entries</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">      <span style="color: #06b6ef">entries</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">forEach</span><span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">        <span style="color: #06b6ef">entry</span> <span style="color: #5bc4bf">=&gt;</span>
</span><span style="background-color: #4f424c">          <span style="color: #e7e9db">(</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">singleRefs</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">entry</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">target</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">].</span><span style="color: #06b6ef">ratio</span> <span style="color: #5bc4bf">=</span>
</span><span style="background-color: #4f424c">            <span style="color: #06b6ef">entry</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">intersectionRatio</span><span style="color: #e7e9db">),</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">);</span>
</span>    <span style="color: #e7e9db">};</span>

    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">observer</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">new</span> <span style="color: #06b6ef">IntersectionObserver</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">callback</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">root</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">rootRef</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">current</span><span style="color: #e7e9db">,</span>
      <span style="color: #06b6ef">threshold</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">new</span> <span style="color: #e7e9db">Array(</span><span style="color: #f99b15">101</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">fill</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">0</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">v</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">i</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">i</span> <span style="color: #5bc4bf">*</span> <span style="color: #f99b15">0.01</span><span style="color: #e7e9db">),</span>
    <span style="color: #e7e9db">});</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">componentDidMount</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">Object.</span><span style="color: #06b6ef">values</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">singleRefs</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">forEach</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">value</span> <span style="color: #5bc4bf">=&gt;</span>
      <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">observer</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">observe</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">value</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">ref</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">current</span><span style="color: #e7e9db">),</span>
    <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">...</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>You may wonder why we haven&rsquo;t used React&rsquo;s local state for keeping track of the changing ratios. It&rsquo;s because we don&rsquo;t want to trigger a re-render with every observer callback call. It would lead to a bad performance for the application while scrolling through the list. Instead, you can use the component&rsquo;s instance (this) to keep track of the single references with their intersection ratios without triggering a re-render on every scroll event.</p>

<p>Now, you need to find the highest ratio of <strong>every</strong> single reference (not only the entries, that&rsquo;s why we keep track of all the ratios). Once you have the reference with the highest ratio, you can compare it to the current reference with the highest ratio. If the new highest ratio is higher than the current highest ratio, you can set the current single reference as state.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">constructor</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">super</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">);</span>

    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">things</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">[</span> <span style="color: #e7e9db">...</span> <span style="color: #e7e9db">],</span>
<span style="background-color: #4f424c">      <span style="color: #06b6ef">activeThing</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">null</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">ratio</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">0</span> <span style="color: #e7e9db">},</span>
</span>    <span style="color: #e7e9db">};</span>

    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">rootRef</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">createRef</span><span style="color: #e7e9db">();</span>

    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">singleRefs</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">things</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">reduce</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">acc</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">value</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">acc</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">value</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
        <span style="color: #06b6ef">ref</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">createRef</span><span style="color: #e7e9db">(),</span>
        <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">value</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">,</span>
        <span style="color: #06b6ef">ratio</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">0</span><span style="color: #e7e9db">,</span>
      <span style="color: #e7e9db">};</span>

      <span style="color: #815ba4">return</span> <span style="color: #06b6ef">acc</span><span style="color: #e7e9db">;</span>
    <span style="color: #e7e9db">},</span> <span style="color: #e7e9db">{});</span>

    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">callback</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">entries</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">entries</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">forEach</span><span style="color: #e7e9db">(</span>
        <span style="color: #06b6ef">entry</span> <span style="color: #5bc4bf">=&gt;</span>
          <span style="color: #e7e9db">(</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">singleRefs</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">entry</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">target</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">].</span><span style="color: #06b6ef">ratio</span> <span style="color: #5bc4bf">=</span>
            <span style="color: #06b6ef">entry</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">intersectionRatio</span><span style="color: #e7e9db">),</span>
      <span style="color: #e7e9db">);</span>

<span style="background-color: #4f424c">      <span style="color: #815ba4">const</span> <span style="color: #06b6ef">activeThing</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">Object.</span><span style="color: #06b6ef">values</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">singleRefs</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">reduce</span><span style="color: #e7e9db">(</span>
</span><span style="background-color: #4f424c">        <span style="color: #e7e9db">(</span><span style="color: #06b6ef">acc</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">value</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">value</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">ratio</span> <span style="color: #5bc4bf">&gt;</span> <span style="color: #06b6ef">acc</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">ratio</span> <span style="color: #5bc4bf">?</span> <span style="color: #06b6ef">value</span> <span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">acc</span><span style="color: #e7e9db">),</span>
</span><span style="background-color: #4f424c">        <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">activeThing</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">);</span>
</span>
<span style="background-color: #4f424c">      <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">activeThing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">ratio</span> <span style="color: #5bc4bf">&gt;</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">activeThing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">ratio</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">        <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">activeThing</span> <span style="color: #e7e9db">});</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">}</span>
</span>    <span style="color: #e7e9db">};</span>

    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">observer</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">new</span> <span style="color: #06b6ef">IntersectionObserver</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">callback</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">root</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">rootRef</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">current</span><span style="color: #e7e9db">,</span>
      <span style="color: #06b6ef">threshold</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">new</span> <span style="color: #e7e9db">Array(</span><span style="color: #f99b15">101</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">fill</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">0</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">v</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">i</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">i</span> <span style="color: #5bc4bf">*</span> <span style="color: #f99b15">0.01</span><span style="color: #e7e9db">),</span>
    <span style="color: #e7e9db">});</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">componentDidMount</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">Object.</span><span style="color: #06b6ef">values</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">singleRefs</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">forEach</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">value</span> <span style="color: #5bc4bf">=&gt;</span>
      <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">observer</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">observe</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">value</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">ref</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">current</span><span style="color: #e7e9db">),</span>
    <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">...</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>Also you start out with an initial local state for the active single reference (<code>activeThing</code>). Then it can be used when the observer is called the first time when it needs it to compare to against the new active thing. Last but not least, the <code>activeThing</code> tells you which single reference has the highest intersection ratio in the viewport (here the root ref). In the end, it can be used to selected the matching element in the navigation.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">constructor</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">...</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Horizontal</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Navigation</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">things</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">thing</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
              <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Anchor</span>
                <span style="color: #06b6ef">href</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #48b685">`#</span><span style="color: #f99b15">${</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #f99b15">}</span><span style="color: #48b685">`</span><span style="color: #e7e9db">}</span>
<span style="background-color: #4f424c">                <span style="color: #06b6ef">selected</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span> <span style="color: #5bc4bf">===</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">activeThing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span>
</span>              <span style="color: #5bc4bf">&gt;</span>
                <span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">headline</span><span style="color: #e7e9db">}</span>
              <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Anchor&gt;</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
          <span style="color: #e7e9db">))}</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Navigation&gt;</span>

        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Article</span> <span style="color: #06b6ef">ref</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">rootRef</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">things</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">thing</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span>
              <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span>
              <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span>
              <span style="color: #06b6ef">ref</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">singleRefs</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">].</span><span style="color: #06b6ef">ref</span><span style="color: #e7e9db">}</span>
            <span style="color: #5bc4bf">&gt;</span>
              <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">h1</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">headline</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/h1&gt;</span>
              <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">p</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">thing</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">text</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/p&gt;</span>
            <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
          <span style="color: #e7e9db">))}</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Article&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Horizontal&gt;</span>
    <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>Once you scroll through your application, the navigation element with the highest intersection ratio should be selected. In case you run into issues with the intersection observer (e.g. ReferenceError: IntersectionObserver is not defined), you can install a <a target="_blank" rel="noopener noreferrer" href="https://github.com/w3c/IntersectionObserver">polyfill</a> for it. It can be done on the command line via npm with <code>npm install intersection-observer</code>. Then you can import it in your application with <code>import 'intersection-observer';</code>. This should also help to get your tests working with the intersection observer API.</p>

<hr class="section-divider">

<p>After all, React&rsquo;s ref API is the necessary connection between React and the intersection observer API. The finished application can be found in this <a target="_blank" rel="noopener noreferrer" href="https://github.com/the-road-to-learn-react/react-intersection-observer-api-example">GitHub repository</a>. The previous use case was only one applicable scenario where the intersection observer can be used. You should try to apply it for your own use case. I would be happy to see what you have come up with.</p>


                            
<div class="feedback-and-share text-center">
    <hr>
    
    <p class="lead">
        I would like to hear your thoughts :-) Find me on <a target="_blank" rel="noopener noreferrer" aria-label="twitter" href="https://twitter.com/rwieruch"><i class="fa fa-twitter"></i>Twitter</a> and <a target="_blank" aria-label="facebook" href="https://www.facebook.com/rwieruch/"><i class="fa fa-facebook"></i>Facebook</a>
    </p>
    
    
        <p class="lead">
            Did the article help you? Share it with your friends on social media <i class="fa fa-arrow-left"></i>, support me as my <a target="_blank" rel="noopener noreferrer" aria-label="patreon" href="https://www.patreon.com/rwieruch"><i class="fa fa-paw"></i>Patron</a>, and become a full-stack developer with my books <i class="fa fa-arrow-down"></i>
        </p>
    
</div>


                            
                                <div class="box-inline col-md-12">
    <div class="col-md-12 text-center">
        <h2 class="newsletter">The Road to learn React</h2>
        
            <div class="col-md-4">
                <img class="img-lazy img-responsive" data-lazy-src="//img/page/cover.png">
            </div>
        
        <p class="lead">
            Build a Hacker News App along the way. No setup configuration. No tooling. No Redux. Plain React in 200+ pages of learning material. Learn React like <strong>50.000+ readers</strong>.
        </p>
        <a
            class="btn btn-template-main"
            href="https://roadtoreact.com"
            target="_blank"
            rel="noopener noreferrer"
        >
            Get the Book for free <i class="fa fa-chevron-right"></i>
        </a>
        
            <div>
                <a
                    href="https://amzn.to/2QY2ONp"
                    target="_blank"
                    rel="noopener noreferrer"
                >
                    Get it from Amazon
                </a>
            </div>
        
    </div>
</div>
                            
                        </div>

                        
                        
                        <div id="comments">
                            <div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'rwieruch';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                        </div>
                        

                    </article>
                    

                </div>
                

            </div>
            
        </div>
        

        

<section class="bar background-image-fixed-2 no-mb color-white text-center">
    <div class="dark-mask"></div>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h3 class="lead">Never miss an article about web development, JavaScript and self-growth.</h3>
                <h2 class="text-uppercase">Take Part</h2>
            </div>

            <div class="col-md-12 text-center">
                
                    <h3 class="lead"><i class="fa fa-check"></i> Join 30.000&#43; Developers</h3>
                
                    <h3 class="lead"><i class="fa fa-check"></i> Learn Web Development with JavaScript</h3>
                
                    <h3 class="lead"><i class="fa fa-check"></i> Tips and Tricks</h3>
                
                    <h3 class="lead"><i class="fa fa-check"></i> Access Tutorials, eBooks and Courses</h3>
                
                    <h3 class="lead"><i class="fa fa-check"></i> Personal Development as a Software Engineer</h3>
                
            </div>
            <div class="col-md-12">
                <p class="text-center">
                    



<div id="mc_embed_signup">
    <form
        action="https://www.getrevue.co/profile/rwieruch/add_subscriber"
        method="post"
        id="revue-form"
        name="revue-form"
        target="_blank">
        <div id="mc_embed_signup_scroll">
            <input
                class="email"
                placeholder="email address"
                type="email"
                name="member[email]"
                id="member_email"
            >
            <div>
                <button
                    type="submit"
                    value="Subscribe"
                    name="member[subscribe]"
                    id="member_submit"
                    class="btn btn-template-transparent-black btn-lg"
                >
                    Subscribe
                </button>
            </div>
        </div>
    </form>
</div>

                </p>
            </div>
        </div>
    </div>
</section>




        <footer id="subfooter">
    <div class="container">

        <div class="col-md-5 col-sm-6">

            <h4>Recent posts</h4>

            <div class="blog-entries">
                
                <div class="item same-height-row clearfix">
                    <div class="article same-height-always">
                        <a href="../redux-vs-usereducer/index.html">
                          
                            <img
                                data-lazy-src="//img/posts/redux-vs-usereducer/banner.jpg"
                                data-is-thumb="is-thumb"
                                class="img-lazy img-responsive"
                                alt="React&#39;s useReducer vs Redux"
                            >
                          
                        </a>
                    </div>
                    <div class="name same-height-always">
                        <h5><a href="../redux-vs-usereducer/index.html">React&#39;s useReducer vs Redux</a></h5>
                    </div>
                </div>
                
                <div class="item same-height-row clearfix">
                    <div class="article same-height-always">
                        <a href="../publish-npm-package-node/index.html">
                          
                            <img
                                data-lazy-src="//img/posts/publish-npm-package-node/banner.jpg"
                                data-is-thumb="is-thumb"
                                class="img-lazy img-responsive"
                                alt="How to publish a npm package?"
                            >
                          
                        </a>
                    </div>
                    <div class="name same-height-always">
                        <h5><a href="../publish-npm-package-node/index.html">How to publish a npm package?</a></h5>
                    </div>
                </div>
                
                <div class="item same-height-row clearfix">
                    <div class="article same-height-always">
                        <a href="../react-scroll-to-item/index.html">
                          
                            <img
                                data-lazy-src="//img/posts/react-scroll-to-item/banner.jpg"
                                data-is-thumb="is-thumb"
                                class="img-lazy img-responsive"
                                alt="How to Scroll to Item in React?"
                            >
                          
                        </a>
                    </div>
                    <div class="name same-height-always">
                        <h5><a href="../react-scroll-to-item/index.html">How to Scroll to Item in React?</a></h5>
                    </div>
                </div>
                
            </div>

            <hr class="hidden-md hidden-lg hidden-sm">

        </div>
        

        
        <div class="col-md-5 col-md-offset-2 col-sm-6">

            <h4>About Me</h4>

            <div class="blog-entries">
                <div class="item same-height-row clearfix">
                    <div class="profile same-height-always">
                        <img
                            class="img-lazy img-responsive"
                            data-lazy-src="//img/page/profile.jpg"
                            alt="profile"
                        >
                    </div>
                    <div class="name same-height-always">
                        <p>
                            Hi, I'm Chris - a German and Remote/Berlin based consulting software engineer. Find out more <a href="../about/index.html">about me</a>, <a href="../work-with-me/index.html">work with me</a>, or have a look at my social media profiles below.
                        </p>
                    </div>
                </div>
            </div>

        </div>
        
        

    </div>
    
</footer>






        <footer id="copyright">
  <div class="container">
    <div class="row">
      <div class="col-md-4">
        <ul class="info list-inline quicklinks pull-left">
          
            <li>© Chris Paul</li>
          
        </ul>
      </div>
      <div class="col-md-4">
        <ul class="list-inline footer-social-buttons text-center">
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.twitter.com/rwieruch"><i class="fa fa-twitter"></i></a></li>
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.github.com/rwieruch"><i class="fa fa-github"></i></a></li>
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.linkedin.com/in/chris-wieruch-971933a6"><i class="fa fa-linkedin"></i></a></li>
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.producthunt.com/@rwieruch"><i class="fa fa-product-hunt"></i></a></li>
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.patreon.com/rwieruch"><i class="fa fa-paw"></i></a></li>
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.paypal.me/rwieruch"><i class="fa fa-paypal"></i></a></li>
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.facebook.com/rwieruch"><i class="fa fa-facebook"></i></a></li>
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.instagram.com/rwieruch/"><i class="fa fa-instagram"></i></a></li>
          
        </ul>
      </div>
      <div class="col-md-4">
        <ul class="info list-inline quicklinks pull-right">
          
            <li><a aria-label="quicklinks" href="../legal/index.html">Legal Notice</a></li>
          
        </ul>
      </div>
    </div>
  </div>
</footer>


    </div>
    



<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>









<script src="../js/script.js"></script>



  </body>
</html>
