<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="google-site-verification" content="We9gRQmlTIjMkOPPjPWDQTXd15nWA6tBEYlxQ2cMpEg" />

  <title>
    What are React Hooks? - CPaul
  </title>

  <meta name="author" content="" />

  
    <meta name="description" content="React Hooks are a way to use state and side-effects in React function components. They manage local state, fetch data from a API, interact with the DOM API and Browser API ...">
  

  <meta name="theme-color" content="#38bb6c"/>

  <meta name="generator" content="Hugo 0.41" />

  
  <link href="https://cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">

  
  

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">

  
  <link href="../css/bootstrap.default.css" rel="stylesheet" id="theme-stylesheet">
  <link href="../css/customizations.css" rel="stylesheet">

  
  
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
  <link rel="shortcut icon" href="../img/favicon/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="../img/favicon/apple-touch-icon.png" />
  <link rel="manifest" href="../img/favicon/manifest.json">
  <link rel="mask-icon" href="../img/favicon/safari-pinned-tab.svg" color="#5bbad5">

  <link rel="alternate" href="../index.xml" type="application/rss+xml" title="CPaul">

  
  
<meta itemprop="name" content="What are React Hooks?">
<meta itemprop="description" content="React Hooks are a way to use state and side-effects in React function components. They manage local state, fetch data from a API, interact with the DOM API and Browser API ...">



    <meta itemprop="image" content="https://chrispaul.dev/img/posts/react-hooks/banner_640.jpg">



<meta itemprop="keywords" content="angular,apollo,d3,graphql,growth,javascript,machine-learning,mobx,node,react,reason,redux,tooling,vue,web-development,angular,apollo,d3,graphql,growth,javascript,machine-learning,mobx,node,react,reason,redux,tooling,web-development," />


<meta itemprop="wordCount" content="4773">


  
  <meta name="keywords" content="react hooks">

  <meta property="og:title" content="What are React Hooks? - CPaul">


  <meta property="og:description" content="React Hooks are a way to use state and side-effects in React function components. They manage local state, fetch data from a API, interact with the DOM API and Browser API ..." />


<meta property="og:type" content="website" />
<meta property="og:url" content="https://chrispaul.dev/react-hooks/" />
<meta property="og:image" content="https://chrispaul.dev/img/posts/react-hooks/banner_640.jpg" />

  

    <meta name="news_keywords" content="react hooks" />

  

    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:image:src" content="https://chrispaul.dev/img/posts/react-hooks/banner_640.jpg"/>



<meta name="twitter:title" content="What are React Hooks?"/>
<meta name="twitter:description" content="React Hooks are a way to use state and side-effects in React function components. They manage local state, fetch data from a API, interact with the DOM API and Browser API ..."/>
<meta name="twitter:site" content="@rwieruch"/>
<meta name="twitter:domain" content="rwieruch"/>

  

</head>


  <body>

    <div id="all">

        <header>

          <div class="navbar-affixed-top" data-spy="affix" data-offset-top="200">

    <div class="navbar navbar-default yamm" role="navigation" id="navbar">

        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand home" href="../index.html">
                    <img src="../img/page/logo.svg" alt="What are React Hooks? logo" class="img-lazy">
                    <span class="sr-only">What are React Hooks? - go to homepage</span>
                </a>

                <div class="navbar-buttons">
                    <button type="button" class="navbar-toggle btn-template-main" data-toggle="collapse" data-target="#navigation">
                        <span class="sr-only">Toggle navigation</span>
                        <i class="fa fa-align-justify"></i>
                    </button>
                </div>
            </div>
            

            <div class="navbar-collapse collapse" id="navigation">
                <ul class="nav navbar-nav navbar-right">
                    
                    <li class="dropdown">
                        
                            <a href="../index.html">Blog</a>
                        
                    </li>
                    
                    <li class="dropdown">
                        
                            <a href="../work-with-me/index.html">Work with me</a>
                        
                    </li>
                    
                    <li class="dropdown">
                        
                            <a href="../about/index.html">About</a>
                        
                    </li>
                    
                    <li class="dropdown">
                        
                            <a style="color: #38bb6c" href="https://roadtoreact.com/">Books &amp; Courses</a>
                        
                    </li>
                    
                </ul>
            </div>
            

            <div class="collapse clearfix" id="search">

                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search">
                        <span class="input-group-btn">

                    <button type="submit" class="btn btn-template-main"><i class="fa fa-search"></i></button>

                </span>
                    </div>
                </form>

            </div>
            

        </div>
    </div>
    

</div>




        </header>

        <div class="post-share post-share-fixed post-share-desktop hidden-xs hidden-sm">
    

<a
    aria-label="icon-facebook"
    class="icon-facebook"
    href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fchrispaul.dev%2freact-hooks%2f"
    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
    <i class="fa fa-facebook"></i>
</a>


<a
    aria-label="icon-twitter"
    class="icon-twitter"
    href="https://twitter.com/share?text=What%20are%20React%20Hooks%3f%20by%20%40rwieruch%20%23ReactJs&amp;url=https%3a%2f%2fchrispaul.dev%2freact-hooks%2f"
    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
    <i class="fa fa-twitter"></i>
</a>





<a
    aria-label="icon-linkedin"
    class="icon-linkedin"
    href="https://www.linkedin.com/shareArticle?mini=true&amp;title=What%20are%20React%20Hooks%3f&amp;url=https%3a%2f%2fchrispaul.dev%2freact-hooks%2f">
    <i class="fa fa-linkedin"></i>
</a>

</div>

<div class="visible-xs visible-sm text-center">
    <div class="post-share post-share-fixed post-share-mobile">
        

<a
    aria-label="icon-facebook"
    class="icon-facebook"
    href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fchrispaul.dev%2freact-hooks%2f"
    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
    <i class="fa fa-facebook"></i>
</a>


<a
    aria-label="icon-twitter"
    class="icon-twitter"
    href="https://twitter.com/share?text=What%20are%20React%20Hooks%3f%20by%20%40rwieruch%20%23ReactJs&amp;url=https%3a%2f%2fchrispaul.dev%2freact-hooks%2f"
    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
    <i class="fa fa-twitter"></i>
</a>





<a
    aria-label="icon-linkedin"
    class="icon-linkedin"
    href="https://www.linkedin.com/shareArticle?mini=true&amp;title=What%20are%20React%20Hooks%3f&amp;url=https%3a%2f%2fchrispaul.dev%2freact-hooks%2f">
    <i class="fa fa-linkedin"></i>
</a>

    </div>
</div>

        

        <div class="hidden-xs">
            

<section class="bar background-image-fixed-2 no-mb color-white text-center">
    <div class="dark-mask"></div>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h3 class="lead">Never miss an article about web development, JavaScript and self-growth.</h3>
                <h2 class="text-uppercase newsletter">Take Part</h2>
            </div>

            <div class="col-md-12">
                <p class="text-center">
                    



<div id="mc_embed_signup">
    <form
        action="https://www.getrevue.co/profile/rwieruch/add_subscriber"
        method="post"
        id="revue-form"
        name="revue-form"
        target="_blank">
        <div id="mc_embed_signup_scroll">
            <input
                class="email"
                placeholder="email address"
                type="email"
                name="member[email]"
                id="member_email"
            >
            <div>
                <button
                    type="submit"
                    value="Subscribe"
                    name="member[subscribe]"
                    id="member_submit"
                    class="btn btn-template-transparent-black btn-lg"
                >
                    Subscribe
                </button>
            </div>
        </div>
    </form>
</div>

                </p>
            </div>
        </div>
    </div>
</section>



        </div>

        <div id="content">
            <div class="container">

                <div class="row">

                    <article
                        class="col-md-8 col-md-offset-2"
                        id="blog-post"
                        itemprop="blogPosts"
                        itemscope itemtype="http://schema.org/BlogPosting">

                        <div id="post-content" itemprop="articleBody">

                            <header>
                                <h1 itemprop="name headline">What are React Hooks?</h1>
                            </header>

                            <div class="text-center">
                                
    <a target="_blank" rel="noopener noreferrer" href="https://www.facebook.com/rwieruch" class="facebook-button-follow">
         <i class="fa fa-facebook"></i>Follow
    </a>


                                &nbsp;
                                

                                &nbsp;
                                
  <a target="_blank" rel="noopener noreferrer" href="https://twitter.com/intent/follow?screen_name=rwieruch" class="generic-button-follow">
    <img src="https://img.shields.io/twitter/follow/rwieruch.svg?style=social&amp;logo=twitter&amp;label=Follow" alt="Follow on Twitter">
  </a>


                                &nbsp;
                                
                            </div>

                            <p class="text-muted text-uppercase mb-small text-center">
    <span itemprop="author publisher">
        
    </span>

    
        <time datetime="2018-10-29" itemprop="datePublished">
            October 29, 2018
        </time>
    

    
        <span class="hidden-xs hidden-sm"> - <a
            target="_blank"
            rel="noopener noreferrer"
            href="https://github.com/rwieruch/blog_chriswieruch_content/blob/master/react-hooks.md">
                Edit this Post on GitHub
            </a>
        </span>
    
</p>

                            <div>
  

</div>

<div class="post-image-primary">
    <div class="pinterest-pinner-wrapper" itemscope itemtype="http://schema.org/ImageObject">
        <div class="pinterest-pinner">
            <a
                data-pin-do="buttonPin"
                data-pin-save="true"
                data-pin-tall="true"
                href="https://www.pinterest.com/pin/create/button/?url=https%3a%2f%2fchrispaul.dev%2freact-hooks%2f&amp;media=https://chrispaul.dev/img%2fposts%2freact-hooks%2fbanner.jpg&amp;description=">
            </a>
        </div>

        <img
            class="img-lazy img-responsive"
            data-lazy-src="/src="/img/posts/react-hooks/banner.jpg"
            data-is-src-set="is-src-set"
            alt="react hooks"
            itemprop="image"
        />
    </div>
</div>


<p>React Hooks were introduced at <a target="_blank" rel="noopener noreferrer" href="https://www.youtube.com/watch?v=dpw9EHDh2bM">React Conf October 2018</a> as a way to use state and side-effects in React function components. Whereas function components have been called functional stateless components (FSC) before, they are finally able to use state with React Hooks. Therefore, many people refer to them as function components now.</p>

<p>In this walkthrough, I want to explain the motivation behind hooks, what will change in React and why we shouldn&rsquo;t panic, and how React hooks can be used in function components by showcasing common React Hooks such as the state and effect hooks by example.</p>

<h2 class="chapter-header" id="why-react-hooks">Why React Hooks?</h2>

<p>React Hooks were invented by the React team to introduce state management and side-effects in function components. It&rsquo;s their way of making it more effortless to use only React function components without the need to refactor a React function component to a React class component for using lifecycle methods, in order to use have side-effects, or local state. React Hooks enable us to write React applications with only function components.</p>

<p><strong>Unnecessary Component Refactorings:</strong> Previously, only React class components were used for local state management and lifecycle methods. The latter have been essential for introducing side-effects, such as listeners or data fetching, in React class components.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">Counter</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">constructor</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">super</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">);</span>

    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">count</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">0</span><span style="color: #e7e9db">,</span>
    <span style="color: #e7e9db">};</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">p</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">You</span> <span style="color: #06b6ef">clicked</span> <span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">count</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">times</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/p&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span>
          <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span>
            <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">count</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">count</span> <span style="color: #5bc4bf">+</span> <span style="color: #f99b15">1</span> <span style="color: #e7e9db">})</span>
          <span style="color: #e7e9db">}</span>
        <span style="color: #5bc4bf">&gt;</span>
          <span style="color: #06b6ef">Click</span> <span style="color: #06b6ef">me</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
    <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Counter</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>Only if you didn&rsquo;t need state or lifecycle methods, React functional <em>stateless</em> components could be used. And because React function components are more lightweight (and elegant), people already used plenty of function components. This came with the drawback of refactoring components from React function components to React class components every time state or lifecycle methods were needed (and vice versa).</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">useState</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #776e71">// how to use the state hook in a React function component</span>
<span style="color: #815ba4">function</span> <span style="color: #06b6ef">Counter</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">count</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">setCount</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">0</span><span style="color: #e7e9db">);</span>

  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">p</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">You</span> <span style="color: #06b6ef">clicked</span> <span style="color: #e7e9db">{</span><span style="color: #06b6ef">count</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">times</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/p&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span> <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">setCount</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">count</span> <span style="color: #5bc4bf">+</span> <span style="color: #f99b15">1</span><span style="color: #e7e9db">)}</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #06b6ef">Click</span> <span style="color: #06b6ef">me</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
  <span style="color: #e7e9db">);</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">Counter</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>With Hooks there is no need for this refactoring. Side-effects and state are finally available in React function components. That&rsquo;s why a rebranding from functional stateless components to function components would be reasonable.</p>

<p><strong>Side-effect Logic:</strong> In React class components, side-effects were mostly introduced in lifecycle methods (e.g. componentDidMount, componentDidUpdate, componentWillUnmount). A side-effect could be <a href="../react-fetching-data/index.html">fetching data in React</a> or <a href="../react-intersection-observer-api/index.html">interacting with the Browser API</a>. Usually these side-effects came with a setup and clean up phase. For instance, if you would miss to remove your listener, you could run into <a href="../react-warning-cant-call-setstate-on-an-unmounted-component/index.html">React performance issues</a>.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #776e71">// side-effects in a React class component</span>
<span style="color: #815ba4">class</span> <span style="color: #06b6ef">MyComponent</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #776e71">// setup phase</span>
  <span style="color: #06b6ef">componentDidMount</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #776e71">// add listener for feature 1</span>
    <span style="color: #776e71">// add listener for feature 2</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #776e71">// clean up phase</span>
  <span style="color: #06b6ef">componentWillUnmount</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #776e71">// remove listener for feature 1</span>
    <span style="color: #776e71">// remove listener for feature 2</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #e7e9db">...</span>
<span style="color: #e7e9db">}</span>

<span style="color: #776e71">// side-effects in React function component with React Hooks</span>
<span style="color: #815ba4">function</span> <span style="color: #06b6ef">MyComponent</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">useEffect</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #776e71">// add listener for feature 1 (setup)</span>
    <span style="color: #776e71">// return function to remove listener for feature 1 (clean up)</span>
  <span style="color: #e7e9db">});</span>

  <span style="color: #06b6ef">useEffect</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #776e71">// add listener for feature 2 (setup)</span>
    <span style="color: #776e71">// return function to remove listener for feature 2 (clean up)</span>
  <span style="color: #e7e9db">});</span>

  <span style="color: #e7e9db">...</span>
<span style="color: #e7e9db">}</span>
</code></pre></div>


<p>Now, if you would introduce more than one of these side-effects in a React class component&rsquo;s lifecycle methods, all side-effects would be grouped by lifecycle method but not by side-effect. That&rsquo;s what React Hooks are going to change by encapsulating a side-effect in one hook whereas every hook has its own side-effect with a setup and clean up phase. You will see later in a tutorial how this works for real by adding and removing listeners in a React Hook.</p>

<p><strong>React&rsquo;s Abstraction Hell:</strong> Abstraction and thus reusability were introduced with <a href="../gentle-introduction-higher-order-components/index.html">Higher-Order Components</a> and <a href="../react-render-props-pattern/index.html">Render Prop Components</a> in React. There is also <a href="../react-context-api/index.html">React&rsquo;s Context with its Provider and Consumer Components</a> that introduce another level of abstraction. All of these advanced patterns in React are using so called wrapping components. The implementation of the following components shouldn&rsquo;t be foreign to developers who are creating larger React applications.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">compose</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;recompose&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">withRouter</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-router-dom&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">history</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">state</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">dispatch</span> <span style="color: #e7e9db">})</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ThemeContext</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">Consumer</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #e7e9db">{</span><span style="color: #06b6ef">theme</span> <span style="color: #5bc4bf">=&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Content</span> <span style="color: #06b6ef">theme</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">theme</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #e7e9db">...</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Content&gt;</span>
      <span style="color: #e7e9db">}</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ThemeContext.Consumer&gt;</span>
  <span style="color: #e7e9db">);</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">compose</span><span style="color: #e7e9db">(</span>
  <span style="color: #06b6ef">withRouter</span><span style="color: #e7e9db">,</span>
  <span style="color: #06b6ef">withReducer</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">reducer</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">initialState</span><span style="color: #e7e9db">)</span>
<span style="color: #e7e9db">)(</span><span style="color: #06b6ef">App</span><span style="color: #e7e9db">);</span>
</code></pre></div>


<p>Sophie Alpert coined it &ldquo;the wrapper hell&rdquo; in React. You are not only seeing it in the implementation, but also when inspecting your components in the browser. There are dozens of wrapped components due to Render Prop Components (including Consumer components from React&rsquo;s Context) and Higher-Order Components. It becomes an unreadable component tree, because all the abstracted logic is covered up in other React components. The actual visible components are hard to track down in the browser&rsquo;s DOM. So what if these additional components were not needed because the logic is only encapsulated in functions as side-effects instead? Then you would remove all these wrapping components and flatten your component tree&rsquo;s structure:</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">function</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">theme</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">useTheme</span><span style="color: #e7e9db">();</span>
  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">history</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">useRouter</span><span style="color: #e7e9db">();</span>
  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">dispatch</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">useReducer</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">reducer</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">initialState</span><span style="color: #e7e9db">);</span>

  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Content</span> <span style="color: #06b6ef">theme</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">theme</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #e7e9db">...</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/Content&gt;</span>
  <span style="color: #e7e9db">);</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>That&rsquo;s what React Hooks are bringing on the table. All side-effects are sitting directly in the component without introducing other components as container for business logic. The container disappears and the logic just sits in React Hooks that are only functions. <a target="_blank" rel="noopener noreferrer" href="https://github.com/acdlite/recompose/commit/7867de653abbb57a49934e52622a60b433bda918">Andrew Clark already left a statement in favor of React Hooks in his popular Higher-Order Component library called recompose.</a></p>

<p><strong>JavaScript Class Confusion:</strong> JavaScript mixes two worlds pretty well: Object-oriented programming (OOP) and functional programming. React introduces many developers to both worlds. On the one side, React (and Redux) introduced people to functional programming (FP) with function compositions, general programming concepts with functions (e.g. higher-order functions, JavaScript built-in methods like map, reduce, filter) and other terms such as immutability and side-effects. React itself didn&rsquo;t really introduce these things, because they are features of the language or the programming paradigm itself, but they are heavily used in React whereas <a href="../javascript-fundamentals-react-requirements/index.html">every React developer becomes automatically a better JavaScript developer</a>.</p>

<p>On the other side, React uses JavaScript classes as one way to define React components. A class is only the declaration whereas the actual usage of the component is the instantiation of it. It creates a class instance whereas the <code>this</code> object of the class instance is used to interact with class methods (e.g. setState, forceUpdate, other custom class methods). However, classes come with a steeper learning curve for React beginners who are not coming from an OOP background. That&rsquo;s why class bindings, the <code>this</code> object and inheritance can be confusing. I have <a href="../the-road-to-learn-react/index.html">a few chapters in my React book</a> focusing only on this aspect of React which is always the most confusing thing about React for beginners.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #776e71">// I THOUGHT WE ARE USING A CLASS. WHY IS IT EXTENDING FROM SOMETHING?</span>
<span style="color: #815ba4">class</span> <span style="color: #06b6ef">Counter</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #776e71">// WAIT ... THIS WORKS???</span>
  <span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">value</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">0</span> <span style="color: #e7e9db">};</span>

  <span style="color: #776e71">// I THOUGH IT&#39;S THIS WAY, BUT WHY DO I NEED PROPS HERE?</span>
  <span style="color: #776e71">// constructor(props) {</span>
  <span style="color: #776e71">//  SUPER???</span>
  <span style="color: #776e71">//  super(props);</span>
  <span style="color: #776e71">//</span>
  <span style="color: #776e71">//  this.state = {</span>
  <span style="color: #776e71">//    value: 0,</span>
  <span style="color: #776e71">//  };</span>
  <span style="color: #776e71">// }</span>

  <span style="color: #776e71">// WHY DO I HAVE TO USE AN ARROW FUNCTION???</span>
  <span style="color: #06b6ef">onIncrement</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">({</span>
      <span style="color: #06b6ef">value</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">value</span> <span style="color: #5bc4bf">+</span> <span style="color: #f99b15">1</span>
    <span style="color: #e7e9db">}));</span>
  <span style="color: #e7e9db">};</span>

  <span style="color: #776e71">// SHOULDN&#39;T IT BE this.onDecrement = this.onDecrement.bind(this); in the constructor???</span>
  <span style="color: #776e71">// WHAT&#39;S this.onDecrement = this.onDecrement.bind(this); DOING ANYWAY?</span>
  <span style="color: #06b6ef">onDecrement</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">({</span>
      <span style="color: #06b6ef">value</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">value</span> <span style="color: #5bc4bf">-</span> <span style="color: #f99b15">1</span>
    <span style="color: #e7e9db">}));</span>
  <span style="color: #e7e9db">};</span>

  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">value</span><span style="color: #e7e9db">}</span>

        <span style="color: #e7e9db">{</span><span style="color: #776e71">/* WHY IS EVERYTHING AVAILABLE ON &quot;THIS&quot;??? */</span><span style="color: #e7e9db">}</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span> <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">onIncrement</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;+&lt;</span><span style="color: #ef6155">/button&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span> <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">onDecrement</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;-&lt;</span><span style="color: #ef6155">/button&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
    <span style="color: #e7e9db">)</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>
</code></pre></div>


<p>Now, many people argue React shouldn&rsquo;t take JavaScript classes away because people don&rsquo;t understand them. After all, they belong to the language. However, one of the hypotheses of introducing the Hooks API is a smoother learning curve for React beginners when writing their React components without JavaScript classes in the first place.</p>

<h2 class="chapter-header" id="react-hooks-future">What changes due to React Hooks?</h2>

<p>Every time a new feature is introduced, people are concerned about it. There is one side of the group that is ecstatic about the change, and the other side that fears the change. I heard the most common concerns for React Hooks are:</p>

<ul>
<li>Everything changes! <em>Subtle panic mode &hellip;</em></li>
<li>React is becoming bloated like Angular!</li>
<li>It’s useless, classes worked fine.</li>
<li>It’s magic!</li>
</ul>

<p><strong>Let me address these concerns here:</strong></p>

<p><strong>Everything changes:</strong> React Hooks will change how we write React applications in the future. However, at the moment, nothing changes. You can still write class components with local state and lifecycle methods and deploy advanced patterns such as Higher-Order Components or Render Prop Components. Nobody takes these learnings away from you. See how I upgraded all my open source projects from older versions to React 16.6. and none of of these projects had problems. They are using HOCs, Render Props and I believe even the old context API (correct me if am wrong). Everything I have learned all these years still works. The React team makes sure that React stays backward compatible. It will be the same with React 16.7.</p>

<div class="post-image-primary">
    <div class="pinterest-pinner-wrapper" itemscope itemtype="http://schema.org/ImageObject">
        <div class="pinterest-pinner">
            <a
                data-pin-do="buttonPin"
                data-pin-save="true"
                data-pin-tall="true"
                href="https://www.pinterest.com/pin/create/button/?url=https%3a%2f%2fchrispaul.dev%2freact-hooks%2f&amp;media=https://chrispaul.dev/img%2fposts%2freact-hooks%2freact-upgrades.jpg&amp;description=">
            </a>
        </div>

        <img
            class="img-lazy img-responsive"
            data-lazy-src="/src="/img/posts/react-hooks/react-upgrades.jpg"
            data-is-src-set="is-src-set"
            alt="react backward compatibility"
            itemprop="image"
        />
    </div>
</div>


<p><strong>React is becoming bloated like Angular:</strong> React was always seen as a library with a slim API. That&rsquo;s true and shall be true in the future. However, in order to adjust things that were the status quo of building component-based applications a few years ago, and not to be overtaken by other libraries who adapt to the new status quo, React introduces changes in favor of older APIs. If React would start out fresh this year, maybe there would be only function components and hooks. But React was released a couple of years ago and needs to adapt to keep up with the status quo or to invent a status quo. Maybe there will follow deprecations of React class components and lifecycle methods in a few years in favor of React function components and hooks, but at the moment, the React team keeps React class components in their repertoire of tools. After all, the React team utilizes hooks as an invention to run a marathon with React an not to win a sprint. Obviously, React Hooks add yet another API to React, but it is in favor to simplify React&rsquo;s API in the future. I like this transition more than having a React 2 where everything is different.</p>

<p><strong>It’s useless, classes worked fine:</strong> Imagine you would start from zero to learn React and you would be introduced to React with Hooks. Maybe <a target="_blank" rel="noopener noreferrer" href="https://github.com/facebook/create-react-app">create-react-app</a> wouldn&rsquo;t start out with a React class component but with a React function component. Everything you need to learn for your components would be React Hooks. They manage state and side-effects, so you would only need to know about the state and the effect hook. It&rsquo;s everything a React class component did for you before. It will be simpler for React beginners to learn React without all the other overhead that comes with JavaScript classes (inheritance, this, bindings, super, &hellip;). Imagine React Hooks as a new way of how to write React components - It&rsquo;s a new mindset. I am a skeptical person myself, but once I wrote a couple of simpler scenarios with React Hooks, I was convinced that this is the simplest way to write but also to learn React. As someone who is doing lots of React workshops, I argue that it takes away all the frustration classes bring on the table for React beginners.</p>

<p><strong>It’s magic:</strong> React is known to be down to earth with JavaScript. Writing React applications makes you a better JavaScript developer - that&rsquo;s one of the best things about React when someone asks me: &ldquo;Why should I learn React?&rdquo;. Whether there comes another library in the future or not, everyone is prepared by honing their JavaScript skills and general programming skills when using React. It&rsquo;s one of the things that made Redux, often used in React, popular: There is no magic, it is plain JavaScript. Now these React Hooks come along the way, introduce something stateful in a previously often pure function component, a couple of not easily to accept rules, and many don&rsquo;t understand what&rsquo;s going on under the hood. But think about it this way: A function component in React is not a mere function. You still have to import React as library to your source code file. It does something with your function, because the function becomes a function component in React land. This function component comes with hidden implementations that were there all the time. How else would it have been possible to use functions as function components as we did it before React Hooks were introduced? And people accepted it too, even though it&rsquo;s kinda magic. Now, the only thing changed (and maybe it has already been this way before) is that these function components come with an extra hidden object that keeps track of hooks. To quote Dan Abramov from <a target="_blank" rel="noopener noreferrer" href="https://medium.com/@dan_abramov/making-sense-of-react-hooks-fdbde8803889">his article about hooks</a>: <em>&ldquo;Perhaps you’re wondering where React keeps the state for Hooks. The answer is it’s kept in the exact same place where React keeps state for classes. React has an internal update queue which is the source of truth for any state, no matter how you define your components.&rdquo;</em>.</p>

<p><strong>Finally, think about it this way:</strong> Component-based solutions such as Angular, Vue, and React are pushing the boundaries of web development with every release. They build up on top of technologies that were invented more than two decades ago. They adapt them to make web development effortless in 2018 and not 1998. They optimize them like crazy to meet the needs in the here and now. We are building web applications with components and not with HTML templates anymore. We are not there yet, but I imagine a future where we sit together and invent a component-based standard for the browser. Angular, Vue and React are only the spearhead of this movement.</p>

<p>In the following, I want to dive into a few popular React Hooks by example to get you up to speed. All examples can be found in this <a target="_blank" rel="noopener noreferrer" href="https://github.com/the-road-to-learn-react/react-hooks-introduction">GitHub repository</a>.</p>

<h2 class="chapter-header" id="react-use-state-hook">React useState Hook</h2>

<p>You have seen the useState Hook before in a code snippet for a typical counter example. It is used to manage local state in function components. Let&rsquo;s use the hook in a more elaborate example where we are going to manage an array of items. In another article of mine, you can learn more about <a href="../react-state-array-add-update-remove/index.html">managing arrays as state in React</a>, but this time we are doing it with React hooks. Let&rsquo;s get started:</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">useState</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #06b6ef">INITIAL_LIST</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">[</span>
  <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;0&#39;</span><span style="color: #e7e9db">,</span>
    <span style="color: #06b6ef">title</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;React with RxJS for State Management Tutorial&#39;</span><span style="color: #e7e9db">,</span>
    <span style="color: #06b6ef">url</span><span style="color: #5bc4bf">:</span>
      <span style="color: #48b685">&#39;https://chrispaul.dev/react-rxjs-state-management-tutorial/&#39;</span><span style="color: #e7e9db">,</span>
  <span style="color: #e7e9db">},</span>
  <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">id</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;1&#39;</span><span style="color: #e7e9db">,</span>
    <span style="color: #06b6ef">title</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;A complete React with Apollo and GraphQL Tutorial&#39;</span><span style="color: #e7e9db">,</span>
    <span style="color: #06b6ef">url</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;https://chrispaul.dev/react-graphql-apollo-tutorial&#39;</span><span style="color: #e7e9db">,</span>
  <span style="color: #e7e9db">},</span>
<span style="color: #e7e9db">];</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">list</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">setList</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">INITIAL_LIST</span><span style="color: #e7e9db">);</span>

  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ul</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #e7e9db">{</span><span style="color: #06b6ef">list</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">item</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">li</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">item</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">a</span> <span style="color: #06b6ef">href</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">item</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">url</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">item</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">title</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/a&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/li&gt;</span>
      <span style="color: #e7e9db">))}</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ul&gt;</span>
  <span style="color: #e7e9db">);</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>The useState hook accepts an initial state as argument and returns, <a target="_blank" rel="noopener noreferrer" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment#Array_destructuring">by using array destructuring</a>, two variables that can be named however you want to name them. Whereas the first variable is the actual state, the second variable is a function to update the state by providing a new state.</p>

<p>The goal of this scenario is to remove an item from the list. In order to accomplish it, every item in the rendered list has a button with a click handler. The click handler can be inlined in the function component, because it will make use of <code>list</code> and <code>setList</code> later. Hence you don&rsquo;t need to pass these variables to the handler, because they are already available from the outer scope of the component.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">function</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">list</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">setList</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">INITIAL_LIST</span><span style="color: #e7e9db">);</span>

<span style="background-color: #4f424c">  <span style="color: #815ba4">function</span> <span style="color: #06b6ef">onRemoveItem</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #776e71">// remove item from &quot;list&quot;</span>
</span><span style="background-color: #4f424c">    <span style="color: #776e71">// set the new list in state with &quot;setList&quot;</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">}</span>
</span>
  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ul</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #e7e9db">{</span><span style="color: #06b6ef">list</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">item</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">li</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">item</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">a</span> <span style="color: #06b6ef">href</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">item</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">url</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">item</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">title</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/a&gt;</span>
<span style="background-color: #4f424c">          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span> <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span> <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">onRemoveItem</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">            <span style="color: #06b6ef">Remove</span>
</span><span style="background-color: #4f424c">          <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
</span>        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/li&gt;</span>
      <span style="color: #e7e9db">))}</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ul&gt;</span>
  <span style="color: #e7e9db">);</span>
<span style="color: #e7e9db">}</span>
</code></pre></div>


<p>Somehow we need to know about the item that should be removed from the list. Using a higher-order function, we can pass the identifier of the item to the handler function. Otherwise we wouldn&rsquo;t be able to identify the item that should be removed from the list.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">function</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">list</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">setList</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">INITIAL_LIST</span><span style="color: #e7e9db">);</span>

<span style="background-color: #4f424c">  <span style="color: #815ba4">function</span> <span style="color: #06b6ef">onRemoveItem</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span>    <span style="color: #776e71">// remove item from &quot;list&quot;</span>
    <span style="color: #776e71">// set the new list in state with &quot;setList&quot;</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ul</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #e7e9db">{</span><span style="color: #06b6ef">list</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">item</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">li</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">item</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">a</span> <span style="color: #06b6ef">href</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">item</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">url</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">item</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">title</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/a&gt;</span>
<span style="background-color: #4f424c">          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span> <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span> <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">onRemoveItem</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">item</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">)}</span><span style="color: #5bc4bf">&gt;</span>
</span>            <span style="color: #06b6ef">Remove</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/li&gt;</span>
      <span style="color: #e7e9db">))}</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ul&gt;</span>
  <span style="color: #e7e9db">);</span>
<span style="color: #e7e9db">}</span>
</code></pre></div>


<p>Finally, use the identifier to filter the list with a built-in array method. It returns a new list which is used to set the new state of the list.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">function</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">list</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">setList</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">INITIAL_LIST</span><span style="color: #e7e9db">);</span>

  <span style="color: #815ba4">function</span> <span style="color: #06b6ef">onRemoveItem</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">newList</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">list</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">filter</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">item</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">item</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span> <span style="color: #5bc4bf">!==</span> <span style="color: #06b6ef">id</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">setList</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">newList</span><span style="color: #e7e9db">);</span>
</span>  <span style="color: #e7e9db">}</span>

  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">ul</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #e7e9db">{</span><span style="color: #06b6ef">list</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">map</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">item</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">(</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">li</span> <span style="color: #06b6ef">key</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">item</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">a</span> <span style="color: #06b6ef">href</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">item</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">url</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">item</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">title</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/a&gt;</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span> <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span> <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">onRemoveItem</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">item</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">id</span><span style="color: #e7e9db">)}</span><span style="color: #5bc4bf">&gt;</span>
            <span style="color: #06b6ef">Remove</span>
          <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/li&gt;</span>
      <span style="color: #e7e9db">))}</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/ul&gt;</span>
  <span style="color: #e7e9db">);</span>
<span style="color: #e7e9db">}</span>
</code></pre></div>


<p>That should do the job. You are able to remove an item from the list based on the identifier you pass to the handler. The handler then filters the list and sets the new state of the list with the <code>setList</code> function.</p>

<p>The useState hook gives you everything you need to manage state in a function component: initial state, the latest state, and a state update function. Everything else is JavaScript again. Furthermore, you don&rsquo;t need to bother about the state object with its shallow merge as before in a class component. Instead, you encapsulate one domain (e.g. list) with useState, but if you would need another state (e.g. counter), then just encapsulate this domain with another useState. You can read more about <a target="_blank" rel="noopener noreferrer" href="https://reactjs.org/docs/hooks-state.html">the useState hook in React&rsquo;s documentation</a>.</p>

<h2 class="chapter-header" id="react-use-effect-hook">React useEffect Hook</h2>

<p>Let&rsquo;s head over to the next hook called useEffect. As mentioned before, function components should be able to manage state and side-effects with hooks. Managing state was showcased with the useState hook. Now comes the useEffect hook into play for side-effects which are usually used for interactions with the Browser/DOM API or external API like data fetching. Let&rsquo;s see how the useEffect hook can be used for interaction with the Browser API by implementing a simple stopwatch. You can see how it is done in a React class component in this <a target="_blank" rel="noopener noreferrer" href="https://github.com/the-road-to-learn-react/react-interval-setstate-unmounted-component-performance">GitHub repository</a>.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">useState</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">isOn</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">setIsOn</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">false</span><span style="color: #e7e9db">);</span>

  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #e7e9db">{</span><span style="color: #5bc4bf">!</span><span style="color: #06b6ef">isOn</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #e7e9db">(</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span> <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span> <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">setIsOn</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">true</span><span style="color: #e7e9db">)}</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #06b6ef">Start</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
      <span style="color: #e7e9db">)}</span>

      <span style="color: #e7e9db">{</span><span style="color: #06b6ef">isOn</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #e7e9db">(</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span> <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span> <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">setIsOn</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">false</span><span style="color: #e7e9db">)}</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #06b6ef">Stop</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
      <span style="color: #e7e9db">)}</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
  <span style="color: #e7e9db">);</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>There is no stopwatch yet. But at least there are is a <a href="../conditional-rendering-react/index.html">conditional rendering</a> to show either a &ldquo;Start&rdquo; or &ldquo;Stop&rdquo; button. The state for the boolean flag is managed by the useState hook.</p>

<p>Let&rsquo;s introduce our side-effect with useEffect that registers an interval. The function used for the interval emits a console logging every second to your developer tools of your browser.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">useEffect</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #815ba4">function</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">isOn</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">setIsOn</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">false</span><span style="color: #e7e9db">);</span>

<span style="background-color: #4f424c">  <span style="color: #06b6ef">useEffect</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">setInterval</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">console</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">log</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;tick&#39;</span><span style="color: #e7e9db">),</span> <span style="color: #f99b15">1000</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">});</span>
</span>
  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #e7e9db">{</span><span style="color: #5bc4bf">!</span><span style="color: #06b6ef">isOn</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #e7e9db">(</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span> <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span> <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">setIsOn</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">true</span><span style="color: #e7e9db">)}</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #06b6ef">Start</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
      <span style="color: #e7e9db">)}</span>

      <span style="color: #e7e9db">{</span><span style="color: #06b6ef">isOn</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #e7e9db">(</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span> <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span> <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">setIsOn</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">false</span><span style="color: #e7e9db">)}</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #06b6ef">Stop</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
      <span style="color: #e7e9db">)}</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
  <span style="color: #e7e9db">);</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>In order to remove the interval when the component unmounts (but also after every other render update), you can return a function in useEffect for anything to be called for the clean up. For instance, there shouldn&rsquo;t be any memory leak left behind when the component isn&rsquo;t there anymore.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">useEffect</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">isOn</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">setIsOn</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">false</span><span style="color: #e7e9db">);</span>

  <span style="color: #06b6ef">useEffect</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">interval</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">setInterval</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">console</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">log</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;tick&#39;</span><span style="color: #e7e9db">),</span> <span style="color: #f99b15">1000</span><span style="color: #e7e9db">);</span>
</span>
<span style="background-color: #4f424c">    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">clearInterval</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">interval</span><span style="color: #e7e9db">);</span>
</span>  <span style="color: #e7e9db">});</span>

  <span style="color: #e7e9db">...</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>Now, you want to setup the side-effect when mounting the component and the clean up the side-effect when unmounting the component. If you would log how many times the function within the effect is called, you would see that it sets a new interval every time the state of the component changes (e.g. click on &ldquo;Start&rdquo;/&ldquo;Stop&rdquo; button).</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">useEffect</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">isOn</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">setIsOn</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">false</span><span style="color: #e7e9db">);</span>

  <span style="color: #06b6ef">useEffect</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">    <span style="color: #06b6ef">console</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">log</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;effect runs&#39;</span><span style="color: #e7e9db">);</span>
</span>    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">interval</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">setInterval</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">console</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">log</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;tick&#39;</span><span style="color: #e7e9db">),</span> <span style="color: #f99b15">1000</span><span style="color: #e7e9db">);</span>

    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">clearInterval</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">interval</span><span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">});</span>

  <span style="color: #e7e9db">...</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>In order to only run the effect on mount and unmount of the component, you can pass it an empty array as second argument.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">useEffect</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">isOn</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">setIsOn</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">false</span><span style="color: #e7e9db">);</span>

  <span style="color: #06b6ef">useEffect</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">interval</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">setInterval</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">console</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">log</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;tick&#39;</span><span style="color: #e7e9db">),</span> <span style="color: #f99b15">1000</span><span style="color: #e7e9db">);</span>

    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">clearInterval</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">interval</span><span style="color: #e7e9db">);</span>
<span style="background-color: #4f424c">  <span style="color: #e7e9db">},</span> <span style="color: #e7e9db">[]);</span>
</span>
  <span style="color: #e7e9db">...</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>However, since the interval is cleaned up after every render too, we need to set the interval in our update cycle too. But we can tell the effect to run only when the <code>isOn</code> variable changes. Only when one of the variables in the array changes, the effect will run during the update cycle. If you keep the array empty, the effect will only run on mount and unmount, because there is no variable to be checked for running the side-effect again.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">useEffect</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">isOn</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">setIsOn</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">false</span><span style="color: #e7e9db">);</span>

  <span style="color: #06b6ef">useEffect</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">interval</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">setInterval</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">console</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">log</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;tick&#39;</span><span style="color: #e7e9db">),</span> <span style="color: #f99b15">1000</span><span style="color: #e7e9db">);</span>

    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">clearInterval</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">interval</span><span style="color: #e7e9db">);</span>
<span style="background-color: #4f424c">  <span style="color: #e7e9db">},</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">isOn</span><span style="color: #e7e9db">]);</span>
</span>
  <span style="color: #e7e9db">...</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>The interval is running whether the <code>isOn</code> boolean is true or false. It would be great to only run it when the stopwatch is activated.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">useEffect</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">isOn</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">setIsOn</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">false</span><span style="color: #e7e9db">);</span>

  <span style="color: #06b6ef">useEffect</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">    <span style="color: #815ba4">let</span> <span style="color: #06b6ef">interval</span><span style="color: #e7e9db">;</span>
</span>
<span style="background-color: #4f424c">    <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">isOn</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
</span>      <span style="color: #06b6ef">interval</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">setInterval</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">console</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">log</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;tick&#39;</span><span style="color: #e7e9db">),</span> <span style="color: #f99b15">1000</span><span style="color: #e7e9db">);</span>
<span style="background-color: #4f424c">    <span style="color: #e7e9db">}</span>
</span>
    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">clearInterval</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">interval</span><span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">},</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">isOn</span><span style="color: #e7e9db">]);</span>

  <span style="color: #e7e9db">...</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>Now introduce another state in your function component to keep track of the timer of the stopwatch. It is used to update the timer, but only when the stopwatch is activated.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">useEffect</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">isOn</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">setIsOn</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">false</span><span style="color: #e7e9db">);</span>
<span style="background-color: #4f424c">  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">timer</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">setTimer</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">0</span><span style="color: #e7e9db">);</span>
</span>
  <span style="color: #06b6ef">useEffect</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">let</span> <span style="color: #06b6ef">interval</span><span style="color: #e7e9db">;</span>

    <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">isOn</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">interval</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">setInterval</span><span style="color: #e7e9db">(</span>
<span style="background-color: #4f424c">        <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">setTimer</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">timer</span> <span style="color: #5bc4bf">+</span> <span style="color: #f99b15">1</span><span style="color: #e7e9db">),</span>
</span>        <span style="color: #f99b15">1000</span><span style="color: #e7e9db">,</span>
      <span style="color: #e7e9db">);</span>
    <span style="color: #e7e9db">}</span>

    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">clearInterval</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">interval</span><span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">},</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">isOn</span><span style="color: #e7e9db">]);</span>

  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
<span style="background-color: #4f424c">      <span style="color: #e7e9db">{</span><span style="color: #06b6ef">timer</span><span style="color: #e7e9db">}</span>
</span>
      <span style="color: #e7e9db">{</span><span style="color: #5bc4bf">!</span><span style="color: #06b6ef">isOn</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #e7e9db">(</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span> <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span> <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">setIsOn</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">true</span><span style="color: #e7e9db">)}</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #06b6ef">Start</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
      <span style="color: #e7e9db">)}</span>

      <span style="color: #e7e9db">{</span><span style="color: #06b6ef">isOn</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #e7e9db">(</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span> <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span> <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">setIsOn</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">false</span><span style="color: #e7e9db">)}</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #06b6ef">Stop</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
      <span style="color: #e7e9db">)}</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
  <span style="color: #e7e9db">);</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>There is still one mistake in the code. When the interval is running, it updates the timer every second by increasing it by one. However, it always relies on a stale state for the timer. Only when the <code>inOn</code> boolean flag changes the state is fine. In order to receive always the latest state for the timer when the interval is running, you can use a function instead for the state update function which always has the latest state.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">useEffect</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">isOn</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">setIsOn</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">false</span><span style="color: #e7e9db">);</span>
  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">timer</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">setTimer</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">0</span><span style="color: #e7e9db">);</span>

  <span style="color: #06b6ef">useEffect</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">let</span> <span style="color: #06b6ef">interval</span><span style="color: #e7e9db">;</span>

    <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">isOn</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">interval</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">setInterval</span><span style="color: #e7e9db">(</span>
<span style="background-color: #4f424c">        <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">setTimer</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">timer</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">timer</span> <span style="color: #5bc4bf">+</span> <span style="color: #f99b15">1</span><span style="color: #e7e9db">),</span>
</span>        <span style="color: #f99b15">1000</span><span style="color: #e7e9db">,</span>
      <span style="color: #e7e9db">);</span>
    <span style="color: #e7e9db">}</span>

    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">clearInterval</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">interval</span><span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">},</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">isOn</span><span style="color: #e7e9db">]);</span>

  <span style="color: #e7e9db">...</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>An alternative would have been to run the effect also when the timer changes. Then the effect would receive the latest timer state.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">useEffect</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">isOn</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">setIsOn</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">false</span><span style="color: #e7e9db">);</span>
  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">timer</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">setTimer</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">0</span><span style="color: #e7e9db">);</span>

  <span style="color: #06b6ef">useEffect</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">let</span> <span style="color: #06b6ef">interval</span><span style="color: #e7e9db">;</span>

    <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">isOn</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">interval</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">setInterval</span><span style="color: #e7e9db">(</span>
        <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">setTimer</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">timer</span> <span style="color: #5bc4bf">+</span> <span style="color: #f99b15">1</span><span style="color: #e7e9db">),</span>
        <span style="color: #f99b15">1000</span><span style="color: #e7e9db">,</span>
      <span style="color: #e7e9db">);</span>
    <span style="color: #e7e9db">}</span>

    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">clearInterval</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">interval</span><span style="color: #e7e9db">);</span>
<span style="background-color: #4f424c">  <span style="color: #e7e9db">},</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">isOn</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">timer</span><span style="color: #e7e9db">]);</span>
</span>
  <span style="color: #e7e9db">...</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>That&rsquo;s the implementation for the stopwatch that uses the Browser API If you want to continue, you can extend the example by providing a &ldquo;Reset&rdquo; button too.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">useEffect</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">isOn</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">setIsOn</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">false</span><span style="color: #e7e9db">);</span>
  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">timer</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">setTimer</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">0</span><span style="color: #e7e9db">);</span>

  <span style="color: #06b6ef">useEffect</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">let</span> <span style="color: #06b6ef">interval</span><span style="color: #e7e9db">;</span>

    <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">isOn</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">interval</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">setInterval</span><span style="color: #e7e9db">(</span>
        <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">setTimer</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">timer</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">timer</span> <span style="color: #5bc4bf">+</span> <span style="color: #f99b15">1</span><span style="color: #e7e9db">),</span>
        <span style="color: #f99b15">1000</span><span style="color: #e7e9db">,</span>
      <span style="color: #e7e9db">);</span>
    <span style="color: #e7e9db">}</span>

    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">clearInterval</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">interval</span><span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">},</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">isOn</span><span style="color: #e7e9db">]);</span>

<span style="background-color: #4f424c">  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">onReset</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">setIsOn</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">false</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">setTimer</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">0</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">};</span>
</span>
  <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
    <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
      <span style="color: #e7e9db">{</span><span style="color: #06b6ef">timer</span><span style="color: #e7e9db">}</span>

      <span style="color: #e7e9db">{</span><span style="color: #5bc4bf">!</span><span style="color: #06b6ef">isOn</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #e7e9db">(</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span> <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span> <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">setIsOn</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">true</span><span style="color: #e7e9db">)}</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #06b6ef">Start</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
      <span style="color: #e7e9db">)}</span>

      <span style="color: #e7e9db">{</span><span style="color: #06b6ef">isOn</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #e7e9db">(</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span> <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span> <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">setIsOn</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">false</span><span style="color: #e7e9db">)}</span><span style="color: #5bc4bf">&gt;</span>
          <span style="color: #06b6ef">Stop</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
      <span style="color: #e7e9db">)}</span>

<span style="background-color: #4f424c">      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span> <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span> <span style="color: #06b6ef">disabled</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">timer</span> <span style="color: #5bc4bf">===</span> <span style="color: #f99b15">0</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">onReset</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&gt;</span>
</span><span style="background-color: #4f424c">        <span style="color: #06b6ef">Reset</span>
</span><span style="background-color: #4f424c">      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
</span>    <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
  <span style="color: #e7e9db">);</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>That&rsquo;s it. The useEffect hook is used for side-effects in React function components that are used for interacting with the Browser/DOM API or other third-party APIs (e.g. data fetching). You can read more about <a target="_blank" rel="noopener noreferrer" href="https://reactjs.org/docs/hooks-effect.html">the useEffect hook in React&rsquo;s documentation</a>.</p>

<h2 class="chapter-header" id="react-custom-hooks">React Custom Hooks</h2>

<p>Last but not least, after you have learned about the two most popular hooks that introduce state and side-effects in function components, there is one last thing I want to show you: custom hooks. That&rsquo;s right, you can implement your own custom React Hooks that can be reused in your application or by others. Let&rsquo;s see how they work with an example application which is able to detect whether your device is online or offline.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">useState</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">isOffline</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">setIsOffline</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">false</span><span style="color: #e7e9db">);</span>

  <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">isOffline</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Sorry</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">you</span> <span style="color: #06b6ef">are</span> <span style="color: #06b6ef">offline</span> <span style="color: #e7e9db">...</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;;</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">You</span> <span style="color: #06b6ef">are</span> <span style="color: #06b6ef">online</span><span style="color: #5bc4bf">!&lt;</span><span style="color: #ef6155">/div&gt;;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>Again, introduce the useEffect hook for the side-effect. In this case, the effect adds and removes listeners that check if the device is online or offline. Both listeners are setup only once on mount and cleaned up once on unmount (empty array as second argument). Whenever one of the listeners is called, it sets the state for the <code>isOffline</code> boolean.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">useEffect</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #815ba4">function</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">isOffline</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">setIsOffline</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">false</span><span style="color: #e7e9db">);</span>

<span style="background-color: #4f424c">  <span style="color: #815ba4">function</span> <span style="color: #06b6ef">onOffline</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">setIsOffline</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">true</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">}</span>
</span>
<span style="background-color: #4f424c">  <span style="color: #815ba4">function</span> <span style="color: #06b6ef">onOnline</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">setIsOffline</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">false</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">}</span>
</span>
<span style="background-color: #4f424c">  <span style="color: #06b6ef">useEffect</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">window.</span><span style="color: #06b6ef">addEventListener</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;offline&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">onOffline</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">window.</span><span style="color: #06b6ef">addEventListener</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;online&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">onOnline</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">window.</span><span style="color: #06b6ef">removeEventListener</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;offline&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">onOffline</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">window.</span><span style="color: #06b6ef">removeEventListener</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;online&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">onOnline</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">};</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">},</span> <span style="color: #e7e9db">[]);</span>
</span>
  <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">isOffline</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Sorry</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">you</span> <span style="color: #06b6ef">are</span> <span style="color: #06b6ef">offline</span> <span style="color: #e7e9db">...</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;;</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">You</span> <span style="color: #06b6ef">are</span> <span style="color: #06b6ef">online</span><span style="color: #5bc4bf">!&lt;</span><span style="color: #ef6155">/div&gt;;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>Everything is nicely encapsulated in one effect now. It&rsquo;s a great functionality which should be reuse somewhere else too. That&rsquo;s why we can extract the functionality as its a custom hook which follows the same naming convention as the other hooks.</p>

<div class="highlight" style="background: #2f1e2e"><pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">useEffect</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">function</span> <span style="color: #06b6ef">useOffline</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">const</span> <span style="color: #e7e9db">[</span><span style="color: #06b6ef">isOffline</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">setIsOffline</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">useState</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">false</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">function</span> <span style="color: #06b6ef">onOffline</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">setIsOffline</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">true</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">function</span> <span style="color: #06b6ef">onOnline</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">setIsOffline</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">false</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">}</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">useEffect</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">window.</span><span style="color: #06b6ef">addEventListener</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;offline&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">onOffline</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">window.</span><span style="color: #06b6ef">addEventListener</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;online&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">onOnline</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">window.</span><span style="color: #06b6ef">removeEventListener</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;offline&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">onOffline</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">window.</span><span style="color: #06b6ef">removeEventListener</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;online&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">onOnline</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">};</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">},</span> <span style="color: #e7e9db">[]);</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">return</span> <span style="color: #06b6ef">isOffline</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">}</span>
</span>
<span style="color: #815ba4">function</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">isOffline</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">useOffline</span><span style="color: #e7e9db">();</span>
</span>
  <span style="color: #815ba4">if</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">isOffline</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">Sorry</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">you</span> <span style="color: #06b6ef">are</span> <span style="color: #06b6ef">offline</span> <span style="color: #e7e9db">...</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;;</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #815ba4">return</span> <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">You</span> <span style="color: #06b6ef">are</span> <span style="color: #06b6ef">online</span><span style="color: #5bc4bf">!&lt;</span><span style="color: #ef6155">/div&gt;;</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre></div>


<p>Extracting the custom hook as function was not the only thing. You also have to return the <code>isOffline</code> state from the custom hook in order to use it in your application to show a message to users who are offline. Otherwise, it should render the normal application. That&rsquo;s it for the custom hook that detects whether you are online or offline. You can read more about <a target="_blank" rel="noopener noreferrer" href="https://reactjs.org/docs/hooks-custom.html">custom hooks in React&rsquo;s documentation</a>.</p>

<p>React Hooks being reusable is the best thing about them, because there is the potential to grow an ecosystem of custom React Hooks that can be installed from npm for any React application. And not only for React applications. Evan You, creator of Vue, <a target="_blank" rel="noopener noreferrer" href="https://twitter.com/youyuxi/status/1056042395891105793">is hooked (!) by them as well</a>. Maybe we will see a bridge between both ecosystems where it is possible to share hooks between Vue and React.</p>

<hr class="section-divider">

<p>If you want to dive deeper into the state and effect hooks, you can check out the following React hook tutorials:</p>

<ul>
<li><a href="../react-usereducer-hook/index.html">How to useReducer Hook?</a></li>
<li><a href="../react-hooks-migration/index.html">Migration from Class Components to Hooks</a></li>
<li><a href="../react-usereducer-vs-usestate/index.html">Comparison useState vs useReducer</a></li>
<li><a href="../react-state-usereducer-usestate-usecontext/index.html">Modern State Management with Hooks</a></li>
<li><a href="../react-hooks-fetch-data/index.html">How to fetch data with React Hooks</a></li>
</ul>

<p>Checkout the official <a target="_blank" rel="noopener noreferrer" href="https://reactjs.org/docs/hooks-faq.html">FAQ</a> and <a target="_blank" rel="noopener noreferrer" href="https://reactjs.org/docs/hooks-rules.html">Rules</a> for hooks in React&rsquo;s documentation to learn more about their fine-grained behaviour. In addition, you can checkout <a target="_blank" rel="noopener noreferrer" href="https://reactjs.org/docs/hooks-reference.html">all officially available React Hooks</a> too.</p>

<p>For everyone who is still concerned about React Hooks: Give them a shot yourself. Implement a couple of React function components with state and side-effects. I had to do it myself to understand how they work and to feel comfortable with them. And I must say it feels pretty great to use them.</p>


                            
<div class="feedback-and-share text-center">
    <hr>
    
    <p class="lead">
        I would like to hear your thoughts :-) Find me on <a target="_blank" rel="noopener noreferrer" aria-label="twitter" href="https://twitter.com/rwieruch"><i class="fa fa-twitter"></i>Twitter</a> and <a target="_blank" aria-label="facebook" href="https://www.facebook.com/rwieruch/"><i class="fa fa-facebook"></i>Facebook</a>
    </p>
    
    
        <p class="lead">
            Did the article help you? Share it with your friends on social media <i class="fa fa-arrow-left"></i>, support me as my <a target="_blank" rel="noopener noreferrer" aria-label="patreon" href="https://www.patreon.com/rwieruch"><i class="fa fa-paw"></i>Patron</a>, and become a full-stack developer with my books <i class="fa fa-arrow-down"></i>
        </p>
    
</div>


                            
                                <div class="box-inline col-md-12">
    <div class="col-md-12 text-center">
        <h2 class="newsletter">The Road to learn React</h2>
        
            <div class="col-md-4">
                <img class="img-lazy img-responsive" data-lazy-src="//img/page/cover.png">
            </div>
        
        <p class="lead">
            Build a Hacker News App along the way. No setup configuration. No tooling. No Redux. Plain React in 200+ pages of learning material. Learn React like <strong>50.000+ readers</strong>.
        </p>
        <a
            class="btn btn-template-main"
            href="https://roadtoreact.com"
            target="_blank"
            rel="noopener noreferrer"
        >
            Get the Book for free <i class="fa fa-chevron-right"></i>
        </a>
        
            <div>
                <a
                    href="https://amzn.to/2QY2ONp"
                    target="_blank"
                    rel="noopener noreferrer"
                >
                    Get it from Amazon
                </a>
            </div>
        
    </div>
</div>
                            
                        </div>

                        
                        
                        <div id="comments">
                            <div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'rwieruch';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                        </div>
                        

                    </article>
                    

                </div>
                

            </div>
            
        </div>
        

        

<section class="bar background-image-fixed-2 no-mb color-white text-center">
    <div class="dark-mask"></div>
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h3 class="lead">Never miss an article about web development, JavaScript and self-growth.</h3>
                <h2 class="text-uppercase">Take Part</h2>
            </div>

            <div class="col-md-12 text-center">
                
                    <h3 class="lead"><i class="fa fa-check"></i> Join 30.000&#43; Developers</h3>
                
                    <h3 class="lead"><i class="fa fa-check"></i> Learn Web Development with JavaScript</h3>
                
                    <h3 class="lead"><i class="fa fa-check"></i> Tips and Tricks</h3>
                
                    <h3 class="lead"><i class="fa fa-check"></i> Access Tutorials, eBooks and Courses</h3>
                
                    <h3 class="lead"><i class="fa fa-check"></i> Personal Development as a Software Engineer</h3>
                
            </div>
            <div class="col-md-12">
                <p class="text-center">
                    



<div id="mc_embed_signup">
    <form
        action="https://www.getrevue.co/profile/rwieruch/add_subscriber"
        method="post"
        id="revue-form"
        name="revue-form"
        target="_blank">
        <div id="mc_embed_signup_scroll">
            <input
                class="email"
                placeholder="email address"
                type="email"
                name="member[email]"
                id="member_email"
            >
            <div>
                <button
                    type="submit"
                    value="Subscribe"
                    name="member[subscribe]"
                    id="member_submit"
                    class="btn btn-template-transparent-black btn-lg"
                >
                    Subscribe
                </button>
            </div>
        </div>
    </form>
</div>

                </p>
            </div>
        </div>
    </div>
</section>




        <footer id="subfooter">
    <div class="container">

        <div class="col-md-5 col-sm-6">

            <h4>Recent posts</h4>

            <div class="blog-entries">
                
                <div class="item same-height-row clearfix">
                    <div class="article same-height-always">
                        <a href="../redux-vs-usereducer/index.html">
                          
                            <img
                                data-lazy-src="//img/posts/redux-vs-usereducer/banner.jpg"
                                data-is-thumb="is-thumb"
                                class="img-lazy img-responsive"
                                alt="React&#39;s useReducer vs Redux"
                            >
                          
                        </a>
                    </div>
                    <div class="name same-height-always">
                        <h5><a href="../redux-vs-usereducer/index.html">React&#39;s useReducer vs Redux</a></h5>
                    </div>
                </div>
                
                <div class="item same-height-row clearfix">
                    <div class="article same-height-always">
                        <a href="../publish-npm-package-node/index.html">
                          
                            <img
                                data-lazy-src="//img/posts/publish-npm-package-node/banner.jpg"
                                data-is-thumb="is-thumb"
                                class="img-lazy img-responsive"
                                alt="How to publish a npm package?"
                            >
                          
                        </a>
                    </div>
                    <div class="name same-height-always">
                        <h5><a href="../publish-npm-package-node/index.html">How to publish a npm package?</a></h5>
                    </div>
                </div>
                
                <div class="item same-height-row clearfix">
                    <div class="article same-height-always">
                        <a href="../react-scroll-to-item/index.html">
                          
                            <img
                                data-lazy-src="//img/posts/react-scroll-to-item/banner.jpg"
                                data-is-thumb="is-thumb"
                                class="img-lazy img-responsive"
                                alt="How to Scroll to Item in React?"
                            >
                          
                        </a>
                    </div>
                    <div class="name same-height-always">
                        <h5><a href="../react-scroll-to-item/index.html">How to Scroll to Item in React?</a></h5>
                    </div>
                </div>
                
            </div>

            <hr class="hidden-md hidden-lg hidden-sm">

        </div>
        

        
        <div class="col-md-5 col-md-offset-2 col-sm-6">

            <h4>About Me</h4>

            <div class="blog-entries">
                <div class="item same-height-row clearfix">
                    <div class="profile same-height-always">
                        <img
                            class="img-lazy img-responsive"
                            data-lazy-src="//img/page/profile.jpg"
                            alt="profile"
                        >
                    </div>
                    <div class="name same-height-always">
                        <p>
                            Hi, I'm Chris - a German and Remote/Berlin based consulting software engineer. Find out more <a href="../about/index.html">about me</a>, <a href="../work-with-me/index.html">work with me</a>, or have a look at my social media profiles below.
                        </p>
                    </div>
                </div>
            </div>

        </div>
        
        

    </div>
    
</footer>






        <footer id="copyright">
  <div class="container">
    <div class="row">
      <div class="col-md-4">
        <ul class="info list-inline quicklinks pull-left">
          
            <li>© Chris Paul</li>
          
        </ul>
      </div>
      <div class="col-md-4">
        <ul class="list-inline footer-social-buttons text-center">
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.twitter.com/rwieruch"><i class="fa fa-twitter"></i></a></li>
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.github.com/rwieruch"><i class="fa fa-github"></i></a></li>
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.linkedin.com/in/chris-wieruch-971933a6"><i class="fa fa-linkedin"></i></a></li>
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.producthunt.com/@rwieruch"><i class="fa fa-product-hunt"></i></a></li>
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.patreon.com/rwieruch"><i class="fa fa-paw"></i></a></li>
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.paypal.me/rwieruch"><i class="fa fa-paypal"></i></a></li>
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.facebook.com/rwieruch"><i class="fa fa-facebook"></i></a></li>
          
            <li><a target="_blank" rel="noopener noreferrer" aria-label="social-media" href="https://www.instagram.com/rwieruch/"><i class="fa fa-instagram"></i></a></li>
          
        </ul>
      </div>
      <div class="col-md-4">
        <ul class="info list-inline quicklinks pull-right">
          
            <li><a aria-label="quicklinks" href="../legal/index.html">Legal Notice</a></li>
          
        </ul>
      </div>
    </div>
  </div>
</footer>


    </div>
    


<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>









<script src="../js/script.js"></script>



  </body>
</html>
