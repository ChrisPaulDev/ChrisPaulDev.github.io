<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta name="viewport" content="width=device-width, initial-scale=1">



  <title>
    React Testing Tutorial: Test Frameworks &amp; Component Tests - CPaul
  </title>

  <meta name="author" content="" />
  <meta name="description"
    content="A React tutorial on how to setup and use React component tests with testing frameworks such as Mocha, Chai, Sinon, Enzyme and Jest. It uses unit, integration and end-to-end tests for your React.js components ...">


  <meta name="theme-color" content="#38bb6c" />

  <meta name="generator" content="Hugo 0.41" />
  <link href="https://cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
  <link href="../css/bootstrap.default.css" rel="stylesheet" id="theme-stylesheet">
  <link href="../css/customizations.css" rel="stylesheet">

  <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

  <link rel="shortcut icon" href="../img/favicon/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="../img/favicon/apple-touch-icon.png" />
  <link rel="manifest" href="../img/favicon/manifest.json">
  <link rel="mask-icon" href="../img/favicon/safari-pinned-tab.svg" color="#5bbad5">

  <link rel="alternate" href="../index.xml" type="application/rss+xml" title="CPaul">

  <meta itemprop="name" content="React Testing Tutorial: Test Frameworks &amp; Component Tests">
  <meta itemprop="description"
    content="A React tutorial on how to setup and use React component tests with testing frameworks such as Mocha, Chai, Sinon, Enzyme and Jest. It uses unit, integration and end-to-end tests for your React.js components ...">
  <meta itemprop="image" content="https://chrispaul.dev/img/posts/react-testing-tutorial/banner_640.jpg">
  <meta itemprop="keywords"
    content="angular,apollo,d3,graphql,growth,javascript,machine-learning,mobx,node,react,reason,redux,tooling,vue,web-development,angular,apollo,d3,graphql,growth,javascript,machine-learning,mobx,node,react,reason,redux,tooling,web-development," />


  <meta itemprop="wordCount" content="9180">

  <meta name="keywords"
    content="react testing tutorial, react testing frameworks, react testing library, react testing best practices, react testing components">

  <meta property="og:title" content="React Testing Tutorial: Test Frameworks &amp; Component Tests - CPaul">


  <meta property="og:description"
    content="A React tutorial on how to setup and use React component tests with testing frameworks such as Mocha, Chai, Sinon, Enzyme and Jest. It uses unit, integration and end-to-end tests for your React.js components ..." />


  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://chrispaul.dev/react-testing-tutorial/" />
  <meta property="og:image" content="https://chrispaul.dev/img/posts/react-testing-tutorial/banner_640.jpg" />



  <meta name="news_keywords"
    content="react testing tutorial,react testing frameworks,react testing library,react testing best practices,react testing components" />



  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:image:src" content="https://chrispaul.dev/img/posts/react-testing-tutorial/banner_640.jpg" />
  <meta name="twitter:title" content="React Testing Tutorial: Test Frameworks &amp; Component Tests" />
  <meta name="twitter:description"
    content="A React tutorial on how to setup and use React component tests with testing frameworks such as Mocha, Chai, Sinon, Enzyme and Jest. It uses unit, integration and end-to-end tests for your React.js components ..." />
  <meta name="twitter:site" content="@ChrisPaulDev" />
  



</head>


<body>

  <div id="all">

    <header>

      <div class="navbar-affixed-top" data-spy="affix" data-offset-top="200">

        <div class="navbar navbar-default yamm" role="navigation" id="navbar">

          <div class="container">
            <div class="navbar-header">
              

              <div class="navbar-buttons">
                <button type="button" class="navbar-toggle btn-template-main" data-toggle="collapse"
                  data-target="#navigation">
                  <span class="sr-only">Toggle navigation</span>
                  <i class="fa fa-align-justify"></i>
                </button>
              </div>
            </div>


            <div class="navbar-collapse collapse" id="navigation">
              <ul class="nav navbar-nav navbar-right">

                <li class="dropdown">

                  <a href="../index.html">Blog</a>

                </li>

                <li class="dropdown">

                  <a href="../work-with-me/index.html">Work with me</a>

                </li>

                <li class="dropdown">

                  <a href="../about/index.html">About</a>

                </li>

                <li class="dropdown">

                  <a style="color: #38bb6c" href="https://roadtoreact.com/">Books &amp; Courses</a>

                </li>

              </ul>
            </div>


            <div class="collapse clearfix" id="search">

              <form class="navbar-form" role="search">
                <div class="input-group">
                  <input type="text" class="form-control" placeholder="Search">
                  <span class="input-group-btn">

                    <button type="submit" class="btn btn-template-main"><i class="fa fa-search"></i></button>

                  </span>
                </div>
              </form>

            </div>


          </div>
        </div>


      </div>
    </header>

    

    



    <div class="hidden-xs">


      
    </div>

    <div id="content">
      <div class="container">

        <div class="row">

          <article class="col-md-8 col-md-offset-2" id="blog-post" itemprop="blogPosts" itemscope
            itemtype="http://schema.org/BlogPosting">

            <div id="post-content" itemprop="articleBody">

              <header>
                <h1 itemprop="name headline">React Testing Tutorial: Test Frameworks &amp; Component Tests</h1>
              </header>

              

              <p class="text-muted text-uppercase mb-small text-center">
                <span itemprop="author publisher">

                </span>


                <time datetime="2018-03-19" itemprop="datePublished">
                  March 19, 2018
                </time>


              </p>

              <div>


              </div>

              <div class="post-image-primary">
                <div class="pinterest-pinner-wrapper" itemscope itemtype="http://schema.org/ImageObject">
                  <div class="pinterest-pinner">
                    <a data-pin-do="buttonPin" data-pin-save="true" data-pin-tall="true"
                      href="https://www.pinterest.com/pin/create/button/?url=https%3a%2f%2fchrispaul.dev%2freact-testing-tutorial%2f&amp;media=https://chrispaul.dev/img%2fposts%2freact-testing-tutorial%2fbanner.jpg&amp;description=">
                    </a>
                  </div>

                  <img class="img-lazy img-responsive"
                    data-lazy-src="/src="/img/posts/react-testing-tutorial/banner.jpg" data-is-src-set="is-src-set"
                    alt="react testing tutorial" itemprop="image" />
                </div>
              </div>


              <p>Writing tests is an essential part of software development to ensure a robust application. Tests enable
                us to automatically verify that our application is working on a certain level. The certain level depends
                on the quality, quantity (coverage) and type of your tests (unit tests, integration tests, end-to-end
                tests).</p>

              <p>The following article should <strong>guide you through the whole topic of testing React apps</strong>.
                Primarily, you will test React components but also pure business logic. The article showcases different
                testing libraries for your application whereas you can decide which of these solutions make sense for
                you. It guides you through the whole testing setup for your React application and how to write the
                tests. It will use testing tools such as Mocha, Chai, Sinon, Enzyme and Jest.</p>

              <p>If you are coming from a <a target="_blank" rel="noopener noreferrer"
                  href="https://github.com/facebook/create-react-app">create-react-app</a> application, you can ignore
                most of the setup sections. The create-react-app application comes with Jest as test runner and
                assertion library. You can add Sinon and Enzyme manually to it.</p>

              <p>Otherwise, I would recommend to use <a href="../minimal-react-webpack-babel-setup/index.html">this
                  article to set up a minimal React with Webpack application</a>. After your application is up and
                running by following the referenced guide, you can use this testing tutorial to setup your test
                environment.</p>

              <p>As mentioned, the article will show you <strong>how to setup different testing libraries in your React
                  application and how to use them</strong>. We will follow mostly the constraints of the <a
                  target="_blank" rel="noopener noreferrer"
                  href="https://www.google.com/search?q=testing+pyramid">testing pyramid</a>. It says that you should
                write mostly unit tests, followed by several integration tests and only a few end-to-end-tests (E2E
                tests). However, there exists a second philosophy for React applications, because it uses components and
                not many functions. The second testing philosophy says that you should write &ldquo;mostly integration
                tests and not so many unit tests&rdquo;. We will come back to this topic later in this testing tutorial.
              </p>

              <p><strong>What are unit, integration, and end-to-end tests in a nutshell?</strong> Whereas a unit test
                should be able to test a piece (e.g. component) in isolation, the integration test should make sure that
                the piece (component) works in its context with other pieces (components). For instance, an integration
                test could verify that all necessary props are passed through from the tested component to a specific
                child component. Last but not least, end-to-end tests are testing your application in a browser
                environment. For instance, there you could simulate a whole <a
                  href="../complete-firebase-authentication-react-tutorial/index.html">sign up process</a> by filling in
                a email address and a password in a form and submitting these credentials to your backend.</p>

              <p>The following article leaves out visual regression tests in React. However, you can deploy those tests
                as well as you can find over in this article: <a
                  href="../visual-regression-testing-react-storybook/index.html">Visual Regression Tests and React
                  Storybook</a>.</p>

              <p>Another goal of the article is to show you a couple of <strong>common test patterns and testing best
                  practices</strong> which are not too complicated and can be applied throughout your application. It
                should help you to write your React component tests in an efficient way without having to decide every
                time on how to write the tests themselves. Therefore, most of your tests should follow a common pattern
                which you can apply throughout your components. These test pattern become even more interesting when
                using <a target="_blank" rel="noopener noreferrer"
                  href="https://en.wikipedia.org/wiki/Test-driven_development">TDD</a>, because you can write your tests
                first and your components in the second step. After all, this guide should show you a couple of React
                testing best practices without being too opinionated. Hopefully it will help you to understand the React
                testing framework landscape, how to setup these testing tools up and how to use them.</p>

              <p>You can find the whole project in <a target="_blank" rel="noopener noreferrer"
                  href="https://github.com/ChrisPaulDev/react-components-test-setup">this GitHub repository</a>.</p>

              <h2 class="chapter-header" id="toc">Table of Contents</h2>

              <ul>
                <li><a href="#react-test-setup">Pseudo React Application Setup for Testing</a></li>
                <li>Mocha and Chai

                  <ul>
                    <li><a href="#react-mocha-chai-test-setup">Mocha with Chai Test Setup in React</a></li>
                    <li><a href="#react-component-tests-state-unit">Unit Tests for React State Changes</a></li>
                  </ul>
                </li>
                <li>Enzyme

                  <ul>
                    <li><a href="#react-enzyme-test-setup">Enzyme Test Setup in React</a></li>
                    <li><a href="#react-component-tests-integration">React Testing with Enzyme</a></li>
                  </ul>
                </li>
                <li>Sinon

                  <ul>
                    <li><a href="#react-sinon-test-setup">Sinon Test Setup in React</a></li>
                    <li><a href="#react-sinon-testing">React Testing with Sinon</a></li>
                  </ul>
                </li>
                <li>Jest

                  <ul>
                    <li><a href="#react-jest-test-setup">Jest Test Setup in React</a></li>
                    <li><a href="#react-jest-snapshot-tests">React Testing with Jest</a></li>
                  </ul>
                </li>
                <li>End-to-end (E2E) Tests

                  <ul>
                    <li><a href="#react-e2e-tests-cypress">React End-to-end (E2E) Tests with Cypress.io</a></li>
                  </ul>
                </li>
                <li>CI and Tests

                  <ul>
                    <li><a href="#react-component-tests-continuous-integration">React Component Tests and Continuous
                        Integration</a></li>
                    <li><a href="#react-component-test-coverage-coveralls">React Component Test Coverage with
                        Coveralls</a></li>
                  </ul>
                </li>
              </ul>

              <h2 class="chapter-header" id="react-test-setup">Pseudo React Application Setup for Testing</h2>

              <p>Before setting up the test setup with different testing libraries and writing the React component
                tests, you will need a simple React application which can be tested in the first place. You will
                introduce a simple App component which can be tested in the following sections. If it&rsquo;s too
                difficult for you to follow the next parts of the React application, you should grab a copy of <a
                  href="../the-road-to-learn-react/index.html">The Road to learn React</a> to learn about React itself
                before testing a React application.</p>

              <p>Let&rsquo;s start in the <em>src/index.js</em> file. Here you can import the App component which is not
                implemented yet and render it.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">ReactDOM</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-dom&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">import</span> <span style="color: #06b6ef">App</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./App&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #06b6ef">ReactDOM</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">render</span><span style="color: #e7e9db">(</span>
  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">App</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">,</span>
  <span style="color: #e7e9db">document.</span><span style="color: #06b6ef">getElementById</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;app&#39;</span><span style="color: #e7e9db">)</span>
<span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>The App component is an JavaScript ES6 class component that has its own state. It&rsquo;s a Counter
                component where it should be possible to increment and decrement a digit by clicking on either of two
                buttons. The file for the App component should be located in <em>src/App.js</em>.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">constructor</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">super</span><span style="color: #e7e9db">();</span>

    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">counter</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">0</span><span style="color: #e7e9db">,</span>
    <span style="color: #e7e9db">};</span>

    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">onIncrement</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">onIncrement</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">bind</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">);</span>
    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">onDecrement</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">onDecrement</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">bind</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">onIncrement</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">prevState</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">({</span>
      <span style="color: #06b6ef">counter</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">prevState</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">counter</span> <span style="color: #5bc4bf">+</span> <span style="color: #f99b15">1</span><span style="color: #e7e9db">,</span>
    <span style="color: #e7e9db">}));</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">onDecrement</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">prevState</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">({</span>
      <span style="color: #06b6ef">counter</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">prevState</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">counter</span> <span style="color: #5bc4bf">-</span> <span style="color: #f99b15">1</span><span style="color: #e7e9db">,</span>
    <span style="color: #e7e9db">}));</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">counter</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">;</span>

    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">h1</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">My</span> <span style="color: #06b6ef">Counter</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/h1&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">p</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">counter</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/p&gt;</span>

        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span>
          <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span>
          <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">onIncrement</span><span style="color: #e7e9db">}</span>
        <span style="color: #5bc4bf">&gt;</span>
          <span style="color: #06b6ef">Increment</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>

        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span>
          <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span>
          <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">onDecrement</span><span style="color: #e7e9db">}</span>
        <span style="color: #5bc4bf">&gt;</span>
          <span style="color: #06b6ef">Decrement</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
    <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>So far, hopefully everything should be clear on how this component works. If it&rsquo;s not clear, make
                sure to grab the ebook/course &ldquo;The Road to learn React&rdquo; after reading this tutorial.</p>

              <p>But that&rsquo;s not it for the use case application. Let&rsquo;s add a couple of more things for the
                sake of testing different parts of it in isolation later on. Since the <code>this.setState()</code>
                method is asynchronously executed, <a href="../learn-react-before-using-redux/index.html">it already
                  uses a function instead of an object</a>. That way, it can access the state when
                <code>this.setState()</code> is actually executed asynchronously. That&rsquo;s only one benefit of using
                the function over the object in <code>this.setState()</code>. In addition, it&rsquo;s also possible to
                extract it as standalone function which can be tested in isolation from the component later on.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">doIncrement</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">prevState</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">({</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">counter</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">prevState</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">counter</span> <span style="color: #5bc4bf">+</span> <span style="color: #f99b15">1</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">});</span>
</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">const</span> <span style="color: #06b6ef">doDecrement</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">prevState</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">({</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">counter</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">prevState</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">counter</span> <span style="color: #5bc4bf">-</span> <span style="color: #f99b15">1</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">});</span>
</span>
<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">constructor</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">...</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">onIncrement</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">doIncrement</span><span style="color: #e7e9db">);</span>
</span>  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">onDecrement</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">doDecrement</span><span style="color: #e7e9db">);</span>
</span>  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">...</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>In order to import these functions in the tests later on , they need to be exported from the file.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">export</span> <span style="color: #815ba4">const</span> <span style="color: #06b6ef">doIncrement</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">prevState</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">({</span>
</span>  <span style="color: #06b6ef">counter</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">prevState</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">counter</span> <span style="color: #5bc4bf">+</span> <span style="color: #f99b15">1</span><span style="color: #e7e9db">,</span>
<span style="color: #e7e9db">});</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">export</span> <span style="color: #815ba4">const</span> <span style="color: #06b6ef">doDecrement</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">(</span><span style="color: #06b6ef">prevState</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">({</span>
</span>  <span style="color: #06b6ef">counter</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">prevState</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">counter</span> <span style="color: #5bc4bf">-</span> <span style="color: #f99b15">1</span><span style="color: #e7e9db">,</span>
<span style="color: #e7e9db">});</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
 <span style="color: #e7e9db">...</span>
<span style="color: #e7e9db">}</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>These functions which are used to update the local state of the React component can tested in isolation
                from the component now. That&rsquo;s what you would call a real unit test later on. The function is
                tested with an input and the test asserts an expected output. There are no side effects, because the
                function is pure.</p>

              <p>In addition for our React application, let&rsquo;s introduce a second component to have a relationship
                between two components as parent and child components. That&rsquo;s another scenario which can be tested
                as integration test later on. If you would test each component in isolation, you would have unit tests.
                But by testing them together in their context, you have an integration test between both components.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">...</span>

  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">counter</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">;</span>

    <span style="color: #815ba4">return</span> <span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">div</span><span style="color: #5bc4bf">&gt;</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">h1</span><span style="color: #5bc4bf">&gt;</span><span style="color: #06b6ef">My</span> <span style="color: #06b6ef">Counter</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/h1&gt;</span>
<span style="background-color: #4f424c">        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Counter</span> <span style="color: #06b6ef">counter</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">counter</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span>
</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span>
          <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span>
          <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">onIncrement</span><span style="color: #e7e9db">}</span>
        <span style="color: #5bc4bf">&gt;</span>
          <span style="color: #06b6ef">Increment</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>

        <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">button</span>
          <span style="color: #06b6ef">type</span><span style="color: #5bc4bf">=</span><span style="color: #48b685">&quot;button&quot;</span>
          <span style="color: #06b6ef">onClick</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">onDecrement</span><span style="color: #e7e9db">}</span>
        <span style="color: #5bc4bf">&gt;</span>
          <span style="color: #06b6ef">Decrement</span>
        <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/button&gt;</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/div&gt;</span>
    <span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>

<span style="background-color: #4f424c"><span style="color: #815ba4">export</span> <span style="color: #815ba4">const</span> <span style="color: #06b6ef">Counter</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">({</span> <span style="color: #06b6ef">counter</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">=&gt;</span>
</span><span style="background-color: #4f424c">  <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">p</span><span style="color: #5bc4bf">&gt;</span><span style="color: #e7e9db">{</span><span style="color: #06b6ef">counter</span><span style="color: #e7e9db">}</span><span style="color: #5bc4bf">&lt;</span><span style="color: #ef6155">/p&gt;</span>
</span>
<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>As you can see, the component gets exported as well. This way, it can be imported in the test in a
                later section of this tutorial. Even though the Counter component is not used anywhere else in the whole
                application, it is okay to export components (and functions) from a file for the sake of testing them.
                That&rsquo;s it for the use case application which shall be tested in the following sections.</p>

              <h2 class="chapter-header" id="react-mocha-chai-test-setup">Mocha with Chai Test Setup in React</h2>

              <p>This section will show you how to setup and perform React testing with Mocha and Chai. Let&rsquo;s
                implement a minimal React testing setup to make first assertions for the exported functions. First,
                there needs to be an entity which is responsible to run all of our tests in a certain framework. This
                entity will be <a target="_blank" rel="noopener noreferrer"
                  href="https://github.com/mochajs/mocha">Mocha</a> which is a popular test runner in React
                applications. In contrast, another popular test runner is Karma which is popular for testing Angular
                applications.</p>

              <p>Let&rsquo;s install Mocha on the command line as development dependency.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">dev</span> <span style="color: #06b6ef">mocha</span>
</code></pre>
              </div>


              <p>Second, there needs to be an entity which can be used to make assertions. Someone has to able to say:
                &ldquo;Expect X to be equal to Y&rdquo;. This entity will be <a target="_blank"
                  rel="noopener noreferrer" href="https://github.com/chaijs/chai">Chai</a> in our testing setup. So
                let&rsquo;s install it on the command line as well.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">dev</span> <span style="color: #06b6ef">chai</span>
</code></pre>
              </div>


              <p>Last but not least, React components need some kind of artificial browser environment, because they
                render HTML in the browser&rsquo;s DOM. Since the tests are not executed in a real browser, you need to
                setup the minimal environment for the component tests yourself. That&rsquo;s why you need to install <a
                  target="_blank" rel="noopener noreferrer" href="https://github.com/jsdom/jsdom">jsdom</a> on the
                command line as dev dependency as well. Jsdom makes sure that you can create this artificial browser
                environment in the next steps.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">dev</span> <span style="color: #06b6ef">jsdom</span>
</code></pre>
              </div>


              <p>These three libraries are everything you need for a minimal test environment. You will use these to
                test a couple of things in the following. Later on, you will learn in the next sections about advanced
                libraries to enrich your React component testing tool set.</p>

              <p>In the last step of this section, let&rsquo;s see how these three libraries are configured together in
                order to start testing your application. On the command line, create the necessary files as test
                configurations in a new test folder. In your project, create next to your <em>src/</em> folder a
                <em>test/</em> folder for all your test configuration.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">mkdir</span> <span style="color: #06b6ef">test</span>
<span style="color: #06b6ef">cd</span> <span style="color: #06b6ef">test</span>
<span style="color: #06b6ef">touch</span> <span style="color: #06b6ef">helpers</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">js</span> <span style="color: #06b6ef">dom</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">js</span>
</code></pre>
              </div>


              <p>Both files will be filled with content now. Later on, they will be used as configuration to run the
                tests via a script on the command line. Let&rsquo;s go first with the <em>test/helpers.js</em> file:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">expect</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;chai&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #06b6ef">global</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">expect</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>The only thing we are doing in this file is importing the expect function from the chai assertion
                library. This function is used later on in your tests to assert: &ldquo;Expect X to be equal to
                Y&rdquo;. Furthermore, the expect function is made globally accessible in all your test files by using
                this file. That&rsquo;s how you can make <code>expect()</code> the default function in your tests
                without importing the function in each file explicitly. It&rsquo;s always there in every of your test
                files, because you will need it anyway in every test. In the following sections, you will add more of
                these globally accessible test functions, because you most likely need them in every test anyways.</p>

              <p>In the other file, the <em>test/dom.js</em> file, you will setup your pseudo browser environment for
                your React components which render HTML eventually. Open the <em>test/dom.js</em> file and add the
                following lines to it:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">JSDOM</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;jsdom&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">const</span> <span style="color: #e7e9db">{</span> <span style="color: #e7e9db">window</span> <span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">new</span> <span style="color: #06b6ef">JSDOM</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;&lt;!doctype html&gt;&lt;html&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;&#39;</span><span style="color: #e7e9db">);</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">copyProps</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">src</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">target</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">props</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">Object.</span><span style="color: #06b6ef">getOwnPropertyNames</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">src</span><span style="color: #e7e9db">)</span>
    <span style="color: #e7e9db">.</span><span style="color: #06b6ef">filter</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">prop</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #815ba4">typeof</span> <span style="color: #06b6ef">target</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">prop</span><span style="color: #e7e9db">]</span> <span style="color: #5bc4bf">===</span> <span style="color: #48b685">&#39;undefined&#39;</span><span style="color: #e7e9db">)</span>
    <span style="color: #e7e9db">.</span><span style="color: #06b6ef">reduce</span><span style="color: #e7e9db">((</span><span style="color: #06b6ef">result</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">prop</span><span style="color: #e7e9db">)</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">({</span>
      <span style="color: #e7e9db">...</span><span style="color: #06b6ef">result</span><span style="color: #e7e9db">,</span>
      <span style="color: #e7e9db">[</span><span style="color: #06b6ef">prop</span><span style="color: #e7e9db">]</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">Object.</span><span style="color: #06b6ef">getOwnPropertyDescriptor</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">src</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">prop</span><span style="color: #e7e9db">),</span>
    <span style="color: #e7e9db">}),</span> <span style="color: #e7e9db">{});</span>
  <span style="color: #e7e9db">Object.</span><span style="color: #06b6ef">defineProperties</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">target</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">props</span><span style="color: #e7e9db">);</span>
<span style="color: #e7e9db">}</span>

<span style="color: #06b6ef">global</span><span style="color: #e7e9db">.window</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">window;</span>
<span style="color: #06b6ef">global</span><span style="color: #e7e9db">.document</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">window.document;</span>
<span style="color: #06b6ef">global</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">navigator</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">userAgent</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&#39;node.js&#39;</span><span style="color: #e7e9db">,</span>
<span style="color: #e7e9db">};</span>

<span style="color: #06b6ef">copyProps</span><span style="color: #e7e9db">(window,</span> <span style="color: #06b6ef">global</span><span style="color: #e7e9db">);</span>
</code></pre>
              </div>


              <p>This tutorial isn&rsquo;t going to explain the last code snippet in too much detail. Basically the code
                snippet helps us to mimic the browser for our React component tests. You can see that the jsdom library
                is used to create a <code>window</code> object which should be available in the browser, but also a
                couple of more objects (e.g. <code>document</code> object). Don&rsquo;t worry too much about this file,
                because most likely you will never have to touch it again.</p>

              <p>Now you have both helper files for your tests in place. One to expose functions from your test
                libraries globally to all your test files, because they are needed anyway, and one to mimic the DOM for
                your React component tests. Last but not least, you need to define the <code>npm run test</code> script
                in your package.json. This script should execute all your test files, which have a specific suffix in
                their file name, and use the two previously defined files as configuration for the test environment. In
                your <em>package.json</em> add the following script:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #48b685">&quot;scripts&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
  <span style="color: #48b685">&quot;start&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;webpack-dev-server --config ./webpack.config.js&quot;</span><span style="color: #e7e9db">,</span>
<span style="background-color: #4f424c">  <span style="color: #48b685">&quot;test:unit&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;mocha --require @babel/register --require ./test/helpers.js --require ./test/dom.js &#39;src/**/*.spec.js&#39;&quot;</span>
</span><span style="color: #e7e9db">},</span>
</code></pre>
              </div>


              <p>If you haven&rsquo;t installed @babel/register which is used in the npm script yet, you can do it with
                <code>npm install -save-dev @babel/register</code>.</p>

              <p>As you can see, the script takes both configuration files as required test configuration and executes
                all test files which end with the suffix &ldquo;*.spec.js&rdquo;. Basically a test file could be named
                <em>App.spec.js</em> and it has to be somewhere in the <em>/src</em> folder. Of course, you can come up
                with your own rules for the test file naming here. It&rsquo;s up to you.</p>

              <p>The script can be executed by running <code>npm run test:unit</code> on the command line now, but it
                will not find any tests yet, because you will have to define these tests in the first place. You will do
                it in the next section, but before doing so, you can add a second npm script. This script will execute
                the previously defined script, but this time in watch mode.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #48b685">&quot;scripts&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
  <span style="color: #48b685">&quot;start&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;webpack-dev-server --config ./webpack.config.js&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;test:unit&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;mocha --require @babel/register --require ./test/helpers.js --require ./test/dom.js &#39;src/**/*.spec.js&#39;&quot;</span><span style="color: #e7e9db">,</span>
<span style="background-color: #4f424c">  <span style="color: #48b685">&quot;test:unit:watch&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;npm run test:unit -- --watch&quot;</span>
</span><span style="color: #e7e9db">},</span>
</code></pre>
              </div>


              <p>The watch mode means that your tests will run once, but every time again when you change your source
                code or tests. That&rsquo;s how you will get immediate feedback on the command line while developing
                your application, doing test driven development, implementing additional tests, or while you are
                changing tests.</p>

              <p>Note: If you want to run your tests in watch mode with <code>npm run test:unit:watch</code> along with
                your development server with <code>npm start</code>, you need to open two terminal tabs to be able to
                execute both scripts side by side.</p>

              <p>Last but not least, before diving into testing with Mocha and Chai, there is one neat little library
                which you may need later on. It&rsquo;s called <a target="_blank" rel="noopener noreferrer"
                  href="https://github.com/bkonkle/ignore-styles">ignore-styles</a>. At some point, you may introduce
                styling for your React components. However, the styling shouldn&rsquo;t necessarily affect the tests and
                thus you may wanna just ignore them. That&rsquo;s where this little library comes into play. You can
                install it on the command line with <code>npm install --save-dev ignore-styles</code> and add it to your
                npm script:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #48b685">&quot;scripts&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
  <span style="color: #48b685">&quot;start&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;webpack-dev-server --config ./webpack.config.js&quot;</span><span style="color: #e7e9db">,</span>
<span style="background-color: #4f424c">  <span style="color: #48b685">&quot;test:unit&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;mocha --require @babel/register --require ./test/helpers.js --require ./test/dom.js --require ignore-styles &#39;src/**/*.spec.js&#39;&quot;</span><span style="color: #e7e9db">,</span>
</span>  <span style="color: #48b685">&quot;test:unit:watch&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;npm run test:unit -- --watch&quot;</span>
<span style="color: #e7e9db">},</span>
</code></pre>
              </div>


              <p>That&rsquo;s it for the Mocha and Chai setup for a React application. In the next section, you will
                introduce your first unit tests with it.</p>

              <h2 class="chapter-header" id="react-component-tests-state-unit">Unit Tests for React State Changes</h2>

              <p>Let&rsquo;s start with the smallest building blocks in the testing pyramid: unit tests. They only test
                small parts of your application in isolation. For instance, functions are a perfect candidates for unit
                tests. They only take an input and return an output. That&rsquo;s what makes pure functions so powerful
                for testing too, because you never have to worry about any side-effects. The output should be always the
                same when the input stays the same. Thus a unit test could be used to test this particular function as a
                part of your application in isolation.</p>

              <p>In the App component, you have already extracted the functions which update the state in
                <code>this.setState()</code>. These functions got exported too, so you can import them in a test file in
                order to test them. Let&rsquo;s create a test file for the App component on the command line from the
                <em>src/</em> folder, Make sure to give the file the correct naming suffix.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">touch</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">spec</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">js</span>
</code></pre>
              </div>


              <p>Now open up the file and add the following lines to it:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;Local State&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;should increment the counter in state&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>

  <span style="color: #e7e9db">});</span>

  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;should decrement the counter in state&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>

  <span style="color: #e7e9db">});</span>
<span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>Basically the previous lines have defined one test suite and two tests for it. Whereas the
                &ldquo;describe&rdquo;-block defines the test suite, the &ldquo;it&rdquo;-blocks define the test cases.
                A test can either be successful (green) or erroneous (red). Of course, you want to make and keep them
                green.</p>

              <p>Now it&rsquo;s up to you to test both functions which update the React component state from your
                <em>src/App.js</em> file. Whereas one function increments the counter property in the object (state),
                the other function decrements the counter property.</p>

              <p>The simplest procedure to write a test in a &ldquo;it&rdquo;-block in three steps is the following:
                arrange, act, assert.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">doIncrement</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">doDecrement</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./App&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;Local State&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;should increment the counter in state&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">counter</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">0</span> <span style="color: #e7e9db">};</span>
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">newState</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">doIncrement</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">newState</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">counter</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">to</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">equal</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">1</span><span style="color: #e7e9db">);</span>
</span>  <span style="color: #e7e9db">});</span>

  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;should decrement the counter in state&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">counter</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">0</span> <span style="color: #e7e9db">};</span>
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">newState</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">doDecrement</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">newState</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">counter</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">to</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">equal</span><span style="color: #e7e9db">(</span><span style="color: #5bc4bf">-</span><span style="color: #f99b15">1</span><span style="color: #e7e9db">);</span>
</span>  <span style="color: #e7e9db">});</span>
<span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>In the first line of each test, you arrange the initial state object which will be the input of your
                function to be tested in the next step. In the second line of each test, you will pass the variable from
                the setup step to your function. The function returns a value. In the last line of the test, you want to
                assert that the returned value from the function is an expected value. In this case, the
                <code>doIncrement()</code> function should increment the counter property in the state object and the
                <code>doDecrement()</code> function should decrement it.</p>

              <p>That&rsquo;s it. You can run both tests on the command line with <code>npm run test:unit</code> or
                <code>npm run test:unit:watch</code>. You can change the assertion and see how the tests behave in watch
                mode. They will either fail or succeed. Furthermore, note that there is no React dependency yet in the
                test file. It&rsquo;s only Mocha and Chai which are able to test your vanilla JavaScript functions. You
                wouldn&rsquo;t even need the <em>test/dom.js</em> configuration yet, because there is no DOM of the
                browser needed for these unit tests.</p>

              <h2 class="chapter-header" id="react-enzyme-test-setup">Enzyme Test Setup in React</h2>

              <p>The following section will show you how to setup and perform React testing with Enzyme which makes it
                effortless to test React components with unit and integration tests. It is a library by Airbnb which was
                introduced for component tests in React. Let&rsquo;s go through the setup of Enzyme in React. First, you
                have to install it on the command line as dev dependency:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">dev</span> <span style="color: #06b6ef">enzyme</span>
</code></pre>
              </div>


              <p>Enzyme introduced adapters to play well with React. That&rsquo;s why you have to install such an
                adapter for your test setup too. The version of it depends on your React version:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">dev</span> <span style="color: #06b6ef">enzyme</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">adapter</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">react</span><span style="color: #5bc4bf">-</span><span style="color: #f99b15">16</span>
</code></pre>
              </div>


              <p>In this React testing guide, we are using React 16. That&rsquo;s why the Enzyme adapter for React 16
                gets installed here. So make sure to check your own React version in your application.</p>

              <p>Last but not least, you can setup Enzyme in your <em>test/helpers.js</em> file. There you can configure
                the adapter and expose the enzyme functionalities globally next to the expect function:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">expect</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;chai&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">mount</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">render</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">shallow</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">configure</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;enzyme&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">Adapter</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;enzyme-adapter-react-16&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="background-color: #4f424c"><span style="color: #06b6ef">configure</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">adapter</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">new</span> <span style="color: #06b6ef">Adapter</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">});</span>
</span>
<span style="color: #06b6ef">global</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">expect</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">;</span>

<span style="background-color: #4f424c"><span style="color: #06b6ef">global</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">mount</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">mount</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c"><span style="color: #06b6ef">global</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">render</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">render</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c"><span style="color: #06b6ef">global</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">shallow</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">shallow</span><span style="color: #e7e9db">;</span>
</span></code></pre>
              </div>


              <p>Similar to the <code>expect</code> function from chai which is used to make assertions, you can make
                <code>shallow</code>, <code>render</code> and <code>mount</code> from Enzyme globally accessible. That
                way, you don&rsquo;t need to import it explicitly in your test files anymore. You will use these three
                functions for your unit and integration tests with Enzyme for your React components.</p>

              <h2 class="chapter-header" id="react-component-tests-integration">React Testing with Enzyme: Unit and
                Integrations Tests for React Components</h2>

              <p>The Enzyme setup is up and running. Now you can start to test your component(s). The following section
                should show you a couple of basic patterns which you can apply in your React component tests. If you
                follow these patterns, you don&rsquo;t have to make a costly mental decision every time on how to test
                your React components.</p>

              <p>You have already exported the Counter component from the <em>src/App.js</em> file. So it should be
                possible to test for you that an instance of the Counter component is rendered when you render the App
                component. You can simply add your tests in the <em>src/App.spec.js</em> file.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">doIncrement</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">doDecrement</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">Counter</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./App&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;Local State&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
 <span style="color: #e7e9db">...</span>
<span style="color: #e7e9db">});</span>

<span style="background-color: #4f424c"><span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;App Component&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;renders the Counter wrapper&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">wrapper</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">shallow</span><span style="color: #e7e9db">(</span><span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">App</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">find</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">Counter</span><span style="color: #e7e9db">)).</span><span style="color: #06b6ef">to</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">have</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">length</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">1</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">});</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">});</span>
</span></code></pre>
              </div>


              <p>The <code>shallow()</code> function is one of the three functions (shallow, mount, render) which you
                have made accessible globally in the <em>test/helpers.js</em> file. Shallow is the simplest form of
                rendering a component with Enzyme. It only renders the component but not the content of components which
                are children to this component. It makes it possible to test the component in isolation. Thus it can be
                used perfectly for unit tests of React components. In the previous test, you only checked whether the
                Counter component is rendered as component instance in the App component. Accordingly to the test, there
                should be only one Counter component.</p>

              <p>That&rsquo;s one simple unit test you can do with Enzyme in React. For instance, you can also check
                whether specific HTML tags or HTMLS elements with CSS classes are rendered.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;renders the List wrapper with list elements&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">wrapper</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">shallow</span><span style="color: #e7e9db">(</span><span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">List</span> <span style="color: #06b6ef">items</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{[</span><span style="color: #48b685">&#39;a&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #48b685">&#39;b&#39;</span><span style="color: #e7e9db">]}</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">);</span>
  <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">find</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;li&#39;</span><span style="color: #e7e9db">)).</span><span style="color: #06b6ef">to</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">have</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">length</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">2</span><span style="color: #e7e9db">);</span>
  <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">find</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;.list&#39;</span><span style="color: #e7e9db">)).</span><span style="color: #06b6ef">to</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">have</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">length</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">1</span><span style="color: #e7e9db">);</span>
<span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>Depending on the passed props, you can check the rendered HTML elements by selecting them with <a
                  target="_blank" rel="noopener noreferrer"
                  href="https://github.com/airbnb/enzyme/blob/master/docs/api/selector.md">Enzyme&rsquo;s selectors</a>.
                This way, you can also check a <a href="../conditional-rendering-react/index.html">conditional rendering
                  in React</a> by asserting the length of a selection to be either 0 or 1.</p>

              <p>Shallow rendering tests with Enzyme can also be used for lightweight integration tests. For instance,
                whereas the last test checked only the rendered HTML tags, the next test asserts whether the correct
                props are passed to the next component.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;App Component&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;renders the Counter wrapper&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">wrapper</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">shallow</span><span style="color: #e7e9db">(</span><span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">App</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">);</span>
    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">find</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">Counter</span><span style="color: #e7e9db">)).</span><span style="color: #06b6ef">to</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">have</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">length</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">1</span><span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">});</span>

<span style="background-color: #4f424c">  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;passes all props to Counter wrapper&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">wrapper</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">shallow</span><span style="color: #e7e9db">(</span><span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">App</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">let</span> <span style="color: #06b6ef">counterWrapper</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">find</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">Counter</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">counterWrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">().</span><span style="color: #06b6ef">counter</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">to</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">equal</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">0</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">counter</span><span style="color: #5bc4bf">:</span> <span style="color: #5bc4bf">-</span><span style="color: #f99b15">1</span> <span style="color: #e7e9db">});</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">counterWrapper</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">find</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">Counter</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">counterWrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">().</span><span style="color: #06b6ef">counter</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">to</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">equal</span><span style="color: #e7e9db">(</span><span style="color: #5bc4bf">-</span><span style="color: #f99b15">1</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">});</span>
</span><span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>The line between a unit test and a integration test can be blurry. But in this case, you could say
                it&rsquo;s a lightweight integration test because it tests whether two components play together as
                expected. The last test has shown you how to access and verify props which are passed from component to
                component and how to manipulate the local state of a component for the purpose of your test. That way,
                you can also test your React component state when the local state changes. For instance, imagine a
                toggle for a conditional rendering again which is stored as local state in your component. You can
                manipulate the state and verify whether the correct HTML elements are rendered or not rendered.</p>

              <p>You have seen how to test the rendered output, how to access props and how to manipulate the local
                state of a component. Next, you can also simulate clicks with Enzyme. Your App component has two buttons
                which are perfectly suited to test the click behavior. Whereas one button should increment the counter
                in the local state of the React component, the other button should decrement the counter. Let&rsquo;s
                see how you can simulate these events in interactive HTML elements such as buttons with a
                <code>onClick</code> handler.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;App Component&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;renders the Counter wrapper&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">wrapper</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">shallow</span><span style="color: #e7e9db">(</span><span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">App</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">);</span>
    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">find</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">Counter</span><span style="color: #e7e9db">)).</span><span style="color: #06b6ef">to</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">have</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">length</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">1</span><span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">});</span>

  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;passes all props to Counter wrapper&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">wrapper</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">shallow</span><span style="color: #e7e9db">(</span><span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">App</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">);</span>
    <span style="color: #815ba4">let</span> <span style="color: #06b6ef">counterWrapper</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">find</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">Counter</span><span style="color: #e7e9db">);</span>

    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">counterWrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">().</span><span style="color: #06b6ef">counter</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">to</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">equal</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">0</span><span style="color: #e7e9db">);</span>

    <span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">counter</span><span style="color: #5bc4bf">:</span> <span style="color: #5bc4bf">-</span><span style="color: #f99b15">1</span> <span style="color: #e7e9db">});</span>

    <span style="color: #06b6ef">counterWrapper</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">find</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">Counter</span><span style="color: #e7e9db">);</span>
    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">counterWrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">props</span><span style="color: #e7e9db">().</span><span style="color: #06b6ef">counter</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">to</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">equal</span><span style="color: #e7e9db">(</span><span style="color: #5bc4bf">-</span><span style="color: #f99b15">1</span><span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">});</span>

<span style="background-color: #4f424c">  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;increments the counter&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">wrapper</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">shallow</span><span style="color: #e7e9db">(</span><span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">App</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">counter</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">0</span> <span style="color: #e7e9db">});</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">find</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;button&#39;</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">at</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">0</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">simulate</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;click&#39;</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">().</span><span style="color: #06b6ef">counter</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">to</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">equal</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">1</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">});</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;decrements the counter&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">wrapper</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">shallow</span><span style="color: #e7e9db">(</span><span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">App</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">counter</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">0</span> <span style="color: #e7e9db">});</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">find</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;button&#39;</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">at</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">1</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">simulate</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;click&#39;</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">().</span><span style="color: #06b6ef">counter</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">to</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">equal</span><span style="color: #e7e9db">(</span><span style="color: #5bc4bf">-</span><span style="color: #f99b15">1</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">});</span>
</span><span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>Since there are two buttons, you can use the <code>at()</code> helper function to access the desired
                element in the list of elements with an index. But be careful when the order of the elements changes. In
                a best case test scenario, I would recommend to use more specific Enzyme selectors to address each
                element individually. Otherwise your tests are likely to break when the order of your elements, in this
                case the order of the button elements, changes.</p>

              <p>The last test cases were simple ways for testing your React state. They can be seen as test pattern,
                because you can easily repeat them for other components too. It shouldn&rsquo;t take you much time to
                verify that crucial HTML elements or React components are rendered, the correct props are passed and the
                local state is manipulated in an expected way.</p>

              <p>You have only used the <code>shallow()</code> function from Enzyme for your unit tests and lightweight
                integration tests so far. You may wonder when you should use the <code>mount()</code> and
                <code>render()</code> functions from Enzyme.</p>

              <p>While <code>shallow()</code> only renders the component without the content of child components,
                <code>mount()</code> renders all child components as well. It renders the whole component hierarchy.
                While the former is used for component tests in isolation (unit tests, lightweight integration), the
                latter is used for real integration tests. Integration tests are more likely to break, because they
                include all the children and logic of your component tree. Thus the maintenance costs are higher for
                integration tests. People are saying it&rsquo;s more expensive to write and maintain those tests than
                unit tests. Last but not least, the third function to render your React components with Enzyme is called
                <code>render()</code>. It is similar to <code>mount()</code>, because it renders all child components.
                But from a performance point of view, it is less expensive than <code>mount()</code>, because it
                doesn&rsquo;t run the lifecycle methods of your component. So if you need access to child components but
                are not interested in lifecycle methods, you can use <code>render()</code> instead of
                <code>mount()</code>.</p>

              <p><strong>There are two major philosophies on how many unit and integration tests you should have for
                  your components in your application.</strong> The common testing pyramid says that you should have
                lots of unit tests and several integration tests (and only a few end-to-end tests). Basically, you
                should have a lot of small maintainable unit tests, but a few vital integration tests. It&rsquo;s the
                common approach for testing in software engineering. However, for component tests (like in React) there
                exists the philosophy to have many integration tests but only a few unit tests. Unit tests are not very
                likely to break because they isolate the component too much from the rest of the application. They mock
                the context perfectly away. That&rsquo;s why people argue against it, because the component is too
                isolated. In conclusion, you would be more likely to test a component for its robustness by using
                integration tests to test them in their context of other components.</p>

              <p>What does it mean for the implementation of your tests? If you would want to use more integration tests
                than unit tests, you would go for <code>mount()</code> or <code>render()</code> instead of
                <code>shallow()</code> in your component tests. That way you render, test and verify the existence and
                behavior of the whole component tree. Moreover, you would be able to write more complex tests because
                you have access to all child components. The test cases won&rsquo;t differ too much from the previously
                implemented test cases. You would still verify passed props, rendered elements, simulated clicks and
                state changes of your local React state.</p>

              <h2 class="chapter-header" id="react-sinon-test-setup">Sinon Test Setup in React</h2>

              <p>What about async tests in a React application? So far everything you have tested was synchronous. If
                you check again your App component, there is no need to test something that is executed asynchronously.
                Let&rsquo;s introduce a artificial scenario in your App component where some made up data is fetched in
                the <code>componentDidMount()</code> lifecycle method.</p>

              <p>Often it happens that a component requests data from a <a
                  href="../what-is-an-api-javascript/index.html">third-party API</a> in the
                <code>componentDidMount()</code> lifecycle method. Because of it, it should be possible to test this
                asynchronous part in a React component as well. Let&rsquo;s pretend there is a pseudo API endpoint that
                returns an array of counters from an API. Of course, it will not work in your running application,
                because the API endpoint doesn&rsquo;t exist, but it should be there for the purpose of testing it.
                Afterward, you should be able to test your own third-party requests that happen in the
                <code>componentDidMount()</code> lifecycle method.</p>

              <p>In the following scenario, you will use axios to make the request to the third-party API. Therefore,
                you have to install the axios package with npm on the command line.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span> <span style="color: #06b6ef">axios</span>
</code></pre>
              </div>


              <p>Afterward, you can make the request to a pseudo API endpoint. It&rsquo;s up to you to use a real API
                endpoint for this scenario. If you are not familiar on how to make request to third-party APIs in React
                components, checkout <a href="../react-fetching-data/index.html">this guide on data fetching in
                  React</a>.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">axios</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;axios&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #e7e9db">...</span>

<span style="color: #815ba4">class</span> <span style="color: #06b6ef">App</span> <span style="color: #815ba4">extends</span> <span style="color: #06b6ef">Component</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">constructor</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">super</span><span style="color: #e7e9db">();</span>

    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">{</span>
      <span style="color: #06b6ef">counter</span><span style="color: #5bc4bf">:</span> <span style="color: #f99b15">0</span><span style="color: #e7e9db">,</span>
<span style="background-color: #4f424c">      <span style="color: #06b6ef">asyncCounters</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">null</span><span style="color: #e7e9db">,</span>
</span>    <span style="color: #e7e9db">};</span>

    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">onIncrement</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">onIncrement</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">bind</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">);</span>
    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">onDecrement</span> <span style="color: #5bc4bf">=</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">onDecrement</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">bind</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">this</span><span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>

<span style="background-color: #4f424c">  <span style="color: #06b6ef">componentDidMount</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">axios</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">get</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;http://mypseudodomain/counter&#39;</span><span style="color: #e7e9db">)</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">counter</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">asyncCounters</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">counter</span> <span style="color: #e7e9db">}))</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">.</span><span style="color: #815ba4">catch</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">error</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #06b6ef">console</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">log</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">error</span><span style="color: #e7e9db">));</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">}</span>
</span>
  <span style="color: #06b6ef">onIncrement</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">doIncrement</span><span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">onDecrement</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">this</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">setState</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">doDecrement</span><span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">}</span>

  <span style="color: #06b6ef">render</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">...</span>
  <span style="color: #e7e9db">}</span>
<span style="color: #e7e9db">}</span>

<span style="color: #e7e9db">...</span>

<span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>For the purpose of testing this scenario, there is no need to display the <code>asyncCounters</code>
                from the local state in the <code>render()</code> method. Because the endpoint will only return fake
                data in the test later on. In addition, the scenario only covers the happy path when the request is
                successful.</p>

              <p>Now, how would you test the asynchronous data fetching in your React component? You can install a neat
                library called <a target="_blank" rel="noopener noreferrer"
                  href="https://github.com/sinonjs/sinon">Sinon</a> for it as dev dependency on the command line:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">dev</span> <span style="color: #06b6ef">sinon</span>
</code></pre>
              </div>


              <p>Afterward, you can add Sinon as another global function to your <em>test/helpers.js</em> file:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">sinon</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;sinon&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">expect</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;chai&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">mount</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">render</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">shallow</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">configure</span><span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;enzyme&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">Adapter</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;enzyme-adapter-react-16&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #06b6ef">configure</span><span style="color: #e7e9db">({</span> <span style="color: #06b6ef">adapter</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">new</span> <span style="color: #06b6ef">Adapter</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">});</span>

<span style="color: #06b6ef">global</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">expect</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">;</span>

<span style="background-color: #4f424c"><span style="color: #06b6ef">global</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">sinon</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">sinon</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #06b6ef">global</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">mount</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">mount</span><span style="color: #e7e9db">;</span>
<span style="color: #06b6ef">global</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">render</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">render</span><span style="color: #e7e9db">;</span>
<span style="color: #06b6ef">global</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">shallow</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">shallow</span><span style="color: #e7e9db">;</span>
</code></pre>
              </div>


              <p>Sinon can be used for spies, stubs, and mocks. In the following, you will use a spy and a stub for
                testing your asynchronous business logic in your React component. These are most of the time sufficient
                for testing async logic in your code.</p>

              <h2 class="chapter-header" id="react-sinon-testing">React Testing with Sinon: Testing Asynchronous Logic
              </h2>

              <p>Let&rsquo;s add a first <a target="_blank" rel="noopener noreferrer"
                  href="http://sinonjs.org/releases/v4.4.6/spies/">spy</a> just for the sake of demonstrating it. A spy
                can be used on any function for assertions. After a spy is applied to it, you can assert for example how
                many times the function was called for the test.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;App Component&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;calls componentDidMount&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">sinon</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">spy</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">App</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">prototype</span><span style="color: #e7e9db">,</span> <span style="color: #48b685">&#39;componentDidMount&#39;</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">wrapper</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">mount</span><span style="color: #e7e9db">(</span><span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">App</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">App</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">prototype</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">componentDidMount</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">calledOnce</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">to</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">equal</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">true</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">});</span>
</span><span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>In the test, you expected the <code>componentDidMount()</code> lifecycle method, which is available via
                the prototype chain on the App component, to be called only once. If you know the lifecycle methods of
                React components, it should be clear that this method is only called once when the component mounts.
                Afterward, it&rsquo;s not called again. Thus the test should succeed. That&rsquo;s essentially how you
                would test React lifecycle methods.</p>

              <p>The test itself is not important and can be removed again. It should only demonstrate the spying
                capabilities of Sinon. After all, it wouldn&rsquo;t make any sense to test the lifecycle methods of a
                React component. That should be tested by React internally. Instead, let&rsquo;s see how the
                asynchronous data fetching in React can be tested with Sinon.</p>

              <p>Since every test of the App component is affected by this newly executed data fetching in
                <code>componentDidMount()</code>, you can make sure to return valid data for it for every test by using
                the <code>before()</code> and <code>after()</code> setup functionalities of Mocha.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;App Component&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">  <span style="color: #06b6ef">before</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">});</span>
</span>
<span style="background-color: #4f424c">  <span style="color: #06b6ef">after</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">});</span>
</span>
  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;renders the Counter wrapper&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">...</span>
  <span style="color: #e7e9db">});</span>

  <span style="color: #e7e9db">...</span>
<span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>Now you can import axios to your testing suite, because you will need to apply a <a target="_blank"
                  rel="noopener noreferrer" href="http://sinonjs.org/releases/v4.4.6/stubs/">stub</a> to it for mocking
                the returned data from the third-party API request.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">axios</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;axios&#39;</span><span style="color: #e7e9db">;</span>
</span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">doIncrement</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">doDecrement</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">Counter</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./App&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #e7e9db">...</span>

<span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;App Component&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">result</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">[</span><span style="color: #f99b15">3</span><span style="color: #e7e9db">,</span> <span style="color: #f99b15">5</span><span style="color: #e7e9db">,</span> <span style="color: #f99b15">9</span><span style="color: #e7e9db">];</span>
</span><span style="background-color: #4f424c">  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">promise</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">Promise.</span><span style="color: #06b6ef">resolve</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">result</span><span style="color: #e7e9db">);</span>
</span>
  <span style="color: #06b6ef">before</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">    <span style="color: #06b6ef">sinon</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">stub</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">axios</span><span style="color: #e7e9db">,</span> <span style="color: #48b685">&#39;get&#39;</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">withArgs</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;http://mydomain/counter&#39;</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">returns</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">promise</span><span style="color: #e7e9db">);</span>
</span>  <span style="color: #e7e9db">});</span>

  <span style="color: #06b6ef">after</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">    <span style="color: #06b6ef">axios</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">get</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">restore</span><span style="color: #e7e9db">();</span>
</span>  <span style="color: #e7e9db">});</span>

  <span style="color: #e7e9db">...</span>
<span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>So what&rsquo;s a stub? The Sinon documentation says: &ldquo;Test stubs are functions (spies) with
                pre-programmed behavior.&rdquo; That way, you have full control over your spies. For instance, you can
                say what a function (e.g. <code>get()</code>) should return. You can narrow it down by providing a
                specific set of arguments too. In our case, we return a promise which resolves in an array of integers
                (counters) eventually.</p>

              <p>The <code>before()</code> and <code>after()</code> functions happen before and after the
                <code>describe()</code> test suites. Thus, every test should be aware of the returned promise in
                <code>componentDidMount()</code> now. By doing it this way, no test will complain about the data
                fetching. The request will just go through successfully when the component is mounted for the test.</p>

              <p>After the tests ran through, the <code>restore()</code> method on the stub in the
                &ldquo;after&rdquo;-block makes sure to restore the native behavior of the <code>get()</code> method
                which was stubbed before. This way, you don&rsquo;t run into any surprises for your other tests because
                there is a stub somewhere hanging around in your test suites.</p>

              <p>Now, let&rsquo;s test the asynchronous behavior in <code>componentDidMount()</code>. The test should
                assert that the returned array is stored in the local state of the React component as
                <code>asyncCounters</code>.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">...</span>

<span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;App Component&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">result</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">[</span><span style="color: #f99b15">3</span><span style="color: #e7e9db">,</span> <span style="color: #f99b15">5</span><span style="color: #e7e9db">,</span> <span style="color: #f99b15">9</span><span style="color: #e7e9db">];</span>
  <span style="color: #815ba4">const</span> <span style="color: #06b6ef">promise</span> <span style="color: #5bc4bf">=</span> <span style="color: #e7e9db">Promise.</span><span style="color: #06b6ef">resolve</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">result</span><span style="color: #e7e9db">);</span>

  <span style="color: #06b6ef">before</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">sinon</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">stub</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">axios</span><span style="color: #e7e9db">,</span> <span style="color: #48b685">&#39;get&#39;</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">withArgs</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;http://mydomain/counter&#39;</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">returns</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">promise</span><span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">});</span>

  <span style="color: #06b6ef">after</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">axios</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">get</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">restore</span><span style="color: #e7e9db">();</span>
  <span style="color: #e7e9db">});</span>

  <span style="color: #e7e9db">...</span>

<span style="background-color: #4f424c">  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;fetches async counters&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">wrapper</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">shallow</span><span style="color: #e7e9db">(</span><span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">App</span> <span style="color: #5bc4bf">/&gt;</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">().</span><span style="color: #06b6ef">asyncCounters</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">to</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">equal</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">null</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">promise</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">then</span><span style="color: #e7e9db">(()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">      <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">wrapper</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">state</span><span style="color: #e7e9db">().</span><span style="color: #06b6ef">asyncCounters</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">to</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">equal</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">result</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">    <span style="color: #e7e9db">});</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">});</span>
</span><span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>When you render the App component for the first time, the <code>asyncCounters</code> in your local
                state should be <code>null</code>. But when the promise resolves eventually, the state should be equal
                to the specified result of the promise. Now you can run your tests again and verify that it goes through
                successfully. Congratulations, you tested asynchronous behavior in your React component. Keep in mind
                that Sinon itself is not strictly bound to React (same as Mocha and Chai). You only use it to spy
                functions, to apply stubs on them or to create more sophisticated mocks.</p>

              <h2 class="chapter-header" id="react-jest-test-setup">Jest Test Setup in React</h2>

              <p>The following section will show you how to setup and perform React testing with Jest. <a
                  target="_blank" rel="noopener noreferrer" href="https://facebook.github.io/jest/">Jest</a> can be used
                for your React component tests. It&rsquo;s the official testing library by Facebook. Jest introduced the
                so called snapshot tests which can be used perfectly as supplement to your React unit and integration
                tests with Enzyme.</p>

              <p>Basically a snapshot test creates a snapshot of your rendered component&rsquo;s output when you run
                your test. This snapshot is used for diffing it to the next snapshot when you run your test again. If
                your rendered component&rsquo;s output has changed, the diff of both snapshots will show it and the
                snapshot test will fail. That&rsquo;s not bad at all, because the snapshot test should only inform you
                when the output of your rendered component has changed. In case a snapshot test fails, you can either
                accept the changes or deny them and fix your component&rsquo;s implementation for the rendered output.
              </p>

              <p>By using Jest for snapshot tests, you can keep your tests lightweight. You can easily set them up and
                either accept or deny changes when the diffing fails. It&rsquo;s more about the rendered output and less
                about the business logic of the component. The latter can be well tested by using Enzyme instead. But if
                you want to use Jest for it, it&rsquo;s possible too.</p>

              <p>Note: Jest comes with its own test runner and assertion functions. Whereas you have set up Mocha and
                Chai as test runner and assertion libraries before, Jest handles these things on its own. The API is a
                bit different though. When using Jest, you can define your testing blocks with a
                &ldquo;test&rdquo;-block instead of a &ldquo;it&rdquo;-block or, for instance, you can make an assertion
                with <code>toEqual()</code> (Jest assertion) instead of <code>to.equal()</code> (Chai assertion). After
                all, if you want to use Jest for everything, you can skip the Mocha and Chai setup. If you want to
                perform React testing with Jest and Enzyme, you can setup Enzyme (and Sinon) in the Jest environment
                without having to deal with Mocha and Chai.</p>

              <p>Let&rsquo;s setup Jest in your React application. First, you have to install it as dev dependency on
                the command line. It uses a utility library called react-test-renderer to render your actual component:
              </p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">dev</span> <span style="color: #06b6ef">jest</span> <span style="color: #06b6ef">react</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">test</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">renderer</span>
</code></pre>
              </div>


              <p>Second, create a Jest configuration file in your <em>test/</em> folder:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">cd</span> <span style="color: #06b6ef">test</span>
<span style="color: #06b6ef">touch</span> <span style="color: #06b6ef">jest</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">config</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">json</span>
</code></pre>
              </div>


              <p>Third, add the following configuration for Jest to your newly created file:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">{</span>
  <span style="color: #48b685">&quot;testRegex&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;((\\.|/*.)(snapshot))\\.js?$&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;rootDir&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;..&quot;</span>
<span style="color: #e7e9db">}</span>
</code></pre>
              </div>


              <p>The <code>testRegex</code> configuration is a regular expression that can be used to specify the naming
                of the files where your snapshot tests will be located. In this case, the files will have the name
                <code>*.snapshot.js</code>. That&rsquo;s how you can separate them clearly from the
                <code>*.spec.js</code> files for unit and integration tests. Identical to the Mocha test runner, Jest
                will run recursively through your <em>src/</em> folder and run all the snapshot tests identified with
                the regular expression.</p>

              <p>The <code>rootDir</code> configuration is used to specify the root folder where Jest should start to
                run through all the folders recursively. Since the Jest configuration is located in the <em>test/</em>
                folder, you have to go one folder up the directory chain to be able to access the <em>src/</em> folder
                where your snapshot tests can be found.</p>

              <p>Next, you need to install two packages to make it work with Babel. Especially the second package might
                change in the future, but it must be used for the recent Babel 7 upgrade.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">dev</span> <span style="color: #06b6ef">babel</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">jest</span> <span style="color: #06b6ef">babel</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">core</span><span style="color: #ef6155">@</span><span style="color: #5bc4bf">^</span><span style="color: #f99b15">7.0</span><span style="color: #e7e9db">.</span><span style="color: #f99b15">0</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">bridge</span><span style="color: #e7e9db">.</span><span style="color: #f99b15">0</span>
</code></pre>
              </div>


              <p>Last but not least, you need to specify a new script in your <em>package.json</em> to run your snapshot
                tests on the command line:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #48b685">&quot;scripts&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
  <span style="color: #48b685">&quot;start&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;webpack-dev-server --config ./webpack.config.js&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;test:unit&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;mocha --require @babel/register --require ./test/helpers.js --require ./test/dom.js --require ignore-styles &#39;src/**/*.spec.js&#39;&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;test:unit:watch&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;npm run test:unit -- --watch&quot;</span><span style="color: #e7e9db">,</span>
<span style="background-color: #4f424c">  <span style="color: #48b685">&quot;test:snapshot&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;jest --config ./test/jest.config.json&quot;</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #48b685">&quot;test:snapshot:watch&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;npm run test:snapshot -- --watch&quot;</span>
</span><span style="color: #e7e9db">},</span>
</code></pre>
              </div>


              <p>Now, you can run your snapshot tests by using <code>npm run test:snapshot</code>. It will tell Jest to
                run all your snapshot tests with the help of the Jest configuration file. The second script,
                <code>npm run test:snapshot:watch</code> can be used to run the snapshot tests in watch mode. It&rsquo;s
                identical to your Mocha test runner.</p>

              <p>After all, you would have one open terminal tab for your Mocha test runner (unit &amp; integration
                tests) in watch mode, one open terminal tab for your Jest snapshot tests in watch mode, and one open
                terminal tab to start your application with <code>npm start</code>. Every time you change a source file,
                your tests in both terminals should run again because of the watch mode. If you decide to not use Mocha
                and Chai, you can only have one testing script for your Jest tests which would include Sinon and Enzyme.
              </p>

              <h2 class="chapter-header" id="react-jest-snapshot-tests">React Testing with Jest: Snapshot Tests for
                Components</h2>

              <p>In this section, you will setup two snapshot tests for your two React components. First, create a file
                in the <em>src/</em> folder for your tests:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">cd</span> <span style="color: #06b6ef">src</span>
<span style="color: #06b6ef">touch</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">snapshot</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">js</span>
</code></pre>
              </div>


              <p>Second, you can write the snapshot tests for the App and Counter components. Minimal snapshot tests
                always follow the same pattern.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react&#39;</span><span style="color: #e7e9db">;</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">renderer</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;react-test-renderer&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #815ba4">import</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">Counter</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./App&#39;</span><span style="color: #e7e9db">;</span>

<span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;App Snapshot&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">test</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;renders&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">component</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">renderer</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">create</span><span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">App</span> <span style="color: #5bc4bf">/&gt;</span>
    <span style="color: #e7e9db">);</span>
    <span style="color: #815ba4">let</span> <span style="color: #06b6ef">tree</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">component</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">toJSON</span><span style="color: #e7e9db">();</span>
    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">tree</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">toMatchSnapshot</span><span style="color: #e7e9db">();</span>
  <span style="color: #e7e9db">});</span>
<span style="color: #e7e9db">});</span>

<span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;Counter Snapshot&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">test</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;renders&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">component</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">renderer</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">create</span><span style="color: #e7e9db">(</span>
      <span style="color: #5bc4bf">&lt;</span><span style="color: #06b6ef">Counter</span> <span style="color: #06b6ef">counter</span><span style="color: #5bc4bf">=</span><span style="color: #e7e9db">{</span><span style="color: #f99b15">1</span><span style="color: #e7e9db">}</span> <span style="color: #5bc4bf">/&gt;</span>
    <span style="color: #e7e9db">);</span>
    <span style="color: #815ba4">let</span> <span style="color: #06b6ef">tree</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">component</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">toJSON</span><span style="color: #e7e9db">();</span>
    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">tree</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">toMatchSnapshot</span><span style="color: #e7e9db">();</span>
  <span style="color: #e7e9db">});</span>
<span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>That&rsquo;s it. You can run your snapshot tests on the command line now. Hopefully they should be
                successful for you. Afterward, try to change the output in the <code>render()</code> method of the App
                component. For instance, add a <code>&lt;h1&gt;</code> tag with some string to it. Once you run your
                snapshot tests on the command line again, the test for the App component should fail. You can either
                accept or fix the snapshot now.</p>

              <p>Even though that&rsquo;s the most minimal way to snapshot test your React components, Jest is way more
                powerful. As you can see, it comes with its own assertion functions (e.g. <code>toEqual()</code>). You
                should check its documentation to find out more about them. The library itself is very powerful.
                However, keep in mind that Jest was invented to keep your component tests lightweight after all.
                Snapshot tests shouldn&rsquo;t add too much development cost to your test suites.</p>

              <h2 class="chapter-header" id="react-e2e-tests-cypress">React End-to-end (E2E) Tests with Cypress.io</h2>

              <p>End-to-end testing (E2E) was always a tedious task with testing frameworks from the past. However,
                nowadays many people are using <a target="_blank" rel="noopener noreferrer"
                  href="https://cypress.io">Cypress.io</a> for it. Their documentation has a high quality and their API
                is concise and clean. Let&rsquo;s use Cypress for this React testing tutorial. First, you have to
                install it on the command line to your dev dependencies:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">dev</span> <span style="color: #06b6ef">cypress</span>
</code></pre>
              </div>


              <p>Second, you can create a dedicated folder for Cypress and its E2E tests in your project folder. It
                comes with its given <a target="_blank" rel="noopener noreferrer"
                  href="https://docs.cypress.io/guides/core-concepts/writing-and-organizing-tests.html">folder
                  structure</a>.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">mkdir</span> <span style="color: #06b6ef">cypress</span>
<span style="color: #06b6ef">cd</span> <span style="color: #06b6ef">cypress</span>
<span style="color: #06b6ef">mkdir</span> <span style="color: #06b6ef">integration</span>
<span style="color: #06b6ef">cd</span> <span style="color: #06b6ef">integration</span>
</code></pre>
              </div>


              <p>Third, you can add a script for npm to your <em>package.json</em> file. That way, you are able to run
                Cypress easily from the command line.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #48b685">&quot;scripts&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
  <span style="color: #48b685">&quot;start&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;webpack-dev-server --config ./webpack.config.js --mode development&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;test:unit&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;mocha --require @babel/register --require ./test/helpers.js --require ./test/dom.js --require ignore-styles &#39;src/**/*.spec.js&#39;&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;test:unit:watch&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;npm run test:unit -- --watch&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;test:snapshot&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;jest --config ./test/jest.config.json&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;test:snapshot:watch&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;npm run test:snapshot -- --watch&quot;</span><span style="color: #e7e9db">,</span>
<span style="background-color: #4f424c">  <span style="color: #48b685">&quot;test:cypress&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;cypress open&quot;</span>
</span><span style="color: #e7e9db">},</span>
</code></pre>
              </div>


              <p>When you run Cypress for the first time, you should get a similar output.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">run</span> <span style="color: #06b6ef">test</span><span style="color: #5bc4bf">:</span><span style="color: #06b6ef">cypress</span>
</code></pre>
              </div>


              <p>It opens up a window which indicates that you don&rsquo;t have any tests yet: &ldquo;No files found
                in&rdquo;.</p>

              <div class="post-image-primary">
                <div class="pinterest-pinner-wrapper" itemscope itemtype="http://schema.org/ImageObject">
                  <div class="pinterest-pinner">
                    <a data-pin-do="buttonPin" data-pin-save="true" data-pin-tall="true"
                      href="https://www.pinterest.com/pin/create/button/?url=https%3a%2f%2fchrispaul.dev%2freact-testing-tutorial%2f&amp;media=https://chrispaul.dev/img%2fposts%2freact-testing-tutorial%2freact-cypress-no-tests-found.jpg&amp;description=">
                    </a>
                  </div>

                  <img class="img-lazy img-responsive"
                    data-lazy-src="/src="/img/posts/react-testing-tutorial/react-cypress-no-tests-found.jpg"
                    data-is-src-set="is-src-set" alt="react cypress e2e testing" itemprop="image" />
                </div>
              </div>


              <p>Now, in your new Cypress <strong>cypress/integration/</strong> folder, create a end-to-end testing file
                for your App component.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">touch</span> <span style="color: #06b6ef">App</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">e2e</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">js</span>
</code></pre>
              </div>


              <p>Next, you can add your first test to it. It&rsquo;s not really an end-to-end test, but only the
                simplest assertion you can make to verify that Cypress is working for you.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;App E2E&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;should assert that true is equal to true&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">true</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">to</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">equal</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">true</span><span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">});</span>
<span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>You might already know the “describe”- and “it”-blocks which enable you to encapsulate your tests in
                blocks. These blocks are coming from Mocha, which is used by Cypress, under the hood. The assertions
                such as <code>expect()</code> are used from Chai. “Cypress builds on these popular tools and frameworks
                that you hopefully already have some familiarity and knowledge of.”</p>

              <p>Now you can run Cypress again on the command line:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">run</span> <span style="color: #06b6ef">test</span><span style="color: #5bc4bf">:</span><span style="color: #06b6ef">cypress</span>
</code></pre>
              </div>


              <p>You should see the following output now. Cypress finds your test and you can either run the single test
                by clicking it or run all of your tests by using their dashboard.</p>

              <div class="post-image-primary">
                <div class="pinterest-pinner-wrapper" itemscope itemtype="http://schema.org/ImageObject">
                  <div class="pinterest-pinner">
                    <a data-pin-do="buttonPin" data-pin-save="true" data-pin-tall="true"
                      href="https://www.pinterest.com/pin/create/button/?url=https%3a%2f%2fchrispaul.dev%2freact-testing-tutorial%2f&amp;media=https://chrispaul.dev/img%2fposts%2freact-testing-tutorial%2freact-cypress-testing.jpg&amp;description=">
                    </a>
                  </div>

                  <img class="img-lazy img-responsive"
                    data-lazy-src="/src="/img/posts/react-testing-tutorial/react-cypress-testing.jpg"
                    data-is-src-set="is-src-set" alt="react cypress end-to-end testing" itemprop="image" />
                </div>
              </div>


              <p>Run your test and verify that true is equal to true. Hopefully it turns out to be green for you.
                Otherwise there is something wrong. In contrast, you can checkout a failing end-to-end test too.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;App E2E&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;should assert that true is equal to true&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">true</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">to</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">equal</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">false</span><span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">});</span>
<span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>If you want, you can add the script slightly for Cypress to run every test by default without opening
                the additional window.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #48b685">&quot;scripts&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
  <span style="color: #48b685">&quot;start&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;webpack-dev-server --config ./webpack.config.js --mode development&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;test:unit&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;mocha --require @babel/register --require ./test/helpers.js --require ./test/dom.js --require ignore-styles &#39;src/**/*.spec.js&#39;&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;test:unit:watch&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;npm run test:unit -- --watch&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;test:snapshot&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;jest --config ./test/jest.config.json&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;test:snapshot:watch&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;npm run test:snapshot -- --watch&quot;</span><span style="color: #e7e9db">,</span>
<span style="background-color: #4f424c">  <span style="color: #48b685">&quot;test:cypress&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;cypress run&quot;</span>
</span><span style="color: #e7e9db">},</span>
</code></pre>
              </div>


              <p>As you can see, when you run Cypress again on the command line, all your tests should run
                automatically. In addition, you can experience that there is some kind of video recording happening. The
                videos are stored in a folder for you to experience your tests first hand. You can also add screenshot
                testing to your Cypress end-to-end tests. Find out more about <a target="_blank"
                  rel="noopener noreferrer" href="https://docs.cypress.io/guides/guides/screenshots-and-videos.html">the
                  video and screenshot capabilities of Cypress.io</a>.</p>

              <p>You can suppress the video recording in your Cypress configuration file in your project folder. It
                might be already generated by Cypress for you, otherwise create it on the command line from your root
                folder:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">touch</span> <span style="color: #06b6ef">cypress</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">json</span>
</code></pre>
              </div>


              <p>Now, in the Cypress configuration file, add the <code>video</code> flag and set it to false.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">{</span>
  <span style="color: #48b685">&quot;video&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">false</span>
<span style="color: #e7e9db">}</span>
</code></pre>
              </div>


              <p>In case you want to find out more about the configuration capabilities of Cypress, <a target="_blank"
                  rel="noopener noreferrer" href="https://docs.cypress.io/guides/references/configuration.html">checkout
                  their documentation</a>.</p>

              <p>Eventually you want to start to test your implemented React application with Cypress. Since Cypress is
                offering end-to-end testing, you have to start your application first before visiting the website with
                Cypress. You can use your local development server for this case.</p>

              <p>But how to run your development server, in this case webpack-dev-server, before your Cypress script?
                There exists a <a target="_blank" rel="noopener noreferrer"
                  href="https://github.com/bahmutov/start-server-and-test">neat library</a> which you can use to start
                your development server before Cypress. First, install it on the command line for your dev dependencies:
              </p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">dev</span> <span style="color: #06b6ef">start</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">server</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">and</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">test</span>
</code></pre>
              </div>


              <p>Second, add it to your <em>package.json</em> scripts. The library expects the following script pattern:
                <start script name>
                  <url>
                    <test script name>.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #48b685">&quot;scripts&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
  <span style="color: #48b685">&quot;start&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;webpack-dev-server --config ./webpack.config.js --mode development&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;test:unit&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;mocha --require @babel/register --require ./test/helpers.js --require ./test/dom.js --require ignore-styles &#39;src/**/*.spec.js&#39;&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;test:unit:watch&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;npm run test:unit -- --watch&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;test:snapshot&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;jest --config ./test/jest.config.json&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;test:snapshot:watch&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;npm run test:snapshot -- --watch&quot;</span><span style="color: #e7e9db">,</span>
<span style="background-color: #4f424c">  <span style="color: #48b685">&quot;test:cypress&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;start-server-and-test start http://localhost:8080 cypress&quot;</span><span style="color: #e7e9db">,</span>
</span><span style="background-color: #4f424c">  <span style="color: #48b685">&quot;cypress&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;cypress run&quot;</span>
</span><span style="color: #e7e9db">},</span>
</code></pre>
              </div>


              <p>Finally, you can visit your running application with Cypress in your end-to-end test. Therefore you
                will use the global <code>cy</code> cypress object. In addition, you can also add your first E2E test
                which verifies your header tag (h1) from your application.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;App E2E&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;should have a header&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">cy</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">visit</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;http://localhost:8080&#39;</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">cy</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">get</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;h1&#39;</span><span style="color: #e7e9db">)</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">should</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;have.text&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #48b685">&#39;My Counter&#39;</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">});</span>
</span><span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>Basically, that&rsquo;s how a selector and assertion in Cypress work. Now you your test again on the
                command line. It should turn out to be successful.</p>

              <p>A best practice in Cypress testing is adding the base URL to your <strong>cypress.json</strong>
                configuration file. It&rsquo;s not only to keep your code DRY, but has also performance impacts.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">{</span>
  <span style="color: #48b685">&quot;video&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #815ba4">false</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;baseUrl&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;http://localhost:8080&quot;</span>
<span style="color: #e7e9db">}</span>
</code></pre>
              </div>


              <p>Afterward, you can remove the URL from your single E2E test. It always takes the given base URL now.
              </p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;App E2E&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;should have a header&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">    <span style="color: #06b6ef">cy</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">visit</span><span style="color: #e7e9db">(</span><span style="color: #ef6155">‘</span><span style="color: #5bc4bf">/</span><span style="color: #ef6155">‘</span><span style="color: #e7e9db">);</span>
</span>
    <span style="color: #06b6ef">cy</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">get</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;h1&#39;</span><span style="color: #e7e9db">)</span>
      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">should</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;have.text&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #48b685">&#39;My Counter&#39;</span><span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">});</span>
<span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>The second E2E test you are going to implement will test the two interactive buttons in your React
                application. After clicking each button, the counter integer which is shown in the paragraph tag should
                change. Let&rsquo;s begin by verifying that the counter is 0 when the application just started.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;App E2E&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;should have a header&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">cy</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">visit</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;/&#39;</span><span style="color: #e7e9db">);</span>

    <span style="color: #06b6ef">cy</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">get</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;h1&#39;</span><span style="color: #e7e9db">)</span>
      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">should</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;have.text&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #48b685">&#39;My Counter&#39;</span><span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">});</span>

<span style="background-color: #4f424c">  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;should increment and decrement the counter&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">cy</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">visit</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;/&#39;</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">cy</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">get</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;p&#39;</span><span style="color: #e7e9db">)</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">should</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;have.text&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #48b685">&#39;0&#39;</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">  <span style="color: #e7e9db">});</span>
</span><span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>Now, by <a target="_blank" rel="noopener noreferrer"
                  href="https://docs.cypress.io/guides/core-concepts/interacting-with-elements.html">interacting with
                  the buttons</a>, you can increment and decrement the counter.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;App E2E&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;should have a header&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">cy</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">visit</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;/&#39;</span><span style="color: #e7e9db">);</span>

    <span style="color: #06b6ef">cy</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">get</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;h1&#39;</span><span style="color: #e7e9db">)</span>
      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">should</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;have.text&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #48b685">&#39;My Counter&#39;</span><span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">});</span>

  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;should increment and decrement the counter&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">cy</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">visit</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;/&#39;</span><span style="color: #e7e9db">);</span>

    <span style="color: #06b6ef">cy</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">get</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;p&#39;</span><span style="color: #e7e9db">)</span>
      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">should</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;have.text&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #48b685">&#39;0&#39;</span><span style="color: #e7e9db">);</span>

<span style="background-color: #4f424c">    <span style="color: #06b6ef">cy</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">contains</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;Increment&#39;</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">click</span><span style="color: #e7e9db">();</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">cy</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">get</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;p&#39;</span><span style="color: #e7e9db">)</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">should</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;have.text&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #48b685">&#39;1&#39;</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">cy</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">contains</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;Increment&#39;</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">click</span><span style="color: #e7e9db">();</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">cy</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">get</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;p&#39;</span><span style="color: #e7e9db">)</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">should</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;have.text&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #48b685">&#39;2&#39;</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c">
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">cy</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">contains</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;Decrement&#39;</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">click</span><span style="color: #e7e9db">();</span>
</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">cy</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">get</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;p&#39;</span><span style="color: #e7e9db">)</span>
</span><span style="background-color: #4f424c">      <span style="color: #e7e9db">.</span><span style="color: #06b6ef">should</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;have.text&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #48b685">&#39;1&#39;</span><span style="color: #e7e9db">);</span>
</span>  <span style="color: #e7e9db">});</span>
<span style="color: #e7e9db">});</span>
</code></pre>
              </div>


              <p>That&rsquo;s it. You have written your first two E2E tests with Cypress. You can navigate from URL to
                URL, interact with HTML elements and verify rendered output. Two more things:</p>

              <ul>
                <li>If you need to provide sample data for your E2E tests, checkout the best practice of using fixtures
                  in Cypress.</li>
                <li>If you need to spy, stub or mock functions in Cypress, you can use Sinon for it. Cypress comes with
                  built-in Sinon to test your asynchronous code.</li>
              </ul>

              <h2 class="chapter-header" id="react-component-tests-continuous-integration">React Component Tests and
                Continuous Integration</h2>

              <p>React component tests are not any different from other tests when it comes to continuous integration.
                In the following, the article will demonstrate how to setup continuous integration with Travis CI. But
                feel free to choose your own favorite CI for it.</p>

              <p>The continuous integration should make sure that the (React) application is tested with every build
                process in their CI environment. For instance, the build would fail if the tests are not running through
                successfully. That&rsquo;s how you can always see if your application is tested successfully before
                deploying it.</p>

              <p>If you have no GitHub account and no setup for git yet, you should make sure to follow this guide <a
                  href="../git-essential-commands/index.html">to setup GitHub and git on your machine</a>. Afterward,
                can create a repository for this project on GitHub and commit and push all your changes to it.</p>

              <p>Next, you should be set up to create an account for <a target="_blank" rel="noopener noreferrer"
                  href="https://travis-ci.org/">Travis CI</a> by using your GitHub account. Once you have created it and
                see your dashboard on their platform, you can synchronize your GitHub repositories with it. Make sure to
                synchronize this project on your Travis CI dashboard by toggling it to make it accessible for your
                continuous integration.</p>

              <div class="post-image-primary">
                <div class="pinterest-pinner-wrapper" itemscope itemtype="http://schema.org/ImageObject">
                  <div class="pinterest-pinner">
                    <a data-pin-do="buttonPin" data-pin-save="true" data-pin-tall="true"
                      href="https://www.pinterest.com/pin/create/button/?url=https%3a%2f%2fchrispaul.dev%2freact-testing-tutorial%2f&amp;media=https://chrispaul.dev/img%2fposts%2freact-testing-tutorial%2ftravis-ci-toggle.jpg&amp;description=">
                    </a>
                  </div>

                  <img class="img-lazy img-responsive"
                    data-lazy-src="/src="/img/posts/react-testing-tutorial/travis-ci-toggle.jpg"
                    data-is-src-set="is-src-set" alt="react testing travis CI" itemprop="image" />
                </div>
              </div>


              <p>Now you should have synchronized Travis CI with your GitHub repository. The only thing left is telling
                Travis CI on how to install and run your application in their environment. On the command line, create a
                Travis configuration file in your project&rsquo;s root folder:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">touch</span> <span style="color: #e7e9db">.</span><span style="color: #06b6ef">travis</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">yml</span>
</code></pre>
              </div>


              <p>Now enter the following configuration to it. The most important part are the scripts which should be
                executed to run your tests.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">language</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">node_js</span>

<span style="color: #06b6ef">node_js</span><span style="color: #5bc4bf">:</span>
  <span style="color: #5bc4bf">-</span> <span style="color: #06b6ef">stable</span>

<span style="color: #06b6ef">install</span><span style="color: #5bc4bf">:</span>
  <span style="color: #5bc4bf">-</span> <span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span>

<span style="color: #06b6ef">script</span><span style="color: #5bc4bf">:</span>
  <span style="color: #5bc4bf">-</span> <span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">run</span> <span style="color: #06b6ef">test</span><span style="color: #5bc4bf">:</span><span style="color: #06b6ef">unit</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">run</span> <span style="color: #06b6ef">test</span><span style="color: #5bc4bf">:</span><span style="color: #06b6ef">snapshot</span>
</code></pre>
              </div>


              <p>Push these changes again to your GitHub repository. On every push to your repository, Travis CI should
                be notified automatically and try to build your project again. On their dashboard, you should see the
                build process and the tests which either succeed or fail. They should turn out to be green hopefully.
              </p>

              <p>You can add your end-to-end tests from Cypress.io to your CI too.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">language</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">node_js</span>

<span style="color: #06b6ef">node_js</span><span style="color: #5bc4bf">:</span>
  <span style="color: #5bc4bf">-</span> <span style="color: #06b6ef">stable</span>

<span style="color: #06b6ef">install</span><span style="color: #5bc4bf">:</span>
  <span style="color: #5bc4bf">-</span> <span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span>

<span style="color: #06b6ef">script</span><span style="color: #5bc4bf">:</span>
<span style="background-color: #4f424c">  <span style="color: #5bc4bf">-</span> <span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">run</span> <span style="color: #06b6ef">test</span><span style="color: #5bc4bf">:</span><span style="color: #06b6ef">unit</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">run</span> <span style="color: #06b6ef">test</span><span style="color: #5bc4bf">:</span><span style="color: #06b6ef">snapshot</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">run</span> <span style="color: #06b6ef">test</span><span style="color: #5bc4bf">:</span><span style="color: #06b6ef">cypress</span>
</span></code></pre>
              </div>


              <p>Last but not least, you can add a fancy badge to your GitHub repository. Open up your README.md file in
                your project. If you have no such file, create it on the command line in your project&rsquo;s root
                folder:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">touch</span> <span style="color: #06b6ef">README</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">md</span>
</code></pre>
              </div>


              <p>Now you can add markdown to describe your project. It&rsquo;s visible in your GitHub repository once
                you push it. That&rsquo;s up to you. Now, you can add the fancy badge for your passing or failing build
                process too. At your Travis CI dashboard for your project, you should find the grey and green colored
                &ldquo;build passing&rdquo; badge.</p>

              <div class="post-image-primary">
                <div class="pinterest-pinner-wrapper" itemscope itemtype="http://schema.org/ImageObject">
                  <div class="pinterest-pinner">
                    <a data-pin-do="buttonPin" data-pin-save="true" data-pin-tall="true"
                      href="https://www.pinterest.com/pin/create/button/?url=https%3a%2f%2fchrispaul.dev%2freact-testing-tutorial%2f&amp;media=https://chrispaul.dev/img%2fposts%2freact-testing-tutorial%2ftravis-ci.jpg&amp;description=">
                    </a>
                  </div>

                  <img class="img-lazy img-responsive"
                    data-lazy-src="/src="/img/posts/react-testing-tutorial/travis-ci.jpg" data-is-src-set="is-src-set"
                    alt="react testing continuous integration" itemprop="image" />
                </div>
              </div>


              <p>By clicking it, you should get the all the things you need for displaying it in your repository. You
                can choose the Markdown version and copy &amp; paste it to your README.md:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #ef6155">#</span> <span style="color: #06b6ef">My</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">Component</span> <span style="color: #06b6ef">Test</span> <span style="color: #06b6ef">Setup</span>

<span style="color: #e7e9db">[</span><span style="color: #5bc4bf">!</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">Build</span> <span style="color: #06b6ef">Status</span><span style="color: #e7e9db">](</span><span style="color: #06b6ef">https</span><span style="color: #5bc4bf">:</span><span style="color: #776e71"></span>
</code></pre>
              </div>


              <p>This badge references my project. So make sure to reference your own project by exchanging the
                account/organization and the repository name. That&rsquo;s it. You have set up continuous integration
                for your project which informs you when your build fails. Furthermore, it shows a fancy badge in your
                repository to inform other people that your project builds successfully. It adds credibility to your
                project.</p>

              <h2 class="chapter-header" id="react-component-test-coverage-coveralls">React Component Test Coverage with
                Coveralls</h2>

              <p>Identical to the CI environment, Coveralls is not necessarily bound to React component tests. It can be
                used for any tests in your application. Coveralls is used to show you the test coverage of your
                application. Let&rsquo;s see how it can be used in this scenario to get the test coverage for our React
                application. First, sign up at <a target="_blank" rel="noopener noreferrer"
                  href="https://coveralls.io/">Coveralls.io</a> with your GitHub account. Second, synchronize your
                GitHub repositories and toggle this repository again.</p>

              <div class="post-image-primary">
                <div class="pinterest-pinner-wrapper" itemscope itemtype="http://schema.org/ImageObject">
                  <div class="pinterest-pinner">
                    <a data-pin-do="buttonPin" data-pin-save="true" data-pin-tall="true"
                      href="https://www.pinterest.com/pin/create/button/?url=https%3a%2f%2fchrispaul.dev%2freact-testing-tutorial%2f&amp;media=https://chrispaul.dev/img%2fposts%2freact-testing-tutorial%2freact-coveralls-testing-coverage.jpg&amp;description=">
                    </a>
                  </div>

                  <img class="img-lazy img-responsive"
                    data-lazy-src="/src="/img/posts/react-testing-tutorial/react-coveralls-testing-coverage.jpg"
                    data-is-src-set="is-src-set" alt="react testing coverage" itemprop="image" />
                </div>
              </div>


              <p>Afterward, hit the &ldquo;Details&rdquo; button to copy your repo_token to your clipboard. Since you
                don&rsquo;t want to add this private token directly to your public project, you can add it on your
                Travis CI dashboard to your repository&rsquo;s environment variables. You will find it via the settings
                option of your Travis repository.</p>

              <div class="post-image-primary">
                <div class="pinterest-pinner-wrapper" itemscope itemtype="http://schema.org/ImageObject">
                  <div class="pinterest-pinner">
                    <a data-pin-do="buttonPin" data-pin-save="true" data-pin-tall="true"
                      href="https://www.pinterest.com/pin/create/button/?url=https%3a%2f%2fchrispaul.dev%2freact-testing-tutorial%2f&amp;media=https://chrispaul.dev/img%2fposts%2freact-testing-tutorial%2freact-travis-settings.jpg&amp;description=">
                    </a>
                  </div>

                  <img class="img-lazy img-responsive"
                    data-lazy-src="/src="/img/posts/react-testing-tutorial/react-travis-settings.jpg"
                    data-is-src-set="is-src-set" alt="react testing coveralls environment variables" itemprop="image" />
                </div>
              </div>


              <p>Then, you can create a new environment variable for your project. You can name it coveralls_repo_token.
              </p>

              <div class="post-image-primary">
                <div class="pinterest-pinner-wrapper" itemscope itemtype="http://schema.org/ImageObject">
                  <div class="pinterest-pinner">
                    <a data-pin-do="buttonPin" data-pin-save="true" data-pin-tall="true"
                      href="https://www.pinterest.com/pin/create/button/?url=https%3a%2f%2fchrispaul.dev%2freact-testing-tutorial%2f&amp;media=https://chrispaul.dev/img%2fposts%2freact-testing-tutorial%2freact-travis-environment-variables.jpg&amp;description=">
                    </a>
                  </div>

                  <img class="img-lazy img-responsive"
                    data-lazy-src="/src="/img/posts/react-testing-tutorial/react-travis-environment-variables.jpg"
                    data-is-src-set="is-src-set" alt="react testing travis continuous integration" itemprop="image" />
                </div>
              </div>


              <p>Last but not least, modify your project the following way. First, install the coveralls library on the
                command line to your dev dependencies:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">dev</span> <span style="color: #06b6ef">coveralls</span>
</code></pre>
              </div>


              <p>Second, add a new script to your <em>package.json</em> file to introduce coveralls:</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #48b685">&quot;scripts&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
  <span style="color: #48b685">&quot;start&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;webpack-dev-server --config ./webpack.config.js&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;test:unit&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;mocha --require @babel/register --require ./test/helpers.js --require ./test/dom.js --require ignore-styles &#39;src/**/*.spec.js&#39;&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;test:unit:watch&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;npm run test:unit -- --watch&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;test:snapshot&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;jest --config ./test/jest.config.json&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;test:snapshot:watch&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;npm run test:snapshot -- --watch&quot;</span><span style="color: #e7e9db">,</span>
<span style="background-color: #4f424c">  <span style="color: #48b685">&quot;coveralls&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;cat ./coverage/lcov.info | node node_modules/.bin/coveralls&quot;</span>
</span><span style="color: #e7e9db">},</span>
</code></pre>
              </div>


              <p>And third, extend your Travis CI configuration for reporting the coveralls information to your
                coveralls.io dashboard.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">language</span><span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">node_js</span>

<span style="color: #06b6ef">node_js</span><span style="color: #5bc4bf">:</span>
  <span style="color: #5bc4bf">-</span> <span style="color: #06b6ef">stable</span>

<span style="color: #06b6ef">install</span><span style="color: #5bc4bf">:</span>
  <span style="color: #5bc4bf">-</span> <span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span>

<span style="color: #06b6ef">script</span><span style="color: #5bc4bf">:</span>
<span style="background-color: #4f424c">  <span style="color: #5bc4bf">-</span> <span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">run</span> <span style="color: #06b6ef">test</span><span style="color: #5bc4bf">:</span><span style="color: #06b6ef">unit</span> <span style="color: #5bc4bf">--</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">coverage</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">run</span> <span style="color: #06b6ef">test</span><span style="color: #5bc4bf">:</span><span style="color: #06b6ef">snapshot</span> <span style="color: #5bc4bf">--</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">coverage</span> <span style="color: #5bc4bf">&amp;&amp;</span> <span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">run</span> <span style="color: #06b6ef">test</span><span style="color: #5bc4bf">:</span><span style="color: #06b6ef">cypress</span>
</span>
<span style="background-color: #4f424c"><span style="color: #06b6ef">after_script</span><span style="color: #5bc4bf">:</span>
</span><span style="background-color: #4f424c">  <span style="color: #5bc4bf">-</span> <span style="color: #06b6ef">COVERALLS_REPO_TOKEN</span><span style="color: #5bc4bf">=</span><span style="color: #06b6ef">$coveralls_repo_token</span> <span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">run</span> <span style="color: #06b6ef">coveralls</span>
</span></code></pre>
              </div>


              <p>That&rsquo;s it. By adding, committing and pushing your changes to GitHub now, you can see how a report
                shows up on your coveralls.io dashboard.</p>

              <div class="post-image-primary">
                <div class="pinterest-pinner-wrapper" itemscope itemtype="http://schema.org/ImageObject">
                  <div class="pinterest-pinner">
                    <a data-pin-do="buttonPin" data-pin-save="true" data-pin-tall="true"
                      href="https://www.pinterest.com/pin/create/button/?url=https%3a%2f%2fchrispaul.dev%2freact-testing-tutorial%2f&amp;media=https://chrispaul.dev/img%2fposts%2freact-testing-tutorial%2freact-testing-coveralls-reporting.jpg&amp;description=">
                    </a>
                  </div>

                  <img class="img-lazy img-responsive"
                    data-lazy-src="/src="/img/posts/react-testing-tutorial/react-testing-coveralls-reporting.jpg"
                    data-is-src-set="is-src-set" alt="react testing travis continuous integration" itemprop="image" />
                </div>
              </div>


              <p>You can see that the coverage isn&rsquo;t too high. It&rsquo;s up to you the add tests to increase the
                percentage for your project.</p>

              <p>Last but not least, you can add the fancy Coveralls badge again to your README.md file. You find the
                badge on the coveralls.io dashboard for embedding it as markdown in your README.md.</p>

              <div class="highlight" style="background: #2f1e2e">
                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #ef6155">#</span> <span style="color: #06b6ef">My</span> <span style="color: #06b6ef">React</span> <span style="color: #06b6ef">Component</span> <span style="color: #06b6ef">Test</span> <span style="color: #06b6ef">Setup</span>

<span style="color: #e7e9db">[</span><span style="color: #5bc4bf">!</span><span style="color: #e7e9db">[</span><span style="color: #06b6ef">Coverage</span> <span style="color: #06b6ef">Status</span><span style="color: #e7e9db">](</span><span style="color: #06b6ef">https</span><span style="color: #5bc4bf">:</span><span style="color: #776e71"></span>
</code></pre>
              </div>


              <p>Make sure to change again the URL to the repository. That&rsquo;s it. I hope these last steps have
                helped you to setup Coveralls.io for your React testing environment. You should aim to get a higher test
                coverage in percentage than our project though :)</p>

              <hr class="section-divider">

              <p>That&rsquo;s it for this extensive React testing tutorial. I hope you learned lots from it by setting
                up your own React testing environment, writing your first React tests and by using continuous
                integration to verify your build before deploying your application to production. You can find the whole
                project in <a target="_blank" rel="noopener noreferrer"
                  href="https://github.com/ChrisPaulDev/react-components-test-setup">this GitHub repository</a>. In
                addition, these simple test patterns should help you to make testing in React a habit rather than an
                annoyance. It shouldn&rsquo;t be too difficult to setup a couple of tests for your application now. If
                you have any other tips for testing React applications, feel free to add them to the comments below.
                Thanks for reading :)</p>



              



              <div class="box-inline col-md-12">
                <div class="col-md-12 text-center">
                  <h2 class="newsletter">The Road to learn React</h2>

                  <div class="col-md-4">
                    <img class="img-lazy img-responsive" data-lazy-src="//img/page/cover.png">
                  </div>

                  <p class="lead">
                    Build a Hacker News App along the way. No setup configuration. No tooling. No Redux. Plain React in
                    200+ pages of learning material. Learn React like <strong>50.000+ readers</strong>.
                  </p>
                  <a class="btn btn-template-main" href="https://roadtoreact.com" target="_blank"
                    rel="noopener noreferrer">
                    Get the Book for free <i class="fa fa-chevron-right"></i>
                  </a>

                  <div>
                    <a href="https://amzn.to/2QY2ONp" target="_blank" rel="noopener noreferrer">
                      Get it from Amazon
                    </a>
                  </div>

                </div>
              </div>

            </div>



            


          </article>


        </div>


      </div>

    </div>




    
    <footer id="subfooter">
      <div class="container">

        <div class="col-md-5 col-sm-6">

          <h4>Recent posts</h4>

          <div class="blog-entries">

            <div class="item same-height-row clearfix">
              <div class="article same-height-always">
                <a href="../redux-vs-usereducer/index.html">

                  <img data-lazy-src="//img/posts/redux-vs-usereducer/banner.jpg" data-is-thumb="is-thumb"
                    class="img-lazy img-responsive" alt="React&#39;s useReducer vs Redux">

                </a>
              </div>
              <div class="name same-height-always">
                <h5><a href="../redux-vs-usereducer/index.html">React&#39;s useReducer vs Redux</a></h5>
              </div>
            </div>

            <div class="item same-height-row clearfix">
              <div class="article same-height-always">
                <a href="../publish-npm-package-node/index.html">

                  <img data-lazy-src="//img/posts/publish-npm-package-node/banner.jpg" data-is-thumb="is-thumb"
                    class="img-lazy img-responsive" alt="How to publish a npm package?">

                </a>
              </div>
              <div class="name same-height-always">
                <h5><a href="../publish-npm-package-node/index.html">How to publish a npm package?</a></h5>
              </div>
            </div>

            <div class="item same-height-row clearfix">
              <div class="article same-height-always">
                <a href="../react-scroll-to-item/index.html">

                  <img data-lazy-src="//img/posts/react-scroll-to-item/banner.jpg" data-is-thumb="is-thumb"
                    class="img-lazy img-responsive" alt="How to Scroll to Item in React?">

                </a>
              </div>
              <div class="name same-height-always">
                <h5><a href="../react-scroll-to-item/index.html">How to Scroll to Item in React?</a></h5>
              </div>
            </div>

          </div>

          <hr class="hidden-md hidden-lg hidden-sm">

        </div>



        <div class="col-md-5 col-md-offset-2 col-sm-6">

          <h4>About Me</h4>

          <div class="blog-entries">
            <div class="item same-height-row clearfix">
              <div class="profile same-height-always">
                <img class="img-lazy img-responsive" data-lazy-src="//img/page/profile.jpg" alt="profile">
              </div>
              <div class="name same-height-always">
                <p>
                  Hi, I'm Chris - a Midvale, Utah-based consulting software developer. Find out more <a
                    href="../about/index.html">about me</a>, <a href="../work-with-me/index.html">work with me</a>, or
                  have a look at my social media profiles below.
                </p>
              </div>
            </div>
          </div>

        </div>



      </div>

    </footer>


    <footer id="copyright">
      <div class="container">
        <div class="row">
          <div class="col-md-4">
            <ul class="info list-inline quicklinks pull-left">

              <li>© Chris Paul</li>

            </ul>
          </div>
          <div class="col-md-4">
            
          </div>
          <div class="col-md-4">
            <ul class="info list-inline quicklinks pull-right">

              <li><a aria-label="quicklinks" href="../legal/index.html">Legal Notice</a></li>

            </ul>
          </div>
        </div>
      </div>
    </footer>


  </div>



  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>

  <script src="../js/script.js"></script>
</body>

</html>