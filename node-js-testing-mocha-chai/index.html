<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="robots" content="all,follow">
    <meta name="googlebot" content="index,follow,snippet,archive">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
        Node Testing Setup with Mocha, Chai, Sinon - CPaul
    </title>
    <meta name="author" content="" />
    <meta name="description"
        content="How to get started with testing in Node.js with Mocha, Chai, Sinon. This setup tutorial shows you how to use Mocha as test runner and Chai as assertion library for Node.js projects ...">
    <meta name="theme-color" content="#38bb6c" />
    <meta name="generator" content="Hugo 0.41" />
    <link href="https://cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <link href="../css/bootstrap.default.css" rel="stylesheet" id="theme-stylesheet">
    <link href="../css/customizations.css" rel="stylesheet">
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link rel="shortcut icon" href="../img/favicon/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="../img/favicon/apple-touch-icon.png" />
    <link rel="manifest" href="../img/favicon/manifest.json">
    <link rel="mask-icon" href="../img/favicon/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="alternate" href="../index.xml" type="application/rss+xml" title="CPaul">
    <meta itemprop="name" content="Node Testing Setup with Mocha, Chai, Sinon">
    <meta itemprop="description"
        content="How to get started with testing in Node.js with Mocha, Chai, Sinon. This setup tutorial shows you how to use Mocha as test runner and Chai as assertion library for Node.js projects ...">
    <meta itemprop="image" content="https://chrispaul.dev/img/posts/node-js-testing-mocha-chai/banner_640.jpg">
    <meta itemprop="keywords"
        content="angular,apollo,d3,graphql,growth,javascript,machine-learning,mobx,node,react,reason,redux,tooling,vue,web-development,angular,apollo,d3,graphql,growth,javascript,machine-learning,mobx,node,react,reason,redux,tooling,web-development," />
    <meta itemprop="wordCount" content="1120">
    <meta name="keywords"
        content="node js testing, node testing, node js test, node test, node mocha, node chai, node mocha chai, node sinon">
    <meta property="og:title" content="Node Testing Setup with Mocha, Chai, Sinon - CPaul">
    <meta property="og:description"
        content="How to get started with testing in Node.js with Mocha, Chai, Sinon. This setup tutorial shows you how to use Mocha as test runner and Chai as assertion library for Node.js projects ..." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://chrispaul.dev/node-js-testing-mocha-chai/" />
    <meta property="og:image" content="https://chrispaul.dev/img/posts/node-js-testing-mocha-chai/banner_640.jpg" />
    <meta name="news_keywords"
        content="node js testing,node testing,node js test,node test,node mocha,node chai,node mocha chai,node sinon" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:image:src"
        content="https://chrispaul.dev/img/posts/node-js-testing-mocha-chai/banner_640.jpg" />
    <meta name="twitter:title" content="Node Testing Setup with Mocha, Chai, Sinon" />
    <meta name="twitter:description"
        content="How to get started with testing in Node.js with Mocha, Chai, Sinon. This setup tutorial shows you how to use Mocha as test runner and Chai as assertion library for Node.js projects ..." />
    <meta name="twitter:site" content="@cpaul" />
    <meta name="twitter:domain" content="cpaul" />
</head>

<body>
    <div id="all">
        <header>
            <div class="navbar-affixed-top" data-spy="affix" data-offset-top="200">
                <div class="navbar navbar-default yamm" role="navigation" id="navbar">
                    <div class="container">
                        <div class="navbar-header">
                            
                            <div class="navbar-buttons">
                                <button type="button" class="navbar-toggle btn-template-main" data-toggle="collapse"
                                    data-target="#navigation">
                                    <span class="sr-only">Toggle navigation</span>
                                    <i class="fa fa-align-justify"></i>
                                </button>
                            </div>
                        </div>
                        <div class="navbar-collapse collapse" id="navigation">
                            <ul class="nav navbar-nav navbar-right">

                                <li class="dropdown">

                                    <a href="../index.html">Blog</a>

                                </li>

                                <li class="dropdown">

                                    <a href="../work-with-me/index.html">Work with me</a>

                                </li>

                                <li class="dropdown">

                                    <a href="../about/index.html">About</a>

                                </li>

                                <li class="dropdown">

                                    <a style="color: #38bb6c" href="https://roadtoreact.com/">Books &amp; Courses</a>

                                </li>

                            </ul>
                        </div>
                        <div class="collapse clearfix" id="search">
                            <form class="navbar-form" role="search">
                                <div class="input-group">
                                    <input type="text" class="form-control" placeholder="Search">
                                    <span class="input-group-btn"> <button type="submit"
                                            class="btn btn-template-main"><i class="fa fa-search"></i></button> </span>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        
        <div class="hidden-xs">
            <section class="bar background-image-fixed-2 no-mb color-white text-center">
                <div class="dark-mask"></div>
                <div class="container">
                    <div class="row">
                        <div class="col-md-12">
                            <h3 class="lead">Never miss an article about web development, JavaScript and self-growth.
                            </h3>
                            <h2 class="text-uppercase newsletter">Take Part</h2>
                        </div>
                        <div class="col-md-12">
                            <p class="text-center">

                                <div id="mc_embed_signup">
                                    <form action="https://www.getrevue.co/profile/cpaul/add_subscriber" method="post"
                                        id="revue-form" name="revue-form" target="_blank">
                                        <div id="mc_embed_signup_scroll">
                                            <input class="email" placeholder="email address" type="email"
                                                name="member[email]" id="member_email">
                                            <div>
                                                <button type="submit" value="Subscribe" name="member[subscribe]"
                                                    id="member_submit"
                                                    class="btn btn-template-transparent-black btn-lg">
                                                    Subscribe
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </p>
                        </div>
                    </div>
                </div>
            </section>
        </div>
        <div id="content">
            <div class="container">
                <div class="row">
                    <article class="col-md-8 col-md-offset-2" id="blog-post" itemprop="blogPosts" itemscope
                        itemtype="http://schema.org/BlogPosting">
                        <div id="post-content" itemprop="articleBody">
                            <header>
                                <h1 itemprop="name headline">Node Testing Setup with Mocha, Chai, Sinon</h1>
                            </header>
                            
                            <p class="text-muted text-uppercase mb-small text-center">
                                <span itemprop="author publisher">

                                </span>
                                <time datetime="2019-05-05" itemprop="datePublished">
                                    May 5, 2019
                                </time>

                              

                            </p>
                            <div>
                            </div>
                            <div class="post-image-primary">
                                <div class="pinterest-pinner-wrapper" itemscope
                                    itemtype="http://schema.org/ImageObject">
                                    <div class="pinterest-pinner">
                                        <a data-pin-do="buttonPin" data-pin-save="true" data-pin-tall="true"
                                            href="https://www.pinterest.com/pin/create/button/?url=https%3a%2f%2fchrispaul.dev%2fnode-js-testing-mocha-chai%2f&amp;media=https://chrispaul.dev/img%2fposts%2fnode-js-testing-mocha-chai%2fbanner.jpg&amp;description=">
                                        </a>
                                    </div> <img class="img-lazy img-responsive"
                                        data-lazy-src="/src="/img/posts/node-js-testing-mocha-chai/banner.jpg"
                                        data-is-src-set="is-src-set" alt="node testing" itemprop="image" />
                                </div>
                            </div>
                            <div class="read-before">
                                <p>This tutorial is part 2 of 2 in this series.</p>
                                <div>Part 1: <a href="../minimal-node-js-babel-setup/index.html" itemprop="url">The
                                        minimal Node.js with Babel Setup</a></div>
                            </div>
                            <p>This tutorial demonstrates how to setup testing with Mocha, Chai, and Sinon in Node.js.
                                Whereas the previous tutorial has already shown you how to setup your Node.js
                                application, this tutorial sets up a testing environment for your Node.js project.
                                Let&rsquo;s dive into it by setting up Mocha with Chai and Sinon as testing framework.
                            </p>
                            <h2 class="chapter-header" id="node-js-mocha">Node.js with Mocha</h2>
                            <p><a target="_blank" rel="noopener noreferrer" href="https://mochajs.org/">Mocha</a> will
                                be our test runner which is responsible for encapsulating our tests in test suites
                                (describe-block) and test cases (it-block). Furthermore test runners like Mocha offer an
                                <a href="../what-is-an-api-javascript/index.html">API</a> to run all tests from a
                                command line interface. Let&rsquo;s dive into it: First, install an additional Babel
                                package for your Node.js application which makes our tests understand Babel enabled
                                JavaScript code:</p>
                            <div class="highlight" style="background: #2f1e2e">
                                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #ef6155">@</span><span style="color: #06b6ef">babel</span><span style="color: #5bc4bf">/</span><span style="color: #06b6ef">register</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">dev</span>
</code></pre>
                            </div>
                            <p>Second, install our test runner Mocha as node package:</p>
                            <div class="highlight" style="background: #2f1e2e">
                                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #06b6ef">mocha</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">dev</span>
</code></pre>
                            </div>
                            <p>And third, in your <em>package.json</em> include a test script which uses Mocha to
                                execute our tests and the new Babel package to run all executed test files through Babel
                                enabled JavaScript code:</p>
                            <div class="highlight" style="background: #2f1e2e">
                                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #e7e9db">{</span>
  <span style="color: #e7e9db">...</span>
  <span style="color: #48b685">&quot;main&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;index.js&quot;</span><span style="color: #e7e9db">,</span>
  <span style="color: #48b685">&quot;scripts&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">{</span>
    <span style="color: #48b685">&quot;start&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;nodemon --exec babel-node src/index.js&quot;</span><span style="color: #e7e9db">,</span>
<span style="background-color: #4f424c">    <span style="color: #48b685">&quot;test&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #48b685">&quot;mocha --require @babel/register &#39;src/**/**spec.js&#39;&quot;</span>
</span>  <span style="color: #e7e9db">},</span>
  <span style="color: #48b685">&quot;keywords&quot;</span><span style="color: #5bc4bf">:</span> <span style="color: #e7e9db">[],</span>
  <span style="color: #e7e9db">...</span>
<span style="color: #e7e9db">}</span>
</code></pre>
                            </div>
                            <p>The last configuration tells Mocha which files should be identified as test files via a
                                file name pattern matching mechanism. Since we used <code>**</code> in between, Mocha
                                will run recursively through the <em>src/</em> folder to find all files in your
                                application. In this case, all files with the ending <em>spec.js</em> are identified as
                                test files. It&rsquo;s up to you to choose a different name matching (e.g.
                                <em>test.js</em>) for your test files.</p>
                            <h2 class="chapter-header" id="node-js-chai">Node.js with Chai</h2>
                            <p><a target="_blank" rel="noopener noreferrer" href="https://www.chaijs.com">Chai</a> will
                                be our assertion library to run equality checks or other test related scenarios. It
                                enables you to compare expected results against actual results (e.g. expect X to be
                                true). First, let&rsquo;s install it on the command line as dependency for our project:
                            </p>
                            <div class="highlight" style="background: #2f1e2e">
                                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #06b6ef">chai</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">dev</span>
</code></pre>
                            </div>
                            <p>Next, let&rsquo;s define our first test suite and test case in a <em>src/spec.js</em>
                                file:</p>
                            <div class="highlight" style="background: #2f1e2e">
                                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;test suite&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;test case&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #e7e9db">...</span>
  <span style="color: #e7e9db">});</span>
<span style="color: #e7e9db">});</span>
</code></pre>
                            </div>
                            <p>So far, there is nothing related to Chai yet. The describe-blocks and it-blocks are
                                provided from our test runner Mocha. You can have multiple test cases in a test suite
                                and a test file can contain multiple test suites as well. Often one test suite tests one
                                function&rsquo;s different outcomes with multiple test cases. When we run our test
                                runner, all test cases will be checked for their assertion(s).</p>
                            <div class="highlight" style="background: #2f1e2e">
                                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">expect</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;chai&#39;</span><span style="color: #e7e9db">;</span><span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;true or false&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;true is true&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">true</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">to</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">eql</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">true</span><span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">});</span>  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;false is false&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">false</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">to</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">eql</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">false</span><span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">});</span>
<span style="color: #e7e9db">});</span>
</code></pre>
                            </div>
                            <p>These test cases don&rsquo;t test any specific logic from our application, but only
                                demonstrate how an equality check is performed with booleans. You can run both tests
                                from the command line with <em>npm test</em>, because we have defined this command as
                                npm script in our <em>package.json</em> file.</p>
                            <h2 class="chapter-header" id="node-js-testing">Node.js Testing</h2>
                            <p>So far, we didn&rsquo;t test any implementation logic yet. Our previous test was
                                standalone without any external dependencies of business logic from our application.
                                However, in a real application you would want to test logic of your actual Node.js
                                application. Let&rsquo;s say we have a function which sums up two integers in a
                                <em>src/sum.js</em> file which needs to be tested:</p>
                            <div class="highlight" style="background: #2f1e2e">
                                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">function</span> <span style="color: #06b6ef">sum</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">a</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">b</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #815ba4">return</span> <span style="color: #06b6ef">a</span> <span style="color: #5bc4bf">+</span> <span style="color: #06b6ef">b</span><span style="color: #e7e9db">;</span>
<span style="color: #e7e9db">}</span><span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">sum</span><span style="color: #e7e9db">;</span>
</code></pre>
                            </div>
                            <p>The utility function gets exported, because it is used in other parts of our application.
                                However, even though if it would be only used in this one file without an export
                                statement, you can still export it for the sake of testing. Now, in our
                                <em>src/spec.js</em> &ndash; or maybe more specific <em>src/sum.spec.js</em> test file
                                &ndash;, we could import the function and test it:</p>
                            <div class="highlight" style="background: #2f1e2e">
                                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">expect</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;chai&#39;</span><span style="color: #e7e9db">;</span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">sum</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./sum.js&#39;</span><span style="color: #e7e9db">;</span><span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;sum function&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;sums up two integers&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">sum</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">1</span><span style="color: #e7e9db">,</span> <span style="color: #f99b15">2</span><span style="color: #e7e9db">)).</span><span style="color: #06b6ef">to</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">eql</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">3</span><span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">});</span>
<span style="color: #e7e9db">});</span>
</code></pre>
                            </div>
                            <p>Congratulations, you have set up your first unit test in Node.js. When you run your tests
                                again with <code>npm test</code>, you should see a successful test on the command line.
                                If the test turns red because it failed, you need to check whether your business logic
                                (or test) is set up correctly.</p>
                            <h2 class="chapter-header" id="node-js-sinon">Node.js with Sinon</h2>
                            <p>Testing JavaScript primitives, complex objects and arrays with Chai in Mocha is a great
                                start. Eventually you will run also in the case of testing functions to be called.
                                Therefore you need a utility to spy, stub, or mock functions. Sinon is a powerful
                                library that helps you with it. Let&rsquo;s first dive into the use case which we want
                                to test and then how to test it with Sinon in Mocha and Chai. In a new
                                <em>src/callMyFunction.js</em> file implement the following function:</p>
                            <div class="highlight" style="background: #2f1e2e">
                                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">function</span> <span style="color: #06b6ef">callMyFunction</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">callback</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">callback</span><span style="color: #e7e9db">();</span>
<span style="color: #e7e9db">}</span><span style="color: #815ba4">export</span> <span style="color: #815ba4">default</span> <span style="color: #06b6ef">callMyFunction</span><span style="color: #e7e9db">;</span>
</code></pre>
                            </div>
                            <p>The function only takes another function as argument &ndash; it is a higher-order
                                function &ndash; and simply calls this function. Let&rsquo;s use it in our
                                <em>src/index.js</em> file:</p>
                            <div class="highlight" style="background: #2f1e2e">
                                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">sum</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./sum.js&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #06b6ef">callMyFunction</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./callMyFunction.js&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #06b6ef">console</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">log</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">sum</span><span style="color: #e7e9db">(</span><span style="color: #f99b15">1</span><span style="color: #e7e9db">,</span> <span style="color: #f99b15">2</span><span style="color: #e7e9db">));</span><span style="background-color: #4f424c"><span style="color: #06b6ef">callMyFunction</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">function</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
</span><span style="background-color: #4f424c">  <span style="color: #06b6ef">console</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">log</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;Hello world&#39;</span><span style="color: #e7e9db">);</span>
</span><span style="background-color: #4f424c"><span style="color: #e7e9db">});</span>
</span></code></pre>
                            </div>
                            <p>How would we test this function to be called within the other function? Let&rsquo;s
                                install Sinon on the command line as node package for our application and see how we can
                                test it:</p>
                            <div class="highlight" style="background: #2f1e2e">
                                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">npm</span> <span style="color: #06b6ef">install</span> <span style="color: #06b6ef">sinon</span> <span style="color: #5bc4bf">--</span><span style="color: #06b6ef">save</span><span style="color: #5bc4bf">-</span><span style="color: #06b6ef">dev</span>
</code></pre>
                            </div>
                            <p>In a new <em>src/callMyFunction.spec.js</em> file, let&rsquo;s write our test for this
                                new higher-order function:</p>
                            <div class="highlight" style="background: #2f1e2e">
                                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">expect</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;chai&#39;</span><span style="color: #e7e9db">;</span><span style="color: #815ba4">import</span> <span style="color: #06b6ef">callMyFunction</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./callMyFunction.js&#39;</span><span style="color: #e7e9db">;</span><span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;callMyFunction function&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;calls the passed function&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">callMyFunction</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">callback</span><span style="color: #e7e9db">);</span>    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">callback</span> <span style="color: #5bc4bf">???</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">to</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">eql</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">true</span><span style="color: #e7e9db">);</span>
  <span style="color: #e7e9db">});</span>
<span style="color: #e7e9db">});</span>
</code></pre>
                            </div>
                            <p>Now we can test it with a Sinon spy which is used instead of the empty function:</p>
                            <div class="highlight" style="background: #2f1e2e">
                                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">expect</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;chai&#39;</span><span style="color: #e7e9db">;</span>
<span style="background-color: #4f424c"><span style="color: #815ba4">import</span> <span style="color: #e7e9db">{</span> <span style="color: #06b6ef">spy</span> <span style="color: #e7e9db">}</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;sinon&#39;</span><span style="color: #e7e9db">;</span>
</span>
<span style="color: #815ba4">import</span> <span style="color: #06b6ef">callMyFunction</span> <span style="color: #06b6ef">from</span> <span style="color: #48b685">&#39;./callMyFunction.js&#39;</span><span style="color: #e7e9db">;</span><span style="color: #06b6ef">describe</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;callMyFunction function&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
  <span style="color: #06b6ef">it</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;calls the passed function&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">=&gt;</span> <span style="color: #e7e9db">{</span>
<span style="background-color: #4f424c">    <span style="color: #815ba4">const</span> <span style="color: #06b6ef">callback</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">spy</span><span style="color: #e7e9db">();</span>
</span>
    <span style="color: #06b6ef">callMyFunction</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">callback</span><span style="color: #e7e9db">);</span><span style="background-color: #4f424c">    <span style="color: #06b6ef">expect</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">callback</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">called</span><span style="color: #e7e9db">).</span><span style="color: #06b6ef">to</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">eql</span><span style="color: #e7e9db">(</span><span style="color: #815ba4">true</span><span style="color: #e7e9db">);</span>
</span>  <span style="color: #e7e9db">});</span>
<span style="color: #e7e9db">});</span>
</code></pre>
                            </div>
                            <p>That&rsquo;s it. The test should be successful, because the function within our function
                                to be tested is called. The Sinon spy switches the internal boolean flag for
                                <code>called</code> from false to true after it has been called. You can find out more
                                about Spies, Mocks, and Stubs from <a target="_blank" rel="noopener noreferrer"
                                    href="https://sinonjs.org/">Sinon&rsquo;s documentation</a>.</p>
                            <hr class="section-divider">
                            <p>Mocha and Chai are a popular combination of test runner and assertion library for Node.js
                                applications. Sinon comes in as bonus if you need to make assertions on functions. You
                                can find a ready to go setup Node.js application in this <a target="_blank"
                                    rel="noopener noreferrer"
                                    href="https://github.com/cpaul/node-testing-mocha-chai">GitHub repository</a>. If
                                you want to dive deeper into testing, you may want to check out this <a target="_blank"
                                    rel="noopener noreferrer" href="https://github.com/cpaul/javascript-reducer">GitHub
                                    repository</a> with a few tests where we are testing <a
                                    href="../javascript-reducer/index.html">reducer functions</a>. The concept of
                                reducers is a popular pattern in JavaScript which is a great candidate for unit testing.
                            </p>
                            
                            <div class="box-inline col-md-12">
                                <div class="col-md-12 text-center">
                                    <h2 class="newsletter">The Road to learn React</h2>

                                    <div class="col-md-4">
                                        <img class="img-lazy img-responsive" data-lazy-src="//img/page/cover.png">
                                    </div>

                                    <p class="lead">
                                        Build a Hacker News App along the way. No setup configuration. No tooling. No
                                        Redux. Plain React in 200+ pages of learning material. Learn React like
                                        <strong>50.000+ readers</strong>.
                                    </p>
                                    <a class="btn btn-template-main" href="https://roadtoreact.com" target="_blank"
                                        rel="noopener noreferrer">
                                        Get the Book for free <i class="fa fa-chevron-right"></i>
                                    </a>

                                    <div>
                                        <a href="https://amzn.to/2QY2ONp" target="_blank" rel="noopener noreferrer">
                                            Get it from Amazon
                                        </a>
                                    </div>

                                </div>
                            </div>

                        </div>

                        
                    </article>
                </div>
            </div>

        </div>
        <section class="bar background-image-fixed-2 no-mb color-white text-center">
            <div class="dark-mask"></div>
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <h3 class="lead">Never miss an article about web development, JavaScript and self-growth.</h3>
                        <h2 class="text-uppercase">Take Part</h2>
                    </div>
                    <div class="col-md-12 text-center">

                        <h3 class="lead"><i class="fa fa-check"></i> Join 30.000&#43; Developers</h3>

                        <h3 class="lead"><i class="fa fa-check"></i> Learn Web Development with JavaScript</h3>

                        <h3 class="lead"><i class="fa fa-check"></i> Tips and Tricks</h3>

                        <h3 class="lead"><i class="fa fa-check"></i> Access Tutorials, eBooks and Courses</h3>

                        <h3 class="lead"><i class="fa fa-check"></i> Personal Development as a Software Engineer</h3>

                    </div>
                    <div class="col-md-12">
                        <p class="text-center">

                            <div id="mc_embed_signup">
                                <form action="https://www.getrevue.co/profile/cpaul/add_subscriber" method="post"
                                    id="revue-form" name="revue-form" target="_blank">
                                    <div id="mc_embed_signup_scroll">
                                        <input class="email" placeholder="email address" type="email"
                                            name="member[email]" id="member_email">
                                        <div>
                                            <button type="submit" value="Subscribe" name="member[subscribe]"
                                                id="member_submit" class="btn btn-template-transparent-black btn-lg">
                                                Subscribe
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </p>
                    </div>
                </div>
            </div>
        </section>
        <footer id="subfooter">
            <div class="container">
                <div class="col-md-5 col-sm-6">
                    <h4>Recent posts</h4>
                    <div class="blog-entries">

                        <div class="item same-height-row clearfix">
                            <div class="article same-height-always">
                                <a href="../redux-vs-usereducer/index.html">

                                    <img data-lazy-src="//img/posts/redux-vs-usereducer/banner.jpg"
                                        data-is-thumb="is-thumb" class="img-lazy img-responsive"
                                        alt="React&#39;s useReducer vs Redux">

                                </a>
                            </div>
                            <div class="name same-height-always">
                                <h5><a href="../redux-vs-usereducer/index.html">React&#39;s useReducer vs Redux</a></h5>
                            </div>
                        </div>

                        <div class="item same-height-row clearfix">
                            <div class="article same-height-always">
                                <a href="../publish-npm-package-node/index.html">

                                    <img data-lazy-src="//img/posts/publish-npm-package-node/banner.jpg"
                                        data-is-thumb="is-thumb" class="img-lazy img-responsive"
                                        alt="How to publish a npm package?">

                                </a>
                            </div>
                            <div class="name same-height-always">
                                <h5><a href="../publish-npm-package-node/index.html">How to publish a npm package?</a>
                                </h5>
                            </div>
                        </div>

                        <div class="item same-height-row clearfix">
                            <div class="article same-height-always">
                                <a href="../react-scroll-to-item/index.html">

                                    <img data-lazy-src="//img/posts/react-scroll-to-item/banner.jpg"
                                        data-is-thumb="is-thumb" class="img-lazy img-responsive"
                                        alt="How to Scroll to Item in React?">

                                </a>
                            </div>
                            <div class="name same-height-always">
                                <h5><a href="../react-scroll-to-item/index.html">How to Scroll to Item in React?</a>
                                </h5>
                            </div>
                        </div>

                    </div>
                    <hr class="hidden-md hidden-lg hidden-sm">
                </div>

                <div class="col-md-5 col-md-offset-2 col-sm-6">
                    <h4>About Me</h4>
                    <div class="blog-entries">
                        <div class="item same-height-row clearfix">
                            <div class="profile same-height-always">
                                <img class="img-lazy img-responsive" data-lazy-src="//img/page/profile.jpg"
                                    alt="profile">
                            </div>
                            <div class="name same-height-always">
                                <p>
                                    Hi, I'm Chris - a Midvale, Utah-based consulting software developer. Find out more
                                    <a href="../about/index.html">about me</a>, <a
                                        href="../work-with-me/index.html">work with me</a>, or have a look at my social
                                    media profiles below.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

        </footer>
        <footer id="copyright">
            <div class="container">
                <div class="row">
                    <div class="col-md-4">
                        <ul class="info list-inline quicklinks pull-left">

                            <li>© Chris Paul</li>

                        </ul>
                    </div>
                    <div class="col-md-4">
                        
                    </div>
                    <div class="col-md-4">
                        <ul class="info list-inline quicklinks pull-right">

                            <li><a aria-label="quicklinks" href="../legal/index.html">Legal Notice</a></li>

                        </ul>
                    </div>
                </div>
            </div>
        </footer>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
    <script src="../js/script.js"></script>
</body>

</html>