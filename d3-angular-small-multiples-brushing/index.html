<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="robots" content="all,follow">
    <meta name="googlebot" content="index,follow,snippet,archive">
    <meta name="viewport" content="width=device-width, initial-scale=1">



    <title>
        D3 on Angular: Small Multiples with Brushing - CPaul
    </title>

    <meta name="author" content="" />
    <meta name="description"
        content="This article shows how you can achieve Small Multiples with D3 using Angular.js. According to Edward Tufte (1983) Small Multiples are a concept to...">


    <meta name="theme-color" content="#38bb6c" />

    <meta name="generator" content="Hugo 0.41" />
    <link href="https://cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    <link href="../css/bootstrap.default.css" rel="stylesheet" id="theme-stylesheet">
    <link href="../css/customizations.css" rel="stylesheet">

    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link rel="shortcut icon" href="../img/favicon/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="../img/favicon/apple-touch-icon.png" />
    <link rel="manifest" href="../img/favicon/manifest.json">
    <link rel="mask-icon" href="../img/favicon/safari-pinned-tab.svg" color="#5bbad5">

    <link rel="alternate" href="../index.xml" type="application/rss+xml" title="CPaul">

    <meta itemprop="name" content="D3 on Angular: Small Multiples with Brushing">
    <meta itemprop="description"
        content="This article shows how you can achieve Small Multiples with D3 using Angular.js. According to Edward Tufte (1983) Small Multiples are a concept to...">

    <meta itemprop="keywords"
        content="angular,apollo,d3,graphql,growth,javascript,machine-learning,mobx,node,react,reason,redux,tooling,vue,web-development,angular,apollo,d3,graphql,growth,javascript,machine-learning,mobx,node,react,reason,redux,tooling,web-development," />


    <meta itemprop="wordCount" content="340">

    <meta name="keywords" content="angular d3">

    <meta property="og:title" content="D3 on Angular: Small Multiples with Brushing - CPaul">


    <meta property="og:description"
        content="This article shows how you can achieve Small Multiples with D3 using Angular.js. According to Edward Tufte (1983) Small Multiples are a concept to..." />


    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://chrispaul.dev/d3-angular-small-multiples-brushing/" />
    <meta property="og:image" content="" />



    <meta name="news_keywords" content="angular d3" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="D3 on Angular: Small Multiples with Brushing" />
    <meta name="twitter:description"
        content="This article shows how you can achieve Small Multiples with D3 using Angular.js. According to Edward Tufte (1983) Small Multiples are a concept to..." />
    <meta name="twitter:site" content="@ChrisPaulDev" />
    



</head>


<body>

    <div id="all">

        <header>

            <div class="navbar-affixed-top" data-spy="affix" data-offset-top="200">

                <div class="navbar navbar-default yamm" role="navigation" id="navbar">

                    <div class="container">
                        <div class="navbar-header">
                            

                            <div class="navbar-buttons">
                                <button type="button" class="navbar-toggle btn-template-main" data-toggle="collapse"
                                    data-target="#navigation">
                                    <span class="sr-only">Toggle navigation</span>
                                    <i class="fa fa-align-justify"></i>
                                </button>
                            </div>
                        </div>


                        <div class="navbar-collapse collapse" id="navigation">
                            <ul class="nav navbar-nav navbar-right">

                                <li class="dropdown">

                                    <a href="../index.html">Blog</a>

                                </li>

                                <li class="dropdown">

                                    <a href="../work-with-me/index.html">Work with me</a>

                                </li>

                                <li class="dropdown">

                                    <a href="../about/index.html">About</a>

                                </li>

                                <li class="dropdown">

                                    <a style="color: #38bb6c" href="https://roadtoreact.com/">Books &amp; Courses</a>

                                </li>

                            </ul>
                        </div>


                        <div class="collapse clearfix" id="search">

                            <form class="navbar-form" role="search">
                                <div class="input-group">
                                    <input type="text" class="form-control" placeholder="Search">
                                    <span class="input-group-btn">

                                        <button type="submit" class="btn btn-template-main"><i
                                                class="fa fa-search"></i></button>

                                    </span>
                                </div>
                            </form>

                        </div>


                    </div>
                </div>


            </div>
        </header>

        

        



        <div class="hidden-xs">


            
        </div>

        <div id="content">
            <div class="container">

                <div class="row">

                    <article class="col-md-8 col-md-offset-2" id="blog-post" itemprop="blogPosts" itemscope
                        itemtype="http://schema.org/BlogPosting">

                        <div id="post-content" itemprop="articleBody">

                            <header>
                                <h1 itemprop="name headline">D3 on Angular: Small Multiples with Brushing</h1>
                            </header>

                            

                            <p class="text-muted text-uppercase mb-small text-center">
                                <span itemprop="author publisher">

                                </span>


                                <time datetime="2015-01-04" itemprop="datePublished">
                                    January 4, 2015
                                </time>



                            </p>

                            <div>


                            </div>

                            <p>This article shows how you can achieve Small Multiples with D3 using Angular.js.
                                According to Edward Tufte (1983) Small Multiples are a concept to visualize multiple
                                homogenous visualizations like maps, line graphs or scatterplots. We will use this
                                visualization concept to draw multiple line graphs with D3 on Angular.</p>

                            <div class="post-image-primary">
                                <div class="pinterest-pinner-wrapper" itemscope
                                    itemtype="http://schema.org/ImageObject">
                                    <div class="pinterest-pinner">
                                        <a data-pin-do="buttonPin" data-pin-save="true" data-pin-tall="true"
                                            href="https://www.pinterest.com/pin/create/button/?url=https%3a%2f%2fchrispaul.dev%2fd3-angular-small-multiples-brushing%2f&amp;media=https://chrispaul.dev/img%2fposts%2fd3-angular-small-multiples-brushing%2fbanner.png&amp;description=">
                                        </a>
                                    </div>

                                    <img class="img-lazy img-responsive"
                                        data-lazy-src="/src="/img/posts/d3-angular-small-multiples-brushing/banner.png"
                                        data-is-src-set="" alt="angular d3" itemprop="image" />
                                </div>
                            </div>


                            <p>Here you can find an example + source code:</p>

                           
                            <p>Short explanation: Most of the line chart directive contains the D3 source code for a
                                plain Line Chart with some interaction. Not anything new for advanced D3 people. In the
                                short HTML snippet you can see an ng-repeat directive for generating multiple line chart
                                directives from the data, which is randomly generated in the controller. The data array
                                plus the ng-repeat are responsible for our Small Multiples as line charts. After that I
                                thought it would be nice to have some brushing interaction for our line chart directive.
                                The difficulty is that all line chart directives should act simultaneously after one
                                line chart was brushed. Therefore the following code snippets are essential.</p>

                            <p>For the brushing event you have to compute the new domain, which should be displayed
                                after brushing. After that you don’t update the line chart directly like you would do it
                                in a single line chart approach, instead you emit the change as an event to the
                                controller.</p>

                            <div class="highlight" style="background: #2f1e2e">
                                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #815ba4">function</span> <span style="color: #06b6ef">brushed</span><span style="color: #e7e9db">()</span> <span style="color: #e7e9db">{</span>
   <span style="color: #815ba4">var</span> <span style="color: #06b6ef">domain</span> <span style="color: #5bc4bf">=</span> <span style="color: #06b6ef">brush</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">empty</span><span style="color: #e7e9db">()</span> <span style="color: #5bc4bf">?</span> <span style="color: #06b6ef">d3</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">extent</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">scope</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">data</span><span style="color: #e7e9db">,</span> <span style="color: #815ba4">function</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">d</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span> <span style="color: #815ba4">return</span> <span style="color: #06b6ef">d</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">date</span><span style="color: #e7e9db">;</span> <span style="color: #e7e9db">})</span> <span style="color: #5bc4bf">:</span> <span style="color: #06b6ef">brush</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">extent</span><span style="color: #e7e9db">();</span>
   <span style="color: #06b6ef">scope</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">$emit</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;brush:changed&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">domain</span><span style="color: #e7e9db">);</span>
<span style="color: #e7e9db">}</span>
</code></pre>
                            </div>


                            <p>The controller knows about this event and responses with a broadcast event to its child
                                directives.</p>

                            <div class="highlight" style="background: #2f1e2e">
                                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">$scope</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">$on</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;brush:changed&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">handleBrushedChanged</span><span style="color: #e7e9db">);</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">handleBrushedChanged</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">$event</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">$scope</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">$broadcast</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;brush:set&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">);</span>
    <span style="color: #06b6ef">$event</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">stopPropagation</span><span style="color: #e7e9db">();</span>
<span style="color: #e7e9db">}</span>
</code></pre>
                            </div>


                            <p>Don&rsquo;t forget to stop the event propagation.
                                Now the line chart directive knows about the broadcast event and adjusts the line chart
                                presentation accordingly.</p>

                            <div class="highlight" style="background: #2f1e2e">
                                <pre style="line-height: 125%"><code class="language-javascript" data-lang="javascript"><span></span><span style="color: #06b6ef">scope</span><span style="color: #e7e9db">.</span><span style="color: #06b6ef">$on</span><span style="color: #e7e9db">(</span><span style="color: #48b685">&#39;brush:set&#39;</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">onBrushSetHandler</span><span style="color: #e7e9db">);</span>

<span style="color: #815ba4">function</span> <span style="color: #06b6ef">onBrushSetHandler</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">$event</span><span style="color: #e7e9db">,</span> <span style="color: #06b6ef">data</span><span style="color: #e7e9db">)</span> <span style="color: #e7e9db">{</span>
    <span style="color: #06b6ef">display</span><span style="color: #e7e9db">(</span><span style="color: #06b6ef">data</span><span style="color: #e7e9db">);</span>
<span style="color: #e7e9db">}</span>
</code></pre>
                            </div>


                            <p>Note that this way of communication via the controller is only one possible approach. You
                                could also use a service for that or use the <code>$rootScope</code> to let the
                                directives communicate directly with each other.</p>



                            



                            <div class="box-inline col-md-12">
                                <div class="col-md-12 text-center">
                                    <h2 class="newsletter">The Road to learn React</h2>

                                    <div class="col-md-4">
                                        <img class="img-lazy img-responsive" data-lazy-src="//img/page/cover.png">
                                    </div>

                                    <p class="lead">
                                        Build a Hacker News App along the way. No setup configuration. No tooling. No
                                        Redux. Plain React in 200+ pages of learning material. Learn React like
                                        <strong>50.000+ readers</strong>.
                                    </p>
                                    <a class="btn btn-template-main" href="https://roadtoreact.com" target="_blank"
                                        rel="noopener noreferrer">
                                        Get the Book for free <i class="fa fa-chevron-right"></i>
                                    </a>

                                    <div>
                                        <a href="https://amzn.to/2QY2ONp" target="_blank" rel="noopener noreferrer">
                                            Get it from Amazon
                                        </a>
                                    </div>

                                </div>
                            </div>

                        </div>



                        


                    </article>


                </div>


            </div>

        </div>




        <section class="bar background-image-fixed-2 no-mb color-white text-center">
            <div class="dark-mask"></div>
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <h3 class="lead">Never miss an article about web development, JavaScript and self-growth.</h3>
                        <h2 class="text-uppercase">Take Part</h2>
                    </div>

                    <div class="col-md-12 text-center">

                        <h3 class="lead"><i class="fa fa-check"></i> Join 30.000&#43; Developers</h3>

                        <h3 class="lead"><i class="fa fa-check"></i> Learn Web Development with JavaScript</h3>

                        <h3 class="lead"><i class="fa fa-check"></i> Tips and Tricks</h3>

                        <h3 class="lead"><i class="fa fa-check"></i> Access Tutorials, eBooks and Courses</h3>

                        <h3 class="lead"><i class="fa fa-check"></i> Personal Development as a Software Engineer</h3>

                    </div>
                    
                </div>
            </div>
        </section>
        <footer id="subfooter">
            <div class="container">

                <div class="col-md-5 col-sm-6">

                    <h4>Recent posts</h4>

                    <div class="blog-entries">

                        <div class="item same-height-row clearfix">
                            <div class="article same-height-always">
                                <a href="../redux-vs-usereducer/index.html">

                                    <img data-lazy-src="//img/posts/redux-vs-usereducer/banner.jpg"
                                        data-is-thumb="is-thumb" class="img-lazy img-responsive"
                                        alt="React&#39;s useReducer vs Redux">

                                </a>
                            </div>
                            <div class="name same-height-always">
                                <h5><a href="../redux-vs-usereducer/index.html">React&#39;s useReducer vs Redux</a></h5>
                            </div>
                        </div>

                        <div class="item same-height-row clearfix">
                            <div class="article same-height-always">
                                <a href="../publish-npm-package-node/index.html">

                                    <img data-lazy-src="//img/posts/publish-npm-package-node/banner.jpg"
                                        data-is-thumb="is-thumb" class="img-lazy img-responsive"
                                        alt="How to publish a npm package?">

                                </a>
                            </div>
                            <div class="name same-height-always">
                                <h5><a href="../publish-npm-package-node/index.html">How to publish a npm package?</a>
                                </h5>
                            </div>
                        </div>

                        <div class="item same-height-row clearfix">
                            <div class="article same-height-always">
                                <a href="../react-scroll-to-item/index.html">

                                    <img data-lazy-src="//img/posts/react-scroll-to-item/banner.jpg"
                                        data-is-thumb="is-thumb" class="img-lazy img-responsive"
                                        alt="How to Scroll to Item in React?">

                                </a>
                            </div>
                            <div class="name same-height-always">
                                <h5><a href="../react-scroll-to-item/index.html">How to Scroll to Item in React?</a>
                                </h5>
                            </div>
                        </div>

                    </div>

                    <hr class="hidden-md hidden-lg hidden-sm">

                </div>



                <div class="col-md-5 col-md-offset-2 col-sm-6">

                    <h4>About Me</h4>

                    <div class="blog-entries">
                        <div class="item same-height-row clearfix">
                            <div class="profile same-height-always">
                                <img class="img-lazy img-responsive" data-lazy-src="//img/page/profile.jpg"
                                    alt="profile">
                            </div>
                            <div class="name same-height-always">
                                <p>
                                    Hi, I'm Chris - a Midvale, Utah-based consulting software developer. Find out more
                                    <a href="../about/index.html">about me</a>, <a
                                        href="../work-with-me/index.html">work with me</a>, or have a look at my social
                                    media profiles below.
                                </p>
                            </div>
                        </div>
                    </div>

                </div>



            </div>

        </footer>


        <footer id="copyright">
            <div class="container">
                <div class="row">
                    <div class="col-md-4">
                        <ul class="info list-inline quicklinks pull-left">

                            <li>© Chris Paul</li>

                        </ul>
                    </div>
                    
                    <div class="col-md-4">
                        <ul class="info list-inline quicklinks pull-right">

                            <li><a aria-label="quicklinks" href="../legal/index.html">Legal Notice</a></li>

                        </ul>
                    </div>
                </div>
            </div>
        </footer>


    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>

    <script src="../js/script.js"></script>
</body>

</html>